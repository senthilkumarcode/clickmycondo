function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}function _createClass(i,t,e){return t&&_defineProperties(i.prototype,t),e&&_defineProperties(i,e),i}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{n8yt:function(i,t,e){"use strict";e.r(t);var a,c=e("ofXK"),n=e("tyNb"),o=e("fXoL"),r=((a=function(){function i(){_classCallCheck(this,i)}return _createClass(i,[{key:"ngOnInit",value:function(){}}]),i}()).\u0275fac=function(i){return new(i||a)},a.\u0275cmp=o.Xb({type:a,selectors:[["app-facility-reports"]],decls:2,vars:0,template:function(i,t){1&i&&(o.ic(0,"p"),o.fd(1," facility-reports works!\n"),o.hc())},styles:[""]}),a),l=e("GUTR"),s=e("ThaB"),d=e("wbvY"),u=e("JK/P"),f=e("wd/R"),m=e("0IaG"),h=e("b6Qw"),g=e("668k"),y=e("8mtn"),p=e("wlDI"),v=e("3Pt+"),b=e("BR9Y"),C=e("z17N"),I=e("CzEO");function k(i,t){1&i&&o.ec(0,"app-loader")}function O(i,t){if(1&i){var e=o.jc();o.gc(0),o.ic(1,"form",3,4),o.uc("ngSubmit",(function(){o.Wc(e);var i=o.Tc(2);return o.yc().submitAddFacilitySlotForm(i)})),o.ic(3,"div",5),o.ic(4,"div",6),o.ic(5,"div",7),o.ic(6,"label"),o.fd(7,"Begin Time*"),o.hc(),o.ic(8,"input",8),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().slot.slotBeginTime=i}))("dateTimeInput",(function(){return o.Wc(e),o.yc().emitSlotTime()})),o.hc(),o.ec(9,"owl-date-time",9,10),o.ic(11,"div",11),o.ec(12,"i-feather",12),o.hc(),o.hc(),o.hc(),o.ic(13,"div",6),o.ic(14,"div",7),o.ic(15,"label"),o.fd(16,"End Time*"),o.hc(),o.ic(17,"input",13),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().slot.slotEndTime=i}))("dateTimeInput",(function(){return o.Wc(e),o.yc().emitSlotTime()})),o.hc(),o.ec(18,"owl-date-time",9,14),o.ic(20,"div",11),o.ec(21,"i-feather",12),o.hc(),o.hc(),o.hc(),o.ic(22,"div",6),o.ic(23,"div",7),o.ic(24,"label"),o.fd(25,"Cost (in rs)*"),o.hc(),o.ic(26,"input",15),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().slot.cost=i})),o.hc(),o.hc(),o.hc(),o.ic(27,"div",16),o.ic(28,"div",7),o.ic(29,"label"),o.fd(30,"Comments"),o.hc(),o.ic(31,"textarea",17),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().slot.comment=i})),o.hc(),o.hc(),o.hc(),o.ic(32,"div",18),o.ic(33,"button",19),o.fd(34,"Submit"),o.hc(),o.ic(35,"div",20),o.uc("click",(function(){o.Wc(e);var i=o.yc();return i.showConfirmModal(i.slot)})),o.fd(36,"Delete"),o.hc(),o.hc(),o.hc(),o.hc(),o.fc()}if(2&i){var a=o.Tc(2),c=o.Tc(10),n=o.Tc(19),r=o.yc();o.Ob(8),o.Gc("owlDateTime",c)("owlDateTimeTrigger",c)("ngModel",r.slot.slotBeginTime),o.Ob(1),o.Gc("pickerType","timer"),o.Ob(2),o.Gc("owlDateTimeTrigger",c),o.Ob(6),o.Gc("min",r.minEndTime)("owlDateTime",n)("owlDateTimeTrigger",n)("ngModel",r.slot.slotEndTime),o.Ob(1),o.Gc("pickerType","timer"),o.Ob(2),o.Gc("owlDateTimeTrigger",n),o.Ob(6),o.Gc("ngModel",r.slot.cost),o.Ob(5),o.Gc("ngModel",r.slot.comment),o.Ob(2),o.Gc("disabled",a.invalid)}}var S,T=((S=function(){function i(t,e,a,c,n){_classCallCheck(this,i),this.injector=t,this.dialog=e,this.facilityService=a,this.sharedService=c,this.cookieService=n,this.alertMessage="",this.isError=!1,this.isSlotSubmitted=!0,this.facilityParams=new o.q,this.modalService=this.injector.get(u.a)}return _createClass(i,[{key:"submitAddFacilitySlotForm",value:function(i){var t=this;if(this.isSlotSubmitted=!1,"new"==this.type){var e={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentFacilityId:this.slot.apartmentFacilityId,slotBeginTime:f(this.slot.slotBeginTime).format("HH:mm:ss"),slotEndTime:f(this.slot.slotEndTime).format("HH:mm:ss"),cost:this.slot.cost,comment:this.slot.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-16T12:34:36.708Z",updatedBy:0,updatedOn:"2019-12-16T12:34:36.709Z"};this.facilityService.addApartmentFacilitySlot(e).subscribe((function(i){i.message&&(t.facilityParams.emit(!0),t.isSlotSubmitted=!0,t.sharedService.setAlertMessage("Slot added successfully"))}),(function(i){t.isError=!0,t.alertMessage="Some error occured"}))}else{var a={apartmentFacilitySlotId:this.slot.apartmentFacilitySlotId,apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentFacilityId:this.slot.apartmentFacilityId,slotBeginTime:f(this.slot.slotBeginTime).format("HH:mm:ss"),slotEndTime:f(this.slot.slotEndTime).format("HH:mm:ss"),cost:this.slot.cost,comment:this.slot.comment,isActive:!0,insertedBy:0,insertedOn:"2019-12-16T12:34:36.708Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-16T12:34:36.709Z"};this.facilityService.updateApartmentFacilitySlot(a).subscribe((function(i){i.message&&(t.facilityParams.emit(!0),t.isSlotSubmitted=!0,t.sharedService.setAlertMessage("Slot updated successfully"))}),(function(i){t.isError=!0,t.alertMessage="Some error occured"}))}}},{key:"emitSlotTime",value:function(){this.minEndTime=f(this.slot.slotBeginTime,"HH:mm:ss").toDate(),f(this.slot.slotBeginTime),f(this.slot.slotEndTime)}},{key:"showConfirmModal",value:function(i){this.modalService.showConfirmModal(i)}},{key:"ngOnInit",value:function(){var i=this;"new"!=this.type?(this.slot.slotBeginTime=f(this.slot.slotBeginTime,"HH:mm:ss").toDate(),this.slot.slotEndTime=f(this.slot.slotEndTime,"HH:mm:ss").toDate()):this.slot.comment="",this.sharedService.unitlistdeleteindexcast.subscribe((function(t){if(null!=t){var e={apartmentFacilityBookingId:t.apartmentFacilitySlotId,deleteBy:parseInt(i.cookieService.get("userId"))};i.facilityService.deleteApartmentFacilitySlot(e).subscribe((function(t){i.facilityParams.emit(!0),i.sharedService.setUnitListDeleteIndex(null)}),(function(i){console.log(i)}))}}))}}]),i}()).\u0275fac=function(i){return new(i||S)(o.dc(o.x),o.dc(m.b),o.dc(l.a),o.dc(d.a),o.dc(h.a))},S.\u0275cmp=o.Xb({type:S,selectors:[["app-add-facility-slot"]],inputs:{slot:"slot",facilityId:"facilityId",type:"type"},outputs:{facilityParams:"facilityParams"},decls:4,vars:4,consts:[[1,"facility-add-slot-wrapper"],[3,"message","isError"],[4,"ngIf"],["name","addStaffForm","novalidate","",3,"ngSubmit"],["addFacilitySlotForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["name","slotBeginTime","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange","dateTimeInput"],[3,"pickerType"],["slotBeginTime",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","clock","width","18",1,"icon","time","float-left"],["name","slotEndTime","placeholder","Time","required","",1,"form-control",3,"min","owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange","dateTimeInput"],["slotEndTime",""],["type","number","OnlyNumber","true","placeholder","Enter value","name","cost","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],["placeholder","some text here","name","comments",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue","mr-3",3,"disabled"],[1,"btn","trans-red",3,"click"]],template:function(i,t){1&i&&(o.ic(0,"div",0),o.ec(1,"app-alert-message",1),o.dd(2,k,1,0,"app-loader",2),o.dd(3,O,37,14,"ng-container",2),o.hc()),2&i&&(o.Ob(1),o.Gc("message",t.alertMessage)("isError",t.isError),o.Ob(1),o.Gc("ngIf",!t.isSlotSubmitted),o.Ob(1),o.Gc("ngIf",t.isSlotSubmitted))},directives:[p.a,c.l,g.a,v.B,v.o,v.p,b.a,C.b,v.d,v.x,C.d,v.n,v.q,C.a,y.b,v.s,b.b],styles:[""]}),S);function M(i,t){1&i&&o.ec(0,"app-loader")}function w(i,t){if(1&i&&(o.ic(0,"p"),o.fd(1),o.hc()),2&i){var e=o.yc().$implicit,a=o.yc(2);o.Ob(1),o.id("",e.amount,"rs/- per ",a.getRateBase(e.rateBaseId),"")}}function F(i,t){1&i&&(o.ic(0,"p"),o.fd(1,"Free"),o.hc())}var D=function(){return{exact:!0}};function B(i,t){if(1&i){var e=o.jc();o.gc(0),o.ic(1,"li",7),o.ic(2,"div",8),o.ic(3,"div",13),o.ic(4,"div",14),o.ic(5,"a",15),o.ec(6,"i-feather",16),o.hc(),o.ic(7,"a",17),o.ic(8,"i-feather",18),o.uc("click",(function(){o.Wc(e);var i=t.$implicit;return o.yc(2).updateFacilityCategory(i)})),o.hc(),o.hc(),o.hc(),o.ic(9,"h6"),o.fd(10),o.hc(),o.dd(11,w,2,2,"p",1),o.dd(12,F,2,0,"p",1),o.ic(13,"div",19),o.ic(14,"p"),o.fd(15),o.hc(),o.ic(16,"div",20),o.ic(17,"a",21),o.uc("click",(function(){o.Wc(e);var i=t.$implicit;return o.yc(2).addNewSlot(i)})),o.ec(18,"i-feather",22),o.ic(19,"span"),o.fd(20,"Add Slot"),o.hc(),o.hc(),o.hc(),o.hc(),o.hc(),o.hc(),o.hc(),o.fc()}if(2&i){var a=t.$implicit,c=o.yc(2);o.Ob(5),o.Ic("routerLink","/ams/facility/view/",a.apartmentFacilityId,""),o.Gc("routerLinkActiveOptions",o.Mc(6,D)),o.Ob(5),o.gd(a.facilityName),o.Ob(1),o.Gc("ngIf",a.amount>0),o.Ob(1),o.Gc("ngIf",0==a.amount),o.Ob(3),o.hd("",c.getSlots(a.apartmentFacilitySlot).length," Slot(s)")}}function L(i,t){if(1&i){var e=o.jc();o.ic(0,"div",4),o.ic(1,"h4",5),o.fd(2,"Facilities"),o.hc(),o.dd(3,B,21,7,"ng-container",6),o.ic(4,"li",7),o.ic(5,"div",8),o.ic(6,"div",9),o.ic(7,"a",10),o.uc("click",(function(){return o.Wc(e),o.yc().addNewFacilityCategory()})),o.ic(8,"div",11),o.fd(9,"+"),o.hc(),o.hc(),o.ic(10,"h6",12),o.fd(11,"Add New Facility"),o.hc(),o.hc(),o.hc(),o.hc(),o.hc()}if(2&i){var a=o.yc();o.Ob(3),o.Gc("ngForOf",a.facilityCategoryData)}}function x(i,t){1&i&&(o.ic(0,"h6"),o.fd(1,"Add Facility"),o.hc())}function A(i,t){1&i&&(o.ic(0,"h6"),o.fd(1,"Edit Facility"),o.hc())}function G(i,t){if(1&i){var e=o.jc();o.gc(0),o.ic(1,"li",69),o.ic(2,"span",25),o.fd(3),o.hc(),o.ic(4,"span",70),o.fd(5),o.hc(),o.hc(),o.ic(6,"div",71),o.ic(7,"div",32),o.ic(8,"app-add-facility-slot",72),o.uc("facilityParams",(function(i){return o.Wc(e),o.yc(3).getFacilityParams(i)})),o.hc(),o.hc(),o.hc(),o.fc()}if(2&i){var a=t.$implicit,c=t.index,n=o.yc(3);o.Ob(1),o.Qb("data-target","#slotCollapse",c,""),o.Qb("aria-controls","Collapse",c,""),o.Ob(2),o.hd("Slot",c+1,""),o.Ob(2),o.id("",n.getSlotTime(a.slotBeginTime)," - ",n.getSlotTime(a.slotEndTime),""),o.Ob(1),o.Ic("id","slotCollapse",c,""),o.Qb("aria-labelledby","Collapse",c,""),o.Ob(2),o.Gc("slot",a)("facilityId",n.facility.apartmentFacilityId)}}function N(i,t){if(1&i&&(o.gc(0),o.dd(1,G,9,9,"ng-container",6),o.fc()),2&i){var e=o.yc(2);o.Ob(1),o.Gc("ngForOf",e.getSlots(e.facility.apartmentFacilitySlot))}}function P(i,t){if(1&i&&(o.gc(0),o.ic(1,"li",73),o.fd(2,"No Slots Available"),o.hc(),o.ec(3,"div",74),o.fc()),2&i){var e=o.yc(2);o.Ob(1),o.Gc("ngClass",0==e.facilitySlotLength?"no-drop":"")}}function E(i,t){if(1&i){var e=o.jc();o.gc(0),o.ic(1,"li",75),o.fd(2,"New Slot"),o.hc(),o.ic(3,"div",76),o.ic(4,"div",32),o.ic(5,"app-add-facility-slot",77),o.uc("facilityParams",(function(i){return o.Wc(e),o.yc(2).getFacilityParams(i)})),o.hc(),o.hc(),o.hc(),o.fc()}if(2&i){var a=o.yc(2);o.Ob(5),o.Gc("slot",a.facility)("facilityId",a.facility.apartmentFacilityId)}}function _(i,t){if(1&i){var e=o.jc();o.ic(0,"div",23),o.ic(1,"div",24),o.ic(2,"div",25),o.dd(3,x,2,0,"h6",1),o.dd(4,A,2,0,"h6",1),o.hc(),o.ic(5,"div",26),o.uc("click",(function(){return o.Wc(e),o.yc().removeCategoryBox()})),o.ec(6,"i-feather",27),o.hc(),o.hc(),o.ic(7,"div",28),o.ic(8,"ul",29),o.ic(9,"li",30),o.fd(10,"Facility Info"),o.hc(),o.ic(11,"div",31),o.ic(12,"div",32),o.ec(13,"app-alert-message",33),o.ic(14,"form",34,35),o.uc("ngSubmit",(function(){o.Wc(e);var i=o.Tc(15);return o.yc().submitFacilitySettingsForm(i)})),o.ic(16,"div",36),o.ic(17,"div",37),o.ic(18,"div",38),o.ic(19,"label"),o.fd(20,"Facility Name*"),o.hc(),o.ic(21,"input",39),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.facilityName=i})),o.hc(),o.hc(),o.hc(),o.ic(22,"div",37),o.ic(23,"div",40),o.ic(24,"label"),o.fd(25,"Approval Required* "),o.hc(),o.ic(26,"div",41),o.ic(27,"input",42),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.approvalRequired=i})),o.hc(),o.ic(28,"label",43),o.fd(29,"Yes"),o.hc(),o.hc(),o.ic(30,"div",41),o.ic(31,"input",44),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.approvalRequired=i})),o.hc(),o.ic(32,"label",45),o.fd(33,"No"),o.hc(),o.hc(),o.hc(),o.hc(),o.ic(34,"div",37),o.ic(35,"div",40),o.ic(36,"label"),o.fd(37,"Rate Type*"),o.hc(),o.ic(38,"div",41),o.ic(39,"input",46),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.rateBaseId=i})),o.hc(),o.ic(40,"label",47),o.fd(41,"Hour"),o.hc(),o.hc(),o.ic(42,"div",41),o.ic(43,"input",48),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.rateBaseId=i})),o.hc(),o.ic(44,"label",49),o.fd(45,"Day"),o.hc(),o.hc(),o.hc(),o.hc(),o.ic(46,"div",37),o.ic(47,"div",40),o.ic(48,"label"),o.fd(49,"Service Type*"),o.hc(),o.ic(50,"div",41),o.ic(51,"input",50),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.facilityTypeId=i})),o.hc(),o.ic(52,"label",51),o.fd(53,"Paid"),o.hc(),o.hc(),o.ic(54,"div",41),o.ic(55,"input",52),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.facilityTypeId=i})),o.hc(),o.ic(56,"label",53),o.fd(57,"Free"),o.hc(),o.hc(),o.hc(),o.hc(),o.ic(58,"div",37),o.ic(59,"div",38),o.ic(60,"label"),o.fd(61),o.hc(),o.ic(62,"input",54),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.amount=i})),o.hc(),o.hc(),o.hc(),o.ic(63,"div",37),o.ic(64,"div",38),o.ic(65,"label"),o.fd(66,"Deposit (in rs)*"),o.hc(),o.ic(67,"input",55),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.cautionDeposit=i})),o.hc(),o.hc(),o.hc(),o.ic(68,"div",37),o.ic(69,"div",38),o.ic(70,"label"),o.fd(71,"Auto Cancel (in days)*"),o.hc(),o.ic(72,"input",56),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.autoCancelDays=i})),o.hc(),o.hc(),o.hc(),o.ic(73,"div",37),o.ic(74,"div",38),o.ic(75,"label"),o.fd(76,"Min Hours Booking*"),o.hc(),o.ic(77,"input",57),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.minHoursBooking=i})),o.hc(),o.hc(),o.hc(),o.ic(78,"div",37),o.ic(79,"div",38),o.ic(80,"label"),o.fd(81,"Min Time Limit*"),o.hc(),o.ic(82,"input",58),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.minTimeLimit=i})),o.hc(),o.ec(83,"owl-date-time",59,60),o.ic(85,"div",61),o.ec(86,"i-feather",62),o.hc(),o.hc(),o.hc(),o.ic(87,"div",37),o.ic(88,"div",38),o.ic(89,"label"),o.fd(90,"Max Time Limit*"),o.hc(),o.ic(91,"input",63),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.maxTimeLimit=i})),o.hc(),o.ec(92,"owl-date-time",59,64),o.ic(94,"div",61),o.ec(95,"i-feather",62),o.hc(),o.hc(),o.hc(),o.ic(96,"div",65),o.ic(97,"div",38),o.ic(98,"label"),o.fd(99,"Description"),o.hc(),o.ic(100,"quill-editor",66),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().facility.description=i}))("onContentChanged",(function(i){return o.Wc(e),o.yc().onContentChanged(i)})),o.hc(),o.hc(),o.hc(),o.ic(101,"div",67),o.ic(102,"button",68),o.fd(103,"Submit"),o.hc(),o.hc(),o.hc(),o.hc(),o.hc(),o.hc(),o.dd(104,N,2,1,"ng-container",1),o.dd(105,P,4,1,"ng-container",1),o.dd(106,E,6,2,"ng-container",1),o.hc(),o.hc(),o.hc()}if(2&i){var a=o.Tc(15),c=o.Tc(84),n=o.Tc(93),r=o.yc();o.Ob(3),o.Gc("ngIf",r.isFacilityCategoryNew),o.Ob(1),o.Gc("ngIf",!r.isFacilityCategoryNew),o.Ob(5),o.Gc("ngClass",r.isSlotNew?"collapsed":""),o.Ob(2),o.Gc("ngClass",r.isSlotNew?"":"show"),o.Ob(2),o.Gc("message",r.alertMessage)("isError",r.isCategoryError),o.Ob(8),o.Gc("ngModel",r.facility.facilityName),o.Ob(6),o.Gc("ngModel",r.facility.approvalRequired)("value",!0),o.Ob(4),o.Gc("ngModel",r.facility.approvalRequired)("value",!1),o.Ob(8),o.Gc("ngModel",r.facility.rateBaseId),o.Ob(4),o.Gc("ngModel",r.facility.rateBaseId),o.Ob(8),o.Gc("ngModel",r.facility.facilityTypeId),o.Ob(4),o.Gc("ngModel",r.facility.facilityTypeId),o.Ob(6),o.hd("Cost (in rs)* ",r.facility.amount,""),o.Ob(1),o.Gc("ngModel",r.facility.amount),o.Ob(5),o.Gc("ngModel",r.facility.cautionDeposit),o.Ob(5),o.Gc("ngModel",r.facility.autoCancelDays),o.Ob(5),o.Gc("ngModel",r.facility.minHoursBooking),o.Ob(5),o.Gc("owlDateTime",c)("owlDateTimeTrigger",c)("ngModel",r.facility.minTimeLimit),o.Ob(1),o.Gc("pickerType","timer"),o.Ob(2),o.Gc("owlDateTimeTrigger",c),o.Ob(6),o.Gc("owlDateTime",n)("owlDateTimeTrigger",n)("ngModel",r.facility.maxTimeLimit),o.Ob(1),o.Gc("pickerType","timer"),o.Ob(2),o.Gc("owlDateTimeTrigger",n),o.Ob(6),o.Gc("ngModel",r.facility.description)("placeholder",r.editorPlacehorder),o.Ob(2),o.Gc("disabled",a.invalid),o.Ob(2),o.Gc("ngIf",!r.isFacilityCategoryNew),o.Ob(1),o.Gc("ngIf",0==r.facilitySlotLength),o.Ob(1),o.Gc("ngIf",r.isSlotNew)}}var H,W=((H=function(){function i(t,e,a,c,n,o){_classCallCheck(this,i),this.injector=t,this.dialog=e,this.facilityService=a,this.lookupService=c,this.sharedService=n,this.cookieService=o,this.isFacilityCategoryLoaded=!1,this.isEditFacilityCategory=!1,this.isFacilityCategoryNew=!1,this.isFacilityCategoryUpdate=!1,this.isSlotNew=!1,this.isCategoryError=!1,this.alertMessage="",this.facilityAmount="",this.modalService=this.injector.get(u.a)}return _createClass(i,[{key:"onContentChanged",value:function(i){this.facility.description=i.html}},{key:"submitFacilitySettingsForm",value:function(i){var t=this;if(this.isFacilityCategoryLoaded=!1,this.isFacilityCategoryNew){var e={facilityName:this.facility.facilityName,description:this.facility.description,apartmentId:parseInt(this.cookieService.get("apartmentId")),rateBaseId:parseInt(this.facility.rateBaseId),amount:this.facility.amount,approvalRequired:this.facility.approvalRequired,isApproved:!0,facilityTypeId:parseInt(this.faclityTypeId),minHoursBooking:this.facility.minHoursBooking,autoCancelDays:this.facility.autoCancelDays,cautionDeposit:this.facility.cautionDeposit,minTimeLimit:f(this.facility.minTimeLimit).format("HH:mm:ss"),maxTimeLimit:f(this.facility.maxTimeLimit).format("HH:mm:ss"),fileAttachmentId:null,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-15T08:45:26.010Z",updatedBy:0,updatedOn:"2019-12-15T08:45:26.010Z",apartmentFacilitySlot:null};this.facilityService.addApartmentFacility(e).subscribe((function(i){i.message?(t.isFacilityCategoryLoaded=!0,t.sharedService.setAlertMessage("Facility added successfully")):(t.isFacilityCategoryLoaded=!0,t.isCategoryError=!0,t.alertMessage=i.errorMessage)}),(function(i){t.isFacilityCategoryLoaded=!0,t.isCategoryError=!0,t.alertMessage="Some error occured"}))}else{var a={apartmentFacilityId:this.facility.apartmentFacilityId,facilityName:this.facility.facilityName,description:this.facility.description,apartmentId:parseInt(this.cookieService.get("apartmentId")),rateBaseId:parseInt(this.facility.rateBaseId),amount:this.facility.amount,approvalRequired:this.facility.approvalRequired,isApproved:!0,facilityTypeId:parseInt(this.facility.facilityTypeId),minHoursBooking:this.facility.minHoursBooking,autoCancelDays:this.facility.autoCancelDays,cautionDeposit:this.facility.cautionDeposit,minTimeLimit:f(this.facility.minTimeLimit).format("HH:mm:ss"),maxTimeLimit:f(this.facility.maxTimeLimit).format("HH:mm:ss"),fileAttachmentId:null,isActive:!0,insertedBy:0,insertedOn:"2019-12-15T08:45:26.010Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-15T08:45:26.010Z",apartmentFacilitySlot:null};this.facilityService.updateApartmentFacility(a).subscribe((function(i){i.message?(t.isFacilityCategoryLoaded=!0,t.isFacilityCategoryLoaded=!1,t.facilityService.getApartmentFacilitiesByApartmentId(parseInt(t.cookieService.get("apartmentId"))).subscribe((function(i){t.facilityCategoryData=i.filter((function(i){return i.isActive})),t.isFacilityCategoryLoaded=!0,t.sharedService.setAlertMessage("Facility updated successfully"),console.log(i)}),(function(i){}))):(t.isFacilityCategoryLoaded=!0,t.isCategoryError=!0,t.alertMessage=i.errorMessage)}),(function(i){t.isFacilityCategoryLoaded=!0,t.isCategoryError=!0,t.alertMessage="Some error occured"}))}}},{key:"addNewFacilityCategory",value:function(){this.isFacilityCategoryNew=!0,this.isSlotNew=!1,this.facility={}}},{key:"addNewSlot",value:function(i){this.isFacilityCategoryUpdate=!0,this.isFacilityCategoryNew=!1,this.isSlotNew=!0,this.updatefacilityData(i)}},{key:"updateFacilityCategory",value:function(i){this.isFacilityCategoryUpdate=!0,this.isFacilityCategoryNew=!1,this.isSlotNew=!1,this.updatefacilityData(i)}},{key:"updatefacilityData",value:function(i){this.facility=i,this.facility.rateBaseId=i.rateBaseId.toString(),this.facility.facilityTypeId=i.facilityTypeId.toString(),this.facility.minTimeLimit=f(i.minTimeLimit,"HH:mm:ss").toDate(),this.facility.maxTimeLimit=f(i.maxTimeLimit,"HH:mm:ss").toDate(),this.facilitySlotLength=i.apartmentFacilitySlot.length}},{key:"removeCategoryBox",value:function(){this.isFacilityCategoryNew=!1,this.isFacilityCategoryUpdate=!1,this.isCategoryError=!1}},{key:"getRateBase",value:function(i){return 138==i?"Hour":"Day"}},{key:"getSlots",value:function(i){return i.filter((function(i){return i.isActive}))}},{key:"getSlotTime",value:function(i){return f(i).format("HH:mm A")}},{key:"getFacilityParams",value:function(i){var t=this;this.isFacilityCategoryLoaded=!1,this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(i){t.facilityCategoryData=i.filter((function(i){return i.isActive})),t.isFacilityCategoryLoaded=!0}),(function(i){}))}},{key:"ngOnInit",value:function(){var i=this;this.facility={},this.facility.description="",this.facility.rateBaseId="",this.facility.facilityTypeId="",this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){i.facilityCategoryData=t.filter((function(i){return i.isActive})),i.isFacilityCategoryLoaded=!0}),(function(i){}))}}]),i}()).\u0275fac=function(i){return new(i||H)(o.dc(o.x),o.dc(m.b),o.dc(l.a),o.dc(s.a),o.dc(d.a),o.dc(h.a))},H.\u0275cmp=o.Xb({type:H,selectors:[["app-facility-setup"]],decls:4,vars:3,consts:[[1,"facility-settings-wrapper"],[4,"ngIf"],["class","category-list list-boxes big",4,"ngIf"],["class","card mt-20",4,"ngIf"],[1,"category-list","list-boxes","big"],[1,"main-title-mini"],[4,"ngFor","ngForOf"],[1,"list-inline-item"],[1,"card"],[1,"card-body","new","text-center"],["href","javascript:void(0)",1,"rounded-btn","green",3,"click"],[1,"icon"],[1,"tc-green"],[1,"card-body","nohover"],[1,"icons"],["href","javascript:void(0)","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["name","eye",1,"icon","view"],["href","javascript:void(0)"],["name","edit",1,"icon","edit",3,"click"],[1,"bottom"],[1,"ml-auto"],[1,"btn","sf","trans-white","hover-green",3,"click"],["name","plus",1,"icon","sm","plus"],[1,"card","mt-20"],[1,"card-header"],[1,"float-left"],[1,"float-right",3,"click"],["name","x",1,"icon","del"],["id","accordion",1,"card-body","p-0"],[1,"list-group","tabs","clear"],["data-toggle","collapse","data-target","#facilityCollapse","aria-expanded","true","aria-controls","facilityCollapseOne",1,"list-group-item",3,"ngClass"],["id","facilityCollapse","aria-labelledby","facilityCollapseOne","data-parent","#accordion",1,"collapse",3,"ngClass"],[1,"details"],[3,"message","isError"],["name","visitorSettingsForm","novalidate","",3,"ngSubmit"],["facilitySettingsForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["type","text","placeholder","Enter text","name","staffCategory","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-box","radio-box"],[1,"form-group"],["name","approvalType","id","Yes","type","radio","required","",3,"ngModel","value","ngModelChange"],["for","Yes",1,"radio-inline"],["name","approvalType","id","No","type","radio","required","",3,"ngModel","value","ngModelChange"],["for","No",1,"radio-inline"],["name","faclityRateBaseId","id","hourType","value","138","type","radio","required","",3,"ngModel","ngModelChange"],["for","hourType",1,"radio-inline"],["name","faclityRateBaseId","id","dayType","value","139","type","radio","required","",3,"ngModel","ngModelChange"],["for","dayType",1,"radio-inline"],["name","faclityTypeId","id","paidType","value","184","type","radio","required","",3,"ngModel","ngModelChange"],["for","paidType",1,"radio-inline"],["name","faclityTypeId","id","freeType","value","185","type","radio","required","",3,"ngModel","ngModelChange"],["for","freeType",1,"radio-inline"],["type","number","OnlyNumber","true","placeholder","Enter value","name","amount","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","deposit","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","autoCancelDays","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","minHoursBooking","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","minTimeLimit","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["minTimeLimit",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","clock","width","18",1,"icon","time","float-left"],["name","maxTimeLimit","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["maxTimeLimit",""],[1,"col-sm-12"],["name","description",1,"quill-editor",3,"ngModel","placeholder","ngModelChange","onContentChanged"],[1,"col-sm-12","text-right"],[1,"btn","blue","mr-2",3,"disabled"],["data-toggle","collapse","aria-expanded","true",1,"list-group-item","collapsed"],[1,"float-left","badge","time","ml-3","mt-2"],["data-parent","#accordion",1,"collapse",3,"id"],["type","edit",3,"slot","facilityId","facilityParams"],["data-toggle","collapse","data-target","#facilityNewCollapse","aria-expanded","true","aria-controls","facilityCollapseNewOne",1,"list-group-item","collapsed",3,"ngClass"],["id","facilityNewCollapse","attr.aria-labelledby","facilityCollapseNewOne","data-parent","#accordion",1,"collapse"],["data-toggle","collapse","data-target","#facilitySlotNew","aria-expanded","true","aria-controls","facilityNewSlot",1,"list-group-item"],["id","facilitySlotNew","aria-labelledby","facilityNewSlot","data-parent","#accordion",1,"collapse","show"],["type","new",3,"slot","facilityId","facilityParams"]],template:function(i,t){1&i&&(o.ic(0,"div",0),o.dd(1,M,1,0,"app-loader",1),o.dd(2,L,12,1,"div",2),o.dd(3,_,107,36,"div",3),o.hc()),2&i&&(o.Ob(1),o.Gc("ngIf",!t.isFacilityCategoryLoaded),o.Ob(1),o.Gc("ngIf",t.isFacilityCategoryLoaded),o.Ob(1),o.Gc("ngIf",t.isFacilityCategoryNew||t.isFacilityCategoryUpdate))},directives:[c.l,g.a,c.k,n.e,n.d,y.b,c.j,p.a,v.B,v.o,v.p,b.a,v.d,v.x,v.n,v.q,v.u,v.s,b.b,C.b,C.d,C.a,I.a,T],styles:[""]}),H),q=e("Nw7d"),j=e("NutR"),U=e("F/us"),R=e("NhFE"),Y=e("bvAq");function X(i,t){1&i&&o.ec(0,"app-loader")}function z(i,t){if(1&i&&(o.ic(0,"span"),o.fd(1),o.hc()),2&i){var e=o.yc().$implicit;o.Ob(1),o.gd(e.amount)}}function Z(i,t){1&i&&(o.ic(0,"span"),o.fd(1,"Free"),o.hc())}var $=function(){return{exact:!0}};function V(i,t){if(1&i){var e=o.jc();o.ic(0,"tr"),o.ic(1,"td",21),o.fd(2),o.ic(3,"span",22),o.fd(4),o.hc(),o.hc(),o.ic(5,"td",23),o.fd(6),o.hc(),o.ic(7,"td",23),o.fd(8),o.hc(),o.ic(9,"td",24),o.fd(10),o.hc(),o.ic(11,"td",23),o.dd(12,z,2,1,"span",1),o.dd(13,Z,2,0,"span",1),o.hc(),o.ic(14,"td"),o.ic(15,"a",25),o.ec(16,"i-feather",26),o.hc(),o.ic(17,"a",27),o.uc("click",(function(){o.Wc(e);var i=t.index;return o.yc(2).showConfirmModal(i)})),o.ec(18,"i-feather",28),o.hc(),o.hc(),o.hc()}if(2&i){var a=t.$implicit,c=o.yc(2);o.Ob(2),o.hd(" ",c.getFacilityBookingName(a.apartmentFacilityId)," "),o.Ob(1),o.Gc("ngClass",c.getBookingStatus(a.facilityBookingStatusId)),o.Ob(1),o.gd(c.getBookingStatus(a.facilityBookingStatusId)),o.Ob(2),o.gd(c.getFacilityBookingSlot(a.slotId)),o.Ob(2),o.gd(c.getBookedDate(a.bookedForDate)),o.Ob(2),o.gd(c.getUserName(a.neededUserId)),o.Ob(2),o.Gc("ngIf",a.amount>0),o.Ob(1),o.Gc("ngIf",0==a.amount),o.Ob(2),o.Ic("routerLink","/ams/facility/edit-booking/",a.apartmentFacilityBookingId,""),o.Gc("routerLinkActiveOptions",o.Mc(10,$))}}function Q(i,t){if(1&i){var e=o.jc();o.ic(0,"div",3),o.ic(1,"div",4),o.ic(2,"div",5),o.ic(3,"h5"),o.fd(4,"All Bookings "),o.ic(5,"span",6),o.fd(6),o.hc(),o.hc(),o.hc(),o.ic(7,"ul",7),o.ic(8,"li",8),o.ec(9,"i",9),o.ic(10,"input",10),o.uc("ngModelChange",(function(i){return o.Wc(e),o.yc().bookingData=i})),o.hc(),o.hc(),o.ic(11,"li",11),o.ic(12,"a",12),o.ec(13,"i-feather",13),o.ic(14,"span"),o.fd(15,"Create Booking"),o.hc(),o.hc(),o.hc(),o.hc(),o.hc(),o.ic(16,"div",14),o.ic(17,"table",15),o.ic(18,"thead"),o.ic(19,"tr"),o.ic(20,"th",16),o.uc("click",(function(){return o.Wc(e),o.yc().sortUnitData("firstName")})),o.fd(21,"Facility Name "),o.ec(22,"span",17),o.hc(),o.ic(23,"th",16),o.uc("click",(function(){return o.Wc(e),o.yc().sortUnitData("slot")})),o.fd(24,"Slot"),o.ec(25,"span",17),o.hc(),o.ic(26,"th",16),o.uc("click",(function(){return o.Wc(e),o.yc().sortUnitData("date")})),o.fd(27,"Booked For "),o.ec(28,"span",17),o.hc(),o.ic(29,"th",16),o.uc("click",(function(){return o.Wc(e),o.yc().sortUnitData("userName")})),o.fd(30,"User Name"),o.ec(31,"span",17),o.hc(),o.ic(32,"th",16),o.uc("click",(function(){return o.Wc(e),o.yc().sortUnitData("cost")})),o.fd(33,"Cost "),o.ec(34,"span",17),o.hc(),o.ic(35,"th",18),o.fd(36,"Action"),o.hc(),o.hc(),o.hc(),o.ic(37,"tbody"),o.dd(38,V,19,11,"tr",19),o.zc(39,"simpleSearch"),o.zc(40,"slice"),o.zc(41,"orderBy"),o.hc(),o.hc(),o.ic(42,"app-pagination",20),o.uc("outputParams",(function(i){return o.Wc(e),o.yc().getIndexParams(i)})),o.hc(),o.hc(),o.hc()}if(2&i){var a=o.yc();o.Ob(6),o.gd(a.totalItems),o.Ob(4),o.Gc("ngModel",a.bookingData),o.Ob(2),o.Gc("routerLinkActiveOptions",o.Mc(25,$)),o.Ob(5),o.Gc("ngClass",a.isMobileView()),o.Ob(5),o.Gc("ngClass",a.getFieldOrderBy("firstName")),o.Ob(3),o.Gc("ngClass",a.getFieldOrderBy("slot")),o.Ob(3),o.Gc("ngClass",a.getFieldOrderBy("Date")),o.Ob(3),o.Gc("ngClass",a.getFieldOrderBy("userName")),o.Ob(3),o.Gc("ngClass",a.getFieldOrderBy("cost")),o.Ob(4),o.Gc("ngForOf",o.Bc(39,14,o.Cc(40,17,o.Cc(41,21,a.bookingListData,a.unitFieldType,a.unitOrder),a.ItemUserStartIndex,a.ItemUserEndIndex),a.bookingData)),o.Ob(4),o.Gc("totalItems",a.totalItems)("ItemStartIndex",a.ItemStartIndex)("ItemEndIndex",a.ItemEndIndex)("itemLimit",a.itemLimit)}}var J,K=((J=function(){function i(t,e,a,c,n,o,r,l){_classCallCheck(this,i),this.router=t,this.route=e,this.injector=a,this.userService=c,this.facilityService=n,this.lookupService=o,this.sharedService=r,this.cookieService=l,this.isBookingDataLoaded=!1,this.unitFieldType="unitno",this.unitOrder=!1,this.ItemStartIndex=0,this.itemLimit=20,this.bookingData="",this.staffData="",this.modalService=this.injector.get(u.a)}return _createClass(i,[{key:"getIndexParams",value:function(i){this.ItemStartIndex=i.ItemStartIndex,this.ItemEndIndex=i.ItemEndIndex}},{key:"sortUnitData",value:function(i){this.unitFieldType=i,this.unitOrder=!this.unitOrder}},{key:"getFieldOrderBy",value:function(i){return this.unitFieldType==i?this.unitOrder?"desc":"asc":""}},{key:"isMobileView",value:function(){return window.innerWidth<=767?"table-responsive":""}},{key:"getFacilityBookingName",value:function(i){var t=U.filter(this.facilityCategoryData,(function(t){if(t.apartmentFacilityId===i)return t}));return void 0===t||0==t.length?"":t[0].facilityName}},{key:"getFacilityBookingSlot",value:function(i){var t=U.filter(this.facilitySlotData,(function(t){if(t.apartmentFacilitySlotId===i)return t}));if(void 0===t||0==t.length)return"";var e=f(t[0].slotBeginTime,"HH:mm:ss").toDate(),a=f(e).format("HH:mm A"),c=f(t[0].slotEndTime,"HH:mm:ss").toDate();return a+" - "+f(c).format("HH:mm A")}},{key:"getBookedDate",value:function(i){return f(i).format("DD/MM/YYYY")}},{key:"getUserName",value:function(i){var t=U.filter(this.userListData,(function(t){if(t.userId===i)return t}));return void 0===t||0==t.length?"":t[0].firstName}},{key:"getBookingStatus",value:function(i){var t=U.filter(this.statusTypeData,(function(t){if(t.lookupValueId===i)return t}));return void 0===t||0==t.length?"":t[0].lookupValueName.toLowerCase()}},{key:"showConfirmModal",value:function(i){this.modalService.showConfirmModal(i)}},{key:"ngOnInit",value:function(){var i=this;this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){i.facilityCategoryData=t.filter((function(i){return i.isActive})),console.log(i.facilityCategoryData)}),(function(i){})),this.lookupService.getLookupValueByLookupTypeId(40).subscribe((function(t){i.statusTypeData=t.filter((function(i){return i.isActive}))}),(function(i){})),this.facilityService.getApartmentFacilitySlotsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){i.facilitySlotData=t.filter((function(i){return i.isActive}))}),(function(i){})),this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){i.userListData=t.filter((function(i){return i.isActive}))}),(function(i){})),this.facilityService.getApartmentFacilityBookingsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){i.bookingListData=t.filter((function(i){return i.isActive})),i.totalItems=i.bookingListData.length,i.ItemEndIndex=i.totalItems>i.itemLimit?i.itemLimit:i.totalItems,i.isBookingDataLoaded=!0}),(function(i){})),this.sharedService.unitlistdeleteindexcast.subscribe((function(t){if(null!=t){var e={apartmentFacilityBookingId:i.bookingListData[t].apartmentFacilityBookingId,deleteBy:parseInt(i.cookieService.get("userId"))};i.isBookingDataLoaded=!1,i.facilityService.deleteApartmentFacilityBooking(e).subscribe((function(e){i.bookingListData.splice(t,1),i.totalItems=i.bookingListData.length,i.isBookingDataLoaded=!0,i.sharedService.setUnitListDeleteIndex(null)}),(function(i){console.log(i)}))}}))}}]),i}()).\u0275fac=function(i){return new(i||J)(o.dc(n.c),o.dc(n.a),o.dc(o.x),o.dc(j.a),o.dc(l.a),o.dc(s.a),o.dc(d.a),o.dc(h.a))},J.\u0275cmp=o.Xb({type:J,selectors:[["app-facility-booking-actions"]],decls:3,vars:2,consts:[[1,"facilitybooking-actions-wrapper"],[4,"ngIf"],["class","card card-table",4,"ngIf"],[1,"card","card-table"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],["routerLink","/ams/facility/create-booking","routerLinkActive","active",1,"btn","lime-green","mt_5",3,"routerLinkActiveOptions"],["name","plus",1,"icon","plus"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],["scope","col"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],[1,"badge","small","text-capitalize","alpha",3,"ngClass"],[1,"grey"],[1,"grey","text-capitalize"],["href","javascript:void(0)","placement","top","routerLinkActive","active",1,"mr-2",3,"routerLink","routerLinkActiveOptions"],["name","edit",1,"icon","edit"],["href","javascript:void(0)",3,"click"],["name","trash",1,"icon","delete"]],template:function(i,t){1&i&&(o.ic(0,"div",0),o.dd(1,X,1,0,"app-loader",1),o.dd(2,Q,43,26,"div",2),o.hc()),2&i&&(o.Ob(1),o.Gc("ngIf",!t.isBookingDataLoaded),o.Ob(1),o.Gc("ngIf",t.isBookingDataLoaded))},directives:[c.l,g.a,b.c,b.a,v.d,v.n,v.q,n.e,n.d,y.b,c.j,c.k,R.a],pipes:[Y.c,c.t,Y.b],styles:[""]}),J),ii=e("iOEq"),ti=e("IvIE");function ei(i,t){1&i&&o.ec(0,"app-loader")}var ai=function(){return{left:"today, prev,next",center:"title",right:"dayGridDay,dayGridWeek,dayGridMonth"}};function ci(i,t){if(1&i){var e=o.jc();o.gc(0),o.ic(1,"full-calendar",2),o.uc("eventClick",(function(i){return o.Wc(e),o.yc().handleEventClick(i)})),o.hc(),o.fc()}if(2&i){var a=o.yc();o.Ob(1),o.Gc("plugins",a.calendarPlugins)("header",o.Mc(3,ai))("events",a.calendarEvents)}}var ni,oi,ri,li=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:W},{path:"create-booking",component:q.a},{path:"edit-booking/:id",component:q.a},{path:"calendar",component:(ni=function(){function i(t,e,a,c,o,r){var l=this;_classCallCheck(this,i),this.router=t,this.route=e,this.facilityService=a,this.lookupService=c,this.sharedService=o,this.cookieService=r,this.calendarPlugins=[ii.a],this.calendarEvents=[],this.isCalenderLoaded=!1,this.router.events.subscribe((function(i){i instanceof n.b&&-1!=l.router.url.indexOf("facility")&&l.getFacilityBookingData()}))}return _createClass(i,[{key:"handleEventClick",value:function(i){this.router.navigate(["/ams/facility/edit-booking",i.event.id])}},{key:"getFacilityBookingData",value:function(){var i=this;this.facilityService.getApartmentFacilitySlotsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){i.facilitySlotData=t.filter((function(i){return i.isActive}))}),(function(i){})),this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){i.facilityCategoryData=t.filter((function(i){return i.isActive})),i.facilityService.getApartmentFacilityBookingsByApartmentId(parseInt(i.cookieService.get("apartmentId"))).subscribe((function(t){i.facilityBookingData=t.filter((function(i){return i.isActive})),U.each(i.facilityBookingData,(function(t){var e=f(t.bookedForDate).format("YYYY-MM-DD"),a=i.facilityCategoryData.filter((function(i){return i.apartmentFacilityId==t.apartmentFacilityId})),c=i.facilitySlotData.filter((function(i){return i.apartmentFacilitySlotId==t.slotId})),n=f(c[0].slotBeginTime,"HH:mm:ss").toDate(),o=f(n).format("HH:mm A"),r=f(c[0].slotEndTime,"HH:mm:ss").toDate(),l=f(r).format("HH:mm A");i.calendarEvents.push({title:a[0].facilityName+" ( "+o+"-"+l+" ) ",date:e,id:a[0].apartmentFacilityId}),i.isCalenderLoaded=!0}))}),(function(i){}))}),(function(i){}))}},{key:"ngOnInit",value:function(){}}]),i}(),ni.\u0275fac=function(i){return new(i||ni)(o.dc(n.c),o.dc(n.a),o.dc(l.a),o.dc(s.a),o.dc(d.a),o.dc(h.a))},ni.\u0275cmp=o.Xb({type:ni,selectors:[["app-full-calendar"]],decls:3,vars:2,consts:[[1,"full-calendar-wrapper"],[4,"ngIf"],["defaultView","dayGridMonth",3,"plugins","header","events","eventClick"]],template:function(i,t){1&i&&(o.ic(0,"div",0),o.dd(1,ei,1,0,"app-loader",1),o.dd(2,ci,2,4,"ng-container",1),o.hc()),2&i&&(o.Ob(1),o.Gc("ngIf",!t.isCalenderLoaded),o.Ob(1),o.Gc("ngIf",t.isCalenderLoaded))},directives:[c.l,g.a,ti.a],styles:[""]}),ni)},{path:"booking-actions",component:K},{path:"reports",component:r},{path:"**",redirectTo:"settings",pathMatch:"full"}],si=((oi=function i(){_classCallCheck(this,i)}).\u0275mod=o.bc({type:oi}),oi.\u0275inj=o.ac({factory:function(i){return new(i||oi)},imports:[[n.f.forChild(li)],n.f]}),oi),di=e("PCNd"),ui=((ri=function(){function i(){_classCallCheck(this,i)}return _createClass(i,[{key:"ngOnInit",value:function(){}}]),i}()).\u0275fac=function(i){return new(i||ri)},ri.\u0275cmp=o.Xb({type:ri,selectors:[["app-facility"]],decls:1,vars:0,template:function(i,t){1&i&&o.ec(0,"router-outlet")},directives:[n.g],styles:[""]}),ri);e.d(t,"FacilityModule",(function(){return mi}));var fi,mi=((fi=function i(){_classCallCheck(this,i)}).\u0275mod=o.bc({type:fi,bootstrap:[ui]}),fi.\u0275inj=o.ac({factory:function(i){return new(i||fi)},imports:[[c.b,di.a,si]]}),fi)},wlDI:function(i,t,e){"use strict";e.d(t,"a",(function(){return o}));var a=e("fXoL"),c=e("ofXK"),n=e("8mtn"),o=function(){var i=function(){function i(){_classCallCheck(this,i)}return _createClass(i,[{key:"ngOnInit",value:function(){}}]),i}();return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=a.Xb({type:i,selectors:[["app-alert-message"]],inputs:{message:"message",isAlert:"isAlert",isSuccess:"isSuccess",isError:"isError"},decls:11,vars:4,consts:[[1,"alert-wrapper"],[1,"custom-alert",3,"ngClass"],[1,"icon-wrapper","float-left"],["name","x","width","20",1,"icon","del","float-left"],[1,"float-left"],["name","check","width","20",1,"icon","del","float-left"]],template:function(i,t){1&i&&(a.ic(0,"div",0),a.ic(1,"div",1),a.ic(2,"div",2),a.ec(3,"i-feather",3),a.hc(),a.ic(4,"p",4),a.fd(5),a.hc(),a.hc(),a.ic(6,"div",1),a.ic(7,"div",2),a.ec(8,"i-feather",5),a.hc(),a.ic(9,"p",4),a.fd(10),a.hc(),a.hc(),a.hc()),2&i&&(a.Ob(1),a.Gc("ngClass",t.isError?"show error":""),a.Ob(4),a.gd(t.message),a.Ob(1),a.Gc("ngClass",t.isSuccess?"show success":""),a.Ob(4),a.gd(t.message))},directives:[c.j,n.b],styles:[".alert-wrapper[_ngcontent-%COMP%]{position:relative;top:-20px;left:-20px}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert[_ngcontent-%COMP%]{font-family:Lato,sans-serif;font-weight:400;letter-spacing:.3px;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;font-size:1.4rem;padding:0 15px;border-radius:0!important;width:calc(100% + 40px);overflow:hidden;height:0;transition:all .15s ease}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:22px;height:22px;display:flex;justify-content:center;align-items:center;background-color:#f1dddd;border-radius:22px!important;margin:8px 0 0}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:15px;cursor:auto;margin:-1px 0 0}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:95%;margin:9px 0 0 10px!important;font-size:1.4rem;color:#8e4d40}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show[_ngcontent-%COMP%]{max-height:200px;height:40px;top:0;left:0;border-bottom:1px solid #eaeaea;transition:all .15s ease}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.error[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{background-color:#f1dddd}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.error[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ea7962}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.success[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{background-color:#5cd694}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.success[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#fff}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#5cd694}"]}),i}()}}]);