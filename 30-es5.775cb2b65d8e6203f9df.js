function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{n8yt:function(t,e,i){"use strict";i.r(e);var a,c=i("ofXK"),n=i("tyNb"),o=i("fXoL"),r=((a=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=o.Qb({type:a,selectors:[["app-facility-reports"]],decls:2,vars:0,template:function(t,e){1&t&&(o.bc(0,"p"),o.Yc(1," facility-reports works!\n"),o.ac())},styles:[""]}),a),l=i("GUTR"),s=i("ThaB"),d=i("wbvY"),u=i("JK/P"),m=i("wd/R"),f=i("0IaG"),g=i("b6Qw"),p=i("668k"),b=i("8mtn"),y=i("wlDI"),h=i("3Pt+"),v=i("BR9Y"),C=i("BniF"),I=i("CzEO");function k(t,e){1&t&&o.Xb(0,"app-loader")}function S(t,e){if(1&t){var i=o.cc();o.Zb(0),o.bc(1,"form",3,4),o.nc("ngSubmit",(function(){o.Pc(i);var t=o.Mc(2);return o.rc().submitAddFacilitySlotForm(t)})),o.bc(3,"div",5),o.bc(4,"div",6),o.bc(5,"div",7),o.bc(6,"label"),o.Yc(7,"Begin Time*"),o.ac(),o.bc(8,"input",8),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().slot.slotBeginTime=t}))("dateTimeInput",(function(){return o.Pc(i),o.rc().emitSlotTime()})),o.ac(),o.Xb(9,"owl-date-time",9,10),o.bc(11,"div",11),o.Xb(12,"i-feather",12),o.ac(),o.ac(),o.ac(),o.bc(13,"div",6),o.bc(14,"div",7),o.bc(15,"label"),o.Yc(16,"End Time*"),o.ac(),o.bc(17,"input",13),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().slot.slotEndTime=t}))("dateTimeInput",(function(){return o.Pc(i),o.rc().emitSlotTime()})),o.ac(),o.Xb(18,"owl-date-time",9,14),o.bc(20,"div",11),o.Xb(21,"i-feather",12),o.ac(),o.ac(),o.ac(),o.bc(22,"div",6),o.bc(23,"div",7),o.bc(24,"label"),o.Yc(25,"Cost (in rs)*"),o.ac(),o.bc(26,"input",15),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().slot.cost=t})),o.ac(),o.ac(),o.ac(),o.bc(27,"div",16),o.bc(28,"div",7),o.bc(29,"label"),o.Yc(30,"Comments"),o.ac(),o.bc(31,"textarea",17),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().slot.comment=t})),o.ac(),o.ac(),o.ac(),o.bc(32,"div",18),o.bc(33,"button",19),o.Yc(34,"Submit"),o.ac(),o.bc(35,"div",20),o.nc("click",(function(){o.Pc(i);var t=o.rc();return t.showConfirmModal(t.slot)})),o.Yc(36,"Delete"),o.ac(),o.ac(),o.ac(),o.ac(),o.Yb()}if(2&t){var a=o.Mc(2),c=o.Mc(10),n=o.Mc(19),r=o.rc();o.Hb(8),o.zc("owlDateTime",c)("owlDateTimeTrigger",c)("ngModel",r.slot.slotBeginTime),o.Hb(1),o.zc("pickerType","timer"),o.Hb(2),o.zc("owlDateTimeTrigger",c),o.Hb(6),o.zc("min",r.minEndTime)("owlDateTime",n)("owlDateTimeTrigger",n)("ngModel",r.slot.slotEndTime),o.Hb(1),o.zc("pickerType","timer"),o.Hb(2),o.zc("owlDateTimeTrigger",n),o.Hb(6),o.zc("ngModel",r.slot.cost),o.Hb(5),o.zc("ngModel",r.slot.comment),o.Hb(2),o.zc("disabled",a.invalid)}}var M,F=((M=function(){function t(e,i,a,c,n){_classCallCheck(this,t),this.injector=e,this.dialog=i,this.facilityService=a,this.sharedService=c,this.cookieService=n,this.alertMessage="",this.isError=!1,this.isSlotSubmitted=!0,this.facilityParams=new o.o,this.modalService=this.injector.get(u.a)}return _createClass(t,[{key:"submitAddFacilitySlotForm",value:function(t){var e=this;if(this.isSlotSubmitted=!1,"new"==this.type){var i={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentFacilityId:this.slot.apartmentFacilityId,slotBeginTime:m(this.slot.slotBeginTime).format("HH:mm:ss"),slotEndTime:m(this.slot.slotEndTime).format("HH:mm:ss"),cost:this.slot.cost,comment:this.slot.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-16T12:34:36.708Z",updatedBy:0,updatedOn:"2019-12-16T12:34:36.709Z"};this.facilityService.addApartmentFacilitySlot(i).subscribe((function(t){t.message&&(e.facilityParams.emit(!0),e.isSlotSubmitted=!0,e.sharedService.setAlertMessage("Slot added successfully"))}),(function(t){e.isError=!0,e.alertMessage="Some error occured"}))}else{var a={apartmentFacilitySlotId:this.slot.apartmentFacilitySlotId,apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentFacilityId:this.slot.apartmentFacilityId,slotBeginTime:m(this.slot.slotBeginTime).format("HH:mm:ss"),slotEndTime:m(this.slot.slotEndTime).format("HH:mm:ss"),cost:this.slot.cost,comment:this.slot.comment,isActive:!0,insertedBy:0,insertedOn:"2019-12-16T12:34:36.708Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-16T12:34:36.709Z"};this.facilityService.updateApartmentFacilitySlot(a).subscribe((function(t){t.message&&(e.facilityParams.emit(!0),e.isSlotSubmitted=!0,e.sharedService.setAlertMessage("Slot updated successfully"))}),(function(t){e.isError=!0,e.alertMessage="Some error occured"}))}}},{key:"emitSlotTime",value:function(){this.minEndTime=m(this.slot.slotBeginTime,"HH:mm:ss").toDate(),m(this.slot.slotBeginTime),m(this.slot.slotEndTime)}},{key:"showConfirmModal",value:function(t){this.modalService.showConfirmModal(t)}},{key:"ngOnInit",value:function(){var t=this;"new"!=this.type?(this.slot.slotBeginTime=m(this.slot.slotBeginTime,"HH:mm:ss").toDate(),this.slot.slotEndTime=m(this.slot.slotEndTime,"HH:mm:ss").toDate()):this.slot.comment="",this.sharedService.unitlistdeleteindexcast.subscribe((function(e){if(null!=e){var i={apartmentFacilityBookingId:e.apartmentFacilitySlotId,deleteBy:parseInt(t.cookieService.get("userId"))};t.facilityService.deleteApartmentFacilitySlot(i).subscribe((function(e){t.facilityParams.emit(!0),t.sharedService.setUnitListDeleteIndex(null)}),(function(t){console.log(t)}))}}))}}]),t}()).\u0275fac=function(t){return new(t||M)(o.Wb(o.s),o.Wb(f.b),o.Wb(l.a),o.Wb(d.a),o.Wb(g.a))},M.\u0275cmp=o.Qb({type:M,selectors:[["app-add-facility-slot"]],inputs:{slot:"slot",facilityId:"facilityId",type:"type"},outputs:{facilityParams:"facilityParams"},decls:4,vars:4,consts:[[1,"facility-add-slot-wrapper"],[3,"message","isError"],[4,"ngIf"],["name","addStaffForm","novalidate","",3,"ngSubmit"],["addFacilitySlotForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["name","slotBeginTime","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange","dateTimeInput"],[3,"pickerType"],["slotBeginTime",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","clock","width","18",1,"icon","time","float-left"],["name","slotEndTime","placeholder","Time","required","",1,"form-control",3,"min","owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange","dateTimeInput"],["slotEndTime",""],["type","number","OnlyNumber","true","placeholder","Enter value","name","cost","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],["placeholder","some text here","name","comments",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue","mr-3",3,"disabled"],[1,"btn","trans-red",3,"click"]],template:function(t,e){1&t&&(o.bc(0,"div",0),o.Xb(1,"app-alert-message",1),o.Wc(2,k,1,0,"app-loader",2),o.Wc(3,S,37,14,"ng-container",2),o.ac()),2&t&&(o.Hb(1),o.zc("message",e.alertMessage)("isError",e.isError),o.Hb(1),o.zc("ngIf",!e.isSlotSubmitted),o.Hb(1),o.zc("ngIf",e.isSlotSubmitted))},directives:[y.a,c.l,p.a,h.z,h.m,h.n,C.c,h.d,h.v,C.e,h.l,h.o,C.b,b.b,h.q,v.a],styles:[""]}),M);function T(t,e){1&t&&o.Xb(0,"app-loader")}function H(t,e){if(1&t&&(o.bc(0,"p"),o.Yc(1),o.ac()),2&t){var i=o.rc().$implicit,a=o.rc(2);o.Hb(1),o.bd("",i.amount,"rs/- per ",a.getRateBase(i.rateBaseId),"")}}function w(t,e){1&t&&(o.bc(0,"p"),o.Yc(1,"Free"),o.ac())}var D=function(){return{exact:!0}};function B(t,e){if(1&t){var i=o.cc();o.Zb(0),o.bc(1,"li",7),o.bc(2,"div",8),o.bc(3,"div",13),o.bc(4,"div",14),o.bc(5,"a",15),o.Xb(6,"i-feather",16),o.ac(),o.bc(7,"a",17),o.bc(8,"i-feather",18),o.nc("click",(function(){o.Pc(i);var t=e.$implicit;return o.rc(2).updateFacilityCategory(t)})),o.ac(),o.ac(),o.ac(),o.bc(9,"h6"),o.Yc(10),o.ac(),o.Wc(11,H,2,2,"p",1),o.Wc(12,w,2,0,"p",1),o.bc(13,"div",19),o.bc(14,"p"),o.Yc(15),o.ac(),o.bc(16,"div",20),o.bc(17,"a",21),o.nc("click",(function(){o.Pc(i);var t=e.$implicit;return o.rc(2).addNewSlot(t)})),o.Xb(18,"i-feather",22),o.bc(19,"span"),o.Yc(20,"Add Slot"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.Yb()}if(2&t){var a=e.$implicit,c=o.rc(2);o.Hb(5),o.Bc("routerLink","/ams/facility/view/",a.apartmentFacilityId,""),o.zc("routerLinkActiveOptions",o.Fc(6,D)),o.Hb(5),o.Zc(a.facilityName),o.Hb(1),o.zc("ngIf",a.amount>0),o.Hb(1),o.zc("ngIf",0==a.amount),o.Hb(3),o.ad("",c.getSlots(a.apartmentFacilitySlot).length," Slot(s)")}}function P(t,e){if(1&t){var i=o.cc();o.bc(0,"div",4),o.bc(1,"h4",5),o.Yc(2,"Facilities"),o.ac(),o.Wc(3,B,21,7,"ng-container",6),o.bc(4,"li",7),o.bc(5,"div",8),o.bc(6,"div",9),o.bc(7,"a",10),o.nc("click",(function(){return o.Pc(i),o.rc().addNewFacilityCategory()})),o.bc(8,"div",11),o.Yc(9,"+"),o.ac(),o.ac(),o.bc(10,"h6",12),o.Yc(11,"Add New Facility"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac()}if(2&t){var a=o.rc();o.Hb(3),o.zc("ngForOf",a.facilityCategoryData)}}function L(t,e){1&t&&(o.bc(0,"h6"),o.Yc(1,"Add Facility"),o.ac())}function x(t,e){1&t&&(o.bc(0,"h6"),o.Yc(1,"Edit Facility"),o.ac())}function z(t,e){if(1&t){var i=o.cc();o.Zb(0),o.bc(1,"li",69),o.bc(2,"span",25),o.Yc(3),o.ac(),o.bc(4,"span",70),o.Yc(5),o.ac(),o.ac(),o.bc(6,"div",71),o.bc(7,"div",32),o.bc(8,"app-add-facility-slot",72),o.nc("facilityParams",(function(t){return o.Pc(i),o.rc(3).getFacilityParams(t)})),o.ac(),o.ac(),o.ac(),o.Yb()}if(2&t){var a=e.$implicit,c=e.index,n=o.rc(3);o.Hb(1),o.Jb("data-target","#slotCollapse",c,""),o.Jb("aria-controls","Collapse",c,""),o.Hb(2),o.ad("Slot",c+1,""),o.Hb(2),o.bd("",n.getSlotTime(a.slotBeginTime)," - ",n.getSlotTime(a.slotEndTime),""),o.Hb(1),o.Bc("id","slotCollapse",c,""),o.Jb("aria-labelledby","Collapse",c,""),o.Hb(2),o.zc("slot",a)("facilityId",n.facility.apartmentFacilityId)}}function N(t,e){if(1&t&&(o.Zb(0),o.Wc(1,z,9,9,"ng-container",6),o.Yb()),2&t){var i=o.rc(2);o.Hb(1),o.zc("ngForOf",i.getSlots(i.facility.apartmentFacilitySlot))}}function Y(t,e){if(1&t&&(o.Zb(0),o.bc(1,"li",73),o.Yc(2,"No Slots Available"),o.ac(),o.Xb(3,"div",74),o.Yb()),2&t){var i=o.rc(2);o.Hb(1),o.zc("ngClass",0==i.facilitySlotLength?"no-drop":"")}}function O(t,e){if(1&t){var i=o.cc();o.Zb(0),o.bc(1,"li",75),o.Yc(2,"New Slot"),o.ac(),o.bc(3,"div",76),o.bc(4,"div",32),o.bc(5,"app-add-facility-slot",77),o.nc("facilityParams",(function(t){return o.Pc(i),o.rc(2).getFacilityParams(t)})),o.ac(),o.ac(),o.ac(),o.Yb()}if(2&t){var a=o.rc(2);o.Hb(5),o.zc("slot",a.facility)("facilityId",a.facility.apartmentFacilityId)}}function A(t,e){if(1&t){var i=o.cc();o.bc(0,"div",23),o.bc(1,"div",24),o.bc(2,"div",25),o.Wc(3,L,2,0,"h6",1),o.Wc(4,x,2,0,"h6",1),o.ac(),o.bc(5,"div",26),o.nc("click",(function(){return o.Pc(i),o.rc().removeCategoryBox()})),o.Xb(6,"i-feather",27),o.ac(),o.ac(),o.bc(7,"div",28),o.bc(8,"ul",29),o.bc(9,"li",30),o.Yc(10,"Facility Info"),o.ac(),o.bc(11,"div",31),o.bc(12,"div",32),o.Xb(13,"app-alert-message",33),o.bc(14,"form",34,35),o.nc("ngSubmit",(function(){o.Pc(i);var t=o.Mc(15);return o.rc().submitFacilitySettingsForm(t)})),o.bc(16,"div",36),o.bc(17,"div",37),o.bc(18,"div",38),o.bc(19,"label"),o.Yc(20,"Facility Name*"),o.ac(),o.bc(21,"input",39),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.facilityName=t})),o.ac(),o.ac(),o.ac(),o.bc(22,"div",37),o.bc(23,"div",40),o.bc(24,"label"),o.Yc(25,"Approval Required* "),o.ac(),o.bc(26,"div",41),o.bc(27,"input",42),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.approvalRequired=t})),o.ac(),o.bc(28,"label",43),o.Yc(29,"Yes"),o.ac(),o.ac(),o.bc(30,"div",41),o.bc(31,"input",44),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.approvalRequired=t})),o.ac(),o.bc(32,"label",45),o.Yc(33,"No"),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(34,"div",37),o.bc(35,"div",40),o.bc(36,"label"),o.Yc(37,"Rate Type*"),o.ac(),o.bc(38,"div",41),o.bc(39,"input",46),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.rateBaseId=t})),o.ac(),o.bc(40,"label",47),o.Yc(41,"Hour"),o.ac(),o.ac(),o.bc(42,"div",41),o.bc(43,"input",48),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.rateBaseId=t})),o.ac(),o.bc(44,"label",49),o.Yc(45,"Day"),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(46,"div",37),o.bc(47,"div",40),o.bc(48,"label"),o.Yc(49,"Service Type*"),o.ac(),o.bc(50,"div",41),o.bc(51,"input",50),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.facilityTypeId=t})),o.ac(),o.bc(52,"label",51),o.Yc(53,"Paid"),o.ac(),o.ac(),o.bc(54,"div",41),o.bc(55,"input",52),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.facilityTypeId=t})),o.ac(),o.bc(56,"label",53),o.Yc(57,"Free"),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(58,"div",37),o.bc(59,"div",38),o.bc(60,"label"),o.Yc(61),o.ac(),o.bc(62,"input",54),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.amount=t})),o.ac(),o.ac(),o.ac(),o.bc(63,"div",37),o.bc(64,"div",38),o.bc(65,"label"),o.Yc(66,"Deposit (in rs)*"),o.ac(),o.bc(67,"input",55),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.cautionDeposit=t})),o.ac(),o.ac(),o.ac(),o.bc(68,"div",37),o.bc(69,"div",38),o.bc(70,"label"),o.Yc(71,"Auto Cancel (in days)*"),o.ac(),o.bc(72,"input",56),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.autoCancelDays=t})),o.ac(),o.ac(),o.ac(),o.bc(73,"div",37),o.bc(74,"div",38),o.bc(75,"label"),o.Yc(76,"Min Hours Booking*"),o.ac(),o.bc(77,"input",57),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.minHoursBooking=t})),o.ac(),o.ac(),o.ac(),o.bc(78,"div",37),o.bc(79,"div",38),o.bc(80,"label"),o.Yc(81,"Min Time Limit*"),o.ac(),o.bc(82,"input",58),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.minTimeLimit=t})),o.ac(),o.Xb(83,"owl-date-time",59,60),o.bc(85,"div",61),o.Xb(86,"i-feather",62),o.ac(),o.ac(),o.ac(),o.bc(87,"div",37),o.bc(88,"div",38),o.bc(89,"label"),o.Yc(90,"Max Time Limit*"),o.ac(),o.bc(91,"input",63),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.maxTimeLimit=t})),o.ac(),o.Xb(92,"owl-date-time",59,64),o.bc(94,"div",61),o.Xb(95,"i-feather",62),o.ac(),o.ac(),o.ac(),o.bc(96,"div",65),o.bc(97,"div",38),o.bc(98,"label"),o.Yc(99,"Description"),o.ac(),o.bc(100,"quill-editor",66),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().facility.description=t}))("onContentChanged",(function(t){return o.Pc(i),o.rc().onContentChanged(t)})),o.ac(),o.ac(),o.ac(),o.bc(101,"div",67),o.bc(102,"button",68),o.Yc(103,"Submit"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.Wc(104,N,2,1,"ng-container",1),o.Wc(105,Y,4,1,"ng-container",1),o.Wc(106,O,6,2,"ng-container",1),o.ac(),o.ac(),o.ac()}if(2&t){var a=o.Mc(15),c=o.Mc(84),n=o.Mc(93),r=o.rc();o.Hb(3),o.zc("ngIf",r.isFacilityCategoryNew),o.Hb(1),o.zc("ngIf",!r.isFacilityCategoryNew),o.Hb(5),o.zc("ngClass",r.isSlotNew?"collapsed":""),o.Hb(2),o.zc("ngClass",r.isSlotNew?"":"show"),o.Hb(2),o.zc("message",r.alertMessage)("isError",r.isCategoryError),o.Hb(8),o.zc("ngModel",r.facility.facilityName),o.Hb(6),o.zc("ngModel",r.facility.approvalRequired)("value",!0),o.Hb(4),o.zc("ngModel",r.facility.approvalRequired)("value",!1),o.Hb(8),o.zc("ngModel",r.facility.rateBaseId),o.Hb(4),o.zc("ngModel",r.facility.rateBaseId),o.Hb(8),o.zc("ngModel",r.facility.facilityTypeId),o.Hb(4),o.zc("ngModel",r.facility.facilityTypeId),o.Hb(6),o.ad("Cost (in rs)* ",r.facility.amount,""),o.Hb(1),o.zc("ngModel",r.facility.amount),o.Hb(5),o.zc("ngModel",r.facility.cautionDeposit),o.Hb(5),o.zc("ngModel",r.facility.autoCancelDays),o.Hb(5),o.zc("ngModel",r.facility.minHoursBooking),o.Hb(5),o.zc("owlDateTime",c)("owlDateTimeTrigger",c)("ngModel",r.facility.minTimeLimit),o.Hb(1),o.zc("pickerType","timer"),o.Hb(2),o.zc("owlDateTimeTrigger",c),o.Hb(6),o.zc("owlDateTime",n)("owlDateTimeTrigger",n)("ngModel",r.facility.maxTimeLimit),o.Hb(1),o.zc("pickerType","timer"),o.Hb(2),o.zc("owlDateTimeTrigger",n),o.Hb(6),o.zc("ngModel",r.facility.description)("placeholder",r.editorPlacehorder),o.Hb(2),o.zc("disabled",a.invalid),o.Hb(2),o.zc("ngIf",!r.isFacilityCategoryNew),o.Hb(1),o.zc("ngIf",0==r.facilitySlotLength),o.Hb(1),o.zc("ngIf",r.isSlotNew)}}var _,E=((_=function(){function t(e,i,a,c,n,o){_classCallCheck(this,t),this.injector=e,this.dialog=i,this.facilityService=a,this.lookupService=c,this.sharedService=n,this.cookieService=o,this.isFacilityCategoryLoaded=!1,this.isEditFacilityCategory=!1,this.isFacilityCategoryNew=!1,this.isFacilityCategoryUpdate=!1,this.isSlotNew=!1,this.isCategoryError=!1,this.alertMessage="",this.facilityAmount="",this.modalService=this.injector.get(u.a)}return _createClass(t,[{key:"onContentChanged",value:function(t){this.facility.description=t.html}},{key:"submitFacilitySettingsForm",value:function(t){var e=this;if(this.isFacilityCategoryLoaded=!1,this.isFacilityCategoryNew){var i={facilityName:this.facility.facilityName,description:this.facility.description,apartmentId:parseInt(this.cookieService.get("apartmentId")),rateBaseId:parseInt(this.facility.rateBaseId),amount:this.facility.amount,approvalRequired:this.facility.approvalRequired,isApproved:!0,facilityTypeId:parseInt(this.faclityTypeId),minHoursBooking:this.facility.minHoursBooking,autoCancelDays:this.facility.autoCancelDays,cautionDeposit:this.facility.cautionDeposit,minTimeLimit:m(this.facility.minTimeLimit).format("HH:mm:ss"),maxTimeLimit:m(this.facility.maxTimeLimit).format("HH:mm:ss"),fileAttachmentId:null,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-15T08:45:26.010Z",updatedBy:0,updatedOn:"2019-12-15T08:45:26.010Z",apartmentFacilitySlot:null};this.facilityService.addApartmentFacility(i).subscribe((function(t){t.message?(e.isFacilityCategoryLoaded=!0,e.sharedService.setAlertMessage("Facility added successfully")):(e.isFacilityCategoryLoaded=!0,e.isCategoryError=!0,e.alertMessage=t.errorMessage)}),(function(t){e.isFacilityCategoryLoaded=!0,e.isCategoryError=!0,e.alertMessage="Some error occured"}))}else{var a={apartmentFacilityId:this.facility.apartmentFacilityId,facilityName:this.facility.facilityName,description:this.facility.description,apartmentId:parseInt(this.cookieService.get("apartmentId")),rateBaseId:parseInt(this.facility.rateBaseId),amount:this.facility.amount,approvalRequired:this.facility.approvalRequired,isApproved:!0,facilityTypeId:parseInt(this.facility.facilityTypeId),minHoursBooking:this.facility.minHoursBooking,autoCancelDays:this.facility.autoCancelDays,cautionDeposit:this.facility.cautionDeposit,minTimeLimit:m(this.facility.minTimeLimit).format("HH:mm:ss"),maxTimeLimit:m(this.facility.maxTimeLimit).format("HH:mm:ss"),fileAttachmentId:null,isActive:!0,insertedBy:0,insertedOn:"2019-12-15T08:45:26.010Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-15T08:45:26.010Z",apartmentFacilitySlot:null};this.facilityService.updateApartmentFacility(a).subscribe((function(t){t.message?(e.isFacilityCategoryLoaded=!0,e.isFacilityCategoryLoaded=!1,e.facilityService.getApartmentFacilitiesByApartmentId(parseInt(e.cookieService.get("apartmentId"))).subscribe((function(t){e.facilityCategoryData=t.filter((function(t){return t.isActive})),e.isFacilityCategoryLoaded=!0,e.sharedService.setAlertMessage("Facility updated successfully"),console.log(t)}),(function(t){}))):(e.isFacilityCategoryLoaded=!0,e.isCategoryError=!0,e.alertMessage=t.errorMessage)}),(function(t){e.isFacilityCategoryLoaded=!0,e.isCategoryError=!0,e.alertMessage="Some error occured"}))}}},{key:"addNewFacilityCategory",value:function(){this.isFacilityCategoryNew=!0,this.isSlotNew=!1,this.facility={}}},{key:"addNewSlot",value:function(t){this.isFacilityCategoryUpdate=!0,this.isFacilityCategoryNew=!1,this.isSlotNew=!0,this.updatefacilityData(t)}},{key:"updateFacilityCategory",value:function(t){this.isFacilityCategoryUpdate=!0,this.isFacilityCategoryNew=!1,this.isSlotNew=!1,this.updatefacilityData(t)}},{key:"updatefacilityData",value:function(t){this.facility=t,this.facility.rateBaseId=t.rateBaseId.toString(),this.facility.facilityTypeId=t.facilityTypeId.toString(),this.facility.minTimeLimit=m(t.minTimeLimit,"HH:mm:ss").toDate(),this.facility.maxTimeLimit=m(t.maxTimeLimit,"HH:mm:ss").toDate(),this.facilitySlotLength=t.apartmentFacilitySlot.length}},{key:"removeCategoryBox",value:function(){this.isFacilityCategoryNew=!1,this.isFacilityCategoryUpdate=!1,this.isCategoryError=!1}},{key:"getRateBase",value:function(t){return 138==t?"Hour":"Day"}},{key:"getSlots",value:function(t){return t.filter((function(t){return t.isActive}))}},{key:"getSlotTime",value:function(t){return m(t).format("HH:mm A")}},{key:"getFacilityParams",value:function(t){var e=this;this.isFacilityCategoryLoaded=!1,this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){e.facilityCategoryData=t.filter((function(t){return t.isActive})),e.isFacilityCategoryLoaded=!0}),(function(t){}))}},{key:"ngOnInit",value:function(){var t=this;this.facility={},this.facility.description="",this.facility.rateBaseId="",this.facility.facilityTypeId="",this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(e){t.facilityCategoryData=e.filter((function(t){return t.isActive})),t.isFacilityCategoryLoaded=!0}),(function(t){}))}}]),t}()).\u0275fac=function(t){return new(t||_)(o.Wb(o.s),o.Wb(f.b),o.Wb(l.a),o.Wb(s.a),o.Wb(d.a),o.Wb(g.a))},_.\u0275cmp=o.Qb({type:_,selectors:[["app-facility-setup"]],decls:4,vars:3,consts:[[1,"facility-settings-wrapper"],[4,"ngIf"],["class","category-list list-boxes big",4,"ngIf"],["class","card mt-20",4,"ngIf"],[1,"category-list","list-boxes","big"],[1,"main-title-mini"],[4,"ngFor","ngForOf"],[1,"list-inline-item"],[1,"card"],[1,"card-body","new","text-center"],["href","javascript:void(0)",1,"rounded-btn","green",3,"click"],[1,"icon"],[1,"tc-green"],[1,"card-body","nohover"],[1,"icons"],["href","javascript:void(0)","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["name","eye",1,"icon","view"],["href","javascript:void(0)"],["name","edit",1,"icon","edit",3,"click"],[1,"bottom"],[1,"ml-auto"],[1,"btn","sf","trans-white","hover-green",3,"click"],["name","plus",1,"icon","sm","plus"],[1,"card","mt-20"],[1,"card-header"],[1,"float-left"],[1,"float-right",3,"click"],["name","x",1,"icon","del"],["id","accordion",1,"card-body","p-0"],[1,"list-group","tabs","clear"],["data-toggle","collapse","data-target","#facilityCollapse","aria-expanded","true","aria-controls","facilityCollapseOne",1,"list-group-item",3,"ngClass"],["id","facilityCollapse","aria-labelledby","facilityCollapseOne","data-parent","#accordion",1,"collapse",3,"ngClass"],[1,"details"],[3,"message","isError"],["name","visitorSettingsForm","novalidate","",3,"ngSubmit"],["facilitySettingsForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["type","text","placeholder","Enter text","name","staffCategory","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-box","radio-box"],[1,"form-group"],["name","approvalType","id","Yes","type","radio","required","",3,"ngModel","value","ngModelChange"],["for","Yes",1,"radio-inline"],["name","approvalType","id","No","type","radio","required","",3,"ngModel","value","ngModelChange"],["for","No",1,"radio-inline"],["name","faclityRateBaseId","id","hourType","value","138","type","radio","required","",3,"ngModel","ngModelChange"],["for","hourType",1,"radio-inline"],["name","faclityRateBaseId","id","dayType","value","139","type","radio","required","",3,"ngModel","ngModelChange"],["for","dayType",1,"radio-inline"],["name","faclityTypeId","id","paidType","value","184","type","radio","required","",3,"ngModel","ngModelChange"],["for","paidType",1,"radio-inline"],["name","faclityTypeId","id","freeType","value","185","type","radio","required","",3,"ngModel","ngModelChange"],["for","freeType",1,"radio-inline"],["type","number","OnlyNumber","true","placeholder","Enter value","name","amount","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","deposit","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","autoCancelDays","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","minHoursBooking","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","minTimeLimit","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["minTimeLimit",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","clock","width","18",1,"icon","time","float-left"],["name","maxTimeLimit","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["maxTimeLimit",""],[1,"col-sm-12"],["name","description",1,"quill-editor",3,"ngModel","placeholder","ngModelChange","onContentChanged"],[1,"col-sm-12","text-right"],[1,"btn","blue","mr-2",3,"disabled"],["data-toggle","collapse","aria-expanded","true",1,"list-group-item","collapsed"],[1,"float-left","badge","time","ml-3","mt-2"],["data-parent","#accordion",1,"collapse",3,"id"],["type","edit",3,"slot","facilityId","facilityParams"],["data-toggle","collapse","data-target","#facilityNewCollapse","aria-expanded","true","aria-controls","facilityCollapseNewOne",1,"list-group-item","collapsed",3,"ngClass"],["id","facilityNewCollapse","attr.aria-labelledby","facilityCollapseNewOne","data-parent","#accordion",1,"collapse"],["data-toggle","collapse","data-target","#facilitySlotNew","aria-expanded","true","aria-controls","facilityNewSlot",1,"list-group-item"],["id","facilitySlotNew","aria-labelledby","facilityNewSlot","data-parent","#accordion",1,"collapse","show"],["type","new",3,"slot","facilityId","facilityParams"]],template:function(t,e){1&t&&(o.bc(0,"div",0),o.Wc(1,T,1,0,"app-loader",1),o.Wc(2,P,12,1,"div",2),o.Wc(3,A,107,36,"div",3),o.ac()),2&t&&(o.Hb(1),o.zc("ngIf",!e.isFacilityCategoryLoaded),o.Hb(1),o.zc("ngIf",e.isFacilityCategoryLoaded),o.Hb(1),o.zc("ngIf",e.isFacilityCategoryNew||e.isFacilityCategoryUpdate))},directives:[c.l,p.a,c.k,n.e,n.d,b.b,c.j,y.a,h.z,h.m,h.n,h.d,h.v,h.l,h.o,h.s,h.q,v.a,C.c,C.e,C.b,I.a,F],styles:[""]}),_),W=i("Nw7d"),q=i("NutR"),X=i("F/us"),U=i("is7e"),Z=i("6nBg"),R=i("NhFE"),j=i("bvAq");function V(t,e){1&t&&o.Xb(0,"app-loader")}function Q(t,e){if(1&t&&(o.bc(0,"span"),o.Yc(1),o.ac()),2&t){var i=o.rc().$implicit;o.Hb(1),o.Zc(i.amount)}}function $(t,e){1&t&&(o.bc(0,"span"),o.Yc(1,"Free"),o.ac())}var G=function(){return{exact:!0}};function J(t,e){if(1&t){var i=o.cc();o.bc(0,"tr",28),o.bc(1,"td",29),o.Yc(2),o.ac(),o.bc(3,"td",30),o.Yc(4),o.ac(),o.bc(5,"td",30),o.bc(6,"span",31),o.Yc(7),o.ac(),o.ac(),o.bc(8,"td",30),o.Yc(9),o.ac(),o.bc(10,"td",32),o.Yc(11),o.ac(),o.bc(12,"td",30),o.Wc(13,Q,2,1,"span",1),o.Wc(14,$,2,0,"span",1),o.ac(),o.bc(15,"td",33),o.bc(16,"a",34),o.Xb(17,"i-feather",35),o.ac(),o.bc(18,"a",36),o.nc("click",(function(){o.Pc(i);var t=e.$implicit;return o.rc(2).showConfirmModal(t.apartmentFacilityBookingId)})),o.Xb(19,"i-feather",37),o.ac(),o.ac(),o.ac()}if(2&t){var a=e.$implicit,c=e.index,n=o.rc(2);o.zc("ngClass",a.isActive?"active":"notactive"),o.Hb(2),o.Zc(n.getFacilityBookingName(a,a.apartmentFacilityId)),o.Hb(2),o.Zc(n.getFacilityBookingSlot(a,a.slotId)),o.Hb(2),o.zc("ngClass",a.facilityBookingStatusId_Label),o.Hb(1),o.Zc(a.facilityBookingStatusId_Label),o.Hb(2),o.Zc(n.getBookedDate(c,a.bookedForDate)),o.Hb(2),o.Zc(n.getUserName(a,a.neededUserId)),o.Hb(2),o.zc("ngIf",a.amount>0),o.Hb(1),o.zc("ngIf",0==a.amount),o.Hb(2),o.Bc("routerLink","/ams/facility/edit-booking/",a.apartmentFacilityBookingId,""),o.zc("routerLinkActiveOptions",o.Fc(11,G))}}function K(t,e){if(1&t){var i=o.cc();o.bc(0,"div",3),o.bc(1,"div",4),o.bc(2,"div",5),o.bc(3,"h5"),o.Yc(4,"All Bookings "),o.bc(5,"span",6),o.Yc(6),o.ac(),o.ac(),o.ac(),o.bc(7,"ul",7),o.bc(8,"li",8),o.Xb(9,"i",9),o.bc(10,"input",10),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().bookingData=t})),o.ac(),o.ac(),o.bc(11,"li",11),o.bc(12,"a",12),o.Xb(13,"i-feather",13),o.bc(14,"span"),o.Yc(15,"Create Booking"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(16,"div",14),o.bc(17,"table",15),o.bc(18,"thead"),o.bc(19,"tr"),o.bc(20,"th",16),o.Yc(21,"Facility Name "),o.bc(22,"span",17),o.nc("click",(function(){return o.Pc(i),o.rc().sortUnitData("facilityName")})),o.ac(),o.bc(23,"app-simple-select-box",18),o.nc("inputChange",(function(t){return o.Pc(i),o.rc().onSelectChange(t,"facilityName","facilityName")})),o.ac(),o.ac(),o.bc(24,"th",16),o.Yc(25,"Slot "),o.bc(26,"span",17),o.nc("click",(function(){return o.Pc(i),o.rc().sortUnitData("apartmentFacilitySlot")})),o.ac(),o.bc(27,"app-simple-select-box",19),o.nc("inputChange",(function(t){return o.Pc(i),o.rc().onSelectChange(t,"apartmentFacilitySlot","slotBeginTime")})),o.ac(),o.ac(),o.bc(28,"th",16),o.Yc(29,"Status "),o.bc(30,"span",17),o.nc("click",(function(){return o.Pc(i),o.rc().sortUnitData("facilityBookingStatusId_Label")})),o.ac(),o.bc(31,"app-simple-select-box",20),o.nc("inputChange",(function(t){return o.Pc(i),o.rc().onSelectChange(t,"facilityBookingStatusId_Label","lookupValueName")})),o.ac(),o.ac(),o.bc(32,"th",16),o.Yc(33,"Booked For "),o.bc(34,"span",17),o.nc("click",(function(){return o.Pc(i),o.rc().sortUnitData("facilityBookedForDate")})),o.ac(),o.bc(35,"app-simple-date-box",21),o.nc("inputChange",(function(t){return o.Pc(i),o.rc().onDateChange(t,"facilityBookedForDate")})),o.ac(),o.ac(),o.bc(36,"th",16),o.Yc(37,"User Name "),o.bc(38,"span",17),o.nc("click",(function(){return o.Pc(i),o.rc().sortUnitData("userName")})),o.ac(),o.bc(39,"input",22),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().columnField.userName=t}))("ngModelChange",(function(){return o.Pc(i),o.rc().selectColInput("userName")})),o.ac(),o.ac(),o.bc(40,"th",16),o.Yc(41,"Cost "),o.bc(42,"span",17),o.nc("click",(function(){return o.Pc(i),o.rc().sortUnitData("amount")})),o.ac(),o.bc(43,"input",23),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().columnField.amount=t}))("ngModelChange",(function(){return o.Pc(i),o.rc().selectColInput("amount")})),o.ac(),o.ac(),o.bc(44,"th",24),o.Yc(45," Actions "),o.bc(46,"input",25),o.nc("ngModelChange",(function(t){return o.Pc(i),o.rc().columnField.action=t}))("ngModelChange",(function(){return o.Pc(i),o.rc().selectColInput("action")})),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(47,"tbody"),o.Wc(48,J,20,12,"tr",26),o.sc(49,"slice"),o.sc(50,"sort"),o.sc(51,"columnSearch"),o.sc(52,"simpleSearch"),o.ac(),o.ac(),o.bc(53,"app-pagination",27),o.nc("outputParams",(function(t){return o.Pc(i),o.rc().getIndexParams(t)})),o.ac(),o.ac(),o.ac()}if(2&t){var a=o.rc();o.Hb(6),o.Zc(a.totalItems),o.Hb(4),o.zc("ngModel",a.bookingData),o.Hb(2),o.zc("routerLinkActiveOptions",o.Fc(43,G)),o.Hb(5),o.zc("ngClass",a.isMobileView()),o.Hb(5),o.zc("ngClass",a.getFieldOrderBy("facilityName")),o.Hb(1),o.zc("fieldModel",a.apartmentFacilityId)("fieldRequired","required")("fieldList",a.facilityCategoryData),o.Hb(3),o.zc("ngClass",a.getFieldOrderBy("apartmentFacilitySlot")),o.Hb(1),o.zc("fieldModel",a.apartmentFacilitySlotId)("fieldRequired","required")("fieldList",a.facilitySlotData),o.Hb(3),o.zc("ngClass",a.getFieldOrderBy("facilityBookingStatusId_Label")),o.Hb(1),o.zc("fieldModel",a.facilityBookingStatusId)("fieldRequired","required")("fieldList",a.statusTypeData),o.Hb(3),o.zc("ngClass",a.getFieldOrderBy("facilityBookedForDate")),o.Hb(1),o.zc("dateModel",a.facilityBookedForDate),o.Hb(3),o.zc("ngClass",a.getFieldOrderBy("userName")),o.Hb(1),o.zc("ngModel",a.columnField.userName),o.Hb(3),o.zc("ngClass",a.getFieldOrderBy("amount")),o.Hb(1),o.zc("ngModel",a.columnField.amount),o.Hb(3),o.zc("ngModel",a.columnField.action),o.Hb(2),o.zc("ngForOf",o.vc(49,28,o.vc(50,32,o.vc(51,36,o.uc(52,40,a.bookingListData,a.bookingData),a.columnField,a.selectedInput),a.unitFieldType,a.unitOrder),a.ItemUserStartIndex,a.ItemUserEndIndex)),o.Hb(5),o.zc("totalItems",a.totalItems)("ItemStartIndex",a.ItemStartIndex)("ItemEndIndex",a.ItemEndIndex)("itemLimit",a.itemLimit)}}var tt,et=((tt=function(){function t(e,i,a,c,n,o,r,l){_classCallCheck(this,t),this.router=e,this.route=i,this.injector=a,this.userService=c,this.facilityService=n,this.lookupService=o,this.sharedService=r,this.cookieService=l,this.isBookingDataLoaded=!1,this.unitFieldType="facilityName",this.unitOrder=!0,this.ItemStartIndex=0,this.itemLimit=10,this.bookingData="",this.staffData="",this.selectedInput="",this.columnField={},this.modalService=this.injector.get(u.a)}return _createClass(t,[{key:"getIndexParams",value:function(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}},{key:"sortUnitData",value:function(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}},{key:"getFieldOrderBy",value:function(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}},{key:"selectColInput",value:function(t){this.selectedInput=t}},{key:"onSelectChange",value:function(t,e,i){X.isEmpty(t)?this.columnField={}:(this.selectedInput=e,this.columnField[e]=t[i])}},{key:"onDateChange",value:function(t,e){null!=t?(this.selectedInput=e,this.columnField[e]=m(t).format("DD/MM/YYYY")):this.columnField={}}},{key:"isMobileView",value:function(){return window.innerWidth<=767?"table-responsive":""}},{key:"getFacilityBookingName",value:function(t,e){var i=X.filter(this.facilityCategoryData,(function(t){if(t.apartmentFacilityId===e)return t}));return void 0===i||0==i.length?"":(this.bookingListData.map((function(e){e.apartmentFacilityBookingId==t.apartmentFacilityBookingId&&(e.facilityName=i[0].facilityName)})),i[0].facilityName)}},{key:"getFacilityBookingSlot",value:function(t,e){var i=X.filter(this.facilitySlotData,(function(t){if(t.apartmentFacilitySlotId===e)return t}));if(void 0===i||0==i.length)return"";var a=m(i[0].slotBeginTime,"HH:mm:ss").toDate(),c=m(a).format("HH:mm A"),n=m(i[0].slotEndTime,"HH:mm:ss").toDate(),o=m(n).format("HH:mm A");return this.bookingListData.map((function(e){e.apartmentFacilityBookingId==t.apartmentFacilityBookingId&&(e.apartmentFacilitySlot=c)})),c+" - "+o}},{key:"getBookedDate",value:function(t,e){return X.each(this.bookingListData,(function(t,e){t.facilityBookedForDate=m(t.bookedForDate).format("DD/MM/YYYY")})),m(e).format("DD/MM/YYYY")}},{key:"getUserName",value:function(t,e){var i=X.filter(this.userListData,(function(t){if(t.userId===e)return t}));return void 0===i||0==i.length?"":(this.bookingListData.map((function(e){e.apartmentFacilityBookingId==t.apartmentFacilityBookingId&&(e.userName=i[0].firstName)})),i[0].firstName)}},{key:"getBookingStatus",value:function(t,e){var i=X.filter(this.statusTypeData,(function(t){if(t.lookupValueId===e)return t}));return void 0===i||0==i.length?"":(this.bookingListData.map((function(e){e.apartmentFacilityBookingId==t.apartmentFacilityBookingId&&(e.facilityBookingStatus=i[0].lookupValueName.toLowerCase())})),i[0].lookupValueName.toLowerCase())}},{key:"showConfirmModal",value:function(t){this.modalService.showConfirmModal(t)}},{key:"ngOnInit",value:function(){var t=this;this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(e){t.facilityCategoryData=e.filter((function(t){return t.isActive}))}),(function(t){})),this.lookupService.getLookupValueByLookupTypeId(40).subscribe((function(e){t.statusTypeData=e.filter((function(t){return t.isActive}))}),(function(t){})),this.facilityService.getApartmentFacilitySlotsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(e){t.facilitySlotData=e.filter((function(t){return t.isActive})),X.each(t.facilitySlotData,(function(t){var e=m(t.slotBeginTime,"HH:mm:ss").toDate(),i=m(e).format("HH:mm A");t.slotBeginTime=i}))}),(function(t){})),this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(e){t.userListData=e.filter((function(t){return t.isActive}))}),(function(t){})),this.facilityService.getApartmentFacilityBookingsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(e){t.bookingListData=e.filter((function(t){return t.isActive})),t.totalItems=t.bookingListData.length,t.ItemEndIndex=t.totalItems>t.itemLimit?t.itemLimit:t.totalItems,t.isBookingDataLoaded=!0}),(function(t){})),this.sharedService.unitlistdeleteindexcast.subscribe((function(e){if(null!=e){var i={apartmentFacilityBookingId:e,deleteBy:parseInt(t.cookieService.get("userId"))};t.facilityService.deleteApartmentFacilityBooking(i).subscribe((function(i){X.each(t.bookingListData,(function(t){t.apartmentFacilityBookingId==e&&(t.isActive=!1)})),setTimeout((function(){t.bookingListData=t.bookingListData.filter((function(t){return t.ticketId!==e})),t.totalItems=t.bookingListData.length,t.sharedService.setAlertMessage("Booking deleted"),t.sharedService.setUnitListDeleteIndex(null)}),500)}),(function(t){console.log(t)}))}}))}}]),t}()).\u0275fac=function(t){return new(t||tt)(o.Wb(n.c),o.Wb(n.a),o.Wb(o.s),o.Wb(q.a),o.Wb(l.a),o.Wb(s.a),o.Wb(d.a),o.Wb(g.a))},tt.\u0275cmp=o.Qb({type:tt,selectors:[["app-facility-booking-actions"]],decls:3,vars:2,consts:[[1,"facilitybooking-actions-wrapper"],[4,"ngIf"],["class","card table-card",4,"ngIf"],[1,"card","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],["routerLink","/ams/facility/create-booking","routerLinkActive","active",1,"btn","lime-green","mt_5",3,"routerLinkActiveOptions"],["name","plus",1,"icon","plus"],[1,"card-body","p-0"],[1,"table","table-checker","table-resizable",3,"ngClass"],["scope","col"],[3,"ngClass","click"],["fieldName","facilityName","fieldText","","fieldItemName","facilityName","isLabel","false","fieldPlaceholder","Select",3,"fieldModel","fieldRequired","fieldList","inputChange"],["fieldName","apartmentFacilitySlot","fieldText","","fieldItemName","slotBeginTime","isLabel","false","fieldPlaceholder","Select",3,"fieldModel","fieldRequired","fieldList","inputChange"],["fieldName","facilityBookingStatusId_Label","fieldText","","fieldItemName","lookupValueName","isLabel","false","fieldPlaceholder","Select",3,"fieldModel","fieldRequired","fieldList","inputChange"],[3,"dateModel","inputChange"],["type","text","placeholder","User Name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Cost",1,"form-control",3,"ngModel","ngModelChange"],["scope","col",1,"simple-actions"],["type","text","placeholder","Action",1,"form-control","vis-h",3,"ngModel","ngModelChange"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[3,"ngClass"],[1,"name"],[1,"grey"],[1,"badge","small","min","text-capitalize",3,"ngClass"],[1,"grey","text-capitalize"],[1,"simple-actions"],["href","javascript:void(0)","placement","top","routerLinkActive","active",1,"mr-2",3,"routerLink","routerLinkActiveOptions"],["name","edit",1,"icon","edit"],["href","javascript:void(0)",3,"click"],["name","trash",1,"icon","delete"]],template:function(t,e){1&t&&(o.bc(0,"div",0),o.Wc(1,V,1,0,"app-loader",1),o.Wc(2,K,54,44,"div",2),o.ac()),2&t&&(o.Hb(1),o.zc("ngIf",!e.isBookingDataLoaded),o.Hb(1),o.zc("ngIf",e.isBookingDataLoaded))},directives:[c.l,p.a,v.b,h.d,h.l,h.o,n.e,n.d,b.b,v.d,c.j,U.a,Z.a,c.k,R.a],pipes:[c.t,j.a,j.b,j.e],styles:[""]}),tt),it=i("iOEq"),at=i("IvIE");function ct(t,e){1&t&&o.Xb(0,"app-loader")}var nt=function(){return{left:"today, prev,next",center:"title",right:"dayGridDay,dayGridWeek,dayGridMonth"}};function ot(t,e){if(1&t){var i=o.cc();o.Zb(0),o.bc(1,"full-calendar",2),o.nc("eventClick",(function(t){return o.Pc(i),o.rc().handleEventClick(t)})),o.ac(),o.Yb()}if(2&t){var a=o.rc();o.Hb(1),o.zc("plugins",a.calendarPlugins)("header",o.Fc(3,nt))("events",a.calendarEvents)}}var rt,lt,st,dt=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:E},{path:"create-booking",component:W.a},{path:"edit-booking/:id",component:W.a},{path:"calendar",component:(rt=function(){function t(e,i,a,c,o,r){var l=this;_classCallCheck(this,t),this.router=e,this.route=i,this.facilityService=a,this.lookupService=c,this.sharedService=o,this.cookieService=r,this.calendarPlugins=[it.a],this.calendarEvents=[],this.isCalenderLoaded=!1,this.router.events.subscribe((function(t){t instanceof n.b&&-1!=l.router.url.indexOf("facility")&&l.getFacilityBookingData()}))}return _createClass(t,[{key:"handleEventClick",value:function(t){this.router.navigate(["/ams/facility/edit-booking",t.event.id])}},{key:"getFacilityBookingData",value:function(){var t=this;this.facilityService.getApartmentFacilitySlotsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(e){t.facilitySlotData=e.filter((function(t){return t.isActive}))}),(function(t){})),this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(e){t.facilityCategoryData=e.filter((function(t){return t.isActive})),t.facilityService.getApartmentFacilityBookingsByApartmentId(parseInt(t.cookieService.get("apartmentId"))).subscribe((function(e){t.facilityBookingData=e.filter((function(t){return t.isActive})),X.each(t.facilityBookingData,(function(e){var i=m(e.bookedForDate).format("YYYY-MM-DD"),a=t.facilityCategoryData.filter((function(t){return t.apartmentFacilityId==e.apartmentFacilityId})),c=t.facilitySlotData.filter((function(t){return t.apartmentFacilitySlotId==e.slotId})),n=m(c[0].slotBeginTime,"HH:mm:ss").toDate(),o=m(n).format("HH:mm A"),r=m(c[0].slotEndTime,"HH:mm:ss").toDate(),l=m(r).format("HH:mm A");t.calendarEvents.push({title:a[0].facilityName+" ( "+o+"-"+l+" ) ",date:i,id:a[0].apartmentFacilityId}),t.isCalenderLoaded=!0}))}),(function(t){}))}),(function(t){}))}},{key:"ngOnInit",value:function(){}}]),t}(),rt.\u0275fac=function(t){return new(t||rt)(o.Wb(n.c),o.Wb(n.a),o.Wb(l.a),o.Wb(s.a),o.Wb(d.a),o.Wb(g.a))},rt.\u0275cmp=o.Qb({type:rt,selectors:[["app-full-calendar"]],decls:3,vars:2,consts:[[1,"full-calendar-wrapper"],[4,"ngIf"],["defaultView","dayGridMonth",3,"plugins","header","events","eventClick"]],template:function(t,e){1&t&&(o.bc(0,"div",0),o.Wc(1,ct,1,0,"app-loader",1),o.Wc(2,ot,2,4,"ng-container",1),o.ac()),2&t&&(o.Hb(1),o.zc("ngIf",!e.isCalenderLoaded),o.Hb(1),o.zc("ngIf",e.isCalenderLoaded))},directives:[c.l,p.a,at.a],styles:[""]}),rt)},{path:"all-bookings",component:et},{path:"reports",component:r},{path:"**",redirectTo:"settings",pathMatch:"full"}],ut=((lt=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ub({type:lt}),lt.\u0275inj=o.Tb({factory:function(t){return new(t||lt)},imports:[[n.f.forChild(dt)],n.f]}),lt),mt=i("PCNd"),ft=((st=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||st)},st.\u0275cmp=o.Qb({type:st,selectors:[["app-facility"]],decls:1,vars:0,template:function(t,e){1&t&&o.Xb(0,"router-outlet")},directives:[n.g],styles:[""]}),st);i.d(e,"FacilityModule",(function(){return pt}));var gt,pt=((gt=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ub({type:gt,bootstrap:[ft]}),gt.\u0275inj=o.Tb({factory:function(t){return new(t||gt)},imports:[[c.b,mt.a,ut]]}),gt)},wlDI:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var a=i("fXoL"),c=i("ofXK"),n=i("8mtn"),o=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Qb({type:t,selectors:[["app-alert-message"]],inputs:{message:"message",isAlert:"isAlert",isSuccess:"isSuccess",isError:"isError"},decls:11,vars:4,consts:[[1,"alert-wrapper"],[1,"custom-alert",3,"ngClass"],[1,"icon-wrapper","float-left"],["name","x","width","20",1,"icon","del","float-left"],[1,"float-left"],["name","check","width","20",1,"icon","del","float-left"]],template:function(t,e){1&t&&(a.bc(0,"div",0),a.bc(1,"div",1),a.bc(2,"div",2),a.Xb(3,"i-feather",3),a.ac(),a.bc(4,"p",4),a.Yc(5),a.ac(),a.ac(),a.bc(6,"div",1),a.bc(7,"div",2),a.Xb(8,"i-feather",5),a.ac(),a.bc(9,"p",4),a.Yc(10),a.ac(),a.ac(),a.ac()),2&t&&(a.Hb(1),a.zc("ngClass",e.isError?"show error":""),a.Hb(4),a.Zc(e.message),a.Hb(1),a.zc("ngClass",e.isSuccess?"show success":""),a.Hb(4),a.Zc(e.message))},directives:[c.j,n.b],styles:[".alert-wrapper[_ngcontent-%COMP%]{position:relative;top:-20px;left:-20px}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert[_ngcontent-%COMP%]{font-family:Lato,sans-serif;font-weight:400;letter-spacing:.3px;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;font-size:1.4rem;padding:0 15px;border-radius:0!important;width:calc(100% + 40px);overflow:hidden;height:0;transition:all .15s ease}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:22px;height:22px;display:flex;justify-content:center;align-items:center;background-color:#f1dddd;border-radius:22px!important;margin:8px 0 0}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:15px;cursor:auto;margin:-1px 0 0}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:95%;margin:9px 0 0 10px!important;font-size:1.4rem;color:#8e4d40}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show[_ngcontent-%COMP%]{max-height:200px;height:40px;top:0;left:0;border-bottom:1px solid #eaeaea;transition:all .15s ease}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.error[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{background-color:#f1dddd}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.error[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ea7962}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.success[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{background-color:#5cd694}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.success[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#fff}.alert-wrapper[_ngcontent-%COMP%]   .custom-alert.show.success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#5cd694}"]}),t}()}}]);