function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var e=0;e<t.length;e++){var c=t[e];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}function _createClass(i,t,e){return t&&_defineProperties(i.prototype,t),e&&_defineProperties(i,e),i}(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{y3SW:function(i,t,e){"use strict";e.r(t);var c,r=e("ofXK"),n=e("tyNb"),o=e("fXoL"),a=e("3Pt+"),s=((c=function(){function i(){_classCallCheck(this,i),this.sendNotification=!1,this.captureVehiclesDetails=!1,this.sendSMS=!1}return _createClass(i,[{key:"submitVisitorSettingsForm",value:function(i){}},{key:"ngOnInit",value:function(){}}]),i}()).\u0275fac=function(i){return new(i||c)},c.\u0275cmp=o.Qb({type:c,selectors:[["app-visitor-setup"]],decls:41,vars:3,consts:[[1,"visitor-settings"],[1,"card","mb-30"],[1,"card-header"],[1,"float-left"],[1,"d-none","d-md-inline-block"],[1,"card-body"],["name","visitorSettingsForm","novalidate","",3,"ngSubmit"],["visitorSettingsForm","ngForm"],[1,"row"],[1,"col-sm-12"],[1,"list-group"],[1,"list-group-item","p-0","no-border","mb-3"],[1,"form-group"],[1,"form-check","medium","float-left"],["type","checkbox","id","sendNotification","name","sendNotification",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendNotification",1,"form-check-label"],["type","checkbox","id","captureVehiclesDetails","name","captureVehiclesDetails",1,"form-check-input",3,"ngModel","ngModelChange"],["for","captureVehiclesDetails",1,"form-check-label"],["type","checkbox","id","sendSMS","name","sendSMS",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendSMS",1,"form-check-label"],[1,"list-inline","float-right","mt-4"],[1,"list-inline-item"],["href","javascript:void(0)",1,"btn","blue","mr-2"]],template:function(i,t){if(1&i){var e=o.cc();o.bc(0,"div",0),o.bc(1,"div",1),o.bc(2,"div",2),o.bc(3,"div",3),o.bc(4,"h5"),o.Yc(5,"Settings"),o.ac(),o.bc(6,"p",4),o.Yc(7,"Edit and Save the Settings"),o.ac(),o.ac(),o.ac(),o.bc(8,"div",5),o.bc(9,"form",6,7),o.nc("ngSubmit",(function(){o.Pc(e);var i=o.Mc(10);return t.submitVisitorSettingsForm(i)})),o.bc(11,"div",8),o.bc(12,"div",9),o.bc(13,"ul",10),o.bc(14,"li",11),o.bc(15,"div",12),o.bc(16,"div",13),o.bc(17,"input",14),o.nc("ngModelChange",(function(i){return t.sendNotification=i})),o.ac(),o.Xb(18,"label",15),o.bc(19,"p"),o.Yc(20,"Send Mobile App notifications to resident of flat on vsisitors check-in"),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(21,"li",11),o.bc(22,"div",12),o.bc(23,"div",13),o.bc(24,"input",16),o.nc("ngModelChange",(function(i){return t.captureVehiclesDetails=i})),o.ac(),o.Xb(25,"label",17),o.bc(26,"p"),o.Yc(27,"Capture complete vehicle details"),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(28,"li",11),o.bc(29,"div",12),o.bc(30,"div",13),o.bc(31,"input",18),o.nc("ngModelChange",(function(i){return t.sendSMS=i})),o.ac(),o.Xb(32,"label",19),o.bc(33,"p"),o.Yc(34,"Send SMS to resident of flat on vsisitors check-in"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(35,"div",8),o.bc(36,"div",9),o.bc(37,"ul",20),o.bc(38,"li",21),o.bc(39,"a",22),o.Yc(40,"Save"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac()}2&i&&(o.Hb(17),o.zc("ngModel",t.sendNotification),o.Hb(7),o.zc("ngModel",t.captureVehiclesDetails),o.Hb(7),o.zc("ngModel",t.sendSMS))},directives:[a.z,a.m,a.n,a.a,a.l,a.o],styles:[""]}),c),d=e("NutR"),l=e("wbvY"),u=e("ThaB"),b=e("Yt4J"),v=e("S4bl"),p=e("DtdB"),m=e("wd/R"),h=e("b6Qw"),g=e("8mtn"),f=e("wlDI"),I=e("668k"),k=e("BR9Y"),y=e("BniF");function C(i,t){1&i&&(o.bc(0,"span"),o.Yc(1,"Expected Visitor Checkin"),o.ac())}function M(i,t){1&i&&(o.bc(0,"span"),o.Yc(1,"Edit Expected Visitor"),o.ac())}function T(i,t){1&i&&o.Xb(0,"app-loader")}function V(i,t){if(1&i&&(o.bc(0,"option",39),o.Yc(1),o.ac()),2&i){var e=t.$implicit;o.zc("value",e.lookupValueId),o.Hb(1),o.Zc(e.lookupValueName)}}function D(i,t){if(1&i&&(o.bc(0,"option",39),o.Yc(1),o.ac()),2&i){var e=t.$implicit;o.zc("value",e.lookupValueId),o.Hb(1),o.Zc(e.lookupValueName)}}function S(i,t){if(1&i){var e=o.cc();o.bc(0,"div",19),o.bc(1,"div",20),o.bc(2,"label"),o.Yc(3,"Tenant block-No*"),o.ac(),o.bc(4,"input",40),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(3).visitor.apartmentBlockNumber=i})),o.ac(),o.ac(),o.ac()}if(2&i){var c=o.rc(3);o.Hb(4),o.zc("ngModel",c.visitor.apartmentBlockNumber)}}function x(i,t){if(1&i){var e=o.cc();o.bc(0,"div",19),o.bc(1,"div",20),o.bc(2,"label"),o.Yc(3,"Tenant Unit-No*"),o.ac(),o.bc(4,"input",41),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(3).visitor.apartmentBlockUnitNumber=i})),o.ac(),o.ac(),o.ac()}if(2&i){var c=o.rc(3);o.Hb(4),o.zc("ngModel",c.visitor.apartmentBlockUnitNumber)}}function H(i,t){if(1&i){var e=o.cc();o.bc(0,"div",19),o.bc(1,"div",20),o.bc(2,"label"),o.Yc(3,"Staff Id*"),o.ac(),o.bc(4,"input",42),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(3).visitor.staffId=i})),o.ac(),o.ac(),o.ac()}if(2&i){var c=o.rc(3);o.Hb(4),o.zc("ngModel",c.visitor.staffId)}}function Y(i,t){if(1&i){var e=o.cc();o.bc(0,"div",14),o.bc(1,"div",19),o.bc(2,"div",20),o.bc(3,"label"),o.Yc(4,"Expected Visitor Name*"),o.ac(),o.bc(5,"input",21),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.expectedVisitorName=i})),o.ac(),o.ac(),o.ac(),o.bc(6,"div",19),o.bc(7,"div",20),o.bc(8,"label"),o.Yc(9,"Expected Visitor Count*"),o.ac(),o.bc(10,"input",22),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.expectedVisitorCount=i})),o.ac(),o.ac(),o.ac(),o.bc(11,"div",19),o.bc(12,"div",20),o.bc(13,"label"),o.Yc(14,"Expected Phone/Mobile*"),o.ac(),o.bc(15,"input",23),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.expectedVisitorPhone=i})),o.ac(),o.ac(),o.ac(),o.bc(16,"div",19),o.bc(17,"div",20),o.bc(18,"label"),o.Yc(19,"Expected Visitor In-time*"),o.ac(),o.bc(20,"input",24),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.expectedVisitorInTime=i}))("ngModelChange",(function(){return o.Pc(e),o.rc(2).expectedDurationChange()})),o.ac(),o.Xb(21,"owl-date-time",null,25),o.bc(23,"div",26),o.Xb(24,"i-feather",27),o.ac(),o.ac(),o.ac(),o.bc(25,"div",19),o.bc(26,"div",20),o.bc(27,"label"),o.Yc(28,"Expected Visitor Out-time*"),o.ac(),o.bc(29,"input",28),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.visitorOutTime=i}))("ngModelChange",(function(){return o.Pc(e),o.rc(2).expectedDurationChange()})),o.ac(),o.Xb(30,"owl-date-time",null,29),o.bc(32,"div",26),o.Xb(33,"i-feather",27),o.ac(),o.ac(),o.ac(),o.bc(34,"div",19),o.bc(35,"div",20),o.bc(36,"label"),o.Yc(37,"Expected Duration*"),o.ac(),o.bc(38,"input",30),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.expectedDuration=i})),o.ac(),o.ac(),o.ac(),o.bc(39,"div",19),o.bc(40,"div",20),o.bc(41,"label"),o.Yc(42,"Pass Number*"),o.ac(),o.bc(43,"input",31),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.passNumber=i})),o.ac(),o.ac(),o.ac(),o.bc(44,"div",19),o.bc(45,"div",32),o.bc(46,"label"),o.Yc(47,"Expected Visit Type*"),o.ac(),o.bc(48,"select",33),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitTypeId=i}))("ngModelChange",(function(){o.Pc(e);var i=o.rc(2);return i.changeVisitorType(i.visitTypeId)})),o.bc(49,"option",34),o.Yc(50,"Select"),o.ac(),o.Wc(51,V,2,2,"option",35),o.ac(),o.ac(),o.ac(),o.bc(52,"div",19),o.bc(53,"div",32),o.bc(54,"label"),o.Yc(55,"Expected Visit Category*"),o.ac(),o.bc(56,"select",36),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitCategoryId=i})),o.bc(57,"option",34),o.Yc(58,"Select"),o.ac(),o.Wc(59,D,2,2,"option",35),o.ac(),o.ac(),o.ac(),o.Wc(60,S,5,1,"div",37),o.Wc(61,x,5,1,"div",37),o.Wc(62,H,5,1,"div",37),o.bc(63,"div",19),o.bc(64,"div",20),o.bc(65,"label"),o.Yc(66,"Purpose"),o.ac(),o.bc(67,"textarea",38),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.purpose=i})),o.ac(),o.ac(),o.ac(),o.ac()}if(2&i){var c=o.Mc(22),r=o.Mc(31),n=o.rc(2);o.Hb(5),o.zc("ngModel",n.visitor.expectedVisitorName),o.Hb(5),o.zc("ngModel",n.visitor.expectedVisitorCount),o.Hb(5),o.zc("ngModel",n.visitor.expectedVisitorPhone),o.Hb(5),o.zc("owlDateTime",c)("owlDateTimeTrigger",c)("ngModel",n.visitor.expectedVisitorInTime)("disabled",!0),o.Hb(3),o.zc("owlDateTimeTrigger",c),o.Hb(6),o.zc("owlDateTime",r)("owlDateTimeTrigger",r)("ngModel",n.visitor.visitorOutTime),o.Hb(3),o.zc("owlDateTimeTrigger",r),o.Hb(6),o.zc("ngModel",n.visitor.expectedDuration)("disabled",!0),o.Hb(5),o.zc("ngModel",n.visitor.passNumber),o.Hb(5),o.zc("ngModel",n.visitTypeId),o.Hb(3),o.zc("ngForOf",n.visitByData),o.Hb(5),o.zc("ngModel",n.visitCategoryId),o.Hb(3),o.zc("ngForOf",n.visitCategoryData),o.Hb(1),o.zc("ngIf",n.isUnitVisitor),o.Hb(1),o.zc("ngIf",n.isUnitVisitor),o.Hb(1),o.zc("ngIf",n.iscommunityVisitor),o.Hb(5),o.zc("ngModel",n.visitor.purpose)}}function P(i,t){if(1&i&&(o.bc(0,"option",39),o.Yc(1),o.ac()),2&i){var e=t.$implicit;o.zc("value",e.lookupValueId),o.Hb(1),o.Zc(e.lookupValueName)}}function O(i,t){if(1&i&&(o.bc(0,"option",39),o.Yc(1),o.ac()),2&i){var e=t.$implicit;o.zc("value",e.lookupValueId),o.Hb(1),o.Zc(e.lookupValueName)}}function N(i,t){if(1&i){var e=o.cc();o.bc(0,"div",14),o.bc(1,"div",19),o.bc(2,"div",20),o.bc(3,"label"),o.Yc(4,"Expected Visitor Name*"),o.ac(),o.bc(5,"input",21),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.visitorName=i})),o.ac(),o.ac(),o.ac(),o.bc(6,"div",19),o.bc(7,"div",20),o.bc(8,"label"),o.Yc(9,"Expected Visitor Count*"),o.ac(),o.bc(10,"input",22),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.visitorCount=i})),o.ac(),o.ac(),o.ac(),o.bc(11,"div",19),o.bc(12,"div",20),o.bc(13,"label"),o.Yc(14,"Phone/Mobile*"),o.ac(),o.bc(15,"input",23),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.visitorPhone=i})),o.ac(),o.ac(),o.ac(),o.bc(16,"div",19),o.bc(17,"div",20),o.bc(18,"label"),o.Yc(19,"Expected Visitor In-time*"),o.ac(),o.bc(20,"input",43),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.visitorInTime=i})),o.ac(),o.Xb(21,"owl-date-time",44,25),o.bc(23,"div",26),o.Xb(24,"i-feather",27),o.ac(),o.ac(),o.ac(),o.bc(25,"div",19),o.bc(26,"div",20),o.bc(27,"label"),o.Yc(28,"Expected Visitor Out-time"),o.ac(),o.bc(29,"input",45),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.visitorOutTime=i})),o.ac(),o.Xb(30,"owl-date-time",44,29),o.bc(32,"div",26),o.Xb(33,"i-feather",27),o.ac(),o.ac(),o.ac(),o.bc(34,"div",19),o.bc(35,"div",20),o.bc(36,"label"),o.Yc(37,"Expected Duration*"),o.ac(),o.bc(38,"input",46),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.expectedDuration=i})),o.ac(),o.ac(),o.ac(),o.bc(39,"div",19),o.bc(40,"div",20),o.bc(41,"label"),o.Yc(42,"Pass Number*"),o.ac(),o.bc(43,"input",31),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitor.passNumber=i})),o.ac(),o.ac(),o.ac(),o.bc(44,"div",19),o.bc(45,"div",32),o.bc(46,"label"),o.Yc(47,"Expected Visit Type*"),o.ac(),o.bc(48,"select",33),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitTypeId=i})),o.bc(49,"option",34),o.Yc(50,"Select"),o.ac(),o.Wc(51,P,2,2,"option",35),o.ac(),o.ac(),o.ac(),o.bc(52,"div",19),o.bc(53,"div",32),o.bc(54,"label"),o.Yc(55,"Expected Visit Category*"),o.ac(),o.bc(56,"select",36),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc(2).visitCategoryId=i})),o.bc(57,"option",34),o.Yc(58,"Select"),o.ac(),o.Wc(59,O,2,2,"option",35),o.ac(),o.ac(),o.ac(),o.ac()}if(2&i){var c=o.Mc(22),r=o.Mc(31),n=o.rc(2);o.Hb(5),o.zc("ngModel",n.visitor.visitorName),o.Hb(5),o.zc("ngModel",n.visitor.visitorCount),o.Hb(5),o.zc("ngModel",n.visitor.visitorPhone),o.Hb(5),o.zc("owlDateTime",c)("owlDateTimeTrigger",c)("min",n.minDate)("max",n.minDate)("disabled",!0)("ngModel",n.visitor.visitorInTime),o.Hb(1),o.zc("min",n.minDate),o.Hb(2),o.zc("owlDateTimeTrigger",c),o.Hb(6),o.zc("owlDateTime",r)("owlDateTimeTrigger",r)("min",n.minDate)("max",n.minDate)("ngModel",n.visitor.visitorOutTime),o.Hb(1),o.zc("min",n.minDate),o.Hb(2),o.zc("owlDateTimeTrigger",r),o.Hb(6),o.zc("ngModel",n.visitor.expectedDuration),o.Hb(5),o.zc("ngModel",n.visitor.passNumber),o.Hb(5),o.zc("ngModel",n.visitTypeId),o.Hb(3),o.zc("ngForOf",n.visitByData),o.Hb(5),o.zc("ngModel",n.visitCategoryId),o.Hb(3),o.zc("ngForOf",n.visitCategoryData)}}function z(i,t){if(1&i&&(o.bc(0,"button",47),o.Yc(1,"Check In"),o.ac()),2&i){o.rc();var e=o.Mc(2);o.zc("disabled",e.invalid)}}function L(i,t){if(1&i&&(o.bc(0,"button",47),o.Yc(1,"Check Out"),o.ac()),2&i){o.rc();var e=o.Mc(2);o.zc("disabled",e.invalid)}}function w(i,t){if(1&i){var e=o.cc();o.Zb(0),o.bc(1,"form",11,12),o.nc("ngSubmit",(function(){o.Pc(e);var i=o.Mc(2);return o.rc().submitAddVisitorForm(i)})),o.Wc(3,Y,68,23,"div",13),o.Wc(4,N,60,24,"div",13),o.bc(5,"div",14),o.bc(6,"div",15),o.bc(7,"ul",16),o.bc(8,"li",17),o.Wc(9,z,2,1,"button",18),o.ac(),o.bc(10,"li",17),o.Wc(11,L,2,1,"button",18),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.Yb()}if(2&i){var c=o.rc();o.Hb(3),o.zc("ngIf",!c.isCheckout()),o.Hb(1),o.zc("ngIf",c.isCheckout()),o.Hb(5),o.zc("ngIf",!c.isCheckout()),o.Hb(2),o.zc("ngIf",c.isCheckout())}}function B(i,t){1&i&&(o.bc(0,"h5",3),o.Yc(1,"Visitor Checked In successfully!"),o.ac())}function E(i,t){1&i&&(o.bc(0,"h5",3),o.Yc(1,"Visitor Checked Out successfully!"),o.ac())}function F(i,t){if(1&i&&(o.bc(0,"div",48),o.bc(1,"div",49),o.Xb(2,"i-feather",50),o.ac(),o.Wc(3,B,2,0,"h5",51),o.Wc(4,E,2,0,"h5",51),o.ac()),2&i){var e=o.rc();o.Hb(3),o.zc("ngIf",!e.isCheckout()),o.Hb(1),o.zc("ngIf",e.isCheckout())}}var U,W=function(){return{exact:!0}},A=((U=function(){function i(t,e,c,r,n,o,a,s,d){_classCallCheck(this,i),this.router=t,this.route=e,this.userService=c,this.apartmentService=r,this.visitorService=n,this.lookupService=o,this.sharedService=a,this.cookieService=s,this.SharedToaster=d,this.isEditVisitor=!1,this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!1,this.errorMessage="",this.visitTypeId="",this.isExpectedVisitor=!1,this.visitorStatus="",this.isUnitVisitor=!1,this.iscommunityVisitor=!1,this.minDate=m(new Date).format("YYYY-MM-DD")}return _createClass(i,[{key:"isCheckout",value:function(){return"checkout"==this.visitorStatus}},{key:"submitAddVisitorForm",value:function(i){var t=this;if(this.isVisitorSubmitted=!0,this.isError=!1,!this.isEditVisitor){console.log("fist");var e={apartmentUnitId:this.apartmentUnitId,apartmentId:parseInt(this.cookieService.get("apartmentId")),visitorName:this.visitor.expectedVisitorName,visitorCount:this.visitor.expectedVisitorCount,visitorPhone:this.visitor.expectedVisitorPhone,passNumber:this.visitor.passNumber,visitorInTime:this.visitor.expectedVisitorInTime,visitorOutTime:this.visitor.expectedVisitorOutTime,expectedDuration:this.visitor.expectedDurationInHours,meetingPersonId:1,visitTypeId:parseInt(this.visitTypeId),visitCategoryId:parseInt(this.visitCategoryId),visitorsOrg:"string",entryGateId:null,apartmentBlockNumber:this.visitor.apartmentBlockNumber,apartmentUnitNumber:this.visitor.apartmentBlockUnitNumber,exitGateId:null,purpose:this.visitor.purpose,enteredBy:parseInt(this.cookieService.get("userId")),isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-11-18T17:08:51.188Z",updatedBy:0,updatedOn:"2019-11-18T17:08:51.188Z"};this.visitorService.addVisitor(e).subscribe((function(i){i.message?(t.isVisitorAdded=!0,t.router.navigate(["/ams/visitor/checkout"])):(t.isVisitorSubmitted=!1,t.isVisitorAdded=!1,t.isError=!0,t.errorMessage=i.errorMessage)}),(function(i){t.isVisitorSubmitted=!1,t.isVisitorAdded=!1,t.isError=!0,t.errorMessage=i}))}if(this.isEditVisitor)if(this.isCheckout()){var c={visitorId:parseInt(this.route.params.value.id),apartmentUnitId:this.apartmentUnitId,apartmentId:parseInt(this.cookieService.get("apartmentId")),visitorName:this.visitor.visitorName,visitorCount:this.visitor.visitorCount,visitorPhone:this.visitor.visitorPhone,visitorVehicleTypeId:1,visitorVehicleNumber:"string",visitingPlaceId:1,passNumber:this.visitor.passNumber,isCheckedIn:!0,visitorInTime:this.visitor.visitorInTime,isCheckedOut:!0,visitorOutTime:this.visitor.visitorOutTime,expectedDuration:this.visitor.expectedDurationInHours,meetingPersonId:1,meetingPersonName:"string",visitTypeId:parseInt(this.visitTypeId),visitCategoryId:parseInt(this.visitCategoryId),visitorsOrg:"string",entryGateId:null,exitGateId:null,purpose:this.visitor.purpose,enteredBy:parseInt(this.cookieService.get("userId")),isActive:!0,insertedBy:0,insertedOn:"2019-11-18T17:08:51.188Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-11-18T17:08:51.188Z"};this.visitorService.updateVisitor(c).subscribe((function(i){i.message?t.isVisitorAdded=!0:(t.isVisitorSubmitted=!1,t.isVisitorAdded=!1,t.isError=!0,t.errorMessage=i.errorMessage)}),(function(i){t.isVisitorSubmitted=!1,t.isVisitorAdded=!1,t.isError=!0,t.errorMessage=i}))}else{var r={apartmentUnitId:this.apartmentUnitId,apartmentId:parseInt(this.cookieService.get("apartmentId")),visitorName:this.visitor.expectedVisitorName,visitorCount:this.visitor.expectedVisitorCount,visitorPhone:this.visitor.expectedVisitorPhone,visitorVehicleTypeId:1,visitorVehicleNumber:"string",visitingPlaceId:1,passNumber:this.visitor.passNumber,isCheckedIn:!0,visitorInTime:this.visitor.expectedVisitorInTime,isCheckedOut:!1,visitorOutTime:null,expectedDuration:this.visitor.expectedDurationInHours,meetingPersonId:1,meetingPersonName:"string",visitTypeId:parseInt(this.visitTypeId),visitCategoryId:parseInt(this.visitCategoryId),visitorsOrg:"string",entryGateId:null,exitGateId:null,purpose:this.visitor.purpose,enteredBy:parseInt(this.cookieService.get("userId")),isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-11-18T17:08:51.188Z",updatedBy:0,updatedOn:"2019-11-18T17:08:51.188Z"};this.visitorService.addVisitor(r).subscribe((function(i){i.message?t.isVisitorAdded=!0:(t.isVisitorSubmitted=!1,t.isVisitorAdded=!1,t.isError=!0,t.errorMessage=i.errorMessage)}),(function(i){t.isVisitorSubmitted=!1,t.isVisitorAdded=!1,t.isError=!0,t.errorMessage=i}))}}},{key:"ngOnInit",value:function(){var i=this;this.visitor={},null!=this.route.params.value.id&&(this.isEditVisitor=!0,this.visitorStatus=this.route.params.value.type,"checkout"==this.route.params.value.type?this.visitorService.getVisitorById(this.route.params.value.id).subscribe((function(t){i.visitor=t[0],i.visitTypeId=i.visitor.visitTypeId,i.visitor.purpose=""}),(function(i){})):this.visitorService.getExpectedVisitorById(this.route.params.value.id).subscribe((function(t){i.visitor=t[0],i.visitor.purpose="",i.visitTypeId=i.visitor.visitTypeId,console.log(i.visitor)}),(function(i){}))),this.lookupService.getLookupValueByLookupTypeId(15).subscribe((function(t){i.visitByData=t}),(function(i){})),this.lookupService.getLookupValueByLookupTypeId(8).subscribe((function(t){i.visitCategoryData=t}),(function(i){})),this.apartmentService.getApartmentBlockUnitByUserId(parseInt(this.cookieService.get("userId"))).subscribe((function(t){i.apartmentUnitId=t[0].apartmentBlockUnitId}),(function(i){})),this.visitor.expectedVisitorInTime=m(new Date),this.visitor.visitorInTime=m(new Date)}},{key:"changeVisitorType",value:function(i){console.log(i);var t=this.visitByData.filter((function(t){return i==t.lookupValueId}));console.log(t),this.isUnitVisitor="Unit Visitor"==t[0].lookupValueName,this.iscommunityVisitor="Community Visitor"==t[0].lookupValueName}},{key:"expectedDurationChange",value:function(){if(this.minDate>m(this.visitor.expectedVisitorInTime).format("YYYY-MM-DD"))return this.visitor.expectedVisitorInTime=void 0,void this.SharedToaster.openSnackBar("Please Select valid Date","");if(this.minDate>m(this.visitor.visitorOutTime).format("YYYY-MM-DD"))return this.visitor.visitorOutTime=void 0,void this.SharedToaster.openSnackBar("Please Select Out-time greater than In-time","");if(console.log(this.visitor.visitorOutTime),this.visitor.visitorOutTime&&m(this.visitor.expectedVisitorInTime).format("YYYY-MM-DD")>m(this.visitor.visitorOutTime).format("YYYY-MM-DD"))return this.visitor.visitorOutTime=void 0,void this.SharedToaster.openSnackBar("Please Select Out-time greater than In-time","");var i=m(this.visitor.expectedVisitorInTime),t=m(this.visitor.visitorOutTime),e=m.duration(t.diff(i));this.visitor.expectedDuration=e.days()+" days "+this.isSingleDigit(e.hours())+":"+this.isSingleDigit(e.minutes())+" hours";var c=m.duration(t.diff(i)).asHours();this.visitor.expectedDurationInHours=Math.round(c)}},{key:"isSingleDigit",value:function(i){return i<=0?"00":i.toString().length>1?i:"0"+i}}]),i}()).\u0275fac=function(i){return new(i||U)(o.Wb(n.c),o.Wb(n.a),o.Wb(d.a),o.Wb(b.a),o.Wb(v.a),o.Wb(u.a),o.Wb(l.a),o.Wb(h.a),o.Wb(p.a))},U.\u0275cmp=o.Qb({type:U,selectors:[["app-visitor-checkin"]],decls:15,vars:9,consts:[[1,"checkin-visitor-wrapper"],[1,"card","mb-30"],[1,"card-header"],[1,"float-left"],[4,"ngIf"],[1,"float-right"],["href","javascript:void(0)","routerLink","/ams/visitor/expected-visitor","routerLinkActive","active",3,"routerLinkActiveOptions"],["name","chevron-left",1,"icon","back"],[1,"card-body"],[3,"message","isAlert"],["class","message",4,"ngIf"],["name","addVisitorForm","novalidate","",3,"ngSubmit"],["addVisitorForm","ngForm"],["class","row",4,"ngIf"],[1,"row"],[1,"col-sm-12"],[1,"list-inline","float-right","mt-4"],[1,"list-inline-item"],["class","btn blue mr-2",3,"disabled",4,"ngIf"],[1,"col-sm-4"],[1,"input-box"],["type","text","placeholder","Enter Name","name","visitorName","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Count","name","visitorCount","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Number","name","phoneNo","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","visitorInTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","disabled","ngModelChange"],["visitorInTime",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","calendar","width","18",1,"icon","date","float-left"],["name","visitorOutTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["visitorOutTime",""],["OnlyNumber","true","placeholder","Enter Duration","name","visitorCount","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["type","text","placeholder","Enter Number","name","visitorPassNumber","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-box","radio-box"],["name","visitBy","id","visitBy","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","visitByCategory","id","visitByCategory","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","col-sm-4",4,"ngIf"],["type","text","placeholder","Enter purpose","name","visitorpurpose",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["type","text","OnlyNumber","true","placeholder","Enter block-No","name","visitorblock-No","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Unit-No","name","visitorUnit-No","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","OnlyNumber","true","placeholder","Enter Staff-id","name","staffId","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","visitorInTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","min","max","disabled","ngModel","ngModelChange"],[3,"min"],["name","visitorOutTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","min","max","ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Duration","name","visitorCount","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","blue","mr-2",3,"disabled"],[1,"message"],[1,"icon-wrapper","float-left"],["name","check","width","20",1,"icon","float-left"],["class","float-left",4,"ngIf"]],template:function(i,t){1&i&&(o.bc(0,"div",0),o.bc(1,"div",1),o.bc(2,"div",2),o.bc(3,"div",3),o.bc(4,"h5"),o.Wc(5,C,2,0,"span",4),o.Wc(6,M,2,0,"span",4),o.ac(),o.ac(),o.bc(7,"div",5),o.bc(8,"a",6),o.Xb(9,"i-feather",7),o.ac(),o.ac(),o.ac(),o.bc(10,"div",8),o.Xb(11,"app-alert-message",9),o.Wc(12,T,1,0,"app-loader",4),o.Wc(13,w,12,4,"ng-container",4),o.Wc(14,F,5,2,"div",10),o.ac(),o.ac(),o.ac()),2&i&&(o.Hb(5),o.zc("ngIf",!t.isEditVisitor),o.Hb(1),o.zc("ngIf",t.isEditVisitor),o.Hb(2),o.zc("routerLinkActiveOptions",o.Fc(8,W)),o.Hb(3),o.zc("message",t.errorMessage)("isAlert",t.isError),o.Hb(1),o.zc("ngIf",t.isVisitorSubmitted&&!t.isVisitorAdded),o.Hb(1),o.zc("ngIf",!t.isVisitorSubmitted&&!t.isVisitorAdded),o.Hb(1),o.zc("ngIf",t.isVisitorAdded))},directives:[r.l,n.e,n.d,g.b,f.a,I.a,a.z,a.m,a.n,a.d,a.v,a.l,a.o,a.q,k.a,y.c,y.e,y.b,a.w,a.p,a.y,r.k],styles:[""]}),U),X=e("JK/P"),_=e("F/us"),Z=e("NhFE"),q=e("1kSV"),j=e("bvAq");function $(i,t){1&i&&o.Xb(0,"app-loader")}function Q(i,t){if(1&i&&(o.bc(0,"div",29),o.bc(1,"ul"),o.bc(2,"li"),o.bc(3,"h5"),o.Yc(4,"Visitor Count"),o.ac(),o.bc(5,"small"),o.Yc(6),o.ac(),o.ac(),o.bc(7,"li"),o.bc(8,"h5"),o.Yc(9,"Expected Duration"),o.ac(),o.bc(10,"small"),o.Yc(11),o.ac(),o.ac(),o.ac(),o.ac()),2&i){var e=o.rc().$implicit;o.Hb(6),o.Zc(e.visitorCount),o.Hb(5),o.Zc(e.expectedDuration)}}function G(i,t){1&i&&(o.bc(0,"div",29),o.bc(1,"h5"),o.Yc(2,"CheckOut"),o.ac(),o.ac())}var J=function(){return{exact:!0}};function R(i,t){if(1&i&&(o.bc(0,"tr"),o.bc(1,"td",21),o.bc(2,"a",22),o.Yc(3),o.Wc(4,Q,12,2,"ng-template",null,23,o.Xc),o.ac(),o.ac(),o.bc(6,"td",24),o.Yc(7),o.ac(),o.bc(8,"td",24),o.Yc(9),o.sc(10,"date"),o.ac(),o.bc(11,"td",24),o.Yc(12),o.sc(13,"date"),o.ac(),o.bc(14,"td",25),o.Yc(15),o.ac(),o.bc(16,"td",25),o.Yc(17),o.ac(),o.bc(18,"td"),o.bc(19,"a",26),o.Xb(20,"img",27),o.ac(),o.Wc(21,G,3,0,"ng-template",null,28,o.Xc),o.ac(),o.ac()),2&i){var e=t.$implicit,c=o.Mc(5),r=o.Mc(22);o.Hb(2),o.zc("ngbPopover",c),o.Hb(1),o.ad("",e.visitorName," "),o.Hb(4),o.Zc(e.visitorPhone),o.Hb(2),o.Zc(o.uc(10,10,e.visitorInTime,"MM/dd/yy, hh:mm")),o.Hb(3),o.Zc(o.uc(13,13,e.visitorOutTime,"MM/dd/yy, hh:mm")),o.Hb(3),o.Zc(e.blockNo),o.Hb(2),o.Zc(e.blockUnitNo),o.Hb(2),o.Bc("routerLink","/ams/visitor/edit-visitor/",e.visitorId,"/checkout"),o.zc("ngbPopover",r)("routerLinkActiveOptions",o.Fc(16,J))}}function K(i,t){if(1&i){var e=o.cc();o.bc(0,"div",3),o.bc(1,"div",4),o.bc(2,"div",5),o.bc(3,"h5"),o.Yc(4,"All Checked-in Visitors "),o.bc(5,"span",6),o.Yc(6),o.ac(),o.ac(),o.ac(),o.bc(7,"ul",7),o.bc(8,"li",8),o.Xb(9,"i",9),o.bc(10,"input",10),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc().visitorData=i})),o.ac(),o.ac(),o.bc(11,"li",11),o.bc(12,"a",12),o.Xb(13,"i-feather",13),o.bc(14,"span"),o.Yc(15,"Print"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(16,"div",14),o.bc(17,"table",15),o.bc(18,"thead"),o.bc(19,"tr"),o.bc(20,"th",16),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("visitorName")})),o.Yc(21,"Visitor Name "),o.Xb(22,"span",17),o.ac(),o.bc(23,"th",16),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("visitorPhone")})),o.Yc(24,"Phone Number "),o.Xb(25,"span",17),o.ac(),o.bc(26,"th",16),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("visitorInTime")})),o.Yc(27,"In-time "),o.Xb(28,"span",17),o.ac(),o.bc(29,"th",16),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("visitorOutTime")})),o.Yc(30,"Out-time "),o.Xb(31,"span",17),o.ac(),o.bc(32,"th",16),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("blockNo")})),o.Yc(33,"Block No"),o.Xb(34,"span",17),o.ac(),o.bc(35,"th",16),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("blockUnitNo")})),o.Yc(36,"Unit No "),o.Xb(37,"span",17),o.ac(),o.bc(38,"th",18),o.Yc(39,"Action"),o.ac(),o.ac(),o.ac(),o.bc(40,"tbody"),o.Wc(41,R,23,17,"tr",19),o.sc(42,"slice"),o.sc(43,"sort"),o.sc(44,"simpleSearch"),o.ac(),o.ac(),o.bc(45,"app-pagination",20),o.nc("outputParams",(function(i){return o.Pc(e),o.rc().getIndexParams(i)})),o.ac(),o.ac(),o.ac()}if(2&i){var c=o.rc();o.Hb(6),o.Zc(c.totalItems),o.Hb(4),o.zc("ngModel",c.visitorData),o.Hb(7),o.zc("ngClass",c.isMobileView()),o.Hb(5),o.zc("ngClass",c.getFieldOrderBy("visitorName")),o.Hb(3),o.zc("ngClass",c.getFieldOrderBy("visitorPhone")),o.Hb(3),o.zc("ngClass",c.getFieldOrderBy("visitorInTime")),o.Hb(3),o.zc("ngClass",c.getFieldOrderBy("visitorOutTime")),o.Hb(3),o.zc("ngClass",c.getFieldOrderBy("blockNo")),o.Hb(3),o.zc("ngClass",c.getFieldOrderBy("blockUnitNo")),o.Hb(4),o.zc("ngForOf",o.vc(42,14,o.vc(43,18,o.uc(44,22,c.visitorListData,c.visitorData),c.unitFieldType,c.unitOrder),c.ItemUserStartIndex,c.ItemUserEndIndex)),o.Hb(4),o.zc("totalItems",c.totalItems)("ItemStartIndex",c.ItemStartIndex)("ItemEndIndex",c.ItemEndIndex)("itemLimit",c.itemLimit)}}var ii,ti=((ii=function(){function i(t,e,c,r,n,o){_classCallCheck(this,i),this.injector=t,this.apartmentService=e,this.visitorService=c,this.lookupService=r,this.sharedService=n,this.cookieService=o,this.visitorData="",this.isVisitorDataLoaded=!1,this.unitFieldType="unitno",this.unitOrder=!0,this.ItemStartIndex=0,this.itemLimit=10,this.modalService=this.injector.get(X.a)}return _createClass(i,[{key:"getIndexParams",value:function(i){this.ItemStartIndex=i.ItemStartIndex,this.ItemEndIndex=i.ItemEndIndex,this.itemLimit=i.itemLimit}},{key:"sortUnitData",value:function(i){this.unitFieldType=i,this.unitOrder=!this.unitOrder}},{key:"getFieldOrderBy",value:function(i){return this.unitFieldType==i?this.unitOrder?"asc":"desc":""}},{key:"getBlockUnit",value:function(i){}},{key:"isMobileView",value:function(){return window.innerWidth<=767?"table-responsive":""}},{key:"showConfirmModal",value:function(i){this.modalService.showConfirmModal(i)}},{key:"getVisitorType",value:function(){}},{key:"ngOnInit",value:function(){var i=this;this.lookupService.getLookupValueByLookupTypeId(15).subscribe((function(t){i.visitTypeData=t}),(function(i){})),this.visitorService.getYetToCheckoutVisitorsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){i.visitorListData=t.filter((function(i){return i.isActive&&!i.isCheckedOut})),_.each(i.visitorListData,(function(t,e){i.apartmentService.getApartmentBlockUnitById(t.apartmentUnitId).subscribe((function(t){i.visitorListData[e].blockNo=t[0].apartmentBlockNumber,i.visitorListData[e].blockUnitNo=t[0].apartmentBlockUnitNumber}),(function(i){}))})),i.totalItems=i.visitorListData.length,i.ItemEndIndex=i.totalItems>i.itemLimit?i.itemLimit:i.totalItems,i.isVisitorDataLoaded=!0}))}}]),i}()).\u0275fac=function(i){return new(i||ii)(o.Wb(o.s),o.Wb(b.a),o.Wb(v.a),o.Wb(u.a),o.Wb(l.a),o.Wb(h.a))},ii.\u0275cmp=o.Qb({type:ii,selectors:[["app-visitor-checkout"]],decls:3,vars:2,consts:[[1,"checkedout-visitor-wrapper"],[4,"ngIf"],["class","card table-card",4,"ngIf"],[1,"card","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","l-blue","mt_5"],["name","printer",1,"icon","print"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],["scope","col"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",3,"ngbPopover"],["popContent",""],[1,"grey"],[1,"grey","text-capitalize"],["href","javascript:void(0)","placement","top","triggers","mouseenter:mouseleave","routerLinkActive","active",3,"ngbPopover","routerLink","routerLinkActiveOptions"],["src","assets/images/checkout-icon.svg","width","20"],["popAddCheckOutContent",""],[1,"pop-desp"]],template:function(i,t){1&i&&(o.bc(0,"div",0),o.Wc(1,$,1,0,"app-loader",1),o.Wc(2,K,46,25,"div",2),o.ac()),2&i&&(o.Hb(1),o.zc("ngIf",!t.isVisitorDataLoaded),o.Hb(1),o.zc("ngIf",t.isVisitorDataLoaded))},directives:[r.l,I.a,k.b,a.d,a.l,a.o,g.b,r.j,r.k,Z.a,q.c,n.e,n.d],pipes:[r.t,j.a,j.e,r.d],styles:[""]}),ii);function ei(i,t){1&i&&o.Xb(0,"app-loader")}function ci(i,t){if(1&i&&(o.bc(0,"div",32),o.bc(1,"ul"),o.bc(2,"li"),o.bc(3,"h5"),o.Yc(4,"Visitor Count"),o.ac(),o.bc(5,"small"),o.Yc(6),o.ac(),o.ac(),o.bc(7,"li"),o.bc(8,"h5"),o.Yc(9,"Expected Duration"),o.ac(),o.bc(10,"small"),o.Yc(11),o.ac(),o.ac(),o.ac(),o.ac()),2&i){var e=o.rc().$implicit;o.Hb(6),o.Zc(e.expectedVisitorCount),o.Hb(5),o.Zc(e.expectedDuration)}}function ri(i,t){1&i&&(o.bc(0,"div",32),o.bc(1,"h5"),o.Yc(2,"CheckIn"),o.ac(),o.ac())}var ni=function(){return{exact:!0}};function oi(i,t){if(1&i&&(o.bc(0,"tr"),o.bc(1,"td",24),o.bc(2,"a",25),o.Yc(3),o.Wc(4,ci,12,2,"ng-template",null,26,o.Xc),o.ac(),o.ac(),o.bc(6,"td",27),o.Yc(7),o.ac(),o.bc(8,"td",27),o.Yc(9),o.ac(),o.bc(10,"td",27),o.Yc(11),o.ac(),o.bc(12,"td",27),o.Yc(13),o.ac(),o.bc(14,"td",27),o.Yc(15),o.ac(),o.bc(16,"td",28),o.Yc(17),o.ac(),o.bc(18,"td"),o.bc(19,"a",29),o.Xb(20,"img",30),o.ac(),o.Wc(21,ri,3,0,"ng-template",null,31,o.Xc),o.ac(),o.ac()),2&i){var e=t.$implicit,c=o.Mc(5),r=o.Mc(22),n=o.rc(2);o.Hb(2),o.zc("ngbPopover",c),o.Hb(1),o.ad("",e.expectedVisitorName," "),o.Hb(4),o.Zc(e.expectedVisitorPhone),o.Hb(2),o.Zc(n.getTimeFormat(e.expectedVisitorInTime)),o.Hb(2),o.Zc(n.getTimeFormat(e.expectedVisitorOutTime)),o.Hb(2),o.Zc(e.visitTypeName),o.Hb(2),o.Zc(e.visitorCategoryId_Label),o.Hb(2),o.Zc(e.block_Unit),o.Hb(2),o.Bc("routerLink","/ams/visitor/edit-visitor/",e.expectedVisitorId,"/checkin"),o.zc("ngbPopover",r)("routerLinkActiveOptions",o.Fc(11,ni))}}var ai=function(){return{data:"admin"}};function si(i,t){if(1&i){var e=o.cc();o.bc(0,"div",3),o.bc(1,"div",4),o.bc(2,"div",5),o.bc(3,"h5"),o.Yc(4,"All Expected Visitors "),o.bc(5,"span",6),o.Yc(6),o.ac(),o.ac(),o.ac(),o.bc(7,"ul",7),o.bc(8,"li",8),o.Xb(9,"i",9),o.bc(10,"input",10),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc().visitorData=i})),o.ac(),o.ac(),o.bc(11,"li",11),o.bc(12,"a",12),o.Xb(13,"i-feather",13),o.bc(14,"span"),o.Yc(15,"Print"),o.ac(),o.ac(),o.ac(),o.bc(16,"li",11),o.bc(17,"a",14),o.Xb(18,"i-feather",15),o.bc(19,"span"),o.Yc(20,"Add Visitor"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(21,"div",16),o.bc(22,"table",17),o.bc(23,"thead"),o.bc(24,"tr"),o.bc(25,"th",18),o.Yc(26," Visitor Name "),o.bc(27,"span",19),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("visitorName")})),o.ac(),o.bc(28,"input",20),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc().columnField.visitorName=i}))("ngModelChange",(function(){return o.Pc(e),o.rc().selectColInput("visitorName")})),o.ac(),o.ac(),o.bc(29,"th",18),o.Yc(30," Phone Number "),o.bc(31,"span",19),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("visitorPhone")})),o.ac(),o.bc(32,"input",21),o.nc("ngModelChange",(function(i){return o.Pc(e),o.rc().columnField.visitorPhone=i}))("ngModelChange",(function(){return o.Pc(e),o.rc().selectColInput("visitorPhone")})),o.ac(),o.ac(),o.bc(33,"th",18),o.Yc(34,"Expected in Date/Time"),o.bc(35,"span",19),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("visitorInTime")})),o.ac(),o.ac(),o.bc(36,"th",18),o.Yc(37,"Expected out Date/Time"),o.bc(38,"span",19),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("visitorOutTime")})),o.ac(),o.ac(),o.bc(39,"th",18),o.Yc(40,"Visitor Type"),o.bc(41,"span",19),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("visitorOutTime")})),o.ac(),o.ac(),o.bc(42,"th",18),o.Yc(43,"Visitor category"),o.bc(44,"span",19),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("visitorCategoryId_Label")})),o.ac(),o.ac(),o.bc(45,"th",18),o.Yc(46,"Tower Unit"),o.bc(47,"span",19),o.nc("click",(function(){return o.Pc(e),o.rc().sortUnitData("block_Unit")})),o.ac(),o.ac(),o.bc(48,"th",18),o.Yc(49,"Action"),o.ac(),o.ac(),o.ac(),o.bc(50,"tbody"),o.Wc(51,oi,23,12,"tr",22),o.sc(52,"slice"),o.sc(53,"sort"),o.sc(54,"simpleSearch"),o.ac(),o.ac(),o.bc(55,"app-pagination",23),o.nc("outputParams",(function(i){return o.Pc(e),o.rc().getIndexParams(i)})),o.ac(),o.ac(),o.ac()}if(2&i){var c=o.rc();o.Hb(6),o.Zc(c.totalItems),o.Hb(4),o.zc("ngModel",c.visitorData),o.Hb(7),o.zc("routerLinkActiveOptions",o.Fc(30,ni))("state",o.Fc(31,ai)),o.Hb(5),o.zc("ngClass",c.isMobileView()),o.Hb(5),o.zc("ngClass",c.getFieldOrderBy("visitorName")),o.Hb(1),o.zc("ngModel",c.columnField.visitorName),o.Hb(3),o.zc("ngClass",c.getFieldOrderBy("visitorPhone")),o.Hb(1),o.zc("ngModel",c.columnField.visitorPhone),o.Hb(3),o.zc("ngClass",c.getFieldOrderBy("visitorInTime")),o.Hb(3),o.zc("ngClass",c.getFieldOrderBy("visitorOutTime")),o.Hb(3),o.zc("ngClass",c.getFieldOrderBy("visitorType")),o.Hb(3),o.zc("ngClass",c.getFieldOrderBy("visitorCategoryId_Label")),o.Hb(3),o.zc("ngClass",c.getFieldOrderBy("block_Unit")),o.Hb(4),o.zc("ngForOf",o.vc(52,19,o.vc(53,23,o.uc(54,27,c.visitorListData,c.visitorData),c.unitFieldType,c.unitOrder),c.ItemUserStartIndex,c.ItemUserEndIndex)),o.Hb(4),o.zc("totalItems",c.totalItems)("ItemStartIndex",c.ItemStartIndex)("ItemEndIndex",c.ItemEndIndex)("itemLimit",c.itemLimit)}}function di(i,t){1&i&&o.Xb(0,"app-loader")}var li=function(){return{exact:!0}};function ui(i,t){if(1&i&&(o.bc(0,"div",5),o.bc(1,"div",6),o.bc(2,"a",7),o.bc(3,"div",8),o.bc(4,"h6"),o.Yc(5),o.ac(),o.bc(6,"p"),o.Yc(7),o.ac(),o.ac(),o.ac(),o.Xb(8,"div",9),o.ac(),o.ac()),2&i){var e=t.$implicit;o.Hb(2),o.Cc("routerLink","",e.menuName,"/",e.lookupValueID,""),o.zc("routerLinkActiveOptions",o.Fc(5,li)),o.Hb(3),o.Zc(e.lookupValueName),o.Hb(2),o.Zc(e.description)}}function bi(i,t){if(1&i&&(o.Zb(0),o.bc(1,"h5",2),o.Yc(2,"Helpdesk reports "),o.ac(),o.bc(3,"div",3),o.Wc(4,ui,9,6,"div",4),o.ac(),o.Yb()),2&i){var e=o.rc();o.Hb(4),o.zc("ngForOf",e.reportDataList)}}var vi,pi,mi,hi,gi=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:s},{path:"checkin",component:A},{path:"expected-visitor",component:(pi=function(){function i(t,e,c,r,n,o){_classCallCheck(this,i),this.injector=t,this.apartmentService=e,this.visitorService=c,this.lookupService=r,this.sharedService=n,this.cookieService=o,this.visitorData="",this.isVisitorDataLoaded=!1,this.unitFieldType="unitno",this.unitOrder=!0,this.ItemStartIndex=0,this.itemLimit=10,this.selectedInput="",this.columnField={},this.modalService=this.injector.get(X.a)}return _createClass(i,[{key:"getIndexParams",value:function(i){this.ItemStartIndex=i.ItemStartIndex,this.ItemEndIndex=i.ItemEndIndex,this.itemLimit=i.itemLimit}},{key:"sortUnitData",value:function(i){this.unitFieldType=i,this.unitOrder=!this.unitOrder}},{key:"getFieldOrderBy",value:function(i){return this.unitFieldType==i?this.unitOrder?"asc":"desc":""}},{key:"selectColInput",value:function(i){this.selectedInput=i}},{key:"onSelectChange",value:function(i,t,e){_.isEmpty(i)?this.columnField={}:(this.selectedInput=t,this.columnField[t]=i[e])}},{key:"isMobileView",value:function(){return window.innerWidth<=767?"table-responsive":""}},{key:"showConfirmModal",value:function(i){this.modalService.showConfirmModal(i)}},{key:"getTimeFormat",value:function(i){return m(i).format("YYYY-MM-DD HH:mm")}},{key:"ngOnInit",value:function(){var i=this;this.visitorService.getExpectedVisitorsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){i.visitorListData=t.filter((function(i){return i.isActive})),_.each(i.visitorListData,(function(t,e){i.apartmentService.getApartmentBlockUnitById(t.apartmentUnitId).subscribe((function(t){i.visitorListData[e].blockNo=t[0].apartmentBlockNumber,i.visitorListData[e].blockUnitNo=t[0].apartmentBlockUnitNumber}),(function(i){}))})),i.lookupService.getLookupValueByLookupTypeId(15).subscribe((function(t){i.visitTypeData=t,i.checkVisitTypeData()}),(function(i){})),i.lookupService.getLookupValueByLookupTypeId(8).subscribe((function(t){i.visitCategoryData=t,i.checkVisitCategoryData()}),(function(i){})),i.totalItems=i.visitorListData.length,i.ItemEndIndex=i.totalItems>i.itemLimit?i.itemLimit:i.totalItems,i.isVisitorDataLoaded=!0}))}},{key:"checkVisitTypeData",value:function(){var i=this;this.visitTypeData.forEach((function(t){t.lookupValueId==i.visitorListData[0].visitTypeId&&(i.visitorListData[0].visitTypeName=t.lookupValueName.toLowerCase())}))}},{key:"checkVisitCategoryData",value:function(){var i=this;console.log(this.visitorListData[0]),this.visitCategoryData.forEach((function(t){t.lookupValueId==i.visitorListData[0].visitorCategoryId&&(i.visitorListData[0].visitCategoryName=t.lookupValueName.toLowerCase())}))}}]),i}(),pi.\u0275fac=function(i){return new(i||pi)(o.Wb(o.s),o.Wb(b.a),o.Wb(v.a),o.Wb(u.a),o.Wb(l.a),o.Wb(h.a))},pi.\u0275cmp=o.Qb({type:pi,selectors:[["app-visitor-expected-visitor"]],decls:3,vars:2,consts:[[1,"expected-visitor-wrapper"],[4,"ngIf"],["class","card table-card",4,"ngIf"],[1,"card","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","l-blue","mt_5"],["name","printer",1,"icon","print"],["routerLink","/user/visitor/create-visitor","routerLinkActive","active",1,"btn","lime-green","mt_5",3,"routerLinkActiveOptions","state"],["name","plus",1,"icon","plus"],[1,"card-body","p-0","customScroll"],["mdbTable","","mdbTableScroll","","scrollX","true","maxWidth","400",1,"table",3,"ngClass"],["scope","col"],[3,"ngClass","click"],["type","text","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Phone No",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",3,"ngbPopover"],["popContent",""],[1,"grey"],[1,"grey","text-capitalize"],["href","javascript:void(0)","placement","top","triggers","mouseenter:mouseleave","routerLinkActive","active",3,"ngbPopover","routerLink","routerLinkActiveOptions"],["src","assets/images/checkin-icon.svg","width","20"],["popAddCheckInContent",""],[1,"pop-desp"]],template:function(i,t){1&i&&(o.bc(0,"div",0),o.Wc(1,ei,1,0,"app-loader",1),o.Wc(2,si,56,32,"div",2),o.ac()),2&i&&(o.Hb(1),o.zc("ngIf",!t.isVisitorDataLoaded),o.Hb(1),o.zc("ngIf",t.isVisitorDataLoaded))},directives:[r.l,I.a,k.b,a.d,a.l,a.o,g.b,n.e,n.d,r.j,r.k,Z.a,q.c],pipes:[r.t,j.a,j.e],styles:[".customScroll[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.customScroll[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{overflow:hidden!important;text-overflow:ellipsis;white-space:nowrap}"]}),pi)},{path:"add-visitor",component:A},{path:"edit-visitor/:id/:type",component:A},{path:"checkout",component:ti},{path:"reports",component:(vi=function(){function i(t,e,c){_classCallCheck(this,i),this.lookupService=t,this.sharedService=e,this.cookieService=c,this.isDataLoaded=!1}return _createClass(i,[{key:"ngOnInit",value:function(){var i=this,t={ApartmentId:parseInt(this.cookieService.get("apartmentId")),LookupTypeId:87,MenuName:"VisitorManagement"};this.lookupService.getLookupValuesByApartmentIdLookupTypeIdMenuName(t).subscribe((function(t){i.reportDataList=t,i.isDataLoaded=!0}))}}]),i}(),vi.\u0275fac=function(i){return new(i||vi)(o.Wb(u.a),o.Wb(l.a),o.Wb(h.a))},vi.\u0275cmp=o.Qb({type:vi,selectors:[["app-visitor-reports"]],decls:3,vars:2,consts:[[1,"reports-wrapper"],[4,"ngIf"],[1,"mb-3"],[1,"row"],["class","col-sm-6 mb-20",4,"ngFor","ngForOf"],[1,"col-sm-6","mb-20"],[1,"card","report-card"],["href","javascript:void(0)","routerLinkActive","active",1,"t-no-decor",3,"routerLink","routerLinkActiveOptions"],[1,"card-header"],[1,"card-body"]],template:function(i,t){1&i&&(o.bc(0,"div",0),o.Wc(1,di,1,0,"app-loader",1),o.Wc(2,bi,5,1,"ng-container",1),o.ac()),2&i&&(o.Hb(1),o.zc("ngIf",!t.isDataLoaded),o.Hb(1),o.zc("ngIf",t.isDataLoaded))},directives:[r.l,I.a,r.k,n.e,n.d],styles:[""]}),vi)},{path:"**",redirectTo:"settings",pathMatch:"full"}],fi=((mi=function i(){_classCallCheck(this,i)}).\u0275mod=o.Ub({type:mi}),mi.\u0275inj=o.Tb({factory:function(i){return new(i||mi)},imports:[[n.f.forChild(gi)],n.f]}),mi),Ii=e("PCNd"),ki=((hi=function(){function i(){_classCallCheck(this,i)}return _createClass(i,[{key:"ngOnInit",value:function(){}}]),i}()).\u0275fac=function(i){return new(i||hi)},hi.\u0275cmp=o.Qb({type:hi,selectors:[["app-visitor"]],decls:1,vars:0,template:function(i,t){1&i&&o.Xb(0,"router-outlet")},directives:[n.g],styles:[""]}),hi);e.d(t,"VisitorModule",(function(){return Ci}));var yi,Ci=((yi=function i(){_classCallCheck(this,i)}).\u0275mod=o.Ub({type:yi,bootstrap:[ki]}),yi.\u0275inj=o.Tb({factory:function(i){return new(i||yi)},imports:[[r.b,Ii.a,fi]]}),yi)}}]);