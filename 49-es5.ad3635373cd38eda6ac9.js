function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"z+D7":function(t,e,n){"use strict";n.r(e);var i,r=n("ofXK"),a=n("tyNb"),c=n("fXoL"),o=((i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=c.Lb({type:i,selectors:[["app-security-setup"]],decls:2,vars:0,template:function(t,e){1&t&&(c.Wb(0,"p"),c.Tc(1," security-setup works!\n"),c.Vb())},styles:[""]}),i),s=n("NutR"),l=n("Yt4J"),p=n("MXRh"),u=n("ThaB"),d=n("wbvY"),g=n("F/us"),b=n("wd/R"),f=n("b6Qw"),v=n("668k"),m=n("3Pt+");function C(t,e){1&t&&c.Sb(0,"app-loader")}function h(t,e){1&t&&c.Sb(0,"app-loader")}function y(t,e){if(1&t){var n=c.Xb();c.Wb(0,"textarea",29),c.ic("ngModelChange",(function(t){return c.Kc(n),c.mc(3).$implicit.notes=t})),c.Vb()}if(2&t){var i=c.mc(3).$implicit;c.uc("ngModel",i.notes)("disabled",!0)}}function M(t,e){if(1&t){var n=c.Xb();c.Wb(0,"textarea",30),c.ic("ngModelChange",(function(t){return c.Kc(n),c.mc(3).$implicit.notes=t})),c.Vb()}if(2&t){var i=c.mc(3).$implicit;c.uc("ngModel",i.notes)}}function O(t,e){if(1&t&&(c.Wb(0,"div",20),c.Wb(1,"div",25),c.Wb(2,"div",26),c.Wb(3,"label"),c.Tc(4,"Comments"),c.Vb(),c.Rc(5,y,1,2,"textarea",27),c.Rc(6,M,1,1,"textarea",28),c.Vb(),c.Vb(),c.Vb()),2&t){var n=c.mc(2).$implicit,i=c.mc(2);c.Cb(5),c.uc("ngIf",!i.isInProgressStatus(n.alertStatusId)),c.Cb(1),c.uc("ngIf",i.isInProgressStatus(n.alertStatusId))}}function _(t,e){if(1&t){var n=c.Xb();c.Wb(0,"div",31),c.Wb(1,"a",32),c.ic("click",(function(){c.Kc(n);var t=c.mc(2).$implicit;return c.mc(2).approveAlert(t,"approve")})),c.Tc(2,"Acknowledge"),c.Vb(),c.Vb()}}function P(t,e){if(1&t){var n=c.Xb();c.Wb(0,"div",31),c.Wb(1,"a",32),c.ic("click",(function(){c.Kc(n);var t=c.mc(2).$implicit;return c.mc(2).approveAlert(t,"close")})),c.Tc(2,"Close"),c.Vb(),c.Vb()}}function k(t,e){if(1&t&&(c.Wb(0,"div",19),c.Wb(1,"div",20),c.Wb(2,"div",21),c.Wb(3,"div",22),c.Wb(4,"h5"),c.Tc(5,"Person Name"),c.Vb(),c.Wb(6,"p"),c.Tc(7),c.Vb(),c.Vb(),c.Wb(8,"div",22),c.Wb(9,"h5"),c.Tc(10,"Phone Number"),c.Vb(),c.Wb(11,"p"),c.Tc(12),c.Vb(),c.Vb(),c.Wb(13,"div",22),c.Wb(14,"h5"),c.Tc(15,"Alert Received Time"),c.Vb(),c.Wb(16,"p"),c.Tc(17),c.Vb(),c.Vb(),c.Vb(),c.Sb(18,"div",21),c.Vb(),c.Rc(19,O,7,2,"div",23),c.Rc(20,_,3,0,"div",24),c.Rc(21,P,3,0,"div",24),c.Vb()),2&t){var n=c.mc().$implicit,i=c.mc(2);c.Cb(7),c.Uc(i.getUserName(n.insertedBy)),c.Cb(5),c.Uc(i.getContactNumber(n.insertedBy)),c.Cb(5),c.Uc(i.getDateTime(n.receivedDate)),c.Cb(2),c.uc("ngIf",!i.isOpenStatus(n.alertStatusId)),c.Cb(1),c.uc("ngIf",i.isOpenStatus(n.alertStatusId)),c.Cb(1),c.uc("ngIf",i.isInProgressStatus(n.alertStatusId))}}function I(t,e){if(1&t&&(c.Ub(0),c.Wb(1,"li",7),c.Wb(2,"div",8),c.Wb(3,"div",9),c.Wb(4,"div",10),c.Wb(5,"div"),c.Sb(6,"img",11),c.Vb(),c.Wb(7,"div",12),c.Wb(8,"h5"),c.Tc(9),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(10,"div",13),c.Wb(11,"span",14),c.Tc(12),c.Vb(),c.Vb(),c.Vb(),c.Wb(13,"div",15),c.Wb(14,"p"),c.Wb(15,"span",16),c.Tc(16,"Date:"),c.Vb(),c.Tc(17),c.Vb(),c.Wb(18,"p"),c.Wb(19,"span",16),c.Tc(20,"Block:"),c.Vb(),c.Tc(21),c.Vb(),c.Vb(),c.Vb(),c.Wb(22,"div",17),c.Rc(23,h,1,0,"app-loader",1),c.Rc(24,k,22,6,"div",18),c.Vb(),c.Tb()),2&t){var n=e.$implicit,i=c.mc(2);c.Cb(1),c.Gb("list-group-item collapsed ",i.getEmergencyType(n.alertTypeId)," "),c.Eb("data-target","#collapse",n.apartmentBlockUnitAlertId,""),c.Cb(4),c.Gb("s-circle ",i.getEmergencyType(n.alertTypeId)," text-center"),c.Cb(1),c.wc("src","assets/images/",i.getEmergencyType(n.alertTypeId),"-e-icon.svg",c.Mc),c.Cb(3),c.Uc(i.getAlertName(n.alertTypeId)),c.Cb(2),c.uc("ngClass",i.getAlertStatus(n.alertStatusId)),c.Cb(1),c.Uc(i.getAlertStatus(n.alertStatusId)),c.Cb(5),c.Uc(i.getDate(n.receivedDate)),c.Cb(4),c.Uc(i.getBlock(n.apartmentBlockUnitId)),c.Cb(1),c.wc("id","collapse",n.apartmentBlockUnitAlertId,""),c.Cb(1),c.uc("ngIf",i.isAlertUpdated),c.Cb(1),c.uc("ngIf",!i.isAlertUpdated)}}function w(t,e){1&t&&(c.Ub(0),c.Wb(1,"div",33),c.Wb(2,"div",34),c.Wb(3,"h4"),c.Tc(4,"No Active Alerts available"),c.Vb(),c.Vb(),c.Vb(),c.Tb())}function T(t,e){if(1&t&&(c.Ub(0),c.Wb(1,"h3",2),c.Tc(2,"Active Alerts"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",4),c.Wb(5,"ul",5),c.Rc(6,I,25,16,"ng-container",6),c.Rc(7,w,5,0,"ng-container",1),c.Vb(),c.Vb(),c.Vb(),c.Tb()),2&t){var n=c.mc();c.Cb(6),c.uc("ngForOf",n.alertList),c.Cb(1),c.uc("ngIf",n.isNoAlerts())}}var V,A,W,S,x,B=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:o},{path:"active-alerts",component:(W=function(){function t(e,n,i,r,a,c){_classCallCheck(this,t),this.userService=e,this.apartmentService=n,this.alertService=i,this.lookupService=r,this.sharedService=a,this.cookieService=c,this.isAlertsLoaded=!1,this.isAlertUpdated=!1,this.userDetails=[],this.blockDetails=[],this.locationDetails=[]}return _createClass(t,[{key:"getEmergencyType",value:function(t){return 130==t?"medical":131==t?"theft":132==t?"fire":133==t?"shooter":134==t?"police":"other"}},{key:"getAlertName",value:function(t){var e=g.filter(this.emergencyTypeList,(function(e){if(e.lookupValueId===t)return e}));return void 0===e||0==e.length?"":e[0].lookupValueName.toLowerCase()}},{key:"getAlertStatus",value:function(t){var e=g.filter(this.alertTypeList,(function(e){if(e.lookupValueId===t)return e}));return void 0===e||0==e.length?"":e[0].lookupValueName.toLowerCase()}},{key:"getBlock",value:function(t){var e=g.filter(this.blockDetails,(function(e){if(e.apartmentBlockUnitId===t)return e}));return void 0===e||0==e.length?"":e[0].apartmentBlockNumber+" "+e[0].apartmentBlockUnitNumber}},{key:"getUserName",value:function(t){var e=g.filter(this.userDetails,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].firstName}},{key:"getContactNumber",value:function(t){var e=g.filter(this.userDetails,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].phoneNumber}},{key:"getDate",value:function(t){return b(t).format("MM/DD/YYYY, h:mm A")}},{key:"getDateTime",value:function(t){return b(t).format("MM/DD/YYYY, h:mm A")}},{key:"isOpenStatus",value:function(t){return 135==t}},{key:"isInProgressStatus",value:function(t){return 136==t}},{key:"isClosedStatus",value:function(t){return 137==t}},{key:"getLatitude",value:function(t){var e=g.filter(this.locationDetails,(function(e){if(e.userId===t)return e}));if(void 0===e||0==e.length)return"";var n=e[0].coords.split(",");return parseFloat(n[0])}},{key:"getLongitude",value:function(t){var e=g.filter(this.locationDetails,(function(e){if(e.userId===t)return e}));if(void 0===e||0==e.length)return"";var n=e[0].coords.split(",");return parseFloat(n[1])}},{key:"approveAlert",value:function(t,e){var n,i=this;this.isAlertUpdated=!0,null==t.gpslocation&&(t.gpslocation=" "),n="approve"==e?{apartmentBlockUnitAlertId:t.apartmentBlockUnitAlertId,apartmentBlockUnitId:t.apartmentBlockUnitId,receivedDate:t.receivedDate,alertTypeId:t.alertTypeId,location:"string",gpslocation:t.gpslocation,assignedTo:parseInt(this.cookieService.get("userId")),alertStatusId:136,notes:t.notes,isActive:t.isActive,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-06T13:45:09.296Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-06T13:45:09.296Z"}:{apartmentBlockUnitAlertId:t.apartmentBlockUnitAlertId,apartmentBlockUnitId:t.apartmentBlockUnitId,receivedDate:t.receivedDate,alertTypeId:t.alertTypeId,location:"string",gpslocation:t.gpslocation,assignedTo:parseInt(this.cookieService.get("userId")),alertStatusId:137,notes:t.notes,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-06T13:45:09.296Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-06T13:45:09.296Z"},this.alertService.updateApartmentBlockUnitAlert(n).subscribe((function(t){t.message?i.alertService.getAllApartmentBlockUnitAlertByApartmentId(parseInt(i.cookieService.get("apartmentId"))).subscribe((function(t){i.alertList=t.filter((function(t){return t.isActive})),i.isAlertUpdated=!1}),(function(t){console.log(t)})):i.isAlertUpdated=!1}),(function(t){console.log(t)}))}},{key:"isNoAlerts",value:function(){return 0==this.alertList.length}},{key:"ngOnInit",value:function(){var t=this;this.alert={},this.alert.gpsLocation=" ",this.alert.notes=" ",this.alertService.getAllApartmentBlockUnitAlertByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(e){t.alertList=e.filter((function(t){return t.isActive})),t.isAlertsLoaded=!0,console.log(t.alertList),g.each(t.alertList,(function(e){t.userService.getUserById(parseInt(e.insertedBy)).subscribe((function(e){t.userDetails.push(e[0]),console.log(t.userDetails)}),(function(t){console.log(t)})),t.apartmentService.getApartmentBlockUnitById(e.apartmentBlockUnitId).subscribe((function(e){t.blockDetails.push(e[0])}),(function(t){console.log(t)})),null!=e.gpslocation&&0!=e.gpslocation.length||(e.gpslocation="47.4925,19.0513"),t.locationDetails.push({userId:e.insertedBy,coords:e.gpslocation})}))}),(function(t){console.log(t)})),this.lookupService.getLookupValueByLookupTypeId(29).subscribe((function(e){t.emergencyTypeList=e})),this.lookupService.getLookupValueByLookupTypeId(30).subscribe((function(e){t.alertTypeList=e}))}}]),t}(),W.\u0275fac=function(t){return new(t||W)(c.Rb(s.a),c.Rb(l.a),c.Rb(p.a),c.Rb(u.a),c.Rb(d.a),c.Rb(f.a))},W.\u0275cmp=c.Lb({type:W,selectors:[["app-security-active-alerts"]],decls:3,vars:2,consts:[[1,"secuirty-active-alerts-wrapper"],[4,"ngIf"],[1,"main-title"],[1,"card","mb-30"],["id","accordion",1,"card-body","p-0"],[1,"list-group","tabs","clear"],[4,"ngFor","ngForOf"],["data-toggle","collapse","aria-expanded","true","attr.aria-controls","collapseOne"],[1,"details"],[1,"float-left"],[1,"media"],["width","14",3,"src"],[1,"media-body"],[1,"float-right","mr-4"],[1,"badge","small","min","ml-3","text-capitalize",3,"ngClass"],[1,"info"],[1,"mr-2"],["aria-labelledby","headingOne","data-parent","#accordion",1,"collapse",3,"id"],["class","additional-desp",4,"ngIf"],[1,"additional-desp"],[1,"row"],[1,"col-sm-6"],[1,"lists"],["class","row",4,"ngIf"],["class","btn-wrapper text-center",4,"ngIf"],[1,"col-sm-12","mt-4","mb-2"],[1,"input-box"],["placeholder","some text here","name","healthIssue",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["placeholder","some text here","name","healthIssue",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","some text here","name","healthIssue",3,"ngModel","disabled","ngModelChange"],["placeholder","some text here","name","healthIssue",3,"ngModel","ngModelChange"],[1,"btn-wrapper","text-center"],[1,"btn","blue","mt-4","mb-4",3,"click"],[1,"card"],[1,"card-body","gen-message"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Rc(1,C,1,0,"app-loader",1),c.Rc(2,T,8,2,"ng-container",1),c.Vb()),2&t&&(c.Cb(1),c.uc("ngIf",!e.isAlertsLoaded),c.Cb(1),c.uc("ngIf",e.isAlertsLoaded))},directives:[r.l,v.a,r.k,r.j,m.d,m.n,m.q],styles:['.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:3px;height:100%!important}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.medical[_ngcontent-%COMP%]:before{background-color:#00bcd4}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.theft[_ngcontent-%COMP%]:before{background-color:#ef60a5}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.fire[_ngcontent-%COMP%]:before{background-color:#ff9800}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.shooter[_ngcontent-%COMP%]:before{background-color:#9100ff}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.police[_ngcontent-%COMP%]:before{background-color:#06bf58}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 20px;width:100%!important;float:left;border:none}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.8rem;color:#373946;text-transform:capitalize;margin:2px 0 0}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:0 20px;width:100%!important;float:left;margin:10px 0 0}@media (max-width:576px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin:12px 0 0}}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;color:#373946;display:inline-block}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(:last-child){margin:0 40px 0 0!important}@media (max-width:576px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px}}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#8391a1}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-top:none}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]{padding:20px 35px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]:not(:last-child){margin:0 0 20px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.6rem;padding:0 0 4px;color:#191c1e}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;color:#8391a1}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:500;letter-spacing:.2px;font-size:1.6rem;color:#191c1e;margin:0 0 7px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{height:300px}@media (max-width:991px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{margin:15px 0 0;display:block}}']}),W)},{path:"history",component:(A=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),A.\u0275fac=function(t){return new(t||A)},A.\u0275cmp=c.Lb({type:A,selectors:[["app-security-history"]],decls:2,vars:0,template:function(t,e){1&t&&(c.Wb(0,"p"),c.Tc(1," security-history works!\n"),c.Vb())},styles:[""]}),A)},{path:"reports",component:(V=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),V.\u0275fac=function(t){return new(t||V)},V.\u0275cmp=c.Lb({type:V,selectors:[["app-security-reports"]],decls:2,vars:0,template:function(t,e){1&t&&(c.Wb(0,"p"),c.Tc(1," security-reports works!\n"),c.Vb())},styles:[""]}),V)},{path:"**",redirectTo:"settings",pathMatch:"full"}],U=((S=function t(){_classCallCheck(this,t)}).\u0275mod=c.Pb({type:S}),S.\u0275inj=c.Ob({factory:function(t){return new(t||S)},imports:[[a.f.forChild(B)],a.f]}),S),L=n("PCNd"),D=((x=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||x)},x.\u0275cmp=c.Lb({type:x,selectors:[["app-security"]],decls:1,vars:0,template:function(t,e){1&t&&c.Sb(0,"router-outlet")},directives:[a.g],styles:[""]}),x);n.d(e,"SecurityModule",(function(){return N}));var R,N=((R=function t(){_classCallCheck(this,t)}).\u0275mod=c.Pb({type:R,bootstrap:[D]}),R.\u0275inj=c.Ob({factory:function(t){return new(t||R)},imports:[[r.b,L.a,U]]}),R)}}]);