(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{r9Ow:function(t,e,c){"use strict";c.r(e);var n=c("ofXK"),i=c("tyNb"),a=c("Yt4J"),o=c("VeBv"),r=c("wbvY"),s=c("F/us"),l=c("fXoL"),d=c("0IaG"),u=c("b6Qw"),m=c("668k"),b=c("8mtn"),p=c("BR9Y"),g=c("3Pt+"),h=c("NhFE"),v=c("bvAq");const I=["viewInvoiceTypeRef"];function f(t,e){1&t&&l.Xb(0,"app-loader")}function D(t,e){if(1&t){const t=l.cc();l.bc(0,"a",15),l.nc("click",(function(){l.Pc(t);const c=e.$implicit;return l.rc(2).getSingleBlock(c)})),l.Yc(1),l.ac()}if(2&t){const t=e.$implicit;l.Hb(1),l.Zc(t.apartmentBlockNumber)}}function C(t,e){if(1&t){const t=l.cc();l.bc(0,"div",5),l.bc(1,"div",6),l.bc(2,"h6"),l.Xb(3,"i-feather",7),l.Yc(4,"Filter By"),l.ac(),l.bc(5,"div",8),l.bc(6,"a",9),l.nc("click",(function(){return l.Pc(t),l.rc().getAllBlockData("all")})),l.bc(7,"span"),l.Yc(8,"All Towers"),l.ac(),l.ac(),l.ac(),l.bc(9,"div",8),l.bc(10,"a",10),l.bc(11,"span"),l.Yc(12),l.ac(),l.bc(13,"div",11),l.Xb(14,"i",12),l.ac(),l.ac(),l.bc(15,"div",13),l.Wc(16,D,2,1,"a",14),l.ac(),l.ac(),l.ac(),l.ac()}if(2&t){const t=l.rc();l.Hb(6),l.zc("ngClass",t.getSelected("all")),l.Hb(4),l.zc("ngClass",t.getSelected("single")),l.Hb(2),l.Zc(t.singleBlock),l.Hb(4),l.zc("ngForOf",t.blockListData)}}function M(t,e){1&t&&(l.bc(0,"span"),l.Yc(1,"All Towers"),l.ac())}function A(t,e){if(1&t&&(l.bc(0,"span"),l.Yc(1),l.ac()),2&t){const t=l.rc(2);l.Hb(1),l.ad("Residents under ",t.singleBlock,"")}}function y(t,e){if(1&t){const t=l.cc();l.bc(0,"tr"),l.bc(1,"td",39),l.Yc(2),l.ac(),l.bc(3,"td",40),l.Yc(4),l.ac(),l.bc(5,"td",40),l.Yc(6),l.ac(),l.bc(7,"td",39),l.Yc(8),l.ac(),l.bc(9,"td",41),l.Xb(10,"span",42),l.bc(11,"span"),l.Yc(12),l.ac(),l.ac(),l.bc(13,"td",43),l.bc(14,"a",44),l.Xb(15,"span",45),l.Xb(16,"span",45),l.Xb(17,"span",45),l.ac(),l.bc(18,"div",46),l.bc(19,"a",47),l.Yc(20,"View History"),l.ac(),l.bc(21,"a",15),l.nc("click",(function(){l.Pc(t);const c=e.$implicit;return l.rc(2).showInvoiceTypes(c)})),l.Yc(22,"Post Invoice"),l.ac(),l.bc(23,"a",47),l.Yc(24,"Post Collection"),l.ac(),l.bc(25,"a",48),l.Yc(26,"Print"),l.ac(),l.ac(),l.ac(),l.ac()}if(2&t){const t=e.$implicit,c=l.rc(2);l.Hb(2),l.Zc(t.primayContact),l.Hb(2),l.Zc(t.billToParty),l.Hb(2),l.Zc(t.block_Unit),l.Hb(2),l.Zc(t.due),l.Hb(2),l.zc("ngClass",c.getDueAmount(t.due_Indicator)?"high":"low"),l.Hb(2),l.Zc(t.due_Indicator),l.Hb(7),l.Bc("routerLink","/ams/income/view-invoice-history/",t.apartmentBlockUnitId,""),l.Hb(4),l.Bc("routerLink","/ams/income/post-collection/",t.apartmentBlockUnitId,"")}}function k(t,e){1&t&&(l.bc(0,"div",49),l.bc(1,"p",50),l.Yc(2,"No Records Found"),l.ac(),l.ac())}function S(t,e){if(1&t&&(l.bc(0,"div",49),l.bc(1,"p",50),l.Yc(2,"Total Amount Due : "),l.bc(3,"span",51),l.Yc(4),l.ac(),l.ac(),l.bc(5,"p",50),l.Yc(6,"Total Excess Payments & Incentives Due : "),l.bc(7,"span",51),l.Yc(8),l.ac(),l.ac(),l.bc(9,"p",50),l.Yc(10,"Net Amount : "),l.bc(11,"span",51),l.Yc(12),l.ac(),l.ac(),l.ac()),2&t){const t=l.rc(2);l.Hb(4),l.Zc(t.totalDueAmount),l.Hb(4),l.Zc(t.totalDueAmount-t.netDueAmount),l.Hb(4),l.Zc(t.netDueAmount)}}function P(t,e){if(1&t){const t=l.cc();l.bc(0,"div",16),l.bc(1,"div",17),l.bc(2,"div",18),l.bc(3,"h5"),l.Yc(4,"Sub Ledgers "),l.bc(5,"span",19),l.Yc(6),l.ac(),l.ac(),l.bc(7,"p"),l.Wc(8,M,2,0,"span",1),l.Wc(9,A,2,1,"span",1),l.ac(),l.ac(),l.bc(10,"ul",20),l.bc(11,"li",21),l.Xb(12,"i",22),l.bc(13,"input",23),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().subLedgerData=e})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(14,"div",24),l.bc(15,"table",25),l.bc(16,"thead"),l.bc(17,"tr"),l.bc(18,"th",26),l.Yc(19," Primary Contact "),l.bc(20,"span",27),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("primayContact")})),l.ac(),l.bc(21,"input",28),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.primayContact=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("primayContact")})),l.ac(),l.ac(),l.bc(22,"th",26),l.Yc(23," Bill to Party "),l.bc(24,"span",27),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("billToParty")})),l.ac(),l.bc(25,"input",29),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.billToParty=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("billToParty")})),l.ac(),l.ac(),l.bc(26,"th",26),l.Yc(27," Tower Unit "),l.bc(28,"span",27),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("block_Unit")})),l.ac(),l.bc(29,"input",30),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.block_Unit=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("block_Unit")})),l.ac(),l.ac(),l.bc(30,"th",26),l.Yc(31," Due "),l.bc(32,"span",27),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("due")})),l.ac(),l.bc(33,"input",31),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.due=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("due")})),l.ac(),l.ac(),l.bc(34,"th",32),l.Yc(35," Status "),l.bc(36,"span",27),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("due_Indicator")})),l.ac(),l.bc(37,"input",33),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.due_Indicator=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("due_Indicator")})),l.ac(),l.ac(),l.bc(38,"th",34),l.Yc(39," Actions "),l.bc(40,"input",35),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.action=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("action")})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(41,"tbody"),l.Wc(42,y,27,8,"tr",36),l.sc(43,"slice"),l.sc(44,"sort"),l.sc(45,"simpleSearch"),l.sc(46,"columnSearch"),l.ac(),l.ac(),l.Wc(47,k,3,0,"div",37),l.Wc(48,S,13,3,"div",37),l.bc(49,"app-pagination",38),l.nc("outputParams",(function(e){return l.Pc(t),l.rc().getIndexParams(e)})),l.ac(),l.ac(),l.ac()}if(2&t){const t=l.rc();l.Hb(6),l.Zc(t.totalItems),l.Hb(2),l.zc("ngIf","all"==t.filterSelected),l.Hb(1),l.zc("ngIf","all"!=t.filterSelected),l.Hb(4),l.zc("ngModel",t.subLedgerData),l.Hb(2),l.zc("ngClass",t.isMobileView()),l.Hb(5),l.zc("ngClass",t.getFieldOrderBy("primayContact")),l.Hb(1),l.zc("ngModel",t.columnField.primayContact),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("billToParty")),l.Hb(1),l.zc("ngModel",t.columnField.billToParty),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("block_Unit")),l.Hb(1),l.zc("ngModel",t.columnField.block_Unit),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("due")),l.Hb(1),l.zc("ngModel",t.columnField.due),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("due_Indicator")),l.Hb(1),l.zc("ngModel",t.columnField.due_Indicator),l.Hb(3),l.zc("ngModel",t.columnField.action),l.Hb(2),l.zc("ngForOf",l.vc(43,23,l.vc(44,27,l.uc(45,31,l.vc(46,34,t.subLedgerDataList,t.columnField,t.selectedInput),t.subLedgerData),t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex)),l.Hb(5),l.zc("ngIf",t.isNoItemsAvailable()),l.Hb(1),l.zc("ngIf",t.isItemsAvailable()),l.Hb(1),l.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}const L=function(){return{exact:!0}};function x(t,e){if(1&t){const t=l.cc();l.bc(0,"div",52),l.bc(1,"div",53),l.Xb(2,"i-feather",54),l.ac(),l.bc(3,"div",55),l.bc(4,"h5"),l.Yc(5,"Select Invoice Types"),l.ac(),l.ac(),l.bc(6,"div",56),l.bc(7,"div",57),l.bc(8,"ul",58),l.bc(9,"li",59),l.bc(10,"a",60),l.nc("click",(function(){return l.Pc(t),l.rc().dialogClose()})),l.Yc(11,"Invoice - Single Line"),l.ac(),l.ac(),l.bc(12,"li",59),l.bc(13,"a",60),l.nc("click",(function(){return l.Pc(t),l.rc().dialogClose()})),l.Yc(14,"Invoice - Multi Line"),l.ac(),l.ac(),l.bc(15,"li",59),l.bc(16,"a",61),l.nc("click",(function(){return l.Pc(t),l.rc().dialogClose()})),l.Yc(17,"Credit Note"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac()}if(2&t){const t=e.$implicit;l.Hb(10),l.Bc("routerLink","/ams/income/post-multi-invoice/",t.apartmentBlockUnitId,"/single"),l.zc("routerLinkActiveOptions",l.Fc(7,L)),l.Hb(3),l.Bc("routerLink","/ams/income/post-multi-invoice/",t.apartmentBlockUnitId,"/multi"),l.zc("routerLinkActiveOptions",l.Fc(8,L)),l.Hb(3),l.Bc("routerLink","/ams/income/add-credit/",t.apartmentBlockUnitId,"/new"),l.zc("ngClass",t.isInvoiceAvailable?"":"disabled")("routerLinkActiveOptions",l.Fc(9,L))}}let H=(()=>{class t{constructor(t,e,c,n,i,a){this.injector=t,this.dialog=e,this.apartmentService=c,this.accountsService=n,this.sharedService=i,this.cookieService=a,this.isSubLedgerDataLoaded=!1,this.subLedgerData="",this.ItemStartIndex=0,this.itemLimit=10,this.unitFieldType="primayContact",this.unitOrder=!0,this.isMobile=!1,this.totalDueAmount=0,this.netDueAmount=0,this.filterSelected="all",this.singleBlock="Select Tower",this.selectedInput="",this.columnField={}}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}selectColInput(t){this.selectedInput=t}isMobileView(){return window.innerWidth<=767?"table-responsive":""}getDueAmount(t){return"Due"!=t}getSelected(t){return this.filterSelected==t?"selected":""}clearFilter(){this.filterSelected="all",this.singleBlock="Select Block"}showInvoiceTypes(t){var e={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:t.apartmentBlockUnitId};this.accountsService.getCustInvoicesByApartmentBlockUnitId(e).subscribe(e=>{t.isInvoiceAvailable=0!=e.length,this.dialogRef=this.dialog.open(this.viewInvoiceTypeRef,{panelClass:"material",disableClose:!0,data:t})})}dialogClose(){this.dialogRef.close()}stopPropagation(t){t.stopPropagation()}getAllBlockData(){this.isSubLedgerDataLoaded=!1,this.filterSelected="all",this.singleBlock="Select Block",this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.subLedgerDataList=t,this.totalItems=this.subLedgerDataList.length,this.netDueAmount=0,this.totalDueAmount=0,s.each(this.subLedgerDataList,(t,e)=>{this.netDueAmount=this.netDueAmount+t.due,t.due>=0&&(this.totalDueAmount=this.totalDueAmount+t.due)}),this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isSubLedgerDataLoaded=!0})}getSingleBlock(t){this.filterSelected="single",this.singleBlock=t.apartmentBlockNumber,this.selectedBlockId=t.apartmentBlockId,this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.subLedgerDataList=t.filter(t=>t.apartmentBlockNumber==this.singleBlock),this.totalItems=this.subLedgerDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.netDueAmount=0,this.totalDueAmount=0,s.each(this.subLedgerDataList,(t,e)=>{this.netDueAmount=this.netDueAmount+t.due,t.due>=0&&(this.totalDueAmount=this.totalDueAmount+t.due)})})}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}ngOnInit(){this.apartmentService.getApartmentBlockByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.blockListData=t,this.getAllBlockData()})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(l.s),l.Wb(d.b),l.Wb(a.a),l.Wb(o.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-sub-ledger"]],viewQuery:function(t,e){var c;1&t&&l.ed(I,!0),2&t&&l.Lc(c=l.oc())&&(e.viewInvoiceTypeRef=c.first)},decls:6,vars:3,consts:[[1,"income-sub-ledger-wrapper"],[4,"ngIf"],["class","card clear ov mb-3",4,"ngIf"],["class","card clear table-card",4,"ngIf"],["viewInvoiceTypeRef",""],[1,"card","clear","ov","mb-3"],[1,"card-body","no-border","filter-box"],["name","filter",1,"icon","mr-2"],[1,"dropdown"],["href","#","role","button","data-toggle","dropdown","id","AllBlockDropDown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle",3,"ngClass","click"],["href","#","role","button","data-toggle","dropdown","id","singleBlockDropDown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle",3,"ngClass"],[1,"arrow"],["aria-hidden","true",1,"fa","fa-angle-down"],["aria-labelledby","singleBlockDropDown",1,"dropdown-menu"],["href","javascript:void(0)",3,"click",4,"ngFor","ngForOf"],["href","javascript:void(0)",3,"click"],[1,"card","clear","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],["cellpadding","0","cellspacing","0",1,"table","table-resizable","table-checker",3,"ngClass"],["scope","col"],[3,"ngClass","click"],["type","text","placeholder","Primary Contact",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Bill to Party",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Tower Unit",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Due",1,"form-control",3,"ngModel","ngModelChange"],["scope","col",1,"max-50","text-center"],["type","text","placeholder","Due",1,"form-control","vis-h",3,"ngModel","ngModelChange"],["scope","col",1,"simple-actions"],["type","text","placeholder","Action",1,"form-control","vis-h",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["class","button-wrapper border-top",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],[1,"grey"],[1,"name","text-center"],[1,"dots","ml-1",3,"ngClass"],[1,"name","actions","text-center"],["href","javascript:void(0)","role","button","data-toggle","dropdown","id","invoiceDropDown","aria-haspopup","true","aria-expanded","false"],[1,"action-dot"],["aria-labelledby","invoiceDropDown",1,"dropdown-menu","action-menu","dropdown-menu-right"],["href","javascript:void(0)",3,"routerLink"],["href","javascript:void(0)"],[1,"button-wrapper","border-top"],[1,"snippet"],[1,"ml-1"],[1,"menu-info"],["mat-dialog-close","",1,"close-icon"],["name","x","width","20",1,"icon","del"],[1,"title"],[1,"card"],[1,"card-body","p-0","lists","other"],[1,"list-group"],[1,"list-inline-item"],["href","javascript:void(0)","routerLinkActive","active",1,"tc-d-grey",3,"routerLink","routerLinkActiveOptions","click"],["href","javascript:void(0)","routerLinkActive","active",1,"tc-d-grey",3,"ngClass","routerLink","routerLinkActiveOptions","click"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.Wc(1,f,1,0,"app-loader",1),l.Wc(2,C,17,4,"div",2),l.Wc(3,P,50,38,"div",3),l.Wc(4,x,18,10,"ng-template",null,4,l.Xc),l.ac()),2&t&&(l.Hb(1),l.zc("ngIf",!e.isSubLedgerDataLoaded),l.Hb(1),l.zc("ngIf",e.isSubLedgerDataLoaded),l.Hb(1),l.zc("ngIf",e.isSubLedgerDataLoaded))},directives:[n.l,m.a,b.b,n.j,n.k,p.b,g.d,g.l,g.o,p.d,h.a,i.e,d.d,i.d],pipes:[n.t,v.a,v.e,v.b],styles:[""]}),t})();var O=c("wd/R"),Y=c("6nBg"),F=c("1kSV");function w(t,e){1&t&&l.Xb(0,"app-loader")}function T(t,e){if(1&t&&(l.bc(0,"div",33),l.bc(1,"ul"),l.bc(2,"li"),l.bc(3,"p"),l.Yc(4,"Comments"),l.ac(),l.bc(5,"small"),l.Yc(6),l.ac(),l.ac(),l.ac(),l.ac()),2&t){const t=l.rc().$implicit;l.Hb(6),l.Zc(t.comment)}}function z(t,e){if(1&t){const t=l.cc();l.bc(0,"tr"),l.bc(1,"td",25),l.Yc(2),l.ac(),l.bc(3,"td",26),l.bc(4,"a",27),l.Yc(5),l.ac(),l.Wc(6,T,7,1,"ng-template",null,28,l.Xc),l.ac(),l.bc(8,"td",26),l.Yc(9),l.ac(),l.bc(10,"td",26),l.Yc(11),l.ac(),l.bc(12,"td",26),l.Yc(13),l.ac(),l.bc(14,"td"),l.bc(15,"label",29),l.bc(16,"input",30),l.nc("ngModelChange",(function(c){return l.Pc(t),e.$implicit.isEmailsent=c})),l.ac(),l.bc(17,"span",31),l.nc("click",(function(){l.Pc(t);const e=l.rc(2);return e.setActive(e.item)})),l.ac(),l.ac(),l.ac(),l.bc(18,"td"),l.bc(19,"div",32),l.bc(20,"label",29),l.bc(21,"input",30),l.nc("ngModelChange",(function(c){return l.Pc(t),e.$implicit.isSmssent=c})),l.ac(),l.bc(22,"span",31),l.nc("click",(function(){l.Pc(t);const e=l.rc(2);return e.setActive(e.item)})),l.ac(),l.ac(),l.ac(),l.ac(),l.ac()}if(2&t){const t=e.$implicit,c=l.Mc(7),n=l.rc(2);l.Hb(2),l.Zc(t.receiptNumber),l.Hb(2),l.zc("ngbPopover",c),l.Hb(1),l.ad(" ",t.name,""),l.Hb(4),l.Zc(n.getDate(t,t.paymentDate)),l.Hb(2),l.Zc(t.block_Unit),l.Hb(2),l.Zc(t.amount),l.Hb(3),l.zc("ngModel",t.isEmailsent),l.Hb(5),l.zc("ngModel",t.isSmssent)}}function B(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"div",2),l.bc(2,"div",3),l.bc(3,"div",4),l.bc(4,"h5"),l.Yc(5,"Total Receipts "),l.bc(6,"span",5),l.Yc(7),l.ac(),l.ac(),l.ac(),l.bc(8,"ul",6),l.bc(9,"li",7),l.Xb(10,"i",8),l.bc(11,"input",9),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().receiptsData=e})),l.ac(),l.ac(),l.bc(12,"li",10),l.bc(13,"a",11),l.Xb(14,"i-feather",12),l.bc(15,"span"),l.Yc(16,"Print"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(17,"div",13),l.bc(18,"table",14),l.bc(19,"thead"),l.bc(20,"tr"),l.bc(21,"th",15),l.Yc(22,"Receipt No "),l.bc(23,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("receiptNumber")})),l.ac(),l.bc(24,"input",17),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.receiptNumber=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("receiptNumber")})),l.ac(),l.ac(),l.bc(25,"th",15),l.Yc(26,"Name "),l.bc(27,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("name")})),l.ac(),l.bc(28,"input",18),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.name=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("name")})),l.ac(),l.ac(),l.bc(29,"th",15),l.Yc(30,"Payment Date "),l.bc(31,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("paymentDateFormat")})),l.ac(),l.bc(32,"app-simple-date-box",19),l.nc("inputChange",(function(e){return l.Pc(t),l.rc().onDateChange(e,"paymentDateFormat")})),l.ac(),l.ac(),l.bc(33,"th",15),l.Yc(34,"Tower Unit "),l.bc(35,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("block_Unit")})),l.ac(),l.bc(36,"input",20),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.block_Unit=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("block_Unit")})),l.ac(),l.ac(),l.bc(37,"th",15),l.Yc(38,"Credit Note Amount "),l.bc(39,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("amount")})),l.ac(),l.bc(40,"input",21),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.amount=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("amount")})),l.ac(),l.ac(),l.bc(41,"th",15),l.Yc(42," Email Sent "),l.bc(43,"input",22),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.isEmailsent=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("isEmailsent")})),l.ac(),l.ac(),l.bc(44,"th",15),l.Yc(45," SMS Sent "),l.bc(46,"input",22),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.isSmssent=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("isSmssent")})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(47,"tbody"),l.Wc(48,z,23,8,"tr",23),l.sc(49,"slice"),l.sc(50,"sort"),l.sc(51,"columnSearch"),l.sc(52,"simpleSearch"),l.ac(),l.ac(),l.bc(53,"app-pagination",24),l.nc("outputParams",(function(e){return l.Pc(t),l.rc().getIndexParams(e)})),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.rc();l.Hb(7),l.Zc(t.totalItems),l.Hb(4),l.zc("ngModel",t.receiptsData),l.Hb(7),l.zc("ngClass",t.isMobileView()),l.Hb(5),l.zc("ngClass",t.getFieldOrderBy("receiptNumber")),l.Hb(1),l.zc("ngModel",t.columnField.receiptNumber),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("name")),l.Hb(1),l.zc("ngModel",t.columnField.name),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("paymentDateFormat")),l.Hb(1),l.zc("dateModel",t.paymentDateFormat),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("block_Unit")),l.Hb(1),l.zc("ngModel",t.columnField.block_Unit),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("amount")),l.Hb(1),l.zc("ngModel",t.columnField.amount),l.Hb(3),l.zc("ngModel",t.columnField.isEmailsent),l.Hb(3),l.zc("ngModel",t.columnField.isSmssent),l.Hb(2),l.zc("ngForOf",l.vc(49,20,l.vc(50,24,l.vc(51,28,l.uc(52,32,t.receiptsDataList,t.receiptsData),t.columnField,t.selectedInput),t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex)),l.Hb(5),l.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let N=(()=>{class t{constructor(t,e,c,n,i,a){this.injector=t,this.dialog=e,this.apartmentService=c,this.accountsService=n,this.sharedService=i,this.cookieService=a,this.isReceiptsLoaded=!1,this.receiptsData="",this.ItemStartIndex=0,this.itemLimit=10,this.unitFieldType="receiptNumber",this.unitOrder=!0,this.isMobile=!1,this.selectedInput="",this.columnField={}}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}getEmailStatus(t){return t?"Y":"N"}getDate(t,e){return this.receiptsDataList.map(c=>{c.receiptNumber==t.receiptNumber&&(c.paymentDateFormat=O(e).format("DD/MM/YYYY"))}),O(e).format("DD/MM/YYYY")}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}setActive(t){return""}selectColInput(t){this.selectedInput=t}onSelectChange(t,e,c){s.isEmpty(t)?this.columnField={}:(this.selectedInput=e,this.columnField[e]=t[c])}onDateChange(t,e){null!=t?(this.selectedInput=e,this.columnField[e]=O(t).format("DD/MM/YYYY")):this.columnField={}}ngOnInit(){this.accountsService.GetIncomeTrackerReceiptsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.receiptsDataList=t,console.log(t),this.totalItems=this.receiptsDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isReceiptsLoaded=!0},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(l.s),l.Wb(d.b),l.Wb(a.a),l.Wb(o.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-view-receipts"]],decls:3,vars:2,consts:[[1,"income-receipts-wrapper"],[4,"ngIf"],[1,"card","table-card","clear"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","trans-white","mt_5"],["name","printer",1,"icon","print"],[1,"card-body","p-0"],[1,"table","table-checker","table-resizable",3,"ngClass"],["scope","col"],[3,"ngClass","click"],["type","text","placeholder","Receipt No",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","NAME",1,"form-control",3,"ngModel","ngModelChange"],[3,"dateModel","inputChange"],["type","text","placeholder","Tower Unit",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Amount",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Action",1,"form-control","vis-h",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],[1,"grey"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",3,"ngbPopover"],["popContent",""],[1,"switch","float-left"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slider","round",3,"click"],[1,"form-group"],[1,"pop-desp"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.Wc(1,w,1,0,"app-loader",1),l.Wc(2,B,54,35,"ng-container",1),l.ac()),2&t&&(l.Hb(1),l.zc("ngIf",!e.isReceiptsLoaded),l.Hb(1),l.zc("ngIf",e.isReceiptsLoaded))},directives:[n.l,m.a,p.b,g.d,g.l,g.o,b.b,p.d,n.j,Y.a,n.k,h.a,F.c,g.a],pipes:[n.t,v.a,v.b,v.e],styles:[""]}),t})();var G=c("NutR"),_=c("is7e");function U(t,e){1&t&&l.Xb(0,"app-loader")}function W(t,e){if(1&t&&(l.bc(0,"div",37),l.bc(1,"ul"),l.bc(2,"li"),l.bc(3,"h5"),l.Yc(4,"Comments"),l.ac(),l.bc(5,"small"),l.Yc(6),l.ac(),l.ac(),l.ac(),l.ac()),2&t){const t=l.rc().$implicit;l.Hb(6),l.Zc(t.comment)}}const E=function(){return{exact:!0}};function Z(t,e){if(1&t){const t=l.cc();l.bc(0,"tr"),l.bc(1,"td",26),l.Yc(2),l.ac(),l.bc(3,"td",26),l.bc(4,"a",27),l.Yc(5),l.ac(),l.Wc(6,W,7,1,"ng-template",null,28,l.Xc),l.ac(),l.bc(8,"td",29),l.Yc(9),l.ac(),l.bc(10,"td",29),l.Yc(11),l.ac(),l.bc(12,"td",29),l.Yc(13),l.ac(),l.bc(14,"td",29),l.Yc(15),l.ac(),l.bc(16,"td",29),l.Yc(17),l.ac(),l.bc(18,"td"),l.bc(19,"label",30),l.bc(20,"input",31),l.nc("ngModelChange",(function(c){return l.Pc(t),e.$implicit.isEmailSent=c})),l.ac(),l.bc(21,"span",32),l.nc("click",(function(){l.Pc(t);const c=e.$implicit;return l.rc(2).updateCreditItem(c)})),l.ac(),l.ac(),l.ac(),l.bc(22,"td"),l.bc(23,"div",33),l.bc(24,"label",30),l.bc(25,"input",31),l.nc("ngModelChange",(function(c){return l.Pc(t),e.$implicit.isSmssent=c})),l.ac(),l.bc(26,"span",32),l.nc("click",(function(){l.Pc(t);const c=e.$implicit;return l.rc(2).updateCreditItem(c)})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(27,"td",34),l.bc(28,"a",35),l.Xb(29,"i-feather",36),l.ac(),l.ac(),l.ac()}if(2&t){const t=e.$implicit,c=l.Mc(7),n=l.rc(2);l.Hb(2),l.Zc(t.invoiceId),l.Hb(2),l.zc("ngbPopover",c),l.Hb(1),l.ad(" ",n.getCustomerName(t.insertedBy),""),l.Hb(4),l.Zc(t.creditNoteId),l.Hb(2),l.Zc(t.collectionId),l.Hb(2),l.Zc(n.getDate(t,t.insertedOn)),l.Hb(2),l.Zc(t.block_Unit),l.Hb(2),l.Zc(t.amount),l.Hb(3),l.zc("ngModel",t.isEmailSent),l.Hb(5),l.zc("ngModel",t.isSmssent),l.Hb(3),l.Bc("routerLink","/ams/income/edit-credit/",t.creditNoteId,""),l.zc("routerLinkActiveOptions",l.Fc(12,E))}}function X(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"div",2),l.bc(2,"div",3),l.bc(3,"div",4),l.bc(4,"h5"),l.Yc(5,"Credit Notes "),l.bc(6,"span",5),l.Yc(7),l.ac(),l.ac(),l.ac(),l.bc(8,"ul",6),l.bc(9,"li",7),l.Xb(10,"i",8),l.bc(11,"input",9),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().creditNoteData=e})),l.ac(),l.ac(),l.bc(12,"li",10),l.bc(13,"a",11),l.Xb(14,"i-feather",12),l.bc(15,"span"),l.Yc(16,"Print"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(17,"div",13),l.bc(18,"table",14),l.bc(19,"thead"),l.bc(20,"tr"),l.bc(21,"th",15),l.Yc(22,"Invoice Id "),l.bc(23,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("invoiceId")})),l.ac(),l.bc(24,"input",17),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.invoiceId=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("invoiceId")})),l.ac(),l.ac(),l.bc(25,"th",15),l.Yc(26,"posted By "),l.bc(27,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("postedBy")})),l.ac(),l.bc(28,"app-simple-select-box",18),l.nc("inputChange",(function(e){return l.Pc(t),l.rc().onSelectChange(e,"postedByName","firstName")})),l.ac(),l.ac(),l.bc(29,"th",15),l.Yc(30,"Credit Note Id "),l.bc(31,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("creditNoteId")})),l.ac(),l.bc(32,"input",17),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.creditNoteId=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("creditNoteId")})),l.ac(),l.ac(),l.bc(33,"th",15),l.Yc(34,"Collection Id "),l.bc(35,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("collectionId")})),l.ac(),l.bc(36,"input",17),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.collectionId=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("collectionId")})),l.ac(),l.ac(),l.bc(37,"th",15),l.Yc(38,"Posted Date "),l.bc(39,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("postedOn")})),l.ac(),l.bc(40,"app-simple-date-box",19),l.nc("inputChange",(function(e){return l.Pc(t),l.rc().onDateChange(e,"postedOn")})),l.ac(),l.ac(),l.bc(41,"th",15),l.Yc(42,"Tower Unit "),l.bc(43,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("block_Unit")})),l.ac(),l.bc(44,"input",20),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.block_Unit=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("block_Unit")})),l.ac(),l.ac(),l.bc(45,"th",15),l.Yc(46,"Amount "),l.bc(47,"span",16),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("amount")})),l.ac(),l.bc(48,"input",21),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.amount=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("amount")})),l.ac(),l.ac(),l.bc(49,"th",15),l.Yc(50," Sent Email "),l.bc(51,"input",22),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.action=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("action")})),l.ac(),l.ac(),l.bc(52,"th",15),l.Yc(53," SMS/Email "),l.bc(54,"input",22),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.action=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("action")})),l.ac(),l.ac(),l.bc(55,"th",23),l.Yc(56," Actions "),l.bc(57,"input",22),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.action=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("action")})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(58,"tbody"),l.Wc(59,Z,30,13,"tr",24),l.sc(60,"slice"),l.sc(61,"sort"),l.sc(62,"columnSearch"),l.sc(63,"simpleSearch"),l.ac(),l.ac(),l.bc(64,"app-pagination",25),l.nc("outputParams",(function(e){return l.Pc(t),l.rc().getIndexParams(e)})),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.rc();l.Hb(7),l.Zc(t.totalItems),l.Hb(4),l.zc("ngModel",t.creditNoteData),l.Hb(7),l.zc("ngClass",t.isMobileView()),l.Hb(5),l.zc("ngClass",t.getFieldOrderBy("invoiceId")),l.Hb(1),l.zc("ngModel",t.columnField.invoiceId),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("postedBy")),l.Hb(1),l.zc("fieldModel",t.postedBy)("fieldRequired","required")("fieldList",t.userDataList),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("creditNoteId")),l.Hb(1),l.zc("ngModel",t.columnField.creditNoteId),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("collectionId")),l.Hb(1),l.zc("ngModel",t.columnField.collectionId),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("postedOn")),l.Hb(1),l.zc("dateModel",t.postedOn),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("block_Unit")),l.Hb(1),l.zc("ngModel",t.columnField.block_Unit),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("amount")),l.Hb(1),l.zc("ngModel",t.columnField.amount),l.Hb(3),l.zc("ngModel",t.columnField.action),l.Hb(3),l.zc("ngModel",t.columnField.action),l.Hb(3),l.zc("ngModel",t.columnField.action),l.Hb(2),l.zc("ngForOf",l.vc(60,27,l.vc(61,31,l.vc(62,35,l.uc(63,39,t.creditNoteDataList,t.creditNoteData),t.columnField,t.selectedInput),t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex)),l.Hb(5),l.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let R=(()=>{class t{constructor(t,e,c,n,i,a,o){this.injector=t,this.dialog=e,this.userService=c,this.apartmentService=n,this.accountsService=i,this.sharedService=a,this.cookieService=o,this.isCreditNoteLoaded=!1,this.creditNoteData="",this.ItemStartIndex=0,this.itemLimit=10,this.unitFieldType="invoiceId",this.unitOrder=!0,this.isMobile=!1,this.selectedInput="",this.columnField={}}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}selectColInput(t){this.selectedInput=t}onSelectChange(t,e,c){s.isEmpty(t)?this.columnField={}:(this.selectedInput=e,this.columnField[e]=t[c])}onDateChange(t,e){null!=t?(this.selectedInput=e,this.columnField[e]=O(t).format("DD/MM/YYYY")):this.columnField={}}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}getCustomerName(t){var e=s.filter(this.userDataList,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].firstName+" "+e[0].lastName}getBlockUnitDetails(t,e){var c=s.filter(this.blockUnitData,(function(t){if(t.apartmentBlockUnitId===e)return t}));return void 0===c||0==c.length?"":(this.creditNoteDataList.map(e=>{e.invoiceId==t.invoiceId&&(e.towerUnit=c[0].apartmentBlockNumber+" "+c[0].apartmentBlockUnitNumber)}),c[0].apartmentBlockNumber+" "+c[0].apartmentBlockUnitNumber)}getEmailStatus(t){return t?"Y":"N"}getDate(t,e){return this.creditNoteDataList.map(c=>{c.invoiceId==t.invoiceId&&(c.postedOn=O(e).format("DD/MM/YYYY"))}),O(e).format("DD/MM/YYYY")}updateCreditItem(t){setTimeout(()=>{this.isCreditNoteLoaded=!1;var e={creditNoteId:parseInt(t.creditNoteId),apartmentId:parseInt(this.cookieService.get("apartmentId")),amount:parseInt(t.amount),collectionId:parseInt(t.collectionId),invoiceId:parseInt(t.invoiceId),isEmailSent:t.isEmailSent,isSmssent:t.isSmssent,comment:t.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:(new Date).toISOString(),transReference1:"string",transReference2:"string",glAcctIndicator:"Income",apartmentBlockUnitId:parseInt(t.apartmentBlockUnitId)};this.accountsService.updateCreditNote(e).subscribe(t=>{t.message?(this.isCreditNoteLoaded=!0,this.sharedService.setAlertMessage("Credit Note updated successfully")):this.isCreditNoteLoaded=!0},t=>{this.isCreditNoteLoaded=!0})},1e3)}ngOnInit(){this.userDataList=[],this.userService.getAllUsers().subscribe(t=>{this.userDataList=t}),this.accountsService.getCreditNotesByApartmentIdStatus(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.creditNoteDataList=t,this.totalItems=this.creditNoteDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isCreditNoteLoaded=!0,this.accountsService.getCustInvoicesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.custInvoiceDataList=t.filter(t=>t.isActive)},t=>{console.log(t)})},t=>{console.log(t)}),this.apartmentService.getAllApartmentBlockUnits().subscribe(t=>{this.blockUnitData=t})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(l.s),l.Wb(d.b),l.Wb(G.a),l.Wb(a.a),l.Wb(o.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-view-credit"]],decls:3,vars:2,consts:[[1,"income-credit-note-wrapper"],[4,"ngIf"],[1,"card","clear","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","trans-white","mt_5"],["name","printer",1,"icon","print"],[1,"card-body","p-0"],[1,"table","table-checker","table-resizable",3,"ngClass"],["scope","col"],[3,"ngClass","click"],["type","text","placeholder","ID",1,"form-control",3,"ngModel","ngModelChange"],["fieldName","postedByName","fieldText","","fieldItemName","firstName","isLabel","false","fieldPlaceholder","Select",3,"fieldModel","fieldRequired","fieldList","inputChange"],[3,"dateModel","inputChange"],["type","text","placeholder","Tower Unit",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Amount",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Action",1,"form-control","vis-h",3,"ngModel","ngModelChange"],["scope","col",1,"simple-actions"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",3,"ngbPopover"],["popContent",""],[1,"grey"],[1,"switch","float-left"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slider","round",3,"click"],[1,"form-group"],[1,"simple-actions"],["href","javascript:void(0)","routerLinkActive","active",1,"mr-2",3,"routerLink","routerLinkActiveOptions"],["name","edit",1,"icon","edit"],[1,"pop-desp"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.Wc(1,U,1,0,"app-loader",1),l.Wc(2,X,65,42,"ng-container",1),l.ac()),2&t&&(l.Hb(1),l.zc("ngIf",!e.isCreditNoteLoaded),l.Hb(1),l.zc("ngIf",e.isCreditNoteLoaded))},directives:[n.l,m.a,p.b,g.d,g.l,g.o,b.b,p.d,n.j,_.a,Y.a,n.k,h.a,F.c,g.a,i.e,i.d],pipes:[n.t,v.a,v.b,v.e],styles:[""]}),t})();var V=c("ThaB");function $(t,e){1&t&&l.Xb(0,"app-loader")}function q(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"form",1,2),l.nc("ngSubmit",(function(){l.Pc(t);const e=l.Mc(2);return l.rc().submitReverseIncomeInvoiceForm(e)})),l.bc(3,"div",3),l.bc(4,"div",4),l.bc(5,"div",5),l.bc(6,"label"),l.Yc(7,"Comments"),l.ac(),l.bc(8,"input",6),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().invoice.comment=e})),l.ac(),l.ac(),l.ac(),l.bc(9,"div",7),l.bc(10,"button",8),l.Yc(11,"Submit"),l.ac(),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.Mc(2),e=l.rc();l.Hb(8),l.zc("ngModel",e.invoice.comment),l.Hb(2),l.zc("disabled",t.invalid)}}let j=(()=>{class t{constructor(t,e,c,n,i,a){this.router=t,this.route=e,this.accountsService=c,this.sharedService=n,this.lookupService=i,this.cookieService=a,this.isInvoiceSubmitted=!0,this.isError=!1,this.alertMessage=""}submitReverseIncomeInvoiceForm(t){this.isInvoiceSubmitted=!1;let e={apartmentId:parseInt(this.cookieService.get("apartmentId")),amount:this.invoice.custInvoiceAmount,collectionId:0,invoiceId:this.invoice.custInvoiceId,isEmailSent:!0,isSmssent:!0,comment:this.invoice.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:null,updatedOn:null,transReference1:"string",transReference2:"string",glAcctIndicator:"Income"};this.accountsService.addCustTransReversal(e).subscribe(t=>{t.message?(this.isInvoiceSubmitted=!0,this.sharedService.setAlertMessage("Invoice reversed successfully")):(this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.c),l.Wb(i.a),l.Wb(o.a),l.Wb(r.a),l.Wb(V.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-invoice-reverse"]],inputs:{invoice:"invoice"},decls:2,vars:2,consts:[[4,"ngIf"],["name","reverseIncomeInvoiceForm","novalidate","",3,"ngSubmit"],["reverseIncomeInvoiceForm","ngForm"],[1,"row"],[1,"col-sm-12"],[1,"input-box"],["type","text","placeholder","Enter text","name","comment","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue",3,"disabled"]],template:function(t,e){1&t&&(l.Wc(0,$,1,0,"app-loader",0),l.Wc(1,q,12,2,"ng-container",0)),2&t&&(l.zc("ngIf",!e.isInvoiceSubmitted),l.Hb(1),l.zc("ngIf",e.isInvoiceSubmitted))},directives:[n.l,m.a,g.z,g.m,g.n,g.d,g.v,g.l,g.o],styles:[""]}),t})();function Q(t,e){1&t&&l.Xb(0,"app-loader")}function J(t,e){1&t&&(l.bc(0,"ul",29),l.bc(1,"li",30),l.Xb(2,"span",31),l.Yc(3,"Pending"),l.ac(),l.bc(4,"li",30),l.Xb(5,"span",32),l.Yc(6,"Nill"),l.ac(),l.ac())}function K(t,e){if(1&t&&(l.bc(0,"div",48),l.bc(1,"ul"),l.bc(2,"li"),l.bc(3,"h6"),l.Yc(4,"Comments"),l.ac(),l.bc(5,"p"),l.Yc(6),l.ac(),l.ac(),l.ac(),l.ac()),2&t){const t=l.rc().$implicit;l.Hb(6),l.Zc(t.comments)}}const tt=function(){return{exact:!0}};function et(t,e){if(1&t){const t=l.cc();l.bc(0,"tr"),l.bc(1,"td",33),l.bc(2,"a",34),l.Yc(3),l.ac(),l.ac(),l.bc(4,"td",33),l.Yc(5),l.ac(),l.bc(6,"td",33),l.bc(7,"a",35),l.Yc(8),l.ac(),l.Wc(9,K,7,1,"ng-template",null,36,l.Xc),l.ac(),l.bc(11,"td",33),l.Yc(12),l.ac(),l.bc(13,"td",33),l.Yc(14),l.ac(),l.bc(15,"td"),l.bc(16,"label",37),l.bc(17,"input",38),l.nc("ngModelChange",(function(c){return l.Pc(t),e.$implicit.isEmailSent=c})),l.ac(),l.bc(18,"span",39),l.nc("click",(function(){l.Pc(t);const c=e.$implicit;return l.rc(2).updateInvoiceItem(c)})),l.ac(),l.ac(),l.ac(),l.bc(19,"td"),l.bc(20,"div",40),l.bc(21,"label",37),l.bc(22,"input",38),l.nc("ngModelChange",(function(c){return l.Pc(t),e.$implicit.isSmssent=c})),l.ac(),l.bc(23,"span",39),l.nc("click",(function(){l.Pc(t);const c=e.$implicit;return l.rc(2).updateInvoiceItem(c)})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(24,"td",41),l.bc(25,"a",42),l.Xb(26,"i-feather",43),l.ac(),l.bc(27,"div",44),l.nc("click",(function(e){return l.Pc(t),l.rc(2).stopPropagation(e)})),l.Xb(28,"app-income-invoice-reverse",45),l.ac(),l.bc(29,"a",46),l.Xb(30,"i-feather",47),l.ac(),l.ac(),l.ac()}if(2&t){const t=e.$implicit,c=l.Mc(10),n=l.rc(2);l.Hb(3),l.Zc(t.custInvoiceId),l.Hb(2),l.Zc(n.getInvoiceDate(t.custInvoiceDate)),l.Hb(2),l.zc("ngbPopover",c),l.Hb(1),l.ad(" ",n.getUserName(t,t.postedBy),""),l.Hb(4),l.Zc(t.block_Unit),l.Hb(2),l.Zc(t.custInvoiceAmount),l.Hb(3),l.zc("ngModel",t.isEmailSent),l.Hb(5),l.zc("ngModel",t.isSmssent),l.Hb(6),l.zc("invoice",t),l.Hb(1),l.Bc("routerLink","/ams/income/edit-invoice/",t.custInvoiceId,""),l.zc("routerLinkActiveOptions",l.Fc(11,tt))}}function ct(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"div",2),l.bc(2,"div",3),l.bc(3,"a",4),l.bc(4,"div",5),l.Xb(5,"img",6),l.ac(),l.bc(6,"span",7),l.Yc(7,"View Sub Ledger"),l.ac(),l.ac(),l.ac(),l.ac(),l.Wc(8,J,7,0,"ul",8),l.bc(9,"div",9),l.bc(10,"div",10),l.bc(11,"div",11),l.bc(12,"h5"),l.Yc(13,"All Invoices "),l.bc(14,"span",12),l.Yc(15),l.ac(),l.ac(),l.ac(),l.bc(16,"ul",13),l.bc(17,"li",14),l.Xb(18,"i",15),l.bc(19,"input",16),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().invoiceData=e})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(20,"div",17),l.bc(21,"table",18),l.bc(22,"thead"),l.bc(23,"tr"),l.bc(24,"th",19),l.Yc(25," Invoice Id "),l.bc(26,"span",20),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("custInvoiceId")})),l.ac(),l.bc(27,"input",21),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.custInvoiceId=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("custInvoiceId")})),l.ac(),l.ac(),l.bc(28,"th",19),l.Yc(29,"Invoice Date "),l.bc(30,"span",20),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("postedOn")})),l.ac(),l.bc(31,"app-simple-date-box",22),l.nc("inputChange",(function(e){return l.Pc(t),l.rc().onDateChange(e,"postedOn")})),l.ac(),l.ac(),l.bc(32,"th",19),l.Yc(33," Posted By "),l.bc(34,"span",20),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("postedByName")})),l.ac(),l.bc(35,"input",23),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.postedByName=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("postedByName")})),l.ac(),l.ac(),l.bc(36,"th",19),l.Yc(37," Tower Unit "),l.bc(38,"span",20),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("block_Unit")})),l.ac(),l.bc(39,"input",24),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.block_Unit=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("block_Unit")})),l.ac(),l.ac(),l.bc(40,"th",19),l.Yc(41,"Due "),l.bc(42,"span",20),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("custInvoiceAmount")})),l.ac(),l.bc(43,"input",25),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.custInvoiceAmount=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("custInvoiceAmount")})),l.ac(),l.ac(),l.bc(44,"th",19),l.Yc(45," Sent Email "),l.bc(46,"input",25),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.isSmssent=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("isSmssent")})),l.ac(),l.ac(),l.bc(47,"th",19),l.Yc(48," SMS/Email "),l.bc(49,"input",25),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.isEmailSent=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("isEmailSent")})),l.ac(),l.ac(),l.bc(50,"th",26),l.Yc(51," Actions "),l.bc(52,"input",25),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.action=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("action")})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(53,"tbody"),l.Wc(54,et,31,12,"tr",27),l.sc(55,"slice"),l.sc(56,"sort"),l.sc(57,"columnSearch"),l.sc(58,"simpleSearch"),l.ac(),l.ac(),l.bc(59,"app-pagination",28),l.nc("outputParams",(function(e){return l.Pc(t),l.rc().getIndexParams(e)})),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.rc();l.Hb(3),l.zc("routerLinkActiveOptions",l.Fc(38,tt)),l.Hb(5),l.zc("ngIf",t.isInvoiceDataLoaded),l.Hb(7),l.Zc(t.totalItems),l.Hb(4),l.zc("ngModel",t.invoiceData),l.Hb(2),l.zc("ngClass",t.isMobileView()),l.Hb(5),l.zc("ngClass",t.getFieldOrderBy("custInvoiceId")),l.Hb(1),l.zc("ngModel",t.columnField.custInvoiceId),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("postedOn")),l.Hb(1),l.zc("dateModel",t.postedOn),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("postedByName")),l.Hb(1),l.zc("ngModel",t.columnField.postedByName),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("block_Unit")),l.Hb(1),l.zc("ngModel",t.columnField.block_Unit),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("custInvoiceAmount")),l.Hb(1),l.zc("ngModel",t.columnField.custInvoiceAmount),l.Hb(3),l.zc("ngModel",t.columnField.isSmssent),l.Hb(3),l.zc("ngModel",t.columnField.isEmailSent),l.Hb(3),l.zc("ngModel",t.columnField.action),l.Hb(2),l.zc("ngForOf",l.vc(55,23,l.vc(56,27,l.vc(57,31,l.uc(58,35,t.invoiceDataList,t.invoiceData),t.columnField,t.selectedInput),t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex)),l.Hb(5),l.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let nt=(()=>{class t{constructor(t,e,c,n,i,a){this.router=t,this.route=e,this.userService=c,this.accountsService=n,this.sharedService=i,this.cookieService=a,this.isInvoiceDataLoaded=!1,this.invoiceData="",this.ItemStartIndex=0,this.itemLimit=10,this.unitFieldType="custInvoiceId",this.unitOrder=!0,this.isMobile=!1,this.glAccountIndicator="Income",this.selectedInput="",this.columnField={}}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}getUserName(t,e){var c=s.filter(this.userDataList,(function(t){if(t.userId===e)return t}));return void 0===c||0==c.length?"":(this.invoiceDataList.map(e=>{e.custInvoiceId==t.custInvoiceId&&(e.postedByName=c[0].firstName+" "+c[0].lastName)}),c[0].firstName+" "+c[0].lastName)}getAccountName(t,e){var c={glaccountId:0};c.glaccountId=null==e||0==e.length?0:e[0].glaccountId;var n=s.filter(this.glAccountListData,(function(t){if(t.glaccountId===c.glaccountId)return t}));return void 0===n||0==n.length?"":(this.invoiceDataList.map(e=>{e.custInvoiceId==t.custInvoiceId&&(e.glaccountName=n[0].glaccountName)}),n[0].glaccountName)}getDueAmount(t,e){return t-e>0?"high":"low"}selectColInput(t){this.selectedInput=t}onSelectChange(t,e,c){s.isEmpty(t)?this.columnField={}:(this.selectedInput=e,this.columnField[e]=t[c])}onDateChange(t,e){null!=t?(this.selectedInput=e,this.columnField[e]=O(t).format("DD/MM/YYYY")):this.columnField={}}getInvoiceDate(t,e){return this.invoiceDataList.map(c=>{c.custInvoiceId==t.custInvoiceId&&(c.postedOn=O(e).format("DD/MM/YYYY"))}),O(e).format("DD/MM/YYYY")}isMobileView(){return window.innerWidth<=767?"table-responsive":""}stopPropagation(t){t.stopPropagation()}updateInvoiceItem(t){setTimeout(()=>{this.isInvoiceDataLoaded=!1;let e={custInvoiceId:t.custInvoiceId,apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:t.apartmentBlockUnitId,custInvoiceAmount:parseInt(t.custInvoiceAmount),custInvoiceDate:(new Date).toISOString(),dueDate:t.dueDate,tax1:0,tax2:0,tax3:0,isTax:t.isTax,isRecurCustInvoice:t.isRecurCustInvoice,isEmailSent:!1,isSmssent:!1,custInvoiceStatusId:1,postedBy:parseInt(this.cookieService.get("userId")),postedOn:(new Date).toISOString(),billToPay:"string",comments:t.comments||"",penaltyAmount:0,penaltyComment:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:(new Date).toISOString(),transReference1:"string",transReference2:"string",invoiceGLAccounts:[{invoiceGlaccountId:t.invoiceGLAccounts[0].invoiceGlaccountId,apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:t.invoiceGLAccounts[0].glaccountId,comments:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:(new Date).toISOString(),amount:t.custInvoiceAmount}]};this.accountsService.updateCustInvoice(e).subscribe(t=>{t.message?(this.isInvoiceDataLoaded=!0,this.sharedService.setAlertMessage("Invoice updated successfully")):this.isInvoiceDataLoaded=!0},t=>{this.isInvoiceDataLoaded=!0})},1e3)}ngOnInit(){parseInt(this.cookieService.get("apartmentId")),this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountListData=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),parseInt(this.cookieService.get("apartmentId")),this.accountsService.getCustInvoicesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.invoiceDataList=t,s.each(this.invoiceDataList,t=>{t.towerUnit=t.apartmentBlockNumber+" "+t.apartmentBlockUnitNumber}),this.totalItems=this.invoiceDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.userDataList=t,this.isInvoiceDataLoaded=!0},t=>{})})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.c),l.Wb(i.a),l.Wb(G.a),l.Wb(o.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-view-invoice"]],decls:3,vars:2,consts:[[1,"income-view-invoice-wrapper"],[4,"ngIf"],[1,"relative-card","float-right"],[1,"relative-icon"],["href","javascript:void(0)","routerLink","/ams/income/subledger","routerLinkActive","active",3,"routerLinkActiveOptions"],[1,"icon-wrapper"],["src","assets/images/book-icon.svg","width","17",1,"svg"],[1,"d-inline-block"],["class","legends list-inline",4,"ngIf"],[1,"card","clear","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"table","table-checker","table-resizable",3,"ngClass"],["scope","col"],[3,"ngClass","click"],["type","text","placeholder","ID",1,"form-control",3,"ngModel","ngModelChange"],[3,"dateModel","inputChange"],["type","text","placeholder","Posted By",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Tower Unit",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Action",1,"form-control","vis-h",3,"ngModel","ngModelChange"],["scope","col",1,"simple-actions"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"legends","list-inline"],[1,"list-inline-item"],[1,"dots","high"],[1,"dots","low"],[1,"grey"],["href","javascript:void(0)"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",1,"t-decor",3,"ngbPopover"],["popContent",""],[1,"switch","float-left"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slider","round",3,"click"],[1,"form-group"],[1,"name","text-center"],["href","javascript:void(0)","role","button","data-toggle","dropdown","id","reverseIncomeInvoiceDropDown","aria-haspopup","true","aria-expanded","false",1,"mr-3"],["name","activity",1,"icon","send","ot"],["aria-labelledby","reverseIncomeInvoiceDropDown",1,"dropdown-menu","page-menu","icon-menu","dropdown-menu-right",3,"click"],[3,"invoice"],["href","javascript:void(0)","routerLinkActive","active",1,"mr-2",3,"routerLink","routerLinkActiveOptions"],["name","edit",1,"icon","edit"],[1,"pop-desp"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.Wc(1,Q,1,0,"app-loader",1),l.Wc(2,ct,60,39,"ng-container",1),l.ac()),2&t&&(l.Hb(1),l.zc("ngIf",!e.isInvoiceDataLoaded),l.Hb(1),l.zc("ngIf",e.isInvoiceDataLoaded))},directives:[n.l,m.a,i.e,i.d,p.c,p.b,g.d,g.l,g.o,p.d,n.j,Y.a,n.k,h.a,F.c,g.a,b.b,j],pipes:[n.t,v.a,v.b,v.e],styles:[""]}),t})();var it=c("BniF");function at(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"li",38),l.Yc(2),l.bc(3,"i-feather",39),l.nc("click",(function(){l.Pc(t);const c=e.$implicit;return l.rc(2).removeFilterItem(c)})),l.ac(),l.ac(),l.Yb()}if(2&t){const t=e.$implicit,c=l.rc(2);l.Hb(1),l.zc("ngClass",c.isItem(t)?"d-inline-block":"d-none"),l.Hb(1),l.ad(" ",c.getFilterData(t)," ")}}function ot(t,e){if(1&t&&(l.Zb(0),l.Wc(1,at,4,2,"ng-container",37),l.Yb()),2&t){const t=l.rc();l.Hb(1),l.zc("ngForOf",t.Object.keys(t.filter))}}let rt=(()=>{class t{constructor(t,e,c){this.accountsService=t,this.sharedService=e,this.cookieService=c,this.Object=Object,this.fieldParams=new l.o}onFilterFieldChange(t){this.filterDataList=t}getFilterData(t){if("PostStartDate"==t)return this.getInvoiceDate(this.filter[t]);if("PostEndDate"==t)return this.getInvoiceDate(this.filter[t]);if("billNo"==t)return this.filter[t];if("receiptNo"==t)return this.filter[t];if("isReversed"==t){if(this.filter[t])return"is Reverse"}else if("isCreditNote"==t&&this.filter[t])return"is Credit Note"}removeFilterItem(t){this.filter[t]=("string"==typeof t||"number"==typeof t)&&null,this.isFilterObjectNull()&&(this.resetFilter(),this.fieldParams.emit(this.filter))}isFilterObjectNull(){for(var t in this.filter)if(null!=this.filter[t]&&""!=this.filter[t])return!1;return!0}getInvoiceDate(t){return O(t).format("MM-DD-YYYY")}clearFilterItems(){this.resetFilter(),this.fieldParams.emit(this.filter)}submitIncomeFilterForm(t){this.fieldParams.emit(this.filter)}isItem(t){return!(!this.filter[t]||null==this.filter[t])}resetFilter(){this.filter={},this.filter.isReversed=null,this.filter.isCreditNote=null,this.filter.PostStartDate=null,this.filter.PostEndDate=null,this.filter.billNo=null,this.filter.receiptNo=null}ngOnInit(){this.resetFilter()}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(o.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-tracker-filter"]],outputs:{fieldParams:"fieldParams"},decls:63,vars:16,consts:[["id","accordion",1,"card","mb-20","filter-card"],["name","incomeFilterForm","novalidate","",3,"ngSubmit"],["incomeFilterForm","ngForm"],["data-toggle","collapse","data-target","#filterCollapseOne","aria-expanded","true","aria-controls","filterCollapseOne",1,"card-header","filter-box","accor","collapsed"],["name","filter",1,"icon","mr-2"],["id","filterCollapseOne","aria-labelledby","filterCollapseOne","data-parent","#accordion",1,"collapse"],[1,"card-header","border-top"],[1,"row"],[1,"col-sm-3"],[1,"select-box","mb-2"],["name","PostStartDate","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["PostStartDate",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","calendar","width","18",1,"icon","date","float-left"],["name","PostEndDate","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["PostEndDate",""],[1,"input-box","mb-2"],["type","number","OnlyNumber","true","placeholder","Enter text","name","billNo",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter text","name","receiptNo",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-header"],[1,"list-inline"],[1,"list-inline-item","mr-5"],[1,"input-box","d-inline-block","oh","mb-0","mt-1"],[1,"form-group"],[1,"form-check","recur-check","float-left"],["type","checkbox","id","isInvoiceCreditNote","name","isInvoiceCreditNote",1,"form-check-input",3,"ngModel","value","ngModelChange"],["for","isInvoiceCreditNote",1,"form-check-label","tiny"],[1,"list-inline-item"],["type","checkbox","id","isInvoiceReverse","name","isInvoiceReverse",1,"form-check-input",3,"ngModel","ngModelChange"],["for","isInvoiceReverse",1,"form-check-label","tiny"],[1,"card-body"],[1,"col-sm-8"],[4,"ngIf"],[1,"col-sm-4","text-right"],[1,"btn","lime-green","sf",3,"disabled"],[1,"btn","trans-red","ml-3","sf",3,"click"],[4,"ngFor","ngForOf"],[1,"list-inline-item","filter-badge","grey-blue",3,"ngClass"],["name","x",1,"icon","del",3,"click"]],template:function(t,e){if(1&t){const t=l.cc();l.bc(0,"div",0),l.bc(1,"form",1,2),l.nc("ngSubmit",(function(){l.Pc(t);const c=l.Mc(2);return e.submitIncomeFilterForm(c)})),l.bc(3,"div",3),l.bc(4,"h6"),l.Xb(5,"i-feather",4),l.Yc(6,"Filter By"),l.ac(),l.ac(),l.bc(7,"div",5),l.bc(8,"div",6),l.bc(9,"div",7),l.bc(10,"div",8),l.bc(11,"div",9),l.bc(12,"label"),l.Yc(13,"Posted From"),l.ac(),l.bc(14,"input",10),l.nc("ngModelChange",(function(t){return e.filter.PostStartDate=t})),l.ac(),l.Xb(15,"owl-date-time",11,12),l.bc(17,"div",13),l.Xb(18,"i-feather",14),l.ac(),l.ac(),l.ac(),l.bc(19,"div",8),l.bc(20,"div",9),l.bc(21,"label"),l.Yc(22,"Posted To"),l.ac(),l.bc(23,"input",15),l.nc("ngModelChange",(function(t){return e.filter.PostEndDate=t})),l.ac(),l.Xb(24,"owl-date-time",11,16),l.bc(26,"div",13),l.Xb(27,"i-feather",14),l.ac(),l.ac(),l.ac(),l.bc(28,"div",8),l.bc(29,"div",17),l.bc(30,"label"),l.Yc(31,"Bill Number"),l.ac(),l.bc(32,"input",18),l.nc("ngModelChange",(function(t){return e.filter.billNo=t})),l.ac(),l.ac(),l.ac(),l.bc(33,"div",8),l.bc(34,"div",17),l.bc(35,"label"),l.Yc(36,"Receipt Number"),l.ac(),l.bc(37,"input",19),l.nc("ngModelChange",(function(t){return e.filter.receiptNo=t})),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(38,"div",20),l.bc(39,"ul",21),l.bc(40,"li",22),l.bc(41,"div",23),l.bc(42,"div",24),l.bc(43,"div",25),l.bc(44,"input",26),l.nc("ngModelChange",(function(t){return e.filter.isCreditNote=t})),l.ac(),l.bc(45,"label",27),l.Yc(46,"Is Credit Note"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(47,"li",28),l.bc(48,"div",23),l.bc(49,"div",24),l.bc(50,"div",25),l.bc(51,"input",29),l.nc("ngModelChange",(function(t){return e.filter.isReversed=t})),l.ac(),l.bc(52,"label",30),l.Yc(53,"Is Reverse"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(54,"div",31),l.bc(55,"div",7),l.bc(56,"div",32),l.Wc(57,ot,2,1,"ng-container",33),l.ac(),l.bc(58,"div",34),l.bc(59,"button",35),l.Yc(60,"Apply Filter"),l.ac(),l.bc(61,"div",36),l.nc("click",(function(){return e.clearFilterItems()})),l.Yc(62,"Clear"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac()}if(2&t){const t=l.Mc(16),c=l.Mc(25);l.Hb(14),l.zc("owlDateTime",t)("owlDateTimeTrigger",t)("ngModel",e.filter.PostStartDate),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",t),l.Hb(6),l.zc("owlDateTime",c)("owlDateTimeTrigger",c)("ngModel",e.filter.PostEndDate),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",c),l.Hb(6),l.zc("ngModel",e.filter.billNo),l.Hb(5),l.zc("ngModel",e.filter.receiptNo),l.Hb(7),l.zc("ngModel",e.filter.isCreditNote),l.Hb(7),l.zc("ngModel",e.filter.isReversed),l.Hb(6),l.zc("ngIf",!e.isFilterObjectNull()),l.Hb(2),l.zc("disabled",e.isFilterObjectNull())}},directives:[g.z,g.m,g.n,b.b,it.c,g.d,it.e,g.l,g.o,it.b,g.q,p.a,g.a,n.l,n.k,n.j],styles:[""]}),t})();function st(t,e){1&t&&l.Xb(0,"app-loader")}function lt(t,e){if(1&t&&(l.bc(0,"div",9),l.bc(1,"p",10),l.bc(2,"span"),l.Yc(3,"Bill to party: "),l.ac(),l.Yc(4),l.ac(),l.bc(5,"p",11),l.bc(6,"span"),l.Yc(7,"Contact Person: "),l.ac(),l.Yc(8),l.ac(),l.bc(9,"p",11),l.bc(10,"span"),l.Yc(11,"Unit: "),l.ac(),l.Yc(12),l.ac(),l.ac()),2&t){const t=l.rc(3);l.Hb(4),l.Zc(t.accountDataList[0].billToParty),l.Hb(4),l.Zc(t.accountDataList[0].primayContact),l.Hb(4),l.bd("",t.accountDataList[0].apartmentBlockNumber," ",t.accountDataList[0].apartmentBlockUnitNumber,"")}}function dt(t,e){if(1&t&&(l.bc(0,"div",6),l.bc(1,"div",7),l.Wc(2,lt,13,4,"div",8),l.ac(),l.ac()),2&t){const t=l.rc(2);l.Hb(2),l.zc("ngIf",t.isAccountDataLoaded)}}function ut(t,e){if(1&t&&(l.bc(0,"div",4),l.Wc(1,dt,3,1,"div",5),l.ac()),2&t){const t=l.rc();l.Hb(1),l.zc("ngIf",t.isAccountDataLoaded)}}function mt(t,e){if(1&t){const t=l.cc();l.bc(0,"app-income-tracker-filter",12),l.nc("fieldParams",(function(e){return l.Pc(t),l.rc().getFieldParams(e)})),l.ac()}}function bt(t,e){if(1&t&&(l.bc(0,"p"),l.Yc(1),l.ac()),2&t){const t=l.rc(2);l.Hb(1),l.bd("Resident under ",t.accountDataList[0].apartmentBlockNumber," ",t.accountDataList[0].apartmentBlockUnitNumber,"")}}function pt(t,e){if(1&t&&(l.bc(0,"div",56),l.bc(1,"ul"),l.bc(2,"li"),l.bc(3,"p"),l.Yc(4,"Account"),l.ac(),l.bc(5,"small"),l.Yc(6),l.ac(),l.ac(),l.bc(7,"li"),l.bc(8,"p"),l.Yc(9,"Comment"),l.ac(),l.bc(10,"small"),l.Yc(11),l.ac(),l.ac(),l.ac(),l.ac()),2&t){const t=l.rc().$implicit;l.Hb(6),l.Zc(t.account),l.Hb(5),l.Zc(t.comments)}}function gt(t,e){1&t&&(l.bc(0,"span"),l.Yc(1,"R"),l.ac())}function ht(t,e){1&t&&(l.bc(0,"span"),l.Yc(1,"C"),l.ac())}function vt(t,e){1&t&&(l.bc(0,"div",56),l.bc(1,"h6"),l.Yc(2,"Reverse"),l.ac(),l.ac())}function It(t,e){1&t&&l.Xb(0,"app-loader")}const ft=function(){return{exact:!0}};function Dt(t,e){if(1&t&&(l.bc(0,"a",57),l.Xb(1,"i-feather",58),l.ac()),2&t){const t=l.rc().$implicit;l.Bc("routerLink","/ams/income/edit-invoice/",t.billNo,""),l.zc("routerLinkActiveOptions",l.Fc(2,ft))}}function Ct(t,e){if(1&t&&(l.bc(0,"a",57),l.Xb(1,"i-feather",58),l.ac()),2&t){const t=l.rc().$implicit;l.Bc("routerLink","/ams/income/edit-invoice/",t.receiptNo,""),l.zc("routerLinkActiveOptions",l.Fc(2,ft))}}function Mt(t,e){if(1&t){const t=l.cc();l.bc(0,"tr"),l.bc(1,"td",36),l.bc(2,"a",37),l.Yc(3),l.ac(),l.Wc(4,pt,12,2,"ng-template",null,38,l.Xc),l.ac(),l.bc(6,"td",39),l.bc(7,"a",40),l.Yc(8),l.ac(),l.ac(),l.bc(9,"td",39),l.bc(10,"a",40),l.Yc(11),l.ac(),l.ac(),l.bc(12,"td",36),l.Yc(13),l.ac(),l.bc(14,"td",36),l.Yc(15),l.ac(),l.bc(16,"td",36),l.Yc(17),l.ac(),l.bc(18,"td",41),l.bc(19,"span",42),l.Wc(20,gt,2,0,"span",1),l.Wc(21,ht,2,0,"span",1),l.ac(),l.ac(),l.bc(22,"td",41),l.bc(23,"a",43),l.Xb(24,"img",44),l.Wc(25,vt,3,0,"ng-template",null,45,l.Xc),l.ac(),l.bc(27,"div",46),l.nc("click",(function(e){return l.Pc(t),l.rc(2).stopPropagation(e)})),l.bc(28,"form",47,48),l.Wc(30,It,1,0,"app-loader",1),l.bc(31,"div",49),l.bc(32,"div",50),l.bc(33,"div",51),l.bc(34,"label"),l.Yc(35,"Comments"),l.ac(),l.bc(36,"input",52),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc(2).reverse.comment=e})),l.ac(),l.ac(),l.ac(),l.bc(37,"div",53),l.bc(38,"a",54),l.nc("click",(function(){l.Pc(t);const c=e.$implicit;return l.rc(2).reverseItem(c)})),l.Yc(39,"Submit"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.Wc(40,Dt,2,3,"a",55),l.Wc(41,Ct,2,3,"a",55),l.ac(),l.ac()}if(2&t){const t=e.$implicit,c=e.index,n=l.Mc(5),i=l.Mc(26),a=l.Mc(29),o=l.rc(2);l.Hb(2),l.zc("ngbPopover",n),l.Hb(1),l.ad(" ",o.getInvoiceDate(c,t.postedDate),""),l.Hb(5),l.Zc(t.billNo),l.Hb(3),l.Zc(t.receiptNo),l.Hb(2),l.Zc(t.invoiceAmount),l.Hb(2),l.Zc(t.amountPaid),l.Hb(2),l.Zc(t.balance),l.Hb(2),l.zc("ngClass",t.isReversed?"red":""),l.Hb(1),l.zc("ngIf",t.isReversed),l.Hb(1),l.zc("ngIf",t.isCreditNote),l.Hb(2),l.zc("ngbPopover",i)("ngClass",t.isReversed?"disabled":"reverse"),l.Hb(7),l.zc("ngIf",!o.isReverseSubmitted),l.Hb(1),l.zc("ngClass",o.isReverseSubmitted?"":"slideup"),l.Hb(5),l.zc("ngModel",o.reverse.comment),l.Hb(2),l.zc("ngClass",a.invalid?"disabled":""),l.Hb(2),l.zc("ngIf",null!=t.billNo),l.Hb(1),l.zc("ngIf",null!=t.receiptNo)}}function At(t,e){1&t&&(l.bc(0,"div",59),l.bc(1,"p",60),l.Yc(2,"No Records Found"),l.ac(),l.ac())}function yt(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"ul",13),l.bc(2,"li",14),l.bc(3,"span",15),l.Yc(4,"C"),l.ac(),l.Yc(5,"Credit"),l.ac(),l.bc(6,"li",14),l.bc(7,"span",16),l.Yc(8,"R"),l.ac(),l.Yc(9,"Reversed"),l.ac(),l.ac(),l.bc(10,"div",17),l.bc(11,"div",18),l.bc(12,"div",7),l.bc(13,"h5"),l.Yc(14,"Account History "),l.bc(15,"span",19),l.Yc(16),l.ac(),l.ac(),l.Wc(17,bt,2,2,"p",1),l.ac(),l.bc(18,"ul",20),l.bc(19,"li",21),l.Xb(20,"i",22),l.bc(21,"input",23),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().invoiceData=e})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(22,"div",24),l.bc(23,"table",25),l.bc(24,"thead"),l.bc(25,"tr"),l.bc(26,"th",26),l.Yc(27,"Posted Date "),l.bc(28,"span",27),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("postedOn")})),l.ac(),l.bc(29,"app-simple-date-box",28),l.nc("inputChange",(function(e){return l.Pc(t),l.rc().onDateChange(e,"postedDate")})),l.ac(),l.ac(),l.bc(30,"th",26),l.Yc(31,"Bill No "),l.bc(32,"span",27),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("billNo")})),l.ac(),l.bc(33,"input",29),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.billNo=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("billNo")})),l.ac(),l.ac(),l.bc(34,"th",26),l.Yc(35,"Receipt No "),l.bc(36,"span",27),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("receiptNo")})),l.ac(),l.bc(37,"input",29),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.receiptNo=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("receiptNo")})),l.ac(),l.ac(),l.bc(38,"th",26),l.Yc(39,"Billed Amount "),l.bc(40,"span",27),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("invoiceAmount")})),l.ac(),l.bc(41,"input",29),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.invoiceAmount=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("invoiceAmount")})),l.ac(),l.ac(),l.bc(42,"th",26),l.Yc(43,"Receipt Amount "),l.bc(44,"span",27),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("amountPaid")})),l.ac(),l.bc(45,"input",29),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.amountPaid=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("amountPaid")})),l.ac(),l.ac(),l.bc(46,"th",26),l.Yc(47,"Due "),l.bc(48,"span",27),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("balance")})),l.ac(),l.bc(49,"input",29),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.balance=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("balance")})),l.ac(),l.ac(),l.bc(50,"th",30),l.Yc(51,"Status "),l.bc(52,"input",31),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.action=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("action")})),l.ac(),l.ac(),l.bc(53,"th",32),l.Yc(54,"Actions "),l.bc(55,"input",31),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.action=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("action")})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(56,"tbody"),l.Wc(57,Mt,42,18,"tr",33),l.sc(58,"slice"),l.sc(59,"sort"),l.sc(60,"columnSearch"),l.sc(61,"simpleSearch"),l.ac(),l.ac(),l.Wc(62,At,3,0,"div",34),l.bc(63,"app-pagination",35),l.nc("outputParams",(function(e){return l.Pc(t),l.rc().getIndexParams(e)})),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.rc();l.Hb(16),l.Zc(t.totalItems),l.Hb(1),l.zc("ngIf",t.isAccountDataLoaded),l.Hb(4),l.zc("ngModel",t.invoiceData),l.Hb(7),l.zc("ngClass",t.getFieldOrderBy("postedDate")),l.Hb(1),l.zc("dateModel",t.postedDate),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("billNo")),l.Hb(1),l.zc("ngModel",t.columnField.billNo),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("receiptNo")),l.Hb(1),l.zc("ngModel",t.columnField.receiptNo),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("invoiceAmount")),l.Hb(1),l.zc("ngModel",t.columnField.invoiceAmount),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("amountPaid")),l.Hb(1),l.zc("ngModel",t.columnField.amountPaid),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("balance")),l.Hb(1),l.zc("ngModel",t.columnField.balance),l.Hb(3),l.zc("ngModel",t.columnField.action),l.Hb(3),l.zc("ngModel",t.columnField.action),l.Hb(2),l.zc("ngForOf",l.vc(58,23,l.vc(59,27,l.vc(60,31,l.uc(61,35,t.invoiceDataList,t.invoiceData),t.columnField,t.selectedInput),t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex)),l.Hb(5),l.zc("ngIf",t.isNoItemsAvailable()),l.Hb(1),l.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let kt=(()=>{class t{constructor(t,e,c,n,i,a){this.router=t,this.route=e,this.userService=c,this.accountsService=n,this.sharedService=i,this.cookieService=a,this.isInvoiceDataLoaded=!1,this.isInvoiceDataTableLoaded=!0,this.invoiceData="",this.isAccountDataLoaded=!1,this.ItemStartIndex=0,this.itemLimit=10,this.unitFieldType="unitno",this.unitOrder=!0,this.isMobile=!1,this.selectedInput="",this.columnField={},this.isReverseSubmitted=!0}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}selectColInput(t){this.selectedInput=t}onDateChange(t,e){null!=t?(this.selectedInput=e,this.columnField[e]=O(t).format("MM-DD-YYYY")):this.columnField={}}getUserName(t){var e=s.filter(this.userDataList,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].firstName+" "+e[0].lastName}getInvoiceDate(t,e){return s.each(this.invoiceDataList,(t,e)=>{t.postedOn=O(t.custInvoiceDate).format("MM-DD-YYYY")}),O(e).format("MM-DD-YYYY")}getAccountName(t){var e={glaccountId:0};e.glaccountId=null==t||0==t.length?0:t[0].glaccountId;var c=s.filter(this.glAccountListData,(function(t){if(t.glaccountId===e.glaccountId)return t}));return void 0===c||0==c.length?"":c[0].glaccountName}getDueAmount(t,e){return t-e>0?"high":"low"}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isNoItemsAvailable(){return 0==this.totalItems}stopPropagation(t){t.stopPropagation()}getFieldParams(t){this.isInvoiceDataTableLoaded=!1;var e=O(t.PostStartDate).format("MM-DD-YYYY"),c=O(t.PostEndDate).format("MM-DD-YYYY");this.accountsService.GetAccountHistoryByApartmentUnitId({ApartmentBlockUnitID:this.route.params.value.id,PostStartDate:e,PostEndDate:c}).subscribe(e=>{this.invoiceDataList=e,console.log(e),null!=t.isReversed&&(this.invoiceDataList=this.invoiceDataList.filter(e=>e.isReversed==t.isReversed)),null!=t.isCreditNote&&(this.invoiceDataList=this.invoiceDataList.filter(e=>e.isCreditNote==t.isCreditNote)),null!=t.postedDate&&(this.invoiceDataList=this.invoiceDataList.filter(e=>O(e.postedDate).format("MM-DD-YYYY")==O(t.postedDate).format("MM-DD-YYYY"))),null!=t.billNo&&(this.invoiceDataList=this.invoiceDataList.filter(e=>e.billNo==t.billNo)),null!=t.receiptNo&&(this.invoiceDataList=this.invoiceDataList.filter(e=>e.receiptNo==t.receiptNo)),this.invoiceDataList.sort((t,e)=>new Date(e.postedDate).getTime()-new Date(t.postedDate).getTime()),this.totalItems=this.invoiceDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isInvoiceDataTableLoaded=!0},t=>{})}reverseItem(t){this.isReverseSubmitted=!1;let e={apartmentId:parseInt(this.cookieService.get("apartmentId")),amount:t.invoiceAmount,collectionId:0,invoiceId:t.billNo,isEmailSent:!0,isSmssent:!0,comment:this.reverse.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:0,updatedOn:(new Date).toISOString(),transReference1:"string",transReference2:"string",glAcctIndicator:"string"};this.accountsService.addCustTransReversal(e).subscribe(t=>{t.message&&(this.reverse.comment="",this.sharedService.setAlertMessage("Invoice Reversed"),this.accountsService.GetAccountHistoryByApartmentUnitId({ApartmentBlockUnitID:this.route.params.value.id}).subscribe(t=>{this.invoiceDataList=t,this.invoiceDataList.sort((t,e)=>new Date(e.postedDate).getTime()-new Date(t.postedDate).getTime()),this.totalItems=this.invoiceDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isReverseSubmitted=!0}))},t=>{})}ngOnInit(){this.reverse={},this.accountsService.getAllGLAccounts().subscribe(t=>{var e=t.filter(t=>t.apartmentId==parseInt(this.cookieService.get("apartmentId")));this.glAccountListData=e}),this.accountsService.GetAccountHistoryByApartmentUnitId({ApartmentBlockUnitID:this.route.params.value.id}).subscribe(t=>{this.invoiceDataList=t,this.invoiceDataList.sort((t,e)=>new Date(e.postedDate).getTime()-new Date(t.postedDate).getTime()),this.totalItems=this.invoiceDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.route.params.value.id),this.isAccountDataLoaded=!0}),this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.userDataList=t,this.isInvoiceDataLoaded=!0},t=>{})})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.c),l.Wb(i.a),l.Wb(G.a),l.Wb(o.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-view-invoice-history"]],decls:5,vars:4,consts:[[1,"income-view-invoice-history-wrapper"],[4,"ngIf"],["class","card mb-20 no-shadow",4,"ngIf"],[3,"fieldParams",4,"ngIf"],[1,"card","mb-20","no-shadow"],["class","card-header at-header",4,"ngIf"],[1,"card-header","at-header"],[1,"float-left"],["class","sub-details",4,"ngIf"],[1,"sub-details"],[1,"d-inline-block","ft"],[1,"d-inline-block","ft","ml-md-4"],[3,"fieldParams"],[1,"legends","list-inline"],[1,"list-inline-item"],[1,"squares","medium","green"],[1,"squares","medium","red"],[1,"card","clear","table-card"],[1,"card-header"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"table","table-checker","table-resizable"],["scope","col"],[3,"ngClass","click"],[3,"dateModel","inputChange"],["type","text","placeholder","Bill No",1,"form-control",3,"ngModel","ngModelChange"],[1,"max-50","text-center"],["type","text","placeholder","Action",1,"form-control","vis-h",3,"ngModel","ngModelChange"],["scope","col",1,"simple-actions"],[4,"ngFor","ngForOf"],["class","button-wrapper border-top",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",1,"t-decor",3,"ngbPopover"],["popContent",""],[1,"grey"],["href","javascript:void(0)",1,"t-decor","tc-s-blue"],[1,"name","text-center"],[1,"squares","medium","ml-1",3,"ngClass"],["href","javascript:void(0)","placement","top","triggers","mouseenter:mouseleave","role","button","data-toggle","dropdown","id","reverseDropDownMenu","aria-haspopup","true","aria-expanded","false",1,"mr-2",3,"ngbPopover","ngClass"],["src","assets/images/undo-icon.svg",1,"svg","reverse"],["popReverseContent",""],["aria-labelledby","reverseDropDownMenu",1,"dropdown-menu","page-menu",3,"click"],["name","reverseInvoiceForm","novalidate",""],["reverseInvoiceForm","ngForm"],[1,"row",3,"ngClass"],[1,"col-sm-12"],[1,"input-box"],["type","text","placeholder","Enter text","name","comment","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue","t-no-decor",3,"ngClass","click"],["href","javascript:void(0)","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngIf"],[1,"pop-desp"],["href","javascript:void(0)","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["name","edit",1,"icon","edit"],[1,"button-wrapper","border-top"],[1,"snippet"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.Wc(1,st,1,0,"app-loader",1),l.Wc(2,ut,2,1,"div",2),l.Wc(3,mt,1,0,"app-income-tracker-filter",3),l.Wc(4,yt,64,38,"ng-container",1),l.ac()),2&t&&(l.Hb(1),l.zc("ngIf",!e.isInvoiceDataLoaded),l.Hb(1),l.zc("ngIf",e.isInvoiceDataLoaded),l.Hb(1),l.zc("ngIf",e.isInvoiceDataLoaded),l.Hb(1),l.zc("ngIf",e.isInvoiceDataLoaded))},directives:[n.l,m.a,rt,p.b,g.d,g.l,g.o,p.d,n.j,Y.a,n.k,h.a,F.c,p.c,g.z,g.m,g.n,g.v,i.e,i.d,b.b],pipes:[n.t,v.a,v.b,v.e],styles:[".income-view-invoice-history-wrapper[_ngcontent-%COMP%]   .slideup[_ngcontent-%COMP%]{visibility:hidden;height:25px}"]}),t})();function St(t,e){1&t&&l.Xb(0,"app-loader")}function Pt(t,e){if(1&t){const t=l.cc();l.bc(0,"tr",35),l.bc(1,"td",36),l.bc(2,"div",19),l.bc(3,"div",20),l.bc(4,"input",37),l.nc("ngModelChange",(function(c){return l.Pc(t),e.$implicit.checked=c}))("ngModelChange",(function(){l.Pc(t);const c=e.$implicit;return l.rc(2).getSelectedAllDefaulters(c)})),l.ac(),l.Xb(5,"label",38),l.ac(),l.ac(),l.ac(),l.bc(6,"td",39),l.Yc(7),l.ac(),l.bc(8,"td",40),l.Yc(9),l.ac(),l.bc(10,"td",40),l.Yc(11),l.ac(),l.bc(12,"td",40),l.Yc(13),l.ac(),l.bc(14,"td",39),l.Yc(15),l.ac(),l.bc(16,"td",40),l.Yc(17),l.ac(),l.ac()}if(2&t){const t=e.$implicit;l.zc("ngClass",t.checked?"selected":""),l.Hb(4),l.Ac("id",t.invoiceNumber),l.Ac("name",t.invoiceNumber),l.zc("ngModel",t.checked),l.Hb(1),l.Ac("for",t.invoiceNumber),l.Hb(2),l.Zc(t.type),l.Hb(2),l.Zc(t.unit),l.Hb(2),l.Zc(t.primaryContact),l.Hb(2),l.Zc(t.phone),l.Hb(2),l.Zc(t.due),l.Hb(2),l.Zc(t.emailSetting)}}const Lt=function(){return{exact:!0}};function xt(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"div",2),l.bc(2,"div",3),l.bc(3,"a",4),l.bc(4,"div",5),l.Xb(5,"img",6),l.ac(),l.bc(6,"span",7),l.Yc(7,"View Sub Ledger"),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(8,"div",8),l.bc(9,"div",9),l.bc(10,"div",10),l.bc(11,"h5"),l.Yc(12,"View Defaulters "),l.bc(13,"span",11),l.Yc(14),l.ac(),l.ac(),l.ac(),l.bc(15,"ul",12),l.bc(16,"li",13),l.Xb(17,"i",14),l.bc(18,"input",15),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().defaultData=e})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(19,"div",16),l.bc(20,"table",17),l.bc(21,"thead"),l.bc(22,"tr"),l.bc(23,"th",18),l.bc(24,"div",19),l.bc(25,"div",20),l.bc(26,"input",21),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().selectAllDefaulters=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().getAllDefaulters()})),l.ac(),l.Xb(27,"label",22),l.ac(),l.ac(),l.ac(),l.bc(28,"th",23),l.Yc(29,"Type "),l.bc(30,"span",24),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("type")})),l.ac(),l.bc(31,"input",25),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.type=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("type")})),l.ac(),l.ac(),l.bc(32,"th",23),l.Yc(33,"Unit "),l.bc(34,"span",24),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("unit")})),l.ac(),l.bc(35,"input",26),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.Unit=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("Unit")})),l.ac(),l.ac(),l.bc(36,"th",23),l.Yc(37,"Primary Contact "),l.bc(38,"span",24),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("primaryContact")})),l.ac(),l.bc(39,"input",27),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.primaryContact=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("primaryContact")})),l.ac(),l.ac(),l.bc(40,"th",23),l.Yc(41,"Phone "),l.bc(42,"span",24),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("phone")})),l.ac(),l.bc(43,"input",28),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.phone=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("phone")})),l.ac(),l.ac(),l.bc(44,"th",23),l.Yc(45,"Amount "),l.bc(46,"span",24),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("due")})),l.ac(),l.bc(47,"input",29),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.due=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("due")})),l.ac(),l.ac(),l.bc(48,"th",23),l.Yc(49,"Email "),l.bc(50,"span",24),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("emailSetting")})),l.ac(),l.bc(51,"input",30),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().columnField.emailSetting=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().selectColInput("emailSetting")})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(52,"tbody"),l.Wc(53,Pt,18,11,"tr",31),l.sc(54,"slice"),l.sc(55,"sort"),l.sc(56,"columnSearch"),l.sc(57,"simpleSearch"),l.ac(),l.ac(),l.bc(58,"div",32),l.bc(59,"a",33),l.nc("click",(function(){return l.Pc(t),l.rc().sendEmail()})),l.bc(60,"span"),l.Yc(61,"Send Email"),l.ac(),l.ac(),l.bc(62,"a",33),l.nc("click",(function(){return l.Pc(t),l.rc().sendSMS()})),l.bc(63,"span"),l.Yc(64,"Send SMS"),l.ac(),l.ac(),l.ac(),l.bc(65,"app-pagination",34),l.nc("outputParams",(function(e){return l.Pc(t),l.rc().getIndexParams(e)})),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.rc();l.Hb(3),l.zc("routerLinkActiveOptions",l.Fc(39,Lt)),l.Hb(11),l.Zc(t.totalItems),l.Hb(4),l.zc("ngModel",t.defaultData),l.Hb(2),l.zc("ngClass",t.isMobileView()),l.Hb(6),l.zc("ngModel",t.selectAllDefaulters),l.Hb(4),l.zc("ngClass",t.getFieldOrderBy("type")),l.Hb(1),l.zc("ngModel",t.columnField.type),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("unit")),l.Hb(1),l.zc("ngModel",t.columnField.Unit),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("primaryContact")),l.Hb(1),l.zc("ngModel",t.columnField.primaryContact),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("phone")),l.Hb(1),l.zc("ngModel",t.columnField.phone),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("due")),l.Hb(1),l.zc("ngModel",t.columnField.due),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("emailSetting")),l.Hb(1),l.zc("ngModel",t.columnField.emailSetting),l.Hb(2),l.zc("ngForOf",l.vc(54,24,l.vc(55,28,l.vc(56,32,l.uc(57,36,t.defaultDataList,t.defaultData),t.columnField,t.selectedInput),t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex)),l.Hb(6),l.zc("ngClass",t.isDefaultSelected?"":"disabled"),l.Hb(3),l.zc("ngClass",t.isDefaultSelected?"":"disabled"),l.Hb(3),l.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let Ht=(()=>{class t{constructor(t,e,c,n,i,a){this.router=t,this.route=e,this.userService=c,this.accountsService=n,this.sharedService=i,this.cookieService=a,this.isDefaultersDataLoaded=!1,this.defaultData="",this.ItemStartIndex=0,this.itemLimit=10,this.unitFieldType="type",this.unitOrder=!0,this.isMobile=!1,this.isDefaultSelected=!1,this.selectAllDefaulters=!1,this.sendMessage=null,this.selectedInput="",this.columnField={}}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}getAllDefaulters(){this.selectAllDefaulters?(s.each(this.defaultDataList,t=>{t.checked=!0}),this.isDefaultSelected=!0):(s.each(this.defaultDataList,t=>{t.checked=!1}),this.isDefaultSelected=!1)}getSelectedAllDefaulters(t){var e=0;s.each(this.defaultDataList,t=>{t.checked&&e++}),this.isDefaultSelected=e>0,0==e&&(this.selectAllDefaulters=!1),e==this.defaultDataList.length&&(this.selectAllDefaulters=!0)}sendEmail(){this.isDefaultersDataLoaded=!0,s.each(this.defaultDataList,(t,e)=>{})}sendSMS(){this.isDefaultersDataLoaded=!0,s.each(this.defaultDataList,(t,e)=>{})}selectColInput(t){this.selectedInput=t}onSelectChange(t,e,c){s.isEmpty(t)?this.columnField={}:(this.selectedInput=e,this.columnField[e]=t[c])}isMobileView(){return window.innerWidth<=767?"table-responsive":""}onResize(t){this.isMobile=t.target.innerWidth<=991}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}ngOnInit(){this.accountsService.GetIncomeTrackerDefaulterByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.defaultDataList=t,this.totalItems=this.defaultDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isDefaultersDataLoaded=!0},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.c),l.Wb(i.a),l.Wb(G.a),l.Wb(o.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-view-defaulters"]],hostBindings:function(t,e){1&t&&l.nc("resize",(function(t){return e.onResize(t)}),!1,l.Oc)},decls:3,vars:2,consts:[[1,"income-view-defaulters-wrapper"],[4,"ngIf"],[1,"relative-card","float-right"],[1,"relative-icon"],["href","javascript:void(0)","routerLink","/ams/income/subledger","routerLinkActive","active",3,"routerLinkActiveOptions"],[1,"icon-wrapper"],["src","assets/images/book-icon.svg","width","17",1,"svg"],[1,"d-inline-block"],[1,"card","clear","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"table","table-checker","table-resizable",3,"ngClass"],["scope","col",1,"select"],[1,"form-group"],[1,"form-check","float-left"],["type","checkbox","id","selectAllDefaulters","name","selectAllDefaulters",1,"form-check-input",3,"ngModel","ngModelChange"],["for","selectAllDefaulters",1,"form-check-label"],["scope","col"],[3,"ngClass","click"],["type","text","placeholder","Type",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Unit",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Primary Contact",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Phone",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Amount",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Email",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"button-wrapper"],[1,"btn","lime-green","sf",3,"ngClass","click"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[3,"ngClass"],[1,"select"],["type","checkbox",1,"form-check-input",3,"id","name","ngModel","ngModelChange"],[1,"form-check-label",3,"for"],[1,"name"],[1,"grey"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.Wc(1,St,1,0,"app-loader",1),l.Wc(2,xt,66,40,"ng-container",1),l.ac()),2&t&&(l.Hb(1),l.zc("ngIf",!e.isDefaultersDataLoaded),l.Hb(1),l.zc("ngIf",e.isDefaultersDataLoaded))},directives:[n.l,m.a,i.e,i.d,p.c,p.b,g.d,g.l,g.o,p.d,n.j,g.a,n.k,h.a],pipes:[n.t,v.a,v.b,v.e],styles:[""]}),t})();var Ot=c("wlDI");function Yt(t,e){1&t&&(l.bc(0,"span"),l.Yc(1,"Post Single Invoice"),l.ac())}function Ft(t,e){1&t&&(l.bc(0,"span"),l.Yc(1,"Edit Single Invoice"),l.ac())}function wt(t,e){if(1&t&&(l.bc(0,"div",9),l.bc(1,"div",10),l.bc(2,"div",11),l.bc(3,"div",12),l.bc(4,"p",13),l.bc(5,"span"),l.Yc(6,"Bill to party: "),l.ac(),l.Yc(7),l.sc(8,"isdefined"),l.ac(),l.bc(9,"p",14),l.bc(10,"span"),l.Yc(11,"Contact Person: "),l.ac(),l.Yc(12),l.sc(13,"isdefined"),l.ac(),l.bc(14,"p",14),l.bc(15,"span"),l.Yc(16,"Block: "),l.ac(),l.Yc(17),l.sc(18,"isdefined"),l.ac(),l.bc(19,"p",14),l.bc(20,"span"),l.Yc(21,"Unit: "),l.ac(),l.Yc(22),l.sc(23,"isdefined"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac()),2&t){const t=l.rc();l.Hb(7),l.ad(" ",l.uc(8,4,t.accountDataList,"billToParty"),""),l.Hb(5),l.ad(" ",l.uc(13,7,t.accountDataList,"primayContact"),""),l.Hb(5),l.ad(" ",l.uc(18,10,t.accountDataList,"apartmentBlockNumber"),""),l.Hb(5),l.ad(" ",l.uc(23,13,t.accountDataList,"apartmentBlockUnitNumber"),"")}}function Tt(t,e){1&t&&l.Xb(0,"app-loader")}function zt(t,e){if(1&t&&(l.bc(0,"option",37),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.glaccountId),l.Hb(1),l.Zc(t.glaccountName)}}function Bt(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"div",16),l.bc(2,"div",17),l.bc(3,"label"),l.Yc(4,"VAT"),l.ac(),l.bc(5,"input",38),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc(2).invoice.vatPercent=e})),l.ac(),l.ac(),l.ac(),l.bc(6,"div",16),l.bc(7,"div",17),l.bc(8,"label"),l.Yc(9,"Discount"),l.ac(),l.bc(10,"input",39),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc(2).invoice.discount=e})),l.ac(),l.ac(),l.ac(),l.bc(11,"div",16),l.bc(12,"div",17),l.bc(13,"label"),l.Yc(14,"Total Amount"),l.ac(),l.bc(15,"input",40),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc(2).invoice.totalAmount=e})),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.rc(2);l.Hb(5),l.zc("ngModel",t.invoice.vatPercent),l.Hb(5),l.zc("ngModel",t.invoice.discount),l.Hb(5),l.zc("ngModel",t.invoice.totalAmount)}}function Nt(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"div",15),l.bc(2,"div",16),l.bc(3,"div",17),l.bc(4,"label"),l.Yc(5,"Invoice Amount*"),l.ac(),l.bc(6,"input",18),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().invoice.custInvoiceAmount=e}))("ngModelChange",(function(){l.Pc(t);const e=l.rc();return e.onInvoiceAmountChange(e.invoice.custInvoiceAmount)})),l.ac(),l.ac(),l.ac(),l.bc(7,"div",16),l.bc(8,"div",19),l.bc(9,"label"),l.Yc(10,"Account*"),l.ac(),l.bc(11,"select",20),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().invoice.glaccountId=e})),l.bc(12,"option",21),l.Yc(13,"Select"),l.ac(),l.Wc(14,zt,2,2,"option",22),l.ac(),l.ac(),l.ac(),l.bc(15,"div",16),l.bc(16,"div",17),l.bc(17,"label"),l.Yc(18,"Invoice Date*"),l.ac(),l.bc(19,"input",23),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().invoice.dueDate=e})),l.ac(),l.Xb(20,"owl-date-time",24,25),l.bc(22,"div",26),l.Xb(23,"i-feather",27),l.ac(),l.ac(),l.ac(),l.bc(24,"div",16),l.bc(25,"div",17),l.bc(26,"label"),l.Yc(27,"Comments"),l.ac(),l.bc(28,"input",28),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().invoice.comments=e})),l.ac(),l.ac(),l.ac(),l.bc(29,"div",29),l.bc(30,"div",30),l.bc(31,"div",31),l.bc(32,"div",32),l.bc(33,"input",33),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().invoice.isTax=e}))("ngModelChange",(function(){l.Pc(t);const e=l.rc();return e.onVatChange(e.invoice.isTax)})),l.ac(),l.bc(34,"label",34),l.Yc(35,"VAT"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.Wc(36,Bt,16,3,"ng-container",2),l.bc(37,"div",35),l.bc(38,"button",36),l.Yc(39,"Submit"),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.Mc(21),e=l.rc(),c=l.Mc(7);l.Hb(6),l.zc("ngModel",e.invoice.custInvoiceAmount),l.Hb(5),l.zc("ngModel",e.invoice.glaccountId),l.Hb(3),l.zc("ngForOf",e.glAccountListData),l.Hb(5),l.zc("owlDateTime",t)("owlDateTimeTrigger",t)("ngModel",e.invoice.dueDate),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",t),l.Hb(6),l.zc("ngModel",e.invoice.comments),l.Hb(5),l.zc("ngModel",e.invoice.isTax),l.Hb(3),l.zc("ngIf",e.invoice.isTax),l.Hb(2),l.zc("disabled",c.invalid)}}let Gt=(()=>{class t{constructor(t,e,c,n,i,a,o,r){this.router=t,this.route=e,this.accountsService=c,this.userService=n,this.apartmentService=i,this.sharedService=a,this.lookupService=o,this.cookieService=r,this.invoiceId="",this.isEditInvoice=!1,this.isNewInvoice=!1,this.isInvoiceSubmitted=!0,this.isError=!1,this.alertMessage="",this.isAccountDataLoaded=!1,this.glAccountIndicator="Income"}submitIncomeInvoiceForm(t){if(this.isInvoiceSubmitted=!1,this.isEditInvoice){let t={custInvoiceId:this.invoice.custInvoiceId,apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:this.invoice.apartmentBlockUnitId,custInvoiceAmount:parseInt(this.invoice.totalAmount),custInvoiceDate:(new Date).toISOString(),dueDate:this.invoice.dueDate,tax1:0,tax2:0,tax3:0,isTax:this.invoice.isTax,isRecurCustInvoice:this.invoice.isRecurCustInvoice,isEmailSent:!1,isSmssent:!1,custInvoiceStatusId:1,postedBy:parseInt(this.cookieService.get("userId")),postedOn:(new Date).toISOString(),billToPay:"string",comments:this.invoice.comments||"",penaltyAmount:0,penaltyComment:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:(new Date).toISOString(),transReference1:"string",transReference2:"string",invoiceGLAccounts:[{invoiceGlaccountId:this.invoice.invoiceGlaccountId,apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:parseInt(this.invoice.glaccountId),comments:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:(new Date).toISOString(),amount:parseInt(this.invoice.totalAmount)}]};this.accountsService.updateCustInvoice(t).subscribe(t=>{t.message?(this.isInvoiceSubmitted=!0,this.sharedService.setAlertMessage("Invoice updated successfully"),this.router.navigate(["ams/income/subledger"])):(this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}else{let t={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:parseInt(this.route.params.value.id),custInvoiceAmount:parseInt(this.invoice.totalAmount),custInvoiceDate:(new Date).toISOString(),dueDate:this.invoice.dueDate,tax1:0,tax2:0,tax3:0,isTax:this.invoice.isTax,isRecurCustInvoice:this.invoice.isRecurCustInvoice,isEmailSent:!1,isSmssent:!1,custInvoiceStatusId:1,postedBy:parseInt(this.cookieService.get("userId")),postedOn:(new Date).toISOString(),billToPay:"string",comments:this.invoice.comments||"",penaltyAmount:0,penaltyComment:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:null,updatedOn:(new Date).toISOString(),transReference1:"string",transReference2:"string",invoiceGLAccounts:[{apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:parseInt(this.invoice.glaccountId),comments:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:null,updatedOn:(new Date).toISOString(),amount:parseInt(this.invoice.totalAmount)}]};this.accountsService.addCustInvoice(t).subscribe(t=>{t.message?(this.isInvoiceSubmitted=!0,this.sharedService.setAlertMessage("Invoice added successfully"),this.router.navigate(["ams/income/subledger"])):(this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}}onInvoiceAmountChange(t){this.invoice.totalAmount=this.invoice.isTax?t+t*((this.invoice.vatPercent-this.invoice.discount)/100):t}onVatChange(t){this.invoice.totalAmount=this.invoice.custInvoiceAmount+this.invoice.custInvoiceAmount*((this.invoice.vatPercent-this.invoice.discount)/100)}ngOnInit(){if(this.invoice={},this.invoice.primaryContact="",this.invoice.glaccountId="",this.invoice.isRecurCustInvoice=!0,this.invoice.isTax=!1,null!=this.route.params.value.id&&null==this.route.params.value.type){this.isEditInvoice=!0;var t={apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:this.route.params.value.id};this.accountsService.getCustInvoiceById(t).subscribe(t=>{this.invoice=t[0],this.invoice.invoiceGlaccountId=this.invoice.invoiceGLAccounts[0].invoiceGlaccountId,this.invoice.glaccountId=this.invoice.invoiceGLAccounts[0].glaccountId,this.apartmentBlockUnitId=this.invoice.apartmentBlockUnitId,this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.apartmentBlockUnitId),this.isAccountDataLoaded=!0})},t=>{}),this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.userDataList=t.filter(t=>t.isActive),this.apartmentService.getAllApartmentBlockUnitUsersByApartmentBlockUnitId(this.apartmentBlockUnitId).subscribe(t=>{var e=s.filter(this.userDataList,e=>e.userId==t[0].userId);this.invoice.primaryContact=e[0].firstName+" "+e[0].lastName})})}else this.isNewInvoice=!0,this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.route.params.value.id),this.isAccountDataLoaded=!0}),this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.userDataList=t.filter(t=>t.isActive),this.apartmentService.getAllApartmentBlockUnitUsersByApartmentBlockUnitId(this.route.params.value.id).subscribe(t=>{var e=s.filter(this.userDataList,e=>e.userId==t[0].userId);this.invoice.primaryContact=e[0].firstName+" "+e[0].lastName})});this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountListData=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),this.lookupService.getLookupValueByLookupTypeId(77).subscribe(t=>{this.vatTypeDataList=t,this.invoice.vatPercent=parseFloat(this.vatTypeDataList[0].lookupValueName)}),this.lookupService.getLookupValueByLookupTypeId(75).subscribe(t=>{this.discountTypeDataList=t,this.invoice.discount=parseFloat(this.discountTypeDataList[0].lookupValueName)})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.c),l.Wb(i.a),l.Wb(o.a),l.Wb(G.a),l.Wb(a.a),l.Wb(r.a),l.Wb(V.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-post-invoice"]],decls:12,vars:7,consts:[[1,"income-post-invoice-wrapper"],[1,"mb-3"],[4,"ngIf"],["class","card no-shadow mb-3",4,"ngIf"],[1,"card","clear","mb-30"],["name","postIncomeInvoiceForm","novalidate","",3,"ngSubmit"],["postIncomeInvoiceForm","ngForm"],[1,"card-body"],[3,"message","isError"],[1,"card","no-shadow","mb-3"],[1,"card-header","at-header"],[1,"float-left"],[1,"sub-details"],[1,"d-inline-block","ft"],[1,"d-inline-block","ft","ml-md-4"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["type","number","OnlyNumber","true","placeholder","Enter text","name","invoiceAmount","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"select-box"],["name","accountType","id","accountType","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","invoiceDueDate","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["invoiceDueDate",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","calendar","width","18",1,"icon","date","float-left"],["type","text","placeholder","Enter text","name","comments",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-8"],[1,"input-box","d-inline-block","oh"],[1,"form-group","mt-sm-35"],[1,"form-check","recur-check","float-left"],["type","checkbox","id","GSTInvoiceChecked","name","GSTInvoiceChecked",1,"form-check-input",3,"ngModel","ngModelChange"],["for","GSTInvoiceChecked",1,"form-check-label","tiny"],[1,"col-sm-12","text-right"],[1,"btn","blue",3,"disabled"],[3,"value"],["type","number","OnlyNumber","true","placeholder","","name","invoiceVatPercent","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","","name","invoiceDiscount","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","","name","totalAmount","readonly","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){const t=l.cc();l.bc(0,"div",0),l.bc(1,"h5",1),l.Wc(2,Yt,2,0,"span",2),l.Wc(3,Ft,2,0,"span",2),l.ac(),l.Wc(4,wt,24,16,"div",3),l.bc(5,"div",4),l.bc(6,"form",5,6),l.nc("ngSubmit",(function(){l.Pc(t);const c=l.Mc(7);return e.submitIncomeInvoiceForm(c)})),l.bc(8,"div",7),l.Wc(9,Tt,1,0,"app-loader",2),l.Xb(10,"app-alert-message",8),l.Wc(11,Nt,40,12,"ng-container",2),l.ac(),l.ac(),l.ac(),l.ac()}2&t&&(l.Hb(2),l.zc("ngIf",!e.isEditInvoice&&e.isNewInvoice),l.Hb(1),l.zc("ngIf",e.isEditInvoice&&!e.isNewInvoice),l.Hb(1),l.zc("ngIf",e.isAccountDataLoaded),l.Hb(5),l.zc("ngIf",!e.isInvoiceSubmitted),l.Hb(1),l.zc("message",e.alertMessage)("isError",e.isError),l.Hb(1),l.zc("ngIf",e.isInvoiceSubmitted))},directives:[n.l,g.z,g.m,g.n,Ot.a,m.a,g.q,g.d,p.a,g.v,g.l,g.o,g.w,g.p,g.y,n.k,it.c,it.e,it.b,b.b,g.a],pipes:[v.f],styles:[""]}),t})();var _t=c("2Vo4");const Ut=["searchFieldElem"];function Wt(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"li",8),l.nc("click",(function(){l.Pc(t);const c=e.$implicit,n=l.rc();return n.getSelectedItem(c,n.fieldItemName)})),l.Yc(2),l.ac(),l.Yb()}if(2&t){const t=e.$implicit,c=l.rc();l.Hb(1),l.zc("ngClass",c.isSelectedItem(t,c.fieldModel)),l.Hb(1),l.ad(" ",c.getItemName(t,c.fieldItemName)," ")}}let Et=(()=>{class t{constructor(t){this.cdRef=t,this.isItemSelected=!1,this.inputChange=new l.o,this.inputStatus=new l.o}isFieldRequired(){return"required"==this.fieldRequired}getSelectedItem(t,e){this.fieldModel=t[e],this.inputChange.emit(t),this.isItemSelected=!0}getItemName(t,e){return t[e]}isSelectedItem(t,e){return t==e?"selected":""}clearList(){this.fieldModel="",this.isItemSelected=!1,document.querySelectorAll(".user-search-field-list").forEach((function(t){t.classList.remove("selected")})),this.inputChange.emit(null)}isFieldModelChanged(){this.isItemSelected=!1,setTimeout(()=>{this.el.nativeElement.classList.contains("ng-valid")?this.inputStatus.emit(!0):this.inputStatus.emit(!1)},200)}ngOnInit(){}ngAfterViewInit(){this.el.nativeElement.classList.contains("ng-valid")&&this.inputStatus.emit(!0)}ngOnChanges(t){null!=this.fieldModel&&(this.isItemSelected=""!=this.fieldModel)}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(l.h))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-select-search-box"]],viewQuery:function(t,e){var c;1&t&&l.Uc(Ut,!0),2&t&&l.Lc(c=l.oc())&&(e.el=c.first)},inputs:{fieldName:"fieldName",fieldText:"fieldText",fieldPlaceholder:"fieldPlaceholder",fieldModel:"fieldModel",fieldRequired:"fieldRequired",fieldList:"fieldList",isLabel:"isLabel",fieldItemName:"fieldItemName"},outputs:{inputChange:"inputChange",inputStatus:"inputStatus"},features:[l.Gb([],[{provide:g.c,useExisting:g.n}]),l.Fb],decls:10,vars:15,consts:[[1,"select-group","form-group","mb-0"],[1,"text-uppercase",3,"for","ngClass"],["type","text","autocomplete","off",1,"form-control","search","multi-search",3,"ngClass","placeholder","name","ngModel","required","ngModelChange"],["searchFieldElem",""],[1,"search-control",3,"ngClass"],["name","x-circle",1,"icon","red",3,"click"],[1,"select-list-dropdown"],[4,"ngFor","ngForOf"],[1,"user-search-field-list",3,"ngClass","click"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.bc(1,"label",1),l.Yc(2),l.ac(),l.bc(3,"input",2,3),l.nc("ngModelChange",(function(t){return e.fieldModel=t}))("ngModelChange",(function(){return e.isFieldModelChanged()})),l.ac(),l.bc(5,"span",4),l.bc(6,"i-feather",5),l.nc("click",(function(){return e.clearList()})),l.ac(),l.ac(),l.bc(7,"div",6),l.Wc(8,Wt,3,2,"ng-container",7),l.sc(9,"simpleSearch"),l.ac(),l.ac()),2&t&&(l.Hb(1),l.Ac("for",e.fieldName),l.zc("ngClass","true"==e.isLabel?"":"d-none"),l.Hb(1),l.Zc(e.fieldText),l.Hb(1),l.Ac("placeholder",e.fieldPlaceholder),l.Ac("name",e.fieldName),l.zc("ngClass",e.isItemSelected?"no-link":"")("ngModel",e.fieldModel)("required",e.isFieldRequired()?"required":null),l.Hb(2),l.zc("ngClass",e.isItemSelected?"d-inline-block":"d-none"),l.Hb(3),l.zc("ngForOf",l.wc(9,10,e.fieldList,e.fieldModel,"",e.isItemSelected)))},directives:[n.j,g.d,p.b,g.l,g.o,g.v,b.b,n.k],pipes:[v.e],styles:['@charset "UTF-8";.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%]{cursor:pointer;color:#8391a1}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%], .select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%]:focus{box-shadow:0 1px 3px 0 rgba(25,28,30,.1);-moz-box-shadow:0 1px 3px 0 rgba(25,28,30,.1);-webkit-box-shadow:0 1px 3px 0 rgba(25,28,30,.1);border:1px solid hsla(0,0%,91.8%,.8)!important}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%]:focus, .select-group[_ngcontent-%COMP%]   .simple-select[readonly][_ngcontent-%COMP%]{background-color:#fff!important}.select-group[_ngcontent-%COMP%]   .simple-select[readonly][_ngcontent-%COMP%]:-webkit-autofill{-webkit-box-shadow:0 0 0 1000px #e6e6e6 inset;-webkit-text-fill-color:#e6e6e6}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow[_ngcontent-%COMP%]{position:relative;top:-30px;right:20px;float:right}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow[_ngcontent-%COMP%]:before{position:absolute;font-family:FontAwesome;font-size:1.6rem;left:0!important}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow[_ngcontent-%COMP%]:after{content:none}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow.down[_ngcontent-%COMP%]:before{content:"\uf107"}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow.up[_ngcontent-%COMP%]:before{content:"\uf106"}.select-group[_ngcontent-%COMP%]   .clear-filter[_ngcontent-%COMP%]{position:absolute;right:2px;top:50px;float:right}.select-group[_ngcontent-%COMP%]   .clear-filter[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:15px}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]{position:absolute;background:#fff;display:none;float:left;max-height:250px;max-width:inherit!important;width:calc(100% - 15px);overflow:auto;z-index:1000;box-shadow:0 2px 12px rgba(0,0,0,.15);-moz-box-shadow:0 2px 12px rgba(0,0,0,.15);-webkit-box-shadow:0 2px 12px rgba(0,0,0,.15);border:1px solid #eaeaea;margin:3px 0 0}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;color:#8391a1;font-family:Lato,sans-serif;font-weight:400;letter-spacing:.3px;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;font-size:1.4rem;padding:7px 15px 6px;cursor:pointer;text-transform:capitalize}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #eaeaea}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:8px}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f3f5f7}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#f3f5f7;position:relative;color:#373946}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:after{content:"";background-image:url(https://senthilkumarcode.github.io/clickmycondo/assets/images/tick-icon.svg);width:12px;height:12px;position:absolute;background-repeat:no-repeat;right:25px;top:10px}.select-group[_ngcontent-%COMP%]   .select-list-dropdown.active[_ngcontent-%COMP%]{display:block}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_inside[_ngcontent-%COMP%] > .mCSB_container[_ngcontent-%COMP%]{margin-right:0!important}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_scrollTools[_ngcontent-%COMP%]{right:0!important;margin:5px 0}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_scrollTools[_ngcontent-%COMP%]   .mCSB_dragger[_ngcontent-%COMP%]   .mCSB_dragger_bar[_ngcontent-%COMP%]{background:#e5e5e5;width:10px;border-radius:4px!important}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_scrollTools[_ngcontent-%COMP%]   .mCSB_draggerRail[_ngcontent-%COMP%]{width:12px;background:#f6f8f8;border-radius:4px!important}']}),t})();const Zt=["postIncomeMultiInvoiceFieldsForm"],Xt=["app-income-post-multi-invoice-fields",""];let Rt=(()=>{class t{constructor(t,e,c,n,i,a,o){this.cd=t,this.router=e,this.route=c,this.accountsService=n,this.sharedService=i,this.lookupService=a,this.cookieService=o,this.invoiceId="",this.isEditInvoice=!1,this.isInvoiceSubmitted=!0,this.isError=!1,this.alertMessage="",this.glAccountIndicator="Income",this.fieldParams=new l.o,this.invoiceGLAccountsDataSub=new _t.a(null)}deleteBlock(){this.invoiceGLAccountsArray.splice(this.index,1),this.fieldParams.emit(this.invoiceGLAccountsArray)}isArrayOne(){return this.invoiceGLAccountsArray.length>1}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isFormValid(t){return null!=this.invoiceGLAccountsData.glaccountId&&""!=this.invoiceGLAccountsData.comments&&""!=this.invoiceGLAccountsData.amount}onAccountChange(t,e){null!=t?(this.invoiceGLAccountsData.glaccountName=t.glaccountName,this.invoiceGLAccountsData.glaccountId=parseInt(t.glaccountId)):(this.invoiceGLAccountsData.glaccountName="",this.invoiceGLAccountsData.glaccountId=null),this.invoiceGLAccountsData.form=this.invoiceForm.valid,this.invoiceGLAccountsArray[e]=this.invoiceGLAccountsData,this.fieldParams.emit(this.invoiceGLAccountsArray)}onInvoiceAmountChange(t,e){this.invoiceGLAccountsData.amount=null!=t?parseFloat(t):0,this.calculateVat(),this.invoiceGLAccountsData.lineItemTotal=this.invoiceGLAccountsData.amount-parseInt(this.invoiceGLAccountsData.discountAmount),this.invoiceGLAccountsData.form=this.invoiceForm.valid,this.invoiceGLAccountsArray[e]=this.invoiceGLAccountsData,this.fieldParams.emit(this.invoiceGLAccountsArray)}onDiscountChange(t,e){null!=t?(this.invoiceGLAccountsData.isDiscount=!0,this.invoiceGLAccountsData.discountId=t.lookupValueId,this.invoiceGLAccountsData.discountTypeId=t.lookupValueName,this.onDiscountAdded(this.invoiceGLAccountsData.discountDirectAmt,e)):(this.invoiceGLAccountsData.isDiscount=!1,this.invoiceGLAccountsData.discountId="",this.invoiceGLAccountsData.discountTypeId="",this.invoiceGLAccountsData.discountAmount=0,this.invoiceGLAccountsData.discountDirectAmt=0),this.invoiceGLAccountsData.lineItemTotal=this.invoiceGLAccountsData.amount-parseInt(this.invoiceGLAccountsData.discountAmount),this.invoiceGLAccountsData.form=this.invoiceForm.valid,this.invoiceGLAccountsArray[e]=this.invoiceGLAccountsData,this.fieldParams.emit(this.invoiceGLAccountsArray)}onDiscountAdded(t,e){null!=t&&("%"==this.invoiceGLAccountsData.discountTypeId?this.calculateDiscountPercent(t,e):this.calculateDiscountPeso(t,e))}calculateDiscountPercent(t,e){if(null!=t){var c=parseFloat(t)/100;this.invoiceGLAccountsData.discountAmount=parseFloat(this.invoiceGLAccountsData.amount)*c}else this.invoiceGLAccountsData.isDiscount=!1,this.invoiceGLAccountsData.discountAmount=0,this.invoiceGLAccountsData.discountDirectAmt=0;this.calculateVat(),this.invoiceGLAccountsData.lineItemTotal=this.invoiceGLAccountsData.amount-this.invoiceGLAccountsData.discountAmount,this.invoiceGLAccountsData.form=this.invoiceForm.valid,this.invoiceGLAccountsArray[e]=this.invoiceGLAccountsData,this.fieldParams.emit(this.invoiceGLAccountsArray)}calculateDiscountPeso(t,e){null!=t?this.invoiceGLAccountsData.discountAmount=parseFloat(t):(this.invoiceGLAccountsData.isDiscount=!1,this.invoiceGLAccountsData.discountAmount=0,this.invoiceGLAccountsData.discountDirectAmt=0),this.calculateVat(),this.invoiceGLAccountsData.lineItemTotal=this.invoiceGLAccountsData.amount-this.invoiceGLAccountsData.discountAmount,this.invoiceGLAccountsData.form=this.invoiceForm.valid,this.invoiceGLAccountsArray[e]=this.invoiceGLAccountsData,this.fieldParams.emit(this.invoiceGLAccountsArray)}onCommentChange(t,e){this.invoiceGLAccountsData.comments=t,this.invoiceGLAccountsData.form=this.invoiceForm.valid,this.invoiceGLAccountsArray[e]=this.invoiceGLAccountsData,this.fieldParams.emit(this.invoiceGLAccountsArray)}onVatChange(t,e){if(null!=t){this.invoiceGLAccountsData.isTax=!0,this.invoiceGLAccountsData.vatid=t.lookupValueName;var c=parseInt(t.lookupValueName)/100;"12.5"==t.lookupValueName?(this.invoiceGLAccountsData.tax1Id="12.5",this.invoiceGLAccountsData.tax2Id="",this.invoiceGLAccountsData.tax1Amount=parseFloat(this.invoiceGLAccountsData.amount)*c,this.invoiceGLAccountsData.tax2Amount=0):(this.invoiceGLAccountsData.tax2Id="15",this.invoiceGLAccountsData.tax1Id="",this.invoiceGLAccountsData.tax2Amount=parseFloat(this.invoiceGLAccountsData.amount)*c,this.invoiceGLAccountsData.tax1Amount=0)}else this.invoiceGLAccountsData.isTax=!1,this.invoiceGLAccountsData.vatid="",this.invoiceGLAccountsData.tax1Id="",this.invoiceGLAccountsData.tax2Id="",this.invoiceGLAccountsData.tax1Amount=0,this.invoiceGLAccountsData.tax2Amount=0,c=0;this.invoiceGLAccountsData.vatamount=parseFloat(this.invoiceGLAccountsData.amount)*c,this.invoiceGLAccountsData.form=this.invoiceForm.valid,this.invoiceGLAccountsArray[e]=this.invoiceGLAccountsData,this.fieldParams.emit(this.invoiceGLAccountsArray)}calculateVat(){if(this.invoiceGLAccountsData.isTax){var t=parseInt(this.invoiceGLAccountsData.vatid)/100;this.invoiceGLAccountsData.vatamount=parseFloat(this.invoiceGLAccountsData.amount)*t,"12.5"==this.invoiceGLAccountsData.vatid?(this.invoiceGLAccountsData.tax1Id="12.5",this.invoiceGLAccountsData.tax2Id="",this.invoiceGLAccountsData.tax1Amount=parseFloat(this.invoiceGLAccountsData.amount)*t,this.invoiceGLAccountsData.tax2Amount=0):(this.invoiceGLAccountsData.tax2Id="15",this.invoiceGLAccountsData.tax1Id="",this.invoiceGLAccountsData.tax2Amount=parseFloat(this.invoiceGLAccountsData.amount)*t,this.invoiceGLAccountsData.tax1Amount=0)}}ngOnInit(){this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountListData=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),this.lookupService.getLookupValueByLookupTypeId(77).subscribe(t=>{this.vatTypeDataList=t}),this.lookupService.getLookupValueByLookupTypeId(75).subscribe(t=>{this.discountTypeDataList=t}),this.lookupService.getLookupValueByLookupTypeId(88).subscribe(t=>{this.curTypeDataList=t}),this.invoiceGLAccountsDataSub=this.invoiceGLAccountsData,this.invoiceGLAccountsDataSub.subscribe(t=>{console.log(t)})}ngOnChanges(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(l.h),l.Wb(i.c),l.Wb(i.a),l.Wb(o.a),l.Wb(r.a),l.Wb(V.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["","app-income-post-multi-invoice-fields",""]],viewQuery:function(t,e){var c;1&t&&l.Uc(Zt,!0),2&t&&l.Lc(c=l.oc())&&(e.invoiceForm=c.first)},inputs:{index:"index",invoiceGLAccountsData:"invoiceGLAccountsData",invoiceGLAccountsArray:"invoiceGLAccountsArray"},outputs:{fieldParams:"fieldParams"},features:[l.Fb],attrs:Xt,decls:30,vars:24,consts:[["name","postIncomeMultiInvoiceFieldsForm","novalidate",""],["postIncomeMultiInvoiceFieldsForm","ngForm"],[1,"heads","account-name-box"],["fieldText","","isLabel","false","fieldItemName","glaccountName","fieldPlaceholder","Type...","fieldRequired","'required'",3,"fieldName","fieldModel","fieldList","inputChange"],[1,"heads"],[1,"input-box"],["type","number","OnlyNumber","true","OnlyNumber","true","placeholder","Enter","required","","autocomplete","off",1,"form-control",3,"name","ngModel","ngModelChange"],["placeholder","Enter","required","","autocomplete","off",3,"name","ngModel","ngModelChange"],[1,"d-flex"],[1,"float-left"],[1,"input-box","discount-input"],["type","number","OnlyNumber","true","placeholder","Enter","autocomplete","off",1,"form-control",3,"name","ngModel","readonly","ngModelChange"],[1,"input-box","discount-box","ml-3"],["fieldText","","fieldItemName","lookupValueName","isLabel","false","fieldPlaceholder","Select",3,"fieldName","fieldModel","fieldRequired","fieldList","isDisabled","inputChange"],[1,"input-box","tax-box"],["type","number","OnlyNumber","true","placeholder","","readonly","",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"heads","text-center"],[1,"float-close",3,"ngClass","click"],["name","minus",1,"icon","rotate"],[1,"float-close",3,"ngClass"],["name","check",1,"icon","rotate"]],template:function(t,e){1&t&&(l.bc(0,"form",0,1),l.bc(2,"div",2),l.bc(3,"app-select-search-box",3),l.nc("inputChange",(function(t){return e.onAccountChange(t,e.index)})),l.ac(),l.ac(),l.bc(4,"div",4),l.bc(5,"div",5),l.bc(6,"input",6),l.nc("ngModelChange",(function(t){return e.invoiceGLAccountsData.amount=t}))("ngModelChange",(function(){return e.onInvoiceAmountChange(e.invoiceGLAccountsData.amount,e.index)})),l.ac(),l.ac(),l.ac(),l.bc(7,"div",4),l.bc(8,"div",5),l.bc(9,"textarea",7),l.nc("ngModelChange",(function(t){return e.invoiceGLAccountsData.comments=t}))("ngModelChange",(function(){return e.onCommentChange(e.invoiceGLAccountsData.comments,e.index)})),l.Yc(10,"            "),l.ac(),l.ac(),l.ac(),l.bc(11,"div",4),l.bc(12,"div",8),l.bc(13,"div",9),l.bc(14,"div",10),l.bc(15,"input",11),l.nc("ngModelChange",(function(t){return e.invoiceGLAccountsData.discountDirectAmt=t}))("ngModelChange",(function(){return e.onDiscountAdded(e.invoiceGLAccountsData.discountDirectAmt,e.index)})),l.ac(),l.ac(),l.ac(),l.bc(16,"div",9),l.bc(17,"div",12),l.bc(18,"app-simple-select-box",13),l.nc("inputChange",(function(t){return e.onDiscountChange(t,e.index)})),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(19,"div",4),l.bc(20,"div",14),l.bc(21,"app-simple-select-box",13),l.nc("inputChange",(function(t){return e.onVatChange(t,e.index)})),l.ac(),l.ac(),l.ac(),l.bc(22,"div",4),l.bc(23,"div",5),l.bc(24,"input",15),l.nc("ngModelChange",(function(t){return e.invoiceGLAccountsData.lineItemTotal=t})),l.ac(),l.ac(),l.ac(),l.bc(25,"div",16),l.bc(26,"div",17),l.nc("click",(function(){return e.deleteBlock()})),l.Xb(27,"i-feather",18),l.ac(),l.bc(28,"div",19),l.Xb(29,"i-feather",20),l.ac(),l.ac(),l.ac()),2&t&&(l.Hb(3),l.Bc("fieldName","accountType",e.index,""),l.zc("fieldModel",e.invoiceGLAccountsData.glaccountName)("fieldList",e.glAccountListData),l.Hb(3),l.Bc("name","invoiceAmount",e.index,""),l.zc("ngModel",e.invoiceGLAccountsData.amount),l.Hb(3),l.Bc("name","comments",e.index,""),l.zc("ngModel",e.invoiceGLAccountsData.comments),l.Hb(6),l.Bc("name","discountDirectAmt",e.index,""),l.zc("ngModel",e.invoiceGLAccountsData.discountDirectAmt)("readonly",!e.invoiceGLAccountsData.isDiscount),l.Hb(3),l.Bc("fieldName","discountType",e.index,""),l.zc("fieldModel",e.invoiceGLAccountsData.discountTypeId)("fieldRequired","null")("fieldList",e.curTypeDataList)("isDisabled",!e.isFormValid(e.index)),l.Hb(3),l.Bc("fieldName","vatType",e.index,""),l.zc("fieldModel",e.invoiceGLAccountsData.vatid)("fieldRequired","null")("fieldList",e.vatTypeDataList)("isDisabled",!e.isFormValid(e.index)),l.Hb(3),l.Bc("name","totalAmount",e.index,""),l.zc("ngModel",e.invoiceGLAccountsData.lineItemTotal),l.Hb(2),l.zc("ngClass",e.isArrayOne()?"delete":"disabled"),l.Hb(2),l.zc("ngClass",e.isFormValid(e.index)?"valid":"disabled"))},directives:[g.z,g.m,g.n,Et,g.q,g.d,p.a,g.v,g.l,g.o,_.a,n.j,b.b],styles:["form[_ngcontent-%COMP%]{display:contents}form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .select-box[_ngcontent-%COMP%]{margin:0}form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{background-color:#f9f9f9}form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]:-webkit-autofill{-webkit-box-shadow:0 0 0 1000px #e6e6e6 inset;-webkit-text-fill-color:#e6e6e6}form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:auto!important;border:none;padding:0}form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:none!important}.heads[_ngcontent-%COMP%]{padding:12px 14px;display:table-cell;border:1px solid #dee2e6;border-bottom:none;border-left:none}.heads[_ngcontent-%COMP%]:last-child{border-right:none;padding:12px 0}.float-close[_ngcontent-%COMP%]{width:23px;height:23px;display:flex;justify-content:center;align-items:center;border-radius:23px!important;background-color:#5cd694;cursor:pointer;display:inline-block;margin:9px 4px;line-height:20px}.float-close.disabled[_ngcontent-%COMP%]{background-color:#c5c6c7;pointer-events:none}.float-close.disabled[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#e6e6e6}.float-close.delete[_ngcontent-%COMP%]{background-color:#ea7962}.float-close.valid[_ngcontent-%COMP%]{background-color:#389583}.float-close[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{cursor:pointer;width:13px;color:#fff}"]}),t})();function Vt(t,e){1&t&&(l.bc(0,"span"),l.Yc(1,"Post Multi Invoice"),l.ac())}function $t(t,e){1&t&&(l.bc(0,"span"),l.Yc(1,"Edit Multi Invoice"),l.ac())}function qt(t,e){if(1&t&&(l.bc(0,"h5",5),l.Wc(1,Vt,2,0,"span",4),l.Wc(2,$t,2,0,"span",4),l.ac()),2&t){const t=l.rc();l.Hb(1),l.zc("ngIf",!t.isEditInvoice),l.Hb(1),l.zc("ngIf",t.isEditInvoice)}}function jt(t,e){1&t&&(l.bc(0,"span"),l.Yc(1,"Post Single Invoice"),l.ac())}function Qt(t,e){1&t&&(l.bc(0,"span"),l.Yc(1,"Edit Single Invoice"),l.ac())}function Jt(t,e){if(1&t&&(l.bc(0,"h5",5),l.Wc(1,jt,2,0,"span",4),l.Wc(2,Qt,2,0,"span",4),l.ac()),2&t){const t=l.rc();l.Hb(1),l.zc("ngIf",!t.isEditInvoice),l.Hb(1),l.zc("ngIf",t.isEditInvoice)}}function Kt(t,e){if(1&t&&(l.bc(0,"div",10),l.bc(1,"p",11),l.bc(2,"span"),l.Yc(3,"Bill to party: "),l.ac(),l.Yc(4),l.ac(),l.bc(5,"p",12),l.bc(6,"span"),l.Yc(7,"Contact Person: "),l.ac(),l.Yc(8),l.ac(),l.bc(9,"p",12),l.bc(10,"span"),l.Yc(11,"Unit: "),l.ac(),l.Yc(12),l.ac(),l.ac()),2&t){const t=l.rc(2);l.Hb(4),l.Zc(t.accountDataList[0].billToParty),l.Hb(4),l.Zc(t.accountDataList[0].primayContact),l.Hb(4),l.bd("",t.accountDataList[0].apartmentBlockNumber," ",t.accountDataList[0].apartmentBlockUnitNumber,"")}}function te(t,e){if(1&t&&(l.bc(0,"div",6),l.bc(1,"div",7),l.bc(2,"div",8),l.Wc(3,Kt,13,4,"div",9),l.ac(),l.ac(),l.ac()),2&t){const t=l.rc();l.Hb(3),l.zc("ngIf",t.isAccountDataLoaded)}}function ee(t,e){1&t&&(l.bc(0,"div",13),l.bc(1,"div",14),l.Xb(2,"app-loader"),l.ac(),l.ac())}function ce(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"div",32),l.bc(2,"div",41),l.bc(3,"div",42),l.bc(4,"label"),l.Yc(5,"Invoice Date*"),l.ac(),l.bc(6,"input",43),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc(2).invoice.custInvoiceDate=e})),l.ac(),l.Xb(7,"owl-date-time",44,45),l.bc(9,"div",46),l.Xb(10,"i-feather",47),l.ac(),l.ac(),l.ac(),l.bc(11,"div",41),l.bc(12,"div",42),l.bc(13,"label"),l.Yc(14,"Due Date*"),l.ac(),l.bc(15,"input",48),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc(2).invoice.dueDate=e})),l.ac(),l.Xb(16,"owl-date-time",44,49),l.bc(18,"div",46),l.Xb(19,"i-feather",47),l.ac(),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.Mc(8),e=l.Mc(17),c=l.rc(2);l.Hb(6),l.zc("owlDateTime",t)("owlDateTimeTrigger",t)("ngModel",c.invoice.custInvoiceDate),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",t),l.Hb(6),l.zc("owlDateTime",e)("owlDateTimeTrigger",e)("ngModel",c.invoice.dueDate),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",e)}}function ne(t,e){if(1&t){const t=l.cc();l.bc(0,"div",50),l.nc("fieldParams",(function(e){return l.Pc(t),l.rc(2).getFieldParams(e)})),l.ac()}if(2&t){const t=e.$implicit,c=e.index,n=l.rc(2);l.zc("invoiceGLAccountsArray",n.invoiceGLAccountsArray)("invoiceGLAccountsData",t)("index",c)}}function ie(t,e){if(1&t){const t=l.cc();l.bc(0,"div",51),l.nc("click",(function(){return l.Pc(t),l.rc(2).addInvoice()})),l.Xb(1,"i-feather",52),l.bc(2,"span"),l.Yc(3,"Add Another Line"),l.ac(),l.ac()}}function ae(t,e){if(1&t&&(l.bc(0,"div",32),l.bc(1,"div",33),l.bc(2,"p"),l.Yc(3),l.ac(),l.ac(),l.bc(4,"div",34),l.bc(5,"p"),l.bc(6,"span",35),l.Yc(7),l.ac(),l.ac(),l.ac(),l.ac()),2&t){const t=e.$implicit;l.Hb(3),l.ad("VAT: [",t.lookupValueName,"%]:"),l.Hb(4),l.Zc(t.custVatTypeAmount)}}function oe(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"form",15,16),l.nc("ngSubmit",(function(){l.Pc(t);const e=l.Mc(2);return l.rc().submitIncomeMultiInvoiceForm(e)})),l.bc(3,"div",17),l.bc(4,"div",18),l.Xb(5,"app-alert-message",19),l.Wc(6,ce,20,10,"ng-container",4),l.ac(),l.ac(),l.bc(7,"div",13),l.bc(8,"div",20),l.bc(9,"div",21),l.bc(10,"div",22),l.Yc(11,"Account*"),l.ac(),l.bc(12,"div",23),l.Yc(13,"Invoice Amount*"),l.ac(),l.bc(14,"div",23),l.Yc(15,"Comments*"),l.ac(),l.bc(16,"div",24),l.Yc(17,"Discount*"),l.ac(),l.bc(18,"div",23),l.Yc(19,"Tax*"),l.ac(),l.bc(20,"div",25),l.Yc(21,"Amount"),l.ac(),l.bc(22,"div",26),l.Yc(23,"Actions"),l.ac(),l.ac(),l.Wc(24,ne,1,3,"div",27),l.ac(),l.bc(25,"div",28),l.bc(26,"div",29),l.Wc(27,ie,4,0,"div",30),l.ac(),l.ac(),l.bc(28,"div",31),l.bc(29,"div",32),l.bc(30,"div",33),l.bc(31,"p"),l.Yc(32,"Sub Amount:"),l.ac(),l.ac(),l.bc(33,"div",34),l.bc(34,"p"),l.bc(35,"span",35),l.Yc(36),l.ac(),l.ac(),l.ac(),l.ac(),l.Wc(37,ae,8,2,"div",36),l.ac(),l.bc(38,"div",37),l.bc(39,"div",32),l.bc(40,"div",33),l.bc(41,"p"),l.Yc(42,"Total Amount:"),l.ac(),l.ac(),l.bc(43,"div",34),l.bc(44,"p"),l.bc(45,"span",35),l.Yc(46),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(47,"div",38),l.bc(48,"div",39),l.bc(49,"button",40),l.Yc(50,"Submit"),l.ac(),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.Mc(2),e=l.rc();l.Hb(5),l.zc("message",e.alertMessage)("isError",e.isError),l.Hb(1),l.zc("ngIf",e.isInvoiceSubmitted),l.Hb(18),l.zc("ngForOf",e.invoiceGLAccountsArray),l.Hb(3),l.zc("ngIf",!e.isSingleInvoice),l.Hb(9),l.Zc(e.invoice.subAmount),l.Hb(1),l.zc("ngForOf",e.vatTypeDataList),l.Hb(9),l.Zc(e.invoice.custInvoiceAmount),l.Hb(3),l.zc("disabled",t.invalid||e.isFormInValid)}}let re=(()=>{class t{constructor(t,e,c,n,i,a,o){this.cd=t,this.router=e,this.route=c,this.accountsService=n,this.lookupService=i,this.sharedService=a,this.cookieService=o,this.invoiceId="",this.isEditInvoice=!1,this.isInvoiceSubmitted=!0,this.isError=!1,this.alertMessage="",this.isFormInValid=!0,this.isAccountDataLoaded=!1,this.isSingleInvoice=!1}addInvoice(){let t={apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:parseInt(this.invoiceGLAccountsData.glaccountId),glaccountName:this.invoiceGLAccountsData.glaccountName,comments:"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:0,updatedOn:(new Date).toISOString(),amount:parseFloat(this.invoiceGLAccountsData.amount),vatid:"",vatamount:parseFloat(this.invoiceGLAccountsData.vatamount),tax1Id:"",tax1Amount:parseFloat(this.invoiceGLAccountsData.tax1Amount),tax2Id:"",tax2Amount:parseFloat(this.invoiceGLAccountsData.tax2Amount),tax3Id:"",tax3Amount:parseFloat(this.invoiceGLAccountsData.tax3Amount),discountId:"",discountAmount:parseFloat(this.invoiceGLAccountsData.discountAmount),lineItemTotal:parseFloat(this.invoiceGLAccountsData.lineItemTotal),isDiscount:!1,isTax:!1,discountTypeId:"",discountDirectAmt:parseFloat(this.invoiceGLAccountsData.discountDirectAmt)};this.invoiceGLAccountsArray.push(t),s.each(this.invoiceGLAccountsArray,t=>{this.isFormInValid=!t.form})}getFieldParams(t){this.invoiceGLAccountsArray=t;var e=this;e.invoice.subAmount=0,e.invoice.totalVatamount=0,e.invoice.totalDiscount=0,e.invoice.custInvoiceAmount=0,this.vatTypeDataList[0].custVatTypeAmount=0,this.vatTypeDataList[1].custVatTypeAmount=0,s.each(this.invoiceGLAccountsArray,t=>{this.isFormInValid=!t.form,e.invoice.subAmount=e.invoice.subAmount+t.lineItemTotal,e.invoice.totalDiscount=e.invoice.totalDiscount+t.discountAmount,e.invoice.totalVatamount=e.invoice.totalVatamount+t.vatamount,e.invoice.custInvoiceAmount=(parseFloat(e.invoice.subAmount)+parseFloat(e.invoice.totalVatamount)).toFixed(2),this.vatTypeDataList[0].custVatTypeAmount=this.vatTypeDataList[0].custVatTypeAmount+parseInt(t.tax1Amount),this.vatTypeDataList[1].custVatTypeAmount=this.vatTypeDataList[1].custVatTypeAmount+parseInt(t.tax2Amount)})}submitIncomeMultiInvoiceForm(t){this.isInvoiceSubmitted=!1,this.invoiceGLAccountsArray.map((function(t){return delete t.form,delete t.glaccountName,t}));let e={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:parseInt(this.route.params.value.id),custInvoiceAmount:parseFloat(this.invoice.custInvoiceAmount),custInvoiceDate:this.invoice.custInvoiceDate,dueDate:this.invoice.dueDate,tax1:0,tax2:0,tax3:0,isTax:this.invoice.isTax,isRecurCustInvoice:this.invoice.isRecurCustInvoice,isEmailSent:!1,isSmssent:!1,custInvoiceStatusId:1,postedBy:parseInt(this.cookieService.get("userId")),postedOn:(new Date).toISOString(),billToPay:"",comments:this.invoice.comments||"",penaltyAmount:0,penaltyComment:"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:0,updatedOn:(new Date).toISOString(),transReference1:"",transReference2:"",totalVatamount:0,totalOtherTaxes:0,totalDiscount:0,isDiscount:this.invoice.isDiscount,subAmount:0,invoiceGLAccounts:this.invoiceGLAccountsArray};this.accountsService.addCustInvoice(e).subscribe(t=>{t.message?(this.isInvoiceSubmitted=!0,this.sharedService.setAlertMessage("All Invoices added successfully"),this.router.navigate(["ams/income/subledger"])):(this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}ngOnInit(){this.invoice={},this.invoice.isTax=!1,this.invoice.isDiscount=!1,this.invoice.subAmount=0,this.invoice.custInvoiceVatAmount=0,this.invoice.custInvoiceAddVatAmount=0,this.invoice.custInvoiceAmount=0,this.invoice.isRecurCustInvoice=!0,this.invoice.custInvoiceDate=(new Date).toISOString(),this.invoiceGLAccountsData={},this.invoiceGLAccountsData.glaccountId="",this.invoiceGLAccountsData.glaccountName="",this.invoiceGLAccountsData.vatid="",this.invoiceGLAccountsData.discountId="",this.invoiceGLAccountsData.amount=0,this.invoiceGLAccountsData.isTax=!1,this.invoiceGLAccountsData.isDiscount=!1,this.invoiceGLAccountsData.discountAmount=0,this.invoiceGLAccountsData.discountDirectAmt=0,this.invoiceGLAccountsData.vatamount=0,this.invoiceGLAccountsData.lineItemTotal=0,this.invoiceGLAccountsData.comments="",this.invoiceGLAccountsData.tax1Id="",this.invoiceGLAccountsData.tax1Amount=0,this.invoiceGLAccountsData.tax2Id="",this.invoiceGLAccountsData.tax2Amount=0,this.invoiceGLAccountsData.tax3Id="",this.invoiceGLAccountsData.tax3Amount=0,this.invoiceGLAccountsArray=[{apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:parseInt(this.invoiceGLAccountsData.glaccountId),glaccountName:this.invoiceGLAccountsData.glaccountName,comments:"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:0,updatedOn:(new Date).toISOString(),amount:parseFloat(this.invoiceGLAccountsData.amount),vatid:"",vatamount:parseFloat(this.invoiceGLAccountsData.vatamount),tax1Id:"",tax1Amount:parseFloat(this.invoiceGLAccountsData.tax1Amount),tax2Id:"",tax2Amount:parseFloat(this.invoiceGLAccountsData.tax2Amount),tax3Id:"",tax3Amount:parseFloat(this.invoiceGLAccountsData.tax3Amount),discountId:"",discountAmount:parseFloat(this.invoiceGLAccountsData.discountAmount),lineItemTotal:parseFloat(this.invoiceGLAccountsData.lineItemTotal),isDiscount:!1,isTax:!1,discountTypeId:"",discountDirectAmt:parseFloat(this.invoiceGLAccountsData.discountDirectAmt)},{apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:parseInt(this.invoiceGLAccountsData.glaccountId),glaccountName:this.invoiceGLAccountsData.glaccountName,comments:"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:0,updatedOn:(new Date).toISOString(),amount:parseFloat(this.invoiceGLAccountsData.amount),vatid:"",vatamount:parseFloat(this.invoiceGLAccountsData.vatamount),tax1Id:"",tax1Amount:parseFloat(this.invoiceGLAccountsData.tax1Amount),tax2Id:"",tax2Amount:parseFloat(this.invoiceGLAccountsData.tax2Amount),tax3Id:"",tax3Amount:parseFloat(this.invoiceGLAccountsData.tax3Amount),discountId:"",discountAmount:parseFloat(this.invoiceGLAccountsData.discountAmount),lineItemTotal:parseFloat(this.invoiceGLAccountsData.lineItemTotal),isDiscount:!1,isTax:!1,discountTypeId:"",discountDirectAmt:parseFloat(this.invoiceGLAccountsData.discountDirectAmt)}],"single"==this.route.params.value.type&&(this.invoiceGLAccountsArray.splice(0,1),this.isSingleInvoice=!0),this.lookupService.getLookupValueByLookupTypeId(74).subscribe(t=>{this.invoice.dueDate=O().add(parseInt(t[0].lookupValueName),"days")}),this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.route.params.value.id),this.isAccountDataLoaded=!0}),this.lookupService.getLookupValueByLookupTypeId(77).subscribe(t=>{this.vatTypeDataList=t,s.each(this.vatTypeDataList,t=>{t.custVatTypeAmount=0})})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(l.h),l.Wb(i.c),l.Wb(i.a),l.Wb(o.a),l.Wb(V.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-post-multi-invoice"]],decls:6,vars:5,consts:[[1,"income-post-invoice-wrapper"],["class","mb-3",4,"ngIf"],["class","card mb-20 no-shadow",4,"ngIf"],["class","card",4,"ngIf"],[4,"ngIf"],[1,"mb-3"],[1,"card","mb-20","no-shadow"],[1,"card-header","at-header"],[1,"float-left"],["class","sub-details",4,"ngIf"],[1,"sub-details"],[1,"d-inline-block","ft"],[1,"d-inline-block","ft","ml-md-4"],[1,"card"],[1,"card-body"],["name","postIncomeMultiInvoiceForm","novalidate","",3,"ngSubmit"],["postIncomeMultiInvoiceForm","ngForm"],[1,"card","clear","mb-20"],[1,"card-body","pb-0"],[3,"message","isError"],[1,"invoice-table"],[1,"card-body","p-0","invoice-header"],[1,"w-250","heads"],[1,"w-150","heads"],[1,"w-220","heads"],[1,"w-70","heads"],[1,"w-50","heads"],["class","card-body p-0 invoice-fields","app-income-post-multi-invoice-fields","",3,"invoiceGLAccountsArray","invoiceGLAccountsData","index","fieldParams",4,"ngFor","ngForOf"],[1,"card-body","p-0"],[1,"add-invoice-box"],["class","float-left add-invoice-link",3,"click",4,"ngIf"],[1,"total-box"],[1,"row"],[1,"offset-sm-7","col-sm-3"],[1,"col-sm-2","amt"],[1,"ml-1"],["class","row",4,"ngFor","ngForOf"],[1,"total-box","final"],[1,"card","mt-3"],[1,"card-body","text-right"],[1,"btn","lime-green",3,"disabled","ngClass"],[1,"col-sm-3"],[1,"input-box"],["name","custInvoiceDate","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["custInvoiceDate",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","calendar","width","18",1,"icon","date","float-left"],["name","invoiceDueDate","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["invoiceDueDate",""],["app-income-post-multi-invoice-fields","",1,"card-body","p-0","invoice-fields",3,"invoiceGLAccountsArray","invoiceGLAccountsData","index","fieldParams"],[1,"float-left","add-invoice-link",3,"click"],["name","plus",1,"icon","plus"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.Wc(1,qt,3,2,"h5",1),l.Wc(2,Jt,3,2,"h5",1),l.Wc(3,te,4,1,"div",2),l.Wc(4,ee,3,0,"div",3),l.Wc(5,oe,51,9,"ng-container",4),l.ac()),2&t&&(l.Hb(1),l.zc("ngIf",!e.isSingleInvoice),l.Hb(1),l.zc("ngIf",e.isSingleInvoice),l.Hb(1),l.zc("ngIf",e.isAccountDataLoaded),l.Hb(1),l.zc("ngIf",!e.isInvoiceSubmitted),l.Hb(1),l.zc("ngIf",e.isInvoiceSubmitted))},directives:[n.l,m.a,g.z,g.m,g.n,Ot.a,n.k,n.j,it.c,g.d,g.v,it.e,g.l,g.o,it.b,b.b,Rt],styles:[".income-post-invoice-wrapper[_ngcontent-%COMP%]   .add-invoice-block[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px solid #dee2e6}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .invoice-table[_ngcontent-%COMP%]{display:table;width:100%!important}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .invoice-header[_ngcontent-%COMP%]{display:table-row}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .invoice-header[_ngcontent-%COMP%]   .heads[_ngcontent-%COMP%]{font-family:Lato,sans-serif;font-weight:700;letter-spacing:.3px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-size:1.2rem;color:#373946;text-transform:uppercase;border:none;border-right:1px solid #dee2e6;padding:12px 14px;display:table-cell}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .invoice-fields[_ngcontent-%COMP%]{display:table-row}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .add-invoice-box[_ngcontent-%COMP%]{padding:12px 0 6px 10px;border-top:1px solid #eaeaea;overflow:auto}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .add-invoice-box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#373946;width:18px;position:relative;top:-2px}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .add-invoice-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:500;letter-spacing:.2px;color:#585858;margin:0 0 0 6px;font-size:1.4rem}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .add-invoice-box[_ngcontent-%COMP%]   .add-invoice-link[_ngcontent-%COMP%]{cursor:pointer}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .add-invoice-box[_ngcontent-%COMP%]   .add-invoice-link[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%], .income-post-invoice-wrapper[_ngcontent-%COMP%]   .add-invoice-box[_ngcontent-%COMP%]   .add-invoice-link[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#54b941}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .total-box[_ngcontent-%COMP%]{padding:15px 14px;background-color:#f9f9f9;text-align:right}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .total-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:400;letter-spacing:.3px;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;margin:0 0 6px!important;font-size:1.4rem}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .total-box.final[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:500;letter-spacing:.2px;margin:10px 0 6px;font-size:1.6rem}"]}),t})(),se=(()=>{class t{validate(t){let e=t.value;if(null!=e)return e<this.customMin?{customMin:!0}:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=l.Rb({type:t,selectors:[["","customMin","","formControlName",""],["","customMin","","formControl",""],["","customMin","","ngModel",""]],inputs:{customMin:"customMin"},features:[l.Gb([{provide:g.i,useExisting:t,multi:!0}])]}),t})(),le=(()=>{class t{validate(t){let e=t.value;if(null!=e)return e>this.customMax?{customMax:!0}:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=l.Rb({type:t,selectors:[["","customMax","","formControlName",""],["","customMax","","formControl",""],["","customMax","","ngModel",""]],inputs:{customMax:"customMax"},features:[l.Gb([{provide:g.i,useExisting:t,multi:!0}])]}),t})();function de(t,e){1&t&&l.Xb(0,"app-loader")}function ue(t,e){1&t&&(l.bc(0,"div"),l.bc(1,"p",27),l.Yc(2,"Enter amount equal to or lesser than the selected entries"),l.ac(),l.ac())}function me(t,e){if(1&t&&(l.bc(0,"option",28),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.lookupValueId),l.Hb(1),l.Zc(t.lookupValueName)}}function be(t,e){if(1&t&&(l.bc(0,"option",28),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.id),l.Hb(1),l.Zc(t.id)}}function pe(t,e){if(1&t&&(l.bc(0,"option",28),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.lookupValueId),l.Hb(1),l.Zc(t.lookupValueName)}}function ge(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"div",8),l.bc(2,"div",9),l.bc(3,"div",10),l.bc(4,"label"),l.Yc(5,"Amount*"),l.ac(),l.bc(6,"input",11,12),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().collection.amount=e})),l.ac(),l.Wc(8,ue,3,0,"div",6),l.ac(),l.ac(),l.bc(9,"div",9),l.bc(10,"div",13),l.bc(11,"label"),l.Yc(12,"Instrument Type*"),l.ac(),l.bc(13,"select",14),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().collection.instrumentTypeId=e})),l.bc(14,"option",15),l.Yc(15,"Select"),l.ac(),l.Wc(16,me,2,2,"option",16),l.ac(),l.ac(),l.ac(),l.bc(17,"div",9),l.bc(18,"div",13),l.bc(19,"label"),l.Yc(20,"Deposit Slip Number*"),l.ac(),l.bc(21,"select",17),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().collection.depositSlipNumber=e})),l.bc(22,"option",15),l.Yc(23,"Select"),l.ac(),l.Wc(24,be,2,2,"option",16),l.ac(),l.ac(),l.ac(),l.bc(25,"div",9),l.bc(26,"div",10),l.bc(27,"label"),l.Yc(28,"Post On*"),l.ac(),l.bc(29,"input",18),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().collection.postOn=e})),l.ac(),l.Xb(30,"owl-date-time",19,20),l.bc(32,"div",21),l.Xb(33,"i-feather",22),l.ac(),l.ac(),l.ac(),l.bc(34,"div",9),l.bc(35,"div",13),l.bc(36,"label"),l.Yc(37,"Payment Status*"),l.ac(),l.bc(38,"select",23),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().collection.collectionStatusId=e})),l.bc(39,"option",15),l.Yc(40,"Select"),l.ac(),l.Wc(41,pe,2,2,"option",16),l.ac(),l.ac(),l.ac(),l.bc(42,"div",9),l.bc(43,"div",10),l.bc(44,"label"),l.Yc(45,"Comments"),l.ac(),l.bc(46,"input",24),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().collection.comment=e})),l.ac(),l.ac(),l.ac(),l.bc(47,"div",25),l.bc(48,"button",26),l.Yc(49,"Submit"),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.Mc(7),e=l.Mc(31),c=l.rc(),n=l.Mc(5);l.Hb(6),l.zc("customMin",c.minCollectionAmount)("customMax",c.maxCollectionAmount)("ngModel",c.collection.amount)("readonly",c.isMultipleEntry),l.Hb(2),l.zc("ngIf",t.errors),l.Hb(5),l.zc("ngModel",c.collection.instrumentTypeId),l.Hb(3),l.zc("ngForOf",c.instrumentTypeListData),l.Hb(5),l.zc("ngModel",c.collection.depositSlipNumber),l.Hb(3),l.zc("ngForOf",c.depositSlipLisData),l.Hb(5),l.zc("owlDateTime",e)("owlDateTimeTrigger",e)("ngModel",c.collection.postOn),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",e),l.Hb(6),l.zc("ngModel",c.collection.collectionStatusId),l.Hb(3),l.zc("ngForOf",c.paymentStatusListData),l.Hb(5),l.zc("ngModel",c.collection.comment),l.Hb(2),l.zc("disabled",n.invalid)}}let he=(()=>{class t{constructor(t,e,c,n,i,a){this.router=t,this.route=e,this.accountsService=c,this.lookupService=n,this.sharedService=i,this.cookieService=a,this.collection={},this.isCollectionSubmitted=!1,this.isError=!1,this.alertMessage="",this.minCollectionAmount=1,this.maxCollectionAmount=0,this.isMultipleEntry=!1,this.collectionParams=new l.o(!1)}submitIncomePostCollectionForm(t){var e=[];s.each(this.invoiceIdArray,1==this.invoiceIdArray.length?(t,c)=>{var n={apartmentId:parseInt(this.cookieService.get("apartmentId")),collectionId:0,invoiceId:t,amount:this.collection.amount,comment:"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2020-01-10T06:59:54.422Z",updatedBy:0,updatedOn:"2020-01-10T06:59:54.422Z"};e.push(n)}:(t,c)=>{var n={apartmentId:parseInt(this.cookieService.get("apartmentId")),collectionId:0,invoiceId:t,amount:this.totalAmountArray[c],comment:"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2020-01-10T06:59:54.422Z",updatedBy:0,updatedOn:"2020-01-10T06:59:54.422Z"};e.push(n)}),this.isCollectionSubmitted=!1;let c={apartmentId:parseInt(this.cookieService.get("apartmentId")),receiptNumber:0,receiptDate:(new Date).toISOString(),amount:parseInt(this.collection.amount),instrumentTypeId:parseInt(this.collection.instrumentTypeId),postOn:this.collection.postOn||(new Date).toISOString(),collectionAccountTypeId:165,depositSlipNumber:0,postExcessAmountTo:0,collectionStatusId:parseInt(this.collection.collectionStatusId),collectionStatus:"",isEmailSent:!0,isSmssent:!0,comment:this.collection.comment||"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-15T19:36:14.09",updatedBy:null,updatedOn:null,invoiceId:this.invoiceIdArray[0],transReference1:"",transReference2:"",glAcctIndicator:"Asset",collectionInvoice:e};this.accountsService.addCollection(c).subscribe(t=>{t.message?(this.isCollectionSubmitted=!0,this.sharedService.setAlertMessage("Collection done successfully"),this.collectionParams.emit(!0)):(this.isCollectionSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isCollectionSubmitted=!0})}ngOnInit(){this.collection={},this.collection.instrumentTypeId="",this.collection.collectionAccountTypeId="",this.collection.depositSlipNumber="",this.collection.collectionStatusId="",this.collection.amount=this.totalAmountArray[0],this.maxCollectionAmount=this.totalAmountArray[0],this.lookupService.getLookupValueByLookupTypeId(34).subscribe(t=>{this.paymentStatusListData=t.filter(t=>t.isActive)},t=>{}),this.lookupService.getLookupValueByLookupTypeId(33).subscribe(t=>{this.instrumentTypeListData=t.filter(t=>t.isActive)},t=>{});var t={apartmentId:parseInt(this.cookieService.get("apartmentId")),groupId:3};this.accountsService.getGLAccountsByGroupId(t).subscribe(t=>{this.glAccountListData=t}),this.depositSlipLisData=[{id:1},{id:2},{id:3},{id:4}],this.isCollectionSubmitted=!0}ngOnChanges(t){this.collection.amount=this.totalAmountArray.reduce((t,e)=>(this.maxCollectionAmount=t+e,t+e)),this.totalAmountArray.length>1?this.isMultipleEntry=!0:(this.isMultipleEntry=!1,this.collection.amount=this.totalAmountArray[0],this.maxCollectionAmount=this.totalAmountArray[0])}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.c),l.Wb(i.a),l.Wb(o.a),l.Wb(V.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-post-collection"]],inputs:{totalAmountArray:"totalAmountArray",invoiceIdArray:"invoiceIdArray"},outputs:{collectionParams:"collectionParams"},features:[l.Fb],decls:10,vars:4,consts:[[1,"income-post-collection-wrapper","mt-20"],[1,"mb-3"],[1,"card","mb-30"],["name","postIncomeCollectionForm","novalidate","",3,"ngSubmit"],["postIncomeCollectionForm","ngForm"],[1,"card-body"],[4,"ngIf"],[3,"message","isError"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["type","number","OnlyNumber","true","placeholder","Enter text","name","collectionAmount","required","",1,"form-control",3,"customMin","customMax","ngModel","readonly","ngModelChange"],["collectionAmount","ngModel"],[1,"select-box"],["name","InstrumentType","id","InstrumentType","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","depositSlipNo","id","depositSlipNo","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","collectionPostOn","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["collectionPostOn",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","calendar","width","18",1,"icon","date","float-left"],["name","paymentStatusType","id","paymentStatusType","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter text","name","comments",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue",3,"disabled"],[1,"input-error"],[3,"value"]],template:function(t,e){if(1&t){const t=l.cc();l.bc(0,"div",0),l.bc(1,"h5",1),l.Yc(2,"Post Collection"),l.ac(),l.bc(3,"div",2),l.bc(4,"form",3,4),l.nc("ngSubmit",(function(){l.Pc(t);const c=l.Mc(5);return e.submitIncomePostCollectionForm(c)})),l.bc(6,"div",5),l.Wc(7,de,1,0,"app-loader",6),l.Xb(8,"app-alert-message",7),l.Wc(9,ge,50,18,"ng-container",6),l.ac(),l.ac(),l.ac(),l.ac()}2&t&&(l.Hb(7),l.zc("ngIf",!e.isCollectionSubmitted),l.Hb(1),l.zc("message",e.alertMessage)("isError",e.isError),l.Hb(1),l.zc("ngIf",e.isCollectionSubmitted))},directives:[g.z,g.m,g.n,n.l,Ot.a,m.a,g.q,g.d,p.a,g.v,se,le,g.l,g.o,g.w,g.p,g.y,n.k,it.c,it.e,it.b,b.b],styles:[""]}),t})();function ve(t,e){1&t&&l.Xb(0,"app-loader")}function Ie(t,e){if(1&t&&(l.bc(0,"div",24),l.bc(1,"div",25),l.bc(2,"div",6),l.bc(3,"div",26),l.bc(4,"p",27),l.bc(5,"span"),l.Yc(6,"Bill to party: "),l.ac(),l.Yc(7),l.sc(8,"isdefined"),l.ac(),l.bc(9,"p",28),l.bc(10,"span"),l.Yc(11,"Contact Person: "),l.ac(),l.Yc(12),l.sc(13,"isdefined"),l.ac(),l.bc(14,"p",28),l.bc(15,"span"),l.Yc(16,"Block: "),l.ac(),l.Yc(17),l.sc(18,"isdefined"),l.ac(),l.bc(19,"p",28),l.bc(20,"span"),l.Yc(21,"Unit: "),l.ac(),l.Yc(22),l.sc(23,"isdefined"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac()),2&t){const t=l.rc(2);l.Hb(7),l.ad(" ",l.uc(8,4,t.accountDataList,"billToParty"),""),l.Hb(5),l.ad(" ",l.uc(13,7,t.accountDataList,"primayContact"),""),l.Hb(5),l.ad(" ",l.uc(18,10,t.accountDataList,"apartmentBlockNumber"),""),l.Hb(5),l.ad(" ",l.uc(23,13,t.accountDataList,"apartmentBlockUnitNumber"),"")}}const fe=function(){return{exact:!0}};function De(t,e){if(1&t){const t=l.cc();l.bc(0,"tr",20),l.bc(1,"td",29),l.bc(2,"div",15),l.bc(3,"div",16),l.bc(4,"input",30),l.nc("ngModelChange",(function(c){return l.Pc(t),e.$implicit.checked=c}))("ngModelChange",(function(){l.Pc(t);const c=e.$implicit;return l.rc(2).getSelectedInvoice(c)})),l.ac(),l.Xb(5,"label",31),l.ac(),l.ac(),l.ac(),l.bc(6,"td",32),l.bc(7,"a",33),l.Yc(8),l.ac(),l.ac(),l.bc(9,"td",34),l.Yc(10),l.ac(),l.bc(11,"td",34),l.Yc(12),l.ac(),l.bc(13,"td",34),l.Yc(14),l.ac(),l.bc(15,"td",34),l.Yc(16),l.ac(),l.bc(17,"td",34),l.Yc(18),l.ac(),l.ac()}if(2&t){const t=e.$implicit,c=l.rc(2);l.zc("ngClass",t.checked?"selected":""),l.Hb(4),l.Ac("id",t.custInvoiceID),l.Ac("name",t.custInvoiceID),l.zc("ngModel",t.checked),l.Hb(1),l.Ac("for",t.custInvoiceID),l.Hb(2),l.Bc("routerLink","/ams/income/edit-invoice/",t.custInvoiceID,""),l.zc("routerLinkActiveOptions",l.Fc(13,fe)),l.Hb(1),l.Zc(t.custInvoiceID),l.Hb(2),l.Zc(c.getInvoiceDate(t.custInvoiceDate)),l.Hb(2),l.Zc(c.getInvoiceDate(t.dueDate)),l.Hb(2),l.Zc(t.comments),l.Hb(2),l.Zc(t.billAmount),l.Hb(2),l.Zc(t.remainingAmount)}}function Ce(t,e){1&t&&(l.bc(0,"div",35),l.bc(1,"p",36),l.Yc(2,"No Records Found"),l.ac(),l.ac())}function Me(t,e){if(1&t){const t=l.cc();l.Zb(0),l.Wc(1,Ie,24,16,"div",3),l.bc(2,"div",4),l.bc(3,"div",5),l.bc(4,"div",6),l.bc(5,"h5"),l.Yc(6,"Bills to be payed "),l.bc(7,"span",7),l.Yc(8),l.ac(),l.ac(),l.ac(),l.bc(9,"ul",8),l.bc(10,"li",9),l.Xb(11,"i",10),l.bc(12,"input",11),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().invoiceData=e})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(13,"div",12),l.bc(14,"table",13),l.bc(15,"thead"),l.bc(16,"tr"),l.bc(17,"th",14),l.bc(18,"div",15),l.bc(19,"div",16),l.bc(20,"input",17),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().selectAllInvoices=e}))("ngModelChange",(function(){return l.Pc(t),l.rc().getAllInvoices()})),l.ac(),l.Xb(21,"label",18),l.ac(),l.ac(),l.ac(),l.bc(22,"th",19),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("custInvoiceID")})),l.Yc(23,"Bill No "),l.Xb(24,"span",20),l.ac(),l.bc(25,"th",19),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("custInvoiceDate")})),l.Yc(26,"Bill Date"),l.Xb(27,"span",20),l.ac(),l.bc(28,"th",19),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("dueDate")})),l.Yc(29,"Due Date"),l.Xb(30,"span",20),l.ac(),l.bc(31,"th",19),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("comments")})),l.Yc(32,"Comments"),l.Xb(33,"span",20),l.ac(),l.bc(34,"th",19),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("billAmount")})),l.Yc(35,"Bill Amount"),l.Xb(36,"span",20),l.ac(),l.bc(37,"th",19),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("remainingAmount")})),l.Yc(38,"Remaining Amount"),l.Xb(39,"span",20),l.ac(),l.ac(),l.ac(),l.bc(40,"tbody"),l.Wc(41,De,19,14,"tr",21),l.sc(42,"slice"),l.sc(43,"sort"),l.sc(44,"simpleSearch"),l.ac(),l.ac(),l.Wc(45,Ce,3,0,"div",22),l.bc(46,"app-pagination",23),l.nc("outputParams",(function(e){return l.Pc(t),l.rc().getIndexParams(e)})),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.rc();l.Hb(1),l.zc("ngIf",t.isAccountDataLoaded),l.Hb(7),l.Zc(t.totalItems),l.Hb(4),l.zc("ngModel",t.invoiceData),l.Hb(2),l.zc("ngClass",t.isMobileView()),l.Hb(3),l.zc("ngClass",t.isNoItemsAvailable()?"no-link":""),l.Hb(3),l.zc("ngModel",t.selectAllInvoices),l.Hb(1),l.zc("ngClass",t.isNoItemsAvailable()?"disabled":""),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("custInvoiceID")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("custInvoiceDate")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("dueDate")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("comments")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("billAmount")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("remainingAmount")),l.Hb(2),l.zc("ngForOf",l.vc(42,19,l.vc(43,23,l.uc(44,27,t.invoiceDataList,t.invoiceData),t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex)),l.Hb(4),l.zc("ngIf",t.isNoItemsAvailable()),l.Hb(1),l.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}function Ae(t,e){if(1&t){const t=l.cc();l.bc(0,"app-income-post-collection",37),l.nc("collectionParams",(function(e){return l.Pc(t),l.rc().isCollectionMade(e)})),l.ac()}if(2&t){const t=l.rc();l.zc("totalAmountArray",t.totalAmountArray)("invoiceIdArray",t.selectedInvoiceIdArray)}}let ye=(()=>{class t{constructor(t,e,c,n,i,a){this.router=t,this.route=e,this.userService=c,this.accountsService=n,this.sharedService=i,this.cookieService=a,this.isInvoiceDataLoaded=!1,this.invoiceData="",this.ItemStartIndex=0,this.itemLimit=10,this.unitFieldType="unitno",this.unitOrder=!0,this.isMobile=!1,this.isInvoiceSelected=!1,this.selectAllInvoices=!1,this.isAccountDataLoaded=!1}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}getUserName(t){var e=s.filter(this.userDataList,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].firstName+" "+e[0].lastName}getInvoiceDate(t){return O(t).format("DD/MM/YYYY")}getAccountName(t){var e={glaccountId:0};e.glaccountId=null==t||0==t.length?0:t[0].glaccountId;var c=s.filter(this.glAccountListData,(function(t){if(t.glaccountId===e.glaccountId)return t}));return void 0===c||0==c.length?"":c[0].glaccountName}getAllInvoices(){this.totalAmountArray=[],this.selectedInvoiceIdArray=[],this.selectAllInvoices?(s.each(this.invoiceDataList,t=>{t.checked=!0,this.totalAmountArray.push(t.billAmount),this.selectedInvoiceIdArray.push(t.custInvoiceID)}),this.isInvoiceSelected=!0):(s.each(this.invoiceDataList,t=>{t.checked=!1}),this.isInvoiceSelected=!1)}getSelectedInvoice(t){var e=0;this.totalAmountArray=[],this.selectedInvoiceIdArray=[],s.each(this.invoiceDataList,t=>{t.checked&&(e++,this.totalAmountArray.push(t.billAmount),this.selectedInvoiceIdArray.push(t.custInvoiceID))}),e>0?this.isInvoiceSelected=!0:(this.isInvoiceSelected=!1,this.totalAmountArray=[],this.selectedInvoiceIdArray=[]),0==e&&(this.selectAllInvoices=!1,this.totalAmountArray=[],this.selectedInvoiceIdArray=[]),e==this.invoiceDataList.length&&(this.selectAllInvoices=!0)}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isNoItemsAvailable(){return 0==this.totalItems}isCollectionMade(t){t&&(this.totalAmountArray=[],this.selectedInvoiceIdArray=[],this.isInvoiceSelected=!1,this.getCustInvoices())}getCustInvoices(){this.accountsService.GetARBalancewithDueByAptBlkUnitId(this.route.params.value.id).subscribe(t=>{this.invoiceDataList=t,console.log(t),this.totalItems=this.invoiceDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.userDataList=t,this.isInvoiceDataLoaded=!0},t=>{})})}ngOnInit(){this.getCustInvoices(),this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.route.params.value.id),this.isAccountDataLoaded=!0});var t={apartmentId:parseInt(this.cookieService.get("apartmentId")),groupId:3};this.accountsService.getGLAccountsByGroupId(t).subscribe(t=>{this.glAccountListData=t})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.c),l.Wb(i.a),l.Wb(G.a),l.Wb(o.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-pay-invoice"]],decls:4,vars:3,consts:[[1,"income-pay-invoice-wrapper"],[4,"ngIf"],[3,"totalAmountArray","invoiceIdArray","collectionParams",4,"ngIf"],["class","card no-shadow mb-3",4,"ngIf"],[1,"card","clear","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",1,"select",3,"ngClass"],[1,"form-group"],[1,"form-check","float-left"],["type","checkbox","id","selectAllInvoices","name","selectAllInvoices",1,"form-check-input",3,"ngModel","ngModelChange"],["for","selectAllInvoices",1,"form-check-label",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["class","button-wrapper border-top",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"card","no-shadow","mb-3"],[1,"card-header","at-header"],[1,"sub-details"],[1,"d-inline-block","ft"],[1,"d-inline-block","ft","ml-md-4"],[1,"select"],["type","checkbox",1,"form-check-input",3,"id","name","ngModel","ngModelChange"],[1,"form-check-label",3,"for"],[1,"grey"],["href","javascript:void(0)","routerLinkActive","active",1,"t-decor","tc-s-blue",3,"routerLink","routerLinkActiveOptions"],[1,"name"],[1,"button-wrapper","border-top"],[1,"snippet"],[3,"totalAmountArray","invoiceIdArray","collectionParams"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.Wc(1,ve,1,0,"app-loader",1),l.Wc(2,Me,47,30,"ng-container",1),l.Wc(3,Ae,1,2,"app-income-post-collection",2),l.ac()),2&t&&(l.Hb(1),l.zc("ngIf",!e.isInvoiceDataLoaded),l.Hb(1),l.zc("ngIf",e.isInvoiceDataLoaded),l.Hb(1),l.zc("ngIf",e.isInvoiceSelected))},directives:[n.l,m.a,p.b,g.d,g.l,g.o,n.j,g.a,n.k,h.a,i.e,i.d,he],pipes:[n.t,v.a,v.e,v.f],styles:[""]}),t})();var ke=c("MO+k");const Se=["incomePieChart"];function Pe(t,e){if(1&t&&(l.bc(0,"h6",13),l.Yc(1),l.ac()),2&t){const t=l.rc();l.Hb(1),l.ad("",t.totalInvoices," Invoices")}}function Le(t,e){1&t&&(l.bc(0,"h6"),l.Yc(1,"As per Payment Due date"),l.ac())}function xe(t,e){1&t&&(l.bc(0,"h6"),l.Yc(1,"As per Invoice Due date"),l.ac())}function He(t,e){1&t&&l.Xb(0,"app-loader")}function Oe(t,e){if(1&t){const t=l.cc();l.bc(0,"div",14),l.bc(1,"div",15),l.bc(2,"div",16),l.bc(3,"ul",17),l.bc(4,"li",18),l.bc(5,"p"),l.Xb(6,"i-feather",19),l.bc(7,"span"),l.Yc(8,"Filter"),l.ac(),l.ac(),l.ac(),l.bc(9,"li",20),l.nc("click",(function(){return l.Pc(t),l.rc().setDataType("DueAge")})),l.bc(10,"p"),l.Yc(11,"Due Age"),l.ac(),l.ac(),l.bc(12,"li",20),l.nc("click",(function(){return l.Pc(t),l.rc().setDataType("InvoiceAge")})),l.bc(13,"p"),l.Yc(14,"Invoice Age"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac()}if(2&t){const t=l.rc();l.Hb(9),l.zc("ngClass","DueAge"==t.dataType?"active":""),l.Hb(3),l.zc("ngClass","InvoiceAge"==t.dataType?"active":"")}}function Ye(t,e){1&t&&l.Xb(0,"app-loader")}function Fe(t,e){if(1&t&&(l.bc(0,"ul",21),l.bc(1,"li"),l.bc(2,"div",22),l.Xb(3,"span",23),l.Yc(4," 0 - 30 days"),l.ac(),l.bc(5,"div"),l.Yc(6),l.ac(),l.ac(),l.bc(7,"li"),l.bc(8,"div",22),l.Xb(9,"span",24),l.Yc(10," 31 - 60 days"),l.ac(),l.bc(11,"div"),l.Yc(12),l.ac(),l.ac(),l.bc(13,"li"),l.bc(14,"div",22),l.Xb(15,"span",25),l.Yc(16," 61 - 90 days"),l.ac(),l.bc(17,"div"),l.Yc(18),l.ac(),l.ac(),l.bc(19,"li"),l.bc(20,"div",22),l.Xb(21,"span",26),l.Yc(22," Over 90 days"),l.ac(),l.bc(23,"div"),l.Yc(24),l.ac(),l.ac(),l.ac()),2&t){const t=l.rc();l.Hb(6),l.Zc(t.totalAmountItem1),l.Hb(6),l.Zc(t.totalAmountItem3),l.Hb(6),l.Zc(t.totalAmountItem4),l.Hb(6),l.Zc(t.totalAmountItem5)}}function we(t,e){if(1&t&&(l.bc(0,"td",56),l.bc(1,"p",61),l.Yc(2,"Due Age"),l.ac(),l.bc(3,"p",62),l.Yc(4),l.ac(),l.ac()),2&t){const t=l.rc().$implicit;l.Hb(4),l.Zc(t.dueAge)}}function Te(t,e){if(1&t&&(l.bc(0,"td",56),l.bc(1,"p",61),l.Yc(2,"Invoice Age"),l.ac(),l.bc(3,"p",62),l.Yc(4),l.ac(),l.ac()),2&t){const t=l.rc().$implicit;l.Hb(4),l.Zc(t.invoiceAge)}}function ze(t,e){if(1&t&&(l.bc(0,"tr",55),l.bc(1,"td",56),l.bc(2,"div",57),l.bc(3,"div",58),l.Xb(4,"span",59),l.ac(),l.bc(5,"div",60),l.bc(6,"p",61),l.Yc(7,"Invoice ID"),l.ac(),l.bc(8,"p",50),l.Yc(9),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(10,"td",56),l.bc(11,"p",61),l.Yc(12,"Invoice Amount"),l.ac(),l.bc(13,"p",62),l.Yc(14),l.ac(),l.ac(),l.bc(15,"td",56),l.bc(16,"p",61),l.Yc(17,"Collection Amount"),l.ac(),l.bc(18,"p",62),l.Yc(19),l.ac(),l.ac(),l.bc(20,"td",56),l.bc(21,"p",61),l.Yc(22,"Due Date"),l.ac(),l.bc(23,"p",62),l.Yc(24),l.ac(),l.ac(),l.Wc(25,we,5,1,"td",63),l.Wc(26,Te,5,1,"td",63),l.bc(27,"td",56),l.bc(28,"p",61),l.Yc(29,"Balance Amount"),l.ac(),l.bc(30,"p",62),l.Yc(31),l.ac(),l.ac(),l.ac()),2&t){const t=e.$implicit,c=l.rc(3);l.Hb(9),l.Zc(t.custInvoiceId),l.Hb(5),l.Zc(t.invoiceAmt),l.Hb(5),l.Zc(t.collectionAmt),l.Hb(5),l.Zc(c.getDate(t.dueDate)),l.Hb(1),l.zc("ngIf","DueAge"==c.dateType),l.Hb(1),l.zc("ngIf","DueAge"!=c.dateType),l.Hb(5),l.Zc(t.balanceAmt)}}function Be(t,e){if(1&t&&(l.Zb(0),l.bc(1,"tr",47),l.bc(2,"td",48),l.Xb(3,"div",49),l.bc(4,"span"),l.Yc(5),l.ac(),l.ac(),l.bc(6,"td",48),l.bc(7,"div"),l.Yc(8),l.ac(),l.bc(9,"div",50),l.Yc(10),l.ac(),l.ac(),l.bc(11,"td",48),l.bc(12,"div"),l.Yc(13),l.ac(),l.bc(14,"div",50),l.Yc(15),l.ac(),l.ac(),l.bc(16,"td",48),l.bc(17,"div"),l.Yc(18),l.ac(),l.bc(19,"div",50),l.Yc(20),l.ac(),l.ac(),l.bc(21,"td",48),l.bc(22,"div"),l.Yc(23),l.ac(),l.bc(24,"div",50),l.Yc(25),l.ac(),l.ac(),l.bc(26,"td",48),l.bc(27,"div"),l.Yc(28),l.ac(),l.ac(),l.ac(),l.bc(29,"tr",51),l.bc(30,"td",52),l.bc(31,"table",53),l.Wc(32,ze,32,7,"tr",54),l.ac(),l.ac(),l.ac(),l.Yb()),2&t){const t=e.$implicit;l.Hb(1),l.Jb("data-target","#collapse",t.unitID,""),l.Jb("aria-controls","collapse",t.unitID,""),l.Hb(4),l.Zc(t.towerUnit),l.Hb(3),l.Zc(t.bucketAmt1+t.bucketAmt2),l.Hb(2),l.ad("",t.bucketCount1+t.bucketCount2," Invoices"),l.Hb(3),l.Zc(t.bucketAmt3),l.Hb(2),l.ad("",t.bucketCount3," Invoices"),l.Hb(3),l.Zc(t.bucketAmt4),l.Hb(2),l.ad("",t.bucketCount4," Invoices"),l.Hb(3),l.Zc(t.bucketAmt5),l.Hb(2),l.ad("",t.bucketCount5," Invoices"),l.Hb(3),l.Zc(t.bucketAmt6),l.Hb(1),l.Bc("id","collapse",t.unitID,""),l.Jb("aria-labelledby","collapse",t.unitID,""),l.Hb(3),l.zc("ngForOf",t.invoiceDetails)}}function Ne(t,e){if(1&t&&(l.bc(0,"tr",64),l.bc(1,"td",48),l.Yc(2,"Total"),l.ac(),l.bc(3,"td",48),l.Yc(4),l.ac(),l.bc(5,"td",48),l.Yc(6),l.ac(),l.bc(7,"td",48),l.Yc(8),l.ac(),l.bc(9,"td",48),l.Yc(10),l.ac(),l.bc(11,"td",48),l.Yc(12),l.ac(),l.ac()),2&t){const t=l.rc(2);l.Hb(4),l.Zc(t.totalAmountItem1),l.Hb(2),l.Zc(t.totalAmountItem3),l.Hb(2),l.Zc(t.totalAmountItem4),l.Hb(2),l.Zc(t.totalAmountItem5),l.Hb(2),l.Zc(t.totalAmount)}}function Ge(t,e){1&t&&(l.bc(0,"div",65),l.bc(1,"p",66),l.Yc(2,"No Records Found"),l.ac(),l.ac())}function _e(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"div",27),l.bc(2,"div",28),l.bc(3,"div",29),l.bc(4,"h5"),l.Yc(5,"Collection on each Unit "),l.bc(6,"span",30),l.Yc(7),l.ac(),l.ac(),l.bc(8,"p",31),l.Yc(9),l.ac(),l.ac(),l.bc(10,"ul",17),l.bc(11,"li",32),l.Xb(12,"i",33),l.bc(13,"input",34),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().ageingData=e})),l.ac(),l.ac(),l.bc(14,"li",35),l.bc(15,"a",36),l.Xb(16,"i-feather",37),l.bc(17,"span"),l.Yc(18,"Print"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(19,"div",38),l.bc(20,"table",39),l.bc(21,"thead"),l.bc(22,"tr"),l.bc(23,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("towerUnit")})),l.Yc(24,"Tower Unit Name "),l.Xb(25,"span",41),l.ac(),l.bc(26,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("billToParty")})),l.Yc(27,"0 - 30 Days"),l.Xb(28,"span",41),l.ac(),l.bc(29,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("apartmentBlockNumber")})),l.Yc(30,"31 - 60 Days"),l.Xb(31,"span",41),l.ac(),l.bc(32,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("apartmentBlockNumber")})),l.Yc(33,"61 - 90 Days"),l.Xb(34,"span",41),l.ac(),l.bc(35,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("due")})),l.Yc(36,"Over 90 Days"),l.Xb(37,"span",41),l.ac(),l.bc(38,"th",42),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("status")})),l.Yc(39,"Total"),l.Xb(40,"span",41),l.ac(),l.ac(),l.ac(),l.bc(41,"tbody"),l.Wc(42,Be,33,15,"ng-container",43),l.sc(43,"slice"),l.sc(44,"sort"),l.sc(45,"simpleSearch"),l.Wc(46,Ne,13,5,"tr",44),l.ac(),l.ac(),l.Wc(47,Ge,3,0,"div",45),l.bc(48,"app-pagination",46),l.nc("outputParams",(function(e){return l.Pc(t),l.rc().getIndexParams(e)})),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.rc();l.Hb(7),l.Zc(t.totalItems),l.Hb(2),l.ad("Data as of Today ( ",t.asOfDate," )"),l.Hb(4),l.zc("ngModel",t.ageingData),l.Hb(7),l.zc("ngClass",t.isMobileView()),l.Hb(5),l.zc("ngClass",t.getFieldOrderBy("towerUnit")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("billToParty")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("apartmentBlockNumber")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("apartmentBlockNumber")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("due")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("status")),l.Hb(2),l.zc("ngForOf",l.vc(43,17,l.vc(44,21,l.uc(45,25,t.ageingDataDataList,t.ageingData),t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex)),l.Hb(4),l.zc("ngIf",t.isItemsAvailable()),l.Hb(1),l.zc("ngIf",t.isNoItemsAvailable()),l.Hb(1),l.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let Ue=(()=>{class t{constructor(t,e,c){this.accountsService=t,this.sharedService=e,this.cookieService=c,this.isDataLoaded=!1,this.isChartLoaded=!1,this.ageingData="",this.ItemStartIndex=0,this.itemLimit=10,this.unitFieldType="unitno",this.unitOrder=!0,this.isMobile=!1,this.totalInvoices=0,this.dataType="DueAge"}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}getDate(t){return O(t).format("MM-DD-YYYY")}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}setDataType(t){this.dataType=t,this.getAgeingData()}drawChart(){setTimeout(()=>{this.isChartLoaded=!0;var t={labels:["0-30 Days","31-60 Days","61-90 Days","Over 90 Days"],datasets:[{data:[parseInt(this.totalAmountItem1Percent),parseInt(this.totalAmountItem3Percent),parseInt(this.totalAmountItem4Percent),parseInt(this.totalAmountItem5Percent)],backgroundColor:["#5bcc73","#00bcd4","#ff3638","#3f51b5"],hoverBackgroundColor:["#5bcc73","#00bcd4","#ff3638","#3f51b5"]}]};this.chart=new ke.Chart(this.chartRef.nativeElement,{type:"doughnut",data:t,options:{responsive:!0,legend:{display:!1},cutoutPercentage:60,rotation:120,animation:{onComplete:t=>{}}}})},500)}getAgeingData(){this.totalAmountItem1=0,this.totalAmountItem3=0,this.totalAmountItem4=0,this.totalAmountItem5=0,this.totalAmount=0,this.totalAmountItem1Percent=0,this.totalAmountItem3Percent=0,this.totalAmountItem4Percent=0,this.totalAmountItem5Percent=0,this.totalInvoices=0,this.asOfDate=O().format("MM-DD-YYYY");var t={ApartmentID:parseInt(this.cookieService.get("apartmentId")),asOfDate:this.asOfDate,type:this.dataType,AgeFrom1:0,AgeTo1:10,AgeFrom2:11,AgeTo2:30,AgeFrom3:31,AgeTo3:60,AgeFrom4:61,AgeTo4:90,AgeFrom5:91,AgeTo5:null};this.isDataLoaded=!1,this.isChartLoaded=!1,this.accountsService.GetARAgingCollectionDueSummary(t).subscribe(t=>{this.isDataLoaded=!0,this.ageingDataDataList=t,s.each(this.ageingDataDataList,t=>{t.towerUnit=t.apartmentBlockNumber+" "+t.apartmentBlockUnitNumber}),this.totalItems=this.ageingDataDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,s.each(this.ageingDataDataList,(t,e)=>{this.totalInvoices=this.totalInvoices+t.bucketCount1+t.bucketCount2+t.bucketCount3+t.bucketCount4+t.bucketCount5,this.totalAmountItem1=this.totalAmountItem1+t.bucketAmt1+t.bucketAmt2,this.totalAmountItem3=this.totalAmountItem3+t.bucketAmt3,this.totalAmountItem4=this.totalAmountItem4+t.bucketAmt4,this.totalAmountItem5=this.totalAmountItem5+t.bucketAmt5,this.totalAmount=this.totalAmountItem1+this.totalAmountItem3+this.totalAmountItem4+this.totalAmountItem5,this.totalAmountItem1Percent=this.totalAmountItem1/this.totalAmount*100,this.totalAmountItem3Percent=this.totalAmountItem3/this.totalAmount*100,this.totalAmountItem4Percent=this.totalAmountItem4/this.totalAmount*100,this.totalAmountItem5Percent=this.totalAmountItem5/this.totalAmount*100,e==this.ageingDataDataList.length-1&&this.drawChart();var c={ApartmentID:parseInt(this.cookieService.get("apartmentId")),asOfDate:this.asOfDate,unitId:t.unitID};this.accountsService.GetARAgingCollectionDueByUnitId(c).subscribe(e=>{t.invoiceDetails=e},t=>{})})})}ngOnInit(){this.getAgeingData()}ngAfterViewInit(){}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(o.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-tracker-ageing"]],viewQuery:function(t,e){var c;1&t&&l.ed(Se,!0),2&t&&l.Lc(c=l.oc())&&(e.chartRef=c.first)},decls:19,vars:9,consts:[[1,"income-tracker-ageing-wrapper"],[1,"main-title-mini","float-left"],["class","head-label",4,"ngIf"],[1,"clear","mt-3"],[4,"ngIf"],["class","filter-box clear",4,"ngIf"],[1,"row"],[1,"col-sm-12","col-md-12","col-lg-12"],[1,"card","clear","account-chart-card"],[1,"card-body"],[1,"chart-box",3,"ngClass"],["incomePieChart",""],["class","legends-list",4,"ngIf"],[1,"head-label"],[1,"filter-box","clear"],[1,"card"],[1,"card-body","p-0"],[1,"list-inline"],[1,"list-inline-item","title"],["name","filter",1,"icon","mr-2"],[1,"list-inline-item",3,"ngClass","click"],[1,"legends-list"],[1,"title"],[1,"dots","small","low","mr-2"],[1,"dots","small","cyan","mr-2"],[1,"dots","small","m-red","mr-2"],[1,"dots","small","blue","mr-2"],[1,"card","table-card","clear","table-accordion"],[1,"card-header"],[1,"float-left"],[1,"badge","blue"],[1,"d-none","d-md-inline-block","tc-blue"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","trans-white","mt_5"],["name","printer",1,"icon","print"],["id","accordion",1,"card-body","p-0"],[1,"table","table-checker","table-resizable",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],["scope","col",1,"max-50","text-center",3,"click"],[4,"ngFor","ngForOf"],["class","selected",4,"ngIf"],["class","button-wrapper border-top",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],["data-toggle","collapse","aria-expanded","true",1,"collapsed"],[1,"name"],[1,"toggle-icon"],[1,"tc-grey"],["data-parent","#accordion",1,"collapse",3,"id"],["colspan","6",1,"collapse-cell"],[1,"table"],["class","details-wrapper",4,"ngFor","ngForOf"],[1,"details-wrapper"],[1,"details-info"],[1,"media"],[1,"text-center"],[1,"dots","small","low"],[1,"media-body"],[1,"head"],[1,"tc-grey","desp"],["class","details-info",4,"ngIf"],[1,"selected"],[1,"button-wrapper","border-top"],[1,"snippet"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.bc(1,"h4",1),l.Yc(2,"Account Ageing"),l.ac(),l.Wc(3,Pe,2,1,"h6",2),l.bc(4,"div",3),l.Wc(5,Le,2,0,"h6",4),l.Wc(6,xe,2,0,"h6",4),l.ac(),l.Wc(7,He,1,0,"app-loader",4),l.Wc(8,Oe,15,2,"div",5),l.bc(9,"div",6),l.bc(10,"div",7),l.bc(11,"div",8),l.bc(12,"div",9),l.Wc(13,Ye,1,0,"app-loader",4),l.bc(14,"div",10),l.Xb(15,"canvas",null,11),l.ac(),l.Wc(17,Fe,25,4,"ul",12),l.ac(),l.ac(),l.ac(),l.ac(),l.Wc(18,_e,49,28,"ng-container",4),l.ac()),2&t&&(l.Hb(3),l.zc("ngIf",e.isDataLoaded),l.Hb(2),l.zc("ngIf","DueAge"==e.dataType),l.Hb(1),l.zc("ngIf","InvoiceAge"==e.dataType),l.Hb(1),l.zc("ngIf",!e.isDataLoaded),l.Hb(1),l.zc("ngIf",e.isDataLoaded),l.Hb(5),l.zc("ngIf",!e.isChartLoaded),l.Hb(1),l.zc("ngClass",e.isChartLoaded?"":"hide-chart"),l.Hb(3),l.zc("ngIf",e.isChartLoaded),l.Hb(1),l.zc("ngIf",e.isDataLoaded))},directives:[n.l,n.j,m.a,b.b,p.b,g.d,g.l,g.o,p.d,n.k,h.a],pipes:[n.t,v.a,v.e],styles:[".income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]{margin:30px 0 0;padding:0;border:0}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-right:1px solid #eaeaea;margin:0;padding:10px 20px;cursor:pointer}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:400;letter-spacing:.3px;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;font-size:1.4rem;color:#585858}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li.title[_ngcontent-%COMP%]{cursor:auto}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#8391a1!important}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%], .income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.title):hover{background-color:#5cd694}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.title):hover   p[_ngcontent-%COMP%]{color:#fff}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]{margin:30px 0}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .chart-box[_ngcontent-%COMP%]{margin:10px 0;height:auto;width:300px;float:left}@media (min-width:576px) and (max-width:767px){.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .chart-box[_ngcontent-%COMP%]{width:235px}}@media (max-width:576px){.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .chart-box[_ngcontent-%COMP%]{float:none;width:auto}}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .chart-box[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:auto!important;height:100%!important}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .chart-box.hide-chart[_ngcontent-%COMP%]{overflow:hidden;visibility:hidden}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]{margin:10px 0 0!important;text-align:center}@media (max-width:576px){.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]{text-align:left;display:inline-block;transform:translateX(-45%)!important;position:relative;left:50%}}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin:0!important;padding:8px 0;overflow:auto;width:250px}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:500;letter-spacing:.2px;font-size:1.4rem;color:#8391a1}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.title[_ngcontent-%COMP%]{color:#373946;float:left;min-width:180px!important}@media (min-width:576px){.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.title[_ngcontent-%COMP%]{min-width:auto!important}}"]}),t})();function We(t,e){1&t&&(l.bc(0,"span"),l.Yc(1,"Add Credit Note"),l.ac())}function Ee(t,e){1&t&&(l.bc(0,"span"),l.Yc(1,"Edit Credit Note"),l.ac())}function Ze(t,e){if(1&t&&(l.bc(0,"div",9),l.bc(1,"div",10),l.bc(2,"div",11),l.bc(3,"div",12),l.bc(4,"p",13),l.bc(5,"span"),l.Yc(6,"Bill to party: "),l.ac(),l.Yc(7),l.sc(8,"isdefined"),l.ac(),l.bc(9,"p",14),l.bc(10,"span"),l.Yc(11,"Contact Person: "),l.ac(),l.Yc(12),l.sc(13,"isdefined"),l.ac(),l.bc(14,"p",14),l.bc(15,"span"),l.Yc(16,"Block: "),l.ac(),l.Yc(17),l.sc(18,"isdefined"),l.ac(),l.bc(19,"p",14),l.bc(20,"span"),l.Yc(21,"Unit: "),l.ac(),l.Yc(22),l.sc(23,"isdefined"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac()),2&t){const t=l.rc();l.Hb(7),l.ad(" ",l.uc(8,4,t.accountDataList,"billToParty"),""),l.Hb(5),l.ad(" ",l.uc(13,7,t.accountDataList,"primayContact"),""),l.Hb(5),l.ad(" ",l.uc(18,10,t.accountDataList,"apartmentBlockNumber"),""),l.Hb(5),l.ad(" ",l.uc(23,13,t.accountDataList,"apartmentBlockUnitNumber"),"")}}function Xe(t,e){1&t&&l.Xb(0,"app-loader")}function Re(t,e){if(1&t&&(l.bc(0,"option",37),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.apartmentBlockId),l.Hb(1),l.Zc(t.apartmentBlockNumber)}}function Ve(t,e){if(1&t&&(l.bc(0,"option",37),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.apartmentBlockUnitId),l.Hb(1),l.Zc(t.apartmentBlockUnitNumber)}}function $e(t,e){if(1&t){const t=l.cc();l.bc(0,"div",16),l.bc(1,"div",17),l.bc(2,"label"),l.Yc(3,"Select Unit"),l.ac(),l.bc(4,"select",38),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc(2).apartmentBlockUnitId=e}))("ngModelChange",(function(){l.Pc(t);const e=l.rc(2);return e.showInvoiceData(e.apartmentBlockUnitId)})),l.bc(5,"option",19),l.Yc(6,"Select"),l.ac(),l.Wc(7,Ve,2,2,"option",20),l.ac(),l.ac(),l.ac()}if(2&t){const t=l.rc(2);l.Hb(4),l.zc("ngModel",t.apartmentBlockUnitId),l.Hb(3),l.zc("ngForOf",t.unitListData)}}function qe(t,e){if(1&t&&(l.bc(0,"option",37),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.custInvoiceId),l.Hb(1),l.Zc(t.custInvoiceId)}}function je(t,e){if(1&t){const t=l.cc();l.bc(0,"div",16),l.bc(1,"div",17),l.bc(2,"label"),l.Yc(3,"Select Bill No"),l.ac(),l.bc(4,"select",39),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc(2).credit.invoiceId=e}))("ngModelChange",(function(){l.Pc(t);const e=l.rc(2);return e.getInvoice(e.credit.invoiceId)})),l.bc(5,"option",19),l.Yc(6,"Select"),l.ac(),l.Wc(7,qe,2,2,"option",20),l.ac(),l.ac(),l.ac()}if(2&t){const t=l.rc(2);l.Hb(4),l.zc("ngModel",t.credit.invoiceId),l.Hb(3),l.zc("ngForOf",t.invoiceData)}}function Qe(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"div",15),l.bc(2,"div",16),l.bc(3,"div",17),l.bc(4,"label"),l.Yc(5,"Select Block"),l.ac(),l.bc(6,"select",18),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().apartmentBlockId=e}))("ngModelChange",(function(){l.Pc(t);const e=l.rc();return e.showUnitData(e.apartmentBlockId)})),l.bc(7,"option",19),l.Yc(8,"Select"),l.ac(),l.Wc(9,Re,2,2,"option",20),l.ac(),l.ac(),l.ac(),l.Wc(10,$e,8,2,"div",21),l.Wc(11,je,8,2,"div",21),l.bc(12,"div",16),l.bc(13,"div",22),l.bc(14,"label"),l.Yc(15,"Posted On*"),l.ac(),l.bc(16,"input",23),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().credit.insertedOn=e})),l.ac(),l.Xb(17,"owl-date-time",24,25),l.bc(19,"div",26),l.Xb(20,"i-feather",27),l.ac(),l.ac(),l.ac(),l.bc(21,"div",16),l.bc(22,"div",22),l.bc(23,"label"),l.Yc(24,"Amount*"),l.ac(),l.bc(25,"input",28),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().credit.amount=e})),l.ac(),l.ac(),l.ac(),l.bc(26,"div",16),l.bc(27,"div",22),l.bc(28,"label"),l.Yc(29,"Comments"),l.ac(),l.bc(30,"input",29),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().credit.comment=e})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(31,"div",15),l.bc(32,"div",30),l.bc(33,"div",22),l.bc(34,"label"),l.Yc(35,"Email*"),l.ac(),l.bc(36,"label",31),l.bc(37,"input",32),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().credit.isEmailSent=e})),l.ac(),l.bc(38,"span",33),l.nc("click",(function(){return l.Pc(t),l.rc().setActive()})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(39,"div",30),l.bc(40,"div",22),l.bc(41,"label"),l.Yc(42,"SMS*"),l.ac(),l.bc(43,"label",31),l.bc(44,"input",34),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().credit.isSmssent=e})),l.ac(),l.bc(45,"span",33),l.nc("click",(function(){return l.Pc(t),l.rc().setActive()})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(46,"div",35),l.bc(47,"button",36),l.Yc(48,"Submit"),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.Mc(18),e=l.rc(),c=l.Mc(7);l.Hb(6),l.zc("ngModel",e.apartmentBlockId),l.Hb(3),l.zc("ngForOf",e.blockData),l.Hb(1),l.zc("ngIf",e.isBlockSelected),l.Hb(1),l.zc("ngIf",e.isUnitSelected),l.Hb(5),l.zc("owlDateTime",t)("owlDateTimeTrigger",t)("ngModel",e.credit.insertedOn),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",t),l.Hb(6),l.zc("ngModel",e.credit.amount),l.Hb(5),l.zc("ngModel",e.credit.comment),l.Hb(7),l.zc("ngModel",e.credit.isEmailSent),l.Hb(7),l.zc("ngModel",e.credit.isSmssent),l.Hb(3),l.zc("disabled",c.invalid)}}let Je=(()=>{class t{constructor(t,e,c,n,i,a,o,r){this.router=t,this.route=e,this.userService=c,this.apartmentService=n,this.accountsService=i,this.sharedService=a,this.lookupService=o,this.cookieService=r,this.isEditCredit=!1,this.isCreditSubmitted=!0,this.isBlockSelected=!1,this.isUnitSelected=!1,this.isAmountAdded=!1,this.isError=!1,this.alertMessage="",this.isAccountDataLoaded=!1}showUnitData(t){this.apartmentService.getApartmentBlockUnitByBlockId(t).subscribe(t=>{this.unitListData=t,this.apartmentBlockUnitId="",this.isBlockSelected=!0,this.isUnitSelected=!1,this.isAmountAdded=!1})}showInvoiceData(t){var e={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:t};this.accountsService.getCustInvoicesByApartmentBlockUnitId(e).subscribe(t=>{this.invoiceData=t,this.credit.invoiceId="",this.isUnitSelected=!0})}getInvoice(t){var e=this.invoiceData.filter(e=>e.custInvoiceId==t),c={apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:t};this.accountsService.getCollectionInvoiceByInvoiceId(c).subscribe(t=>{this.credit.collectionId=void 0===t||0==t.length?null==this.route.params.value.type?null:0:t[0].collectionId}),this.credit.amount=e[0].custInvoiceAmount,this.isAmountAdded=!0}toggleEmail(){this.credit.isEmailSent=!0}toggleSms(){this.credit.isSmssent=!this.credit.isSmssent}setActive(){return""}getUnitData(t){this.apartmentService.getApartmentBlockUnitById(t).subscribe(t=>{this.unitListData=t,this.apartmentBlockId=""+t[0].apartmentBlockId,this.apartmentService.getApartmentBlockUnitByBlockId(t[0].apartmentBlockId).subscribe(t=>{this.unitListData=t})})}getInvoiceData(t){}submitAddCreditNoteForm(t){if(this.isEditCredit){let t={creditNoteId:this.credit.creditNoteId,apartmentId:parseInt(this.cookieService.get("apartmentId")),amount:parseInt(this.credit.amount),collectionId:null,invoiceId:parseInt(this.credit.invoiceId),isEmailSent:this.credit.isEmailSent,isSmssent:this.credit.isSmssent,comment:this.credit.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:this.credit.insertedOn,updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:this.credit.insertedOn,transReference1:"string",transReference2:"string",glAcctIndicator:"Income",apartmentBlockUnitId:parseInt(this.apartmentBlockUnitId)};this.accountsService.updateCreditNote(t).subscribe(t=>{t.message?(this.isCreditSubmitted=!0,this.sharedService.setAlertMessage("Credit Note updated successfully"),this.router.navigate(["ams/income/creditnote"])):(this.isCreditSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isCreditSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}else{let t={apartmentId:parseInt(this.cookieService.get("apartmentId")),amount:parseInt(this.credit.amount),collectionId:0,invoiceId:parseInt(this.credit.invoiceId),isEmailSent:this.credit.isEmailSent,isSmssent:this.credit.isSmssent,comment:this.credit.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:this.credit.insertedOn,updatedBy:0,updatedOn:this.credit.insertedOn,transReference1:"string",transReference2:"string",glAcctIndicator:"Income",apartmentBlockUnitId:parseInt(this.route.params.value.id)};this.accountsService.addCreditNote(t).subscribe(t=>{t.message?(this.isCreditSubmitted=!0,this.sharedService.setAlertMessage("Credit Note added successfully"),this.router.navigate(["ams/income/creditnote"])):(this.isCreditSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isCreditSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}}ngOnInit(){if(this.credit={},this.credit.invoiceId="",this.credit.comment="",this.credit.isEmailSent=!1,this.credit.isSmssent=!1,this.apartmentBlockId="",this.apartmentBlockUnitId="",null!=this.route.params.value.id&&null==this.route.params.value.type){var t={apartmentId:parseInt(this.cookieService.get("apartmentId")),creditNoteId:this.route.params.value.id};this.accountsService.getCreditNoteById(t).subscribe(t=>{this.credit=t[0],"string"==this.credit.comment&&(this.credit.comment=""),this.apartmentBlockUnitId=""+this.credit.apartmentBlockUnitId,this.getUnitData(this.credit.apartmentBlockUnitId);var e={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:this.credit.apartmentBlockUnitId};this.accountsService.getCustInvoicesByApartmentBlockUnitId(e).subscribe(t=>{this.invoiceData=t}),this.isEditCredit=!0,this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.credit.apartmentBlockUnitId),this.isAccountDataLoaded=!0})},t=>{})}else{this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.route.params.value.id),this.isAccountDataLoaded=!0}),this.apartmentBlockUnitId=""+this.route.params.value.id,this.getUnitData(this.route.params.value.id);var e={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:this.apartmentBlockUnitId};this.accountsService.getCustInvoicesByApartmentBlockUnitId(e).subscribe(t=>{this.invoiceData=t,this.isUnitSelected=!0}),this.isBlockSelected=!0}this.apartmentService.getApartmentBlockByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.blockData=t})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.c),l.Wb(i.a),l.Wb(G.a),l.Wb(a.a),l.Wb(o.a),l.Wb(r.a),l.Wb(V.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-add-credit"]],decls:12,vars:7,consts:[[1,"income-add-credit-wrapper"],[1,"mb-3"],[4,"ngIf"],["class","card no-shadow mb-3",4,"ngIf"],[1,"card","clear"],["name","addCreditNoteForm","novalidate","",3,"ngSubmit"],["addCreditNoteForm","ngForm"],[1,"card-body"],[3,"message","isError"],[1,"card","no-shadow","mb-3"],[1,"card-header","at-header"],[1,"float-left"],[1,"sub-details"],[1,"d-inline-block","ft"],[1,"d-inline-block","ft","ml-md-4"],[1,"row"],[1,"col-sm-4"],[1,"select-box"],["name","blockNo","id","blockNo","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["class","col-sm-4",4,"ngIf"],[1,"input-box"],["name","invoiceDueDate","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["postedOn",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","calendar","width","18",1,"icon","date","float-left"],["type","number","OnlyNumber","true","placeholder","Enter text","name","creditAmount","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter text","name","comment","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-2"],[1,"switch"],["type","checkbox","name","isEmailSent",3,"ngModel","ngModelChange"],[1,"slider","round",3,"click"],["type","checkbox","name","isSmssent",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue",3,"disabled"],[3,"value"],["name","unitNo","id","unitNo","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","invoiceId","id","invoiceId","required","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){const t=l.cc();l.bc(0,"div",0),l.bc(1,"h5",1),l.Wc(2,We,2,0,"span",2),l.Wc(3,Ee,2,0,"span",2),l.ac(),l.Wc(4,Ze,24,16,"div",3),l.bc(5,"div",4),l.bc(6,"form",5,6),l.nc("ngSubmit",(function(){l.Pc(t);const c=l.Mc(7);return e.submitAddCreditNoteForm(c)})),l.bc(8,"div",7),l.Wc(9,Xe,1,0,"app-loader",2),l.Xb(10,"app-alert-message",8),l.Wc(11,Qe,49,14,"ng-container",2),l.ac(),l.ac(),l.ac(),l.ac()}2&t&&(l.Hb(2),l.zc("ngIf",!e.isEditCredit),l.Hb(1),l.zc("ngIf",e.isEditCredit),l.Hb(1),l.zc("ngIf",e.isAccountDataLoaded),l.Hb(5),l.zc("ngIf",!e.isCreditSubmitted),l.Hb(1),l.zc("message",e.alertMessage)("isError",e.isError),l.Hb(1),l.zc("ngIf",e.isCreditSubmitted))},directives:[n.l,g.z,g.m,g.n,Ot.a,m.a,g.w,g.v,g.l,g.o,g.p,g.y,n.k,it.c,g.d,it.e,it.b,b.b,g.q,p.a,g.a],pipes:[v.f],styles:[""]}),t})();const Ke=function(){return{exact:!0}};function tc(t,e){if(1&t&&(l.Zb(0),l.bc(1,"a",6),l.Yc(2),l.ac(),l.Yb()),2&t){const t=e.$implicit;l.Hb(1),l.Bc("routerLink","/ams/income/reports/",t.type,""),l.zc("routerLinkActiveOptions",l.Fc(3,Ke)),l.Hb(1),l.Zc(t.name)}}let ec=(()=>{class t{constructor(t,e){this.sharedService=t,this.cookieService=e}ngOnInit(){this.reportsDataList=[{name:"Customer Journal Report",type:"customer"},{name:"Vendor Journal Entires",type:"vendor"}]}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-tracker-reports"]],decls:7,vars:1,consts:[[1,"gl-other-reports-wrapper"],[1,"main-title-mini"],[1,"card"],[1,"card-body","p-0"],[1,"simple-lists"],[4,"ngFor","ngForOf"],["href","javascript:void(0)","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.bc(1,"h4",1),l.Yc(2,"Select the reports"),l.ac(),l.bc(3,"div",2),l.bc(4,"div",3),l.bc(5,"div",4),l.Wc(6,tc,3,4,"ng-container",5),l.ac(),l.ac(),l.ac(),l.ac()),2&t&&(l.Hb(6),l.zc("ngForOf",e.reportsDataList))},directives:[n.k,i.e,i.d],styles:[""]}),t})();function cc(t,e){1&t&&l.Xb(0,"app-loader")}function nc(t,e){if(1&t&&(l.bc(0,"option",22),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.lookupValueId),l.Hb(1),l.Zc(t.lookupValueName)}}function ic(t,e){if(1&t&&(l.bc(0,"option",22),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.glaccountId),l.Hb(1),l.Zc(t.glaccountName)}}function ac(t,e){if(1&t&&(l.bc(0,"option",22),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.lookupValueId),l.Hb(1),l.Zc(t.lookupValueName)}}function oc(t,e){if(1&t&&(l.bc(0,"option",22),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.lookupValueId),l.Hb(1),l.Zc(t.lookupValueName)}}function rc(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"form",8,9),l.nc("ngSubmit",(function(){l.Pc(t);const e=l.Mc(2);return l.rc().submitIncomeSettingsForm(e)})),l.bc(3,"div",10),l.bc(4,"div",11),l.bc(5,"div",12),l.bc(6,"label"),l.Yc(7,"Currency Type*"),l.ac(),l.bc(8,"select",13),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().setting.currencyId=e})),l.bc(9,"option",14),l.Yc(10,"Select"),l.ac(),l.Wc(11,nc,2,2,"option",15),l.ac(),l.ac(),l.ac(),l.bc(12,"div",11),l.bc(13,"div",12),l.bc(14,"label"),l.Yc(15,"Customer Reconciliation Account*"),l.ac(),l.bc(16,"select",16),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().setting.glAccountId=e})),l.bc(17,"option",14),l.Yc(18,"Select"),l.ac(),l.Wc(19,ic,2,2,"option",15),l.ac(),l.ac(),l.ac(),l.bc(20,"div",11),l.bc(21,"div",12),l.bc(22,"label"),l.Yc(23,"Customer Income Payment Term*"),l.ac(),l.bc(24,"select",17),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().setting.paymentTerm=e})),l.bc(25,"option",14),l.Yc(26,"Select"),l.ac(),l.Wc(27,ac,2,2,"option",15),l.ac(),l.ac(),l.ac(),l.bc(28,"div",11),l.bc(29,"div",12),l.bc(30,"label"),l.Yc(31,"Customer Invoice VAT %*"),l.ac(),l.bc(32,"select",17),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().setting.vatPercentage=e})),l.bc(33,"option",14),l.Yc(34,"Select"),l.ac(),l.Wc(35,oc,2,2,"option",15),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(36,"div",10),l.bc(37,"div",18),l.bc(38,"ul",19),l.bc(39,"li",20),l.bc(40,"button",21),l.Yc(41,"Save"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.Mc(2),e=l.rc();l.Hb(8),l.zc("ngModel",e.setting.currencyId),l.Hb(3),l.zc("ngForOf",e.currencyTypeDataList),l.Hb(5),l.zc("ngModel",e.setting.glAccountId),l.Hb(3),l.zc("ngForOf",e.glAccountListData),l.Hb(5),l.zc("ngModel",e.setting.paymentTerm),l.Hb(3),l.zc("ngForOf",e.paymentInvoiceDataList),l.Hb(5),l.zc("ngModel",e.setting.vatPercentage),l.Hb(3),l.zc("ngForOf",e.vatPecentageDataList),l.Hb(5),l.zc("disabled",t.invalid)}}function sc(t,e){1&t&&l.Xb(0,"app-loader")}function lc(t,e){if(1&t&&(l.bc(0,"option",22),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.lookupValueId),l.Hb(1),l.Zc(t.lookupValueName)}}function dc(t,e){if(1&t&&(l.bc(0,"option",22),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.lookupValueId),l.Hb(1),l.Zc(t.lookupValueName)}}function uc(t,e){if(1&t&&(l.bc(0,"option",22),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.lookupValueId),l.Hb(1),l.Zc(t.lookupValueName)}}function mc(t,e){if(1&t&&(l.bc(0,"option",22),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.lookupValueId),l.Hb(1),l.Zc(t.lookupValueName)}}function bc(t,e){if(1&t){const t=l.cc();l.Zb(0),l.bc(1,"form",23,24),l.nc("ngSubmit",(function(){l.Pc(t);const e=l.Mc(2);return l.rc().submitIncomePenaltySettingsForm(e)})),l.bc(3,"div",10),l.bc(4,"div",11),l.bc(5,"div",12),l.bc(6,"label"),l.Yc(7,"Type*"),l.ac(),l.bc(8,"select",25),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().penalty.penaltyTypeId=e})),l.bc(9,"option",14),l.Yc(10,"Select"),l.ac(),l.Wc(11,lc,2,2,"option",15),l.ac(),l.ac(),l.ac(),l.bc(12,"div",11),l.bc(13,"div",12),l.bc(14,"label"),l.Yc(15,"Flat rate for Late payment*"),l.ac(),l.bc(16,"select",26),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().penalty.latePaymentId=e})),l.bc(17,"option",14),l.Yc(18,"Select"),l.ac(),l.Wc(19,dc,2,2,"option",15),l.ac(),l.ac(),l.ac(),l.bc(20,"div",11),l.bc(21,"div",12),l.bc(22,"label"),l.Yc(23,"% Penalty*"),l.ac(),l.bc(24,"select",27),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().penalty.penaltyPercentage=e})),l.bc(25,"option",14),l.Yc(26,"Select"),l.ac(),l.Wc(27,uc,2,2,"option",15),l.ac(),l.ac(),l.ac(),l.bc(28,"div",11),l.bc(29,"div",12),l.bc(30,"label"),l.Yc(31,"Grace Period for Invoice*"),l.ac(),l.bc(32,"select",28),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().penalty.gracePeriodInvoiceId=e})),l.bc(33,"option",14),l.Yc(34,"Select"),l.ac(),l.Wc(35,mc,2,2,"option",15),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(36,"div",10),l.bc(37,"div",18),l.bc(38,"ul",19),l.bc(39,"li",20),l.bc(40,"button",21),l.Yc(41,"Save"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.Yb()}if(2&t){const t=l.Mc(2),e=l.rc();l.Hb(8),l.zc("ngModel",e.penalty.penaltyTypeId),l.Hb(3),l.zc("ngForOf",e.penaltyDataList),l.Hb(5),l.zc("ngModel",e.penalty.latePaymentId),l.Hb(3),l.zc("ngForOf",e.lastPaymentDataList),l.Hb(5),l.zc("ngModel",e.penalty.penaltyPercentage),l.Hb(3),l.zc("ngForOf",e.penaltyPercentageDataList),l.Hb(5),l.zc("ngModel",e.penalty.gracePeriodInvoiceId),l.Hb(3),l.zc("ngForOf",e.gracePeriodInvoiceDataList),l.Hb(5),l.zc("disabled",t.invalid)}}let pc=(()=>{class t{constructor(t,e,c,n){this.accountsService=t,this.lookupService=e,this.sharedService=c,this.cookieService=n,this.isSettingsDataLoaded=!0,this.isPenaltyDataLoaded=!0,this.isError=!1,this.errorMessage=!1,this.glAccountIndicator="Income"}submitIncomeSettingsForm(t){}submitIncomePenalitySettingsForm(t){}ngOnInit(){this.setting={},this.setting.currencyId="",this.setting.glAccountId="",this.setting.paymentTerm="",this.setting.vatPercentage="",this.penalty={},this.penalty.penaltyTypeId="",this.penalty.latePaymentId="",this.penalty.penaltyPercentage="",this.penalty.gracePeriodInvoiceId="",this.lookupService.getLookupValueByLookupTypeId(88).subscribe(t=>{this.currencyTypeDataList=t.filter(t=>t.isActive)}),this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountListData=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),this.lookupService.getLookupValueByLookupTypeId(74).subscribe(t=>{this.paymentInvoiceDataList=t.filter(t=>t.isActive)}),this.lookupService.getLookupValueByLookupTypeId(77).subscribe(t=>{this.vatPecentageDataList=t.filter(t=>t.isActive)}),this.lookupService.getLookupValueByLookupTypeId(80).subscribe(t=>{this.penaltyDataList=t.filter(t=>t.isActive)}),this.lookupService.getLookupValueByLookupTypeId(81).subscribe(t=>{this.lastPaymentDataList=t.filter(t=>t.isActive)}),this.lookupService.getLookupValueByLookupTypeId(82).subscribe(t=>{this.penaltyPercentageDataList=t.filter(t=>t.isActive)}),this.lookupService.getLookupValueByLookupTypeId(83).subscribe(t=>{this.gracePeriodInvoiceDataList=t.filter(t=>t.isActive)})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(o.a),l.Wb(V.a),l.Wb(r.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-tracker-setup"]],decls:19,vars:8,consts:[[1,"income-tracker-setup-wrapper"],[1,"card"],[1,"card-header"],[1,"float-left"],[1,"card-body"],[3,"message","isAlert"],[4,"ngIf"],[1,"card","mt-30"],["name","incomeSettingsForm","novalidate","",3,"ngSubmit"],["incomeSettingsForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"select-box"],["name","currencyType","id","currencyType","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","glAccount","id","glAccount","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","paymentTerm","id","paymentTerm","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"list-inline","float-right","mt-4"],[1,"list-inline-item"],[1,"btn","blue","mr-2",3,"disabled"],[3,"value"],["name","incomePenaltySettingsForm","novalidate","",3,"ngSubmit"],["incomePenaltySettingsForm","ngForm"],["name","penaltyType","id","penaltyType","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","latePayment","id","latePayment","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","penaltyPercentage","id","penaltyPercentage","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","gracePeriodInvoice","id","gracePeriodInvoice","required","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.bc(1,"div",1),l.bc(2,"div",2),l.bc(3,"div",3),l.bc(4,"h5"),l.Yc(5,"Settings"),l.ac(),l.ac(),l.ac(),l.bc(6,"div",4),l.Xb(7,"app-alert-message",5),l.Wc(8,cc,1,0,"app-loader",6),l.Wc(9,rc,42,9,"ng-container",6),l.ac(),l.ac(),l.bc(10,"div",7),l.bc(11,"div",2),l.bc(12,"div",3),l.bc(13,"h5"),l.Yc(14,"Customer Penalty"),l.ac(),l.ac(),l.ac(),l.bc(15,"div",4),l.Xb(16,"app-alert-message",5),l.Wc(17,sc,1,0,"app-loader",6),l.Wc(18,bc,42,9,"ng-container",6),l.ac(),l.ac(),l.ac()),2&t&&(l.Hb(7),l.zc("message",e.errorMessage)("isAlert",e.isError),l.Hb(1),l.zc("ngIf",!e.isSettingsDataLoaded),l.Hb(1),l.zc("ngIf",e.isSettingsDataLoaded),l.Hb(7),l.zc("message",e.errorMessage)("isAlert",e.isError),l.Hb(1),l.zc("ngIf",!e.isPenaltyDataLoaded),l.Hb(1),l.zc("ngIf",e.isPenaltyDataLoaded))},directives:[Ot.a,n.l,m.a,g.z,g.m,g.n,g.w,g.v,g.l,g.o,g.p,g.y,n.k],styles:[""]}),t})();function gc(t,e){if(1&t&&(l.bc(0,"option",30),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.apartmentBlockId),l.Hb(1),l.Zc(t.apartmentBlockNumber)}}function hc(t,e){if(1&t&&(l.bc(0,"option",30),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.apartmentBlockUnitId),l.Hb(1),l.Zc(t.apartmentBlockUnitNumber)}}function vc(t,e){if(1&t&&(l.bc(0,"option",30),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.glaccountId),l.Hb(1),l.bd("",t.glaccountName," ",t.glaccountId,"")}}function Ic(t,e){1&t&&l.Xb(0,"app-loader")}function fc(t,e){if(1&t&&(l.bc(0,"p"),l.Yc(1,"Transactions From "),l.bc(2,"span",46),l.Yc(3),l.ac(),l.Yc(4," To "),l.bc(5,"span",46),l.Yc(6),l.ac(),l.ac()),2&t){const t=l.rc(2);l.Hb(3),l.Zc(t.getDate(t.report.documentDateFrom)),l.Hb(3),l.Zc(t.getDate(t.report.documentDateTo))}}function Dc(t,e){if(1&t&&(l.bc(0,"tr"),l.bc(1,"td",47),l.Yc(2),l.ac(),l.bc(3,"td",48),l.Yc(4),l.ac(),l.bc(5,"td",48),l.Yc(6),l.ac(),l.bc(7,"td",48),l.Yc(8),l.ac(),l.bc(9,"td",48),l.Yc(10),l.ac(),l.bc(11,"td",48),l.Yc(12),l.ac(),l.bc(13,"td",48),l.Yc(14),l.ac(),l.bc(15,"td",48),l.Yc(16),l.ac(),l.bc(17,"td",48),l.Yc(18),l.ac(),l.bc(19,"td",48),l.Yc(20),l.ac(),l.bc(21,"td",48),l.Yc(22),l.ac(),l.bc(23,"td",48),l.Yc(24),l.ac(),l.ac()),2&t){const t=e.$implicit,c=l.rc(2);l.Hb(2),l.Zc(t.custInvoiceId),l.Hb(2),l.Zc(t.apartmentBlock),l.Hb(2),l.Zc(t.apartmentBlockUnitNumber),l.Hb(2),l.Zc(t.creditAmount),l.Hb(2),l.Zc(t.debitAmount),l.Hb(2),l.Zc(t.glaccountname),l.Hb(2),l.Zc(c.getDate(t.documentDate)),l.Hb(2),l.Zc(t.enteredByName),l.Hb(2),l.Zc(c.getTimeFormat(t.entryDateTime)),l.Hb(2),l.Zc(c.getDate(t.postingDate)),l.Hb(2),l.Zc(c.getDate(t.clearingDate)),l.Hb(2),l.Zc(t.clearingDocumentNumber)}}function Cc(t,e){1&t&&(l.bc(0,"div",49),l.bc(1,"p",50),l.Yc(2,"No Records Found"),l.ac(),l.ac())}function Mc(t,e){if(1&t){const t=l.cc();l.bc(0,"div",31),l.bc(1,"div",32),l.bc(2,"div",33),l.bc(3,"h5"),l.Yc(4,"Reports "),l.bc(5,"span",34),l.Yc(6),l.ac(),l.ac(),l.Wc(7,fc,7,2,"p",28),l.ac(),l.bc(8,"ul",35),l.bc(9,"li",36),l.Xb(10,"i",37),l.bc(11,"input",38),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().reportsData=e})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(12,"div",39),l.bc(13,"table",40),l.bc(14,"thead"),l.bc(15,"tr"),l.bc(16,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("custInvoiceId")})),l.Yc(17,"Customer Invoice Id"),l.Xb(18,"span",42),l.ac(),l.bc(19,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("apartmentBlock")})),l.Yc(20,"Block No"),l.Xb(21,"span",42),l.ac(),l.bc(22,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("apartmentBlockUnitNumber")})),l.Yc(23,"Unit No"),l.Xb(24,"span",42),l.ac(),l.bc(25,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("creditAmount")})),l.Yc(26,"Credit Amount"),l.Xb(27,"span",42),l.ac(),l.bc(28,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("debitAmount")})),l.Yc(29,"Debit Amount"),l.Xb(30,"span",42),l.ac(),l.bc(31,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("glaccountname")})),l.Yc(32,"Gl Account Name"),l.Xb(33,"span",42),l.ac(),l.bc(34,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("documentDate")})),l.Yc(35,"Document Date"),l.Xb(36,"span",42),l.ac(),l.bc(37,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("enteredByName")})),l.Yc(38,"Entered By"),l.Xb(39,"span",42),l.ac(),l.bc(40,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("entryDateTime")})),l.Yc(41,"Entry Date & Time"),l.Xb(42,"span",42),l.ac(),l.bc(43,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("postingDate")})),l.Yc(44,"Posting Date"),l.Xb(45,"span",42),l.ac(),l.bc(46,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("clearingDate")})),l.Yc(47,"Clearing Date"),l.Xb(48,"span",42),l.ac(),l.bc(49,"th",41),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("clearingDocumentNumber")})),l.Yc(50,"Clearing Document No "),l.Xb(51,"span",42),l.ac(),l.ac(),l.ac(),l.bc(52,"tbody"),l.Wc(53,Dc,25,12,"tr",43),l.sc(54,"slice"),l.sc(55,"sort"),l.sc(56,"simpleSearch"),l.ac(),l.ac(),l.Wc(57,Cc,3,0,"div",44),l.bc(58,"app-pagination",45),l.nc("outputParams",(function(e){return l.Pc(t),l.rc().getIndexParams(e)})),l.ac(),l.ac(),l.ac()}if(2&t){const t=l.rc();l.Hb(6),l.Zc(t.totalItems),l.Hb(1),l.zc("ngIf",!t.isReportSubmitted),l.Hb(4),l.zc("ngModel",t.reportsData),l.Hb(7),l.zc("ngClass",t.getFieldOrderBy("custInvoiceId")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("apartmentBlock")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("apartmentBlockUnitNumber")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("creditAmount")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("debitAmount")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("glaccountname")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("documentDate")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("enteredByName")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("entryDateTime")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("postingDate")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("clearingDate")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("clearingDocumentNumber")),l.Hb(2),l.zc("ngForOf",l.vc(54,21,l.vc(55,25,l.uc(56,29,t.reportsDataList,t.reportsData),t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex)),l.Hb(4),l.zc("ngIf",t.isNoItemsAvailable()),l.Hb(1),l.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let Ac=(()=>{class t{constructor(t,e,c,n,i){this.apartmentService=t,this.accountsService=e,this.sharedService=c,this.lookupService=n,this.cookieService=i,this.glAccountIndicator="Cust_Invoice",this.isBlockSelected=!1,this.isUnitSelected=!1,this.ItemStartIndex=0,this.itemLimit=8,this.unitFieldType="unitno",this.unitOrder=!0,this.isReportSubmitted=!0,this.isDataLoaded=!0}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}getUnits(t){this.apartmentService.getApartmentBlockUnitByBlockId(parseInt(t)).subscribe(t=>{this.blockUnitData=t,this.isBlockSelected=!0})}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}getDate(t){return O(t).format("MM-DD-YYYY")}getDateFormat(t){return O(t).format("YYYY-MM-DD")}getTimeFormat(t){return O(t).format("YYYY-MM-DD HH:mm")}submitIncomeReportsCustomerForm(t){this.isReportSubmitted=!0,this.isDataLoaded=!1;let e={BlockID:parseInt(this.report.apartmentBlockId),ApartmentBlockUnitId:parseInt(this.report.apartmentBlockUnitId),DocumentdateFrom:this.getDateFormat(this.report.documentDateFrom),DocumentdateTo:this.getDateFormat(this.report.documentDateTo),PostingdateFrom:this.getDateFormat(this.report.PostingdateFrom),PostingdateTo:this.getDateFormat(this.report.PostingdateTo),GLaccountID:parseInt(this.report.GLaccountID),GLDocumentTypeID:142,apartmentId:parseInt(this.cookieService.get("apartmentId"))};this.accountsService.getCustGltransactionsMultiFilter(e).subscribe(t=>{this.reportsDataList=t,this.totalItems=this.reportsDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isDataLoaded=!0,this.isReportSubmitted=!1},t=>{})}ngOnInit(){this.report={},this.report.apartmentBlockId="",this.report.apartmentBlockUnitId="",this.report.GLaccountID="",this.report.GLDocumentTypeID="",this.apartmentService.getApartmentBlockByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.blockData=t}),this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountsDataList=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),this.lookupService.getLookupValueByLookupTypeId(31).subscribe(t=>{this.glDocumentTypeDataList=t},t=>{})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(a.a),l.Wb(o.a),l.Wb(r.a),l.Wb(V.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-tracker-reports-customer"]],decls:73,vars:30,consts:[[1,"income-tracker-reports-customer-reports"],[1,"main-title-mini"],[1,"card","clear"],[1,"card-body"],["name","incomeReportsCustomerForm","novalidate","",3,"ngSubmit"],["incomeReportsCustomerForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"select-box"],["name","blockNo","id","blockNo",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","unitNo","id","unitNo",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"input-box"],["name","documentDateFrom","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["documentDateFrom",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","calendar","width","18",1,"icon","date","float-left"],["name","documentDateTo","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["documentDateTo",""],["name","PostingDateFrom","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["PostingDateFrom",""],["name","PostingdateTo","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["PostingdateTo",""],["name","glAccountNo","id","glAccountNo",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"btn","blue",3,"disabled"],[4,"ngIf"],["class","card clear mt-30",4,"ngIf"],[3,"value"],[1,"card","clear","mt-30"],[1,"card-header"],[1,"list-inline","float-left"],[1,"badge","lime-green"],[1,"list-inline","float-right"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"table","table-stretch","table-responsive"],["scope","col",3,"click"],[3,"ngClass"],[4,"ngFor","ngForOf"],["class","button-wrapper border-top",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"tc-blue","m-bold"],[1,"name"],[1,"grey"],[1,"button-wrapper","border-top"],[1,"snippet"]],template:function(t,e){if(1&t){const t=l.cc();l.bc(0,"div",0),l.bc(1,"h4",1),l.Yc(2,"Customer Journal Entries"),l.ac(),l.bc(3,"div",2),l.bc(4,"div",3),l.bc(5,"form",4,5),l.nc("ngSubmit",(function(){l.Pc(t);const c=l.Mc(6);return e.submitIncomeReportsCustomerForm(c)})),l.bc(7,"div",6),l.bc(8,"div",7),l.bc(9,"div",8),l.bc(10,"label"),l.Yc(11,"Block No"),l.ac(),l.bc(12,"select",9),l.nc("ngModelChange",(function(t){return e.report.apartmentBlockId=t}))("ngModelChange",(function(){return e.getUnits(e.report.apartmentBlockId)})),l.bc(13,"option",10),l.Yc(14,"Select"),l.ac(),l.Wc(15,gc,2,2,"option",11),l.ac(),l.ac(),l.ac(),l.bc(16,"div",7),l.bc(17,"div",8),l.bc(18,"label"),l.Yc(19,"Unit No"),l.ac(),l.bc(20,"select",12),l.nc("ngModelChange",(function(t){return e.report.apartmentBlockUnitId=t})),l.bc(21,"option",10),l.Yc(22,"Select"),l.ac(),l.Wc(23,hc,2,2,"option",11),l.ac(),l.ac(),l.ac(),l.bc(24,"div",7),l.bc(25,"div",13),l.bc(26,"label"),l.Yc(27,"Document Date From"),l.ac(),l.bc(28,"input",14),l.nc("ngModelChange",(function(t){return e.report.documentDateFrom=t})),l.ac(),l.Xb(29,"owl-date-time",15,16),l.bc(31,"div",17),l.Xb(32,"i-feather",18),l.ac(),l.ac(),l.ac(),l.bc(33,"div",7),l.bc(34,"div",13),l.bc(35,"label"),l.Yc(36,"Document Date To"),l.ac(),l.bc(37,"input",19),l.nc("ngModelChange",(function(t){return e.report.documentDateTo=t})),l.ac(),l.Xb(38,"owl-date-time",15,20),l.bc(40,"div",17),l.Xb(41,"i-feather",18),l.ac(),l.ac(),l.ac(),l.bc(42,"div",7),l.bc(43,"div",13),l.bc(44,"label"),l.Yc(45,"Posting Date From*"),l.ac(),l.bc(46,"input",21),l.nc("ngModelChange",(function(t){return e.report.PostingdateFrom=t})),l.ac(),l.Xb(47,"owl-date-time",15,22),l.bc(49,"div",17),l.Xb(50,"i-feather",18),l.ac(),l.ac(),l.ac(),l.bc(51,"div",7),l.bc(52,"div",13),l.bc(53,"label"),l.Yc(54,"Posting Date To*"),l.ac(),l.bc(55,"input",23),l.nc("ngModelChange",(function(t){return e.report.PostingdateTo=t})),l.ac(),l.Xb(56,"owl-date-time",15,24),l.bc(58,"div",17),l.Xb(59,"i-feather",18),l.ac(),l.ac(),l.ac(),l.bc(60,"div",7),l.bc(61,"div",8),l.bc(62,"label"),l.Yc(63,"Gl Account"),l.ac(),l.bc(64,"select",25),l.nc("ngModelChange",(function(t){return e.report.GLaccountID=t})),l.bc(65,"option",10),l.Yc(66,"Select"),l.ac(),l.Wc(67,vc,2,3,"option",11),l.ac(),l.ac(),l.ac(),l.bc(68,"div",26),l.bc(69,"button",27),l.Yc(70,"Generate"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.Wc(71,Ic,1,0,"app-loader",28),l.Wc(72,Mc,59,32,"div",29),l.ac()}if(2&t){const t=l.Mc(6),c=l.Mc(30),n=l.Mc(39),i=l.Mc(48),a=l.Mc(57);l.Hb(12),l.zc("ngModel",e.report.apartmentBlockId),l.Hb(3),l.zc("ngForOf",e.blockData),l.Hb(5),l.zc("ngModel",e.report.apartmentBlockUnitId)("disabled",!e.isBlockSelected),l.Hb(3),l.zc("ngForOf",e.blockUnitData),l.Hb(5),l.zc("owlDateTime",c)("owlDateTimeTrigger",c)("ngModel",e.report.documentDateFrom),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",c),l.Hb(6),l.zc("owlDateTime",n)("owlDateTimeTrigger",n)("ngModel",e.report.documentDateTo),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",n),l.Hb(6),l.zc("owlDateTime",i)("owlDateTimeTrigger",i)("ngModel",e.report.PostingdateFrom),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",i),l.Hb(6),l.zc("owlDateTime",a)("owlDateTimeTrigger",a)("ngModel",e.report.PostingdateTo),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",a),l.Hb(6),l.zc("ngModel",e.report.GLaccountID),l.Hb(3),l.zc("ngForOf",e.glAccountsDataList),l.Hb(2),l.zc("disabled",t.invalid),l.Hb(2),l.zc("ngIf",!e.isDataLoaded),l.Hb(1),l.zc("ngIf",e.isDataLoaded&&!e.isReportSubmitted)}},directives:[g.z,g.m,g.n,g.w,g.l,g.o,g.p,g.y,n.k,it.c,g.d,it.e,it.b,b.b,g.v,n.l,m.a,p.b,n.j,h.a],pipes:[n.t,v.a,v.e],styles:[""]}),t})();var yc=c("7229");function kc(t,e){if(1&t&&(l.bc(0,"option",29),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.vendorId),l.Hb(1),l.Zc(t.vendorName)}}function Sc(t,e){if(1&t&&(l.bc(0,"option",29),l.Yc(1),l.ac()),2&t){const t=e.$implicit;l.zc("value",t.glaccountId),l.Hb(1),l.bd("",t.glaccountName," ",t.glaccountId,"")}}function Pc(t,e){1&t&&l.Xb(0,"app-loader")}function Lc(t,e){if(1&t&&(l.bc(0,"p"),l.Yc(1,"Transactions From "),l.bc(2,"span",45),l.Yc(3),l.ac(),l.Yc(4," To "),l.bc(5,"span",45),l.Yc(6),l.ac(),l.ac()),2&t){const t=l.rc(2);l.Hb(3),l.Zc(t.getDate(t.report.documentDateFrom)),l.Hb(3),l.Zc(t.getDate(t.report.documentDateTo))}}function xc(t,e){if(1&t&&(l.bc(0,"tr"),l.bc(1,"td",46),l.Yc(2),l.ac(),l.bc(3,"td",47),l.Yc(4),l.ac(),l.bc(5,"td",47),l.Yc(6),l.ac(),l.bc(7,"td",47),l.Yc(8),l.ac(),l.bc(9,"td",47),l.Yc(10),l.ac(),l.bc(11,"td",47),l.Yc(12),l.ac(),l.bc(13,"td",47),l.Yc(14),l.ac(),l.bc(15,"td",47),l.Yc(16),l.ac(),l.bc(17,"td",47),l.Yc(18),l.ac(),l.bc(19,"td",47),l.Yc(20),l.ac(),l.bc(21,"td",47),l.Yc(22),l.ac(),l.ac()),2&t){const t=e.$implicit,c=l.rc(2);l.Hb(2),l.Zc(t.vendorName),l.Hb(2),l.Zc(t.vendorInvoiceId),l.Hb(2),l.Zc(t.creditAmount),l.Hb(2),l.Zc(t.debitAmount),l.Hb(2),l.Zc(t.glaccountname),l.Hb(2),l.Zc(c.getDate(t.documentDate)),l.Hb(2),l.Zc(t.documentNumber),l.Hb(2),l.Zc(t.enteredByName),l.Hb(2),l.Zc(c.getTimeFormat(t.entryDateTime)),l.Hb(2),l.Zc(c.getDate(t.postingDate)),l.Hb(2),l.Zc(c.getDate(t.clearingDate))}}function Hc(t,e){1&t&&(l.bc(0,"div",48),l.bc(1,"p",49),l.Yc(2,"No Records Found"),l.ac(),l.ac())}function Oc(t,e){if(1&t){const t=l.cc();l.bc(0,"div",30),l.bc(1,"div",31),l.bc(2,"div",32),l.bc(3,"h5"),l.Yc(4,"Reports "),l.bc(5,"span",33),l.Yc(6),l.ac(),l.ac(),l.Wc(7,Lc,7,2,"p",27),l.ac(),l.bc(8,"ul",34),l.bc(9,"li",35),l.Xb(10,"i",36),l.bc(11,"input",37),l.nc("ngModelChange",(function(e){return l.Pc(t),l.rc().reportsData=e})),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(12,"div",38),l.bc(13,"table",39),l.bc(14,"thead"),l.bc(15,"tr"),l.bc(16,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("vendorName")})),l.Yc(17,"Vendor Name"),l.Xb(18,"span",41),l.ac(),l.bc(19,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("vendorInvoiceId")})),l.Yc(20,"Vendor Invoice Id"),l.Xb(21,"span",41),l.ac(),l.bc(22,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("creditAmount")})),l.Yc(23,"Credit Amount"),l.Xb(24,"span",41),l.ac(),l.bc(25,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("debitAmount")})),l.Yc(26,"Debit Amount"),l.Xb(27,"span",41),l.ac(),l.bc(28,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("glaccountname")})),l.Yc(29,"Gl Account Name"),l.Xb(30,"span",41),l.ac(),l.bc(31,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("documentDate")})),l.Yc(32,"Document Date"),l.Xb(33,"span",41),l.ac(),l.bc(34,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("documentNumber")})),l.Yc(35,"Document No"),l.Xb(36,"span",41),l.ac(),l.bc(37,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("enteredByName")})),l.Yc(38,"Entered By"),l.Xb(39,"span",41),l.ac(),l.bc(40,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("entryDateTime")})),l.Yc(41,"Entry Date & Time"),l.Xb(42,"span",41),l.ac(),l.bc(43,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("postingDate")})),l.Yc(44,"Posting Date"),l.Xb(45,"span",41),l.ac(),l.bc(46,"th",40),l.nc("click",(function(){return l.Pc(t),l.rc().sortUnitData("clearingDate")})),l.Yc(47,"Clearing Date"),l.Xb(48,"span",41),l.ac(),l.ac(),l.ac(),l.bc(49,"tbody"),l.Wc(50,xc,23,11,"tr",42),l.sc(51,"slice"),l.sc(52,"sort"),l.sc(53,"simpleSearch"),l.ac(),l.ac(),l.Wc(54,Hc,3,0,"div",43),l.bc(55,"app-pagination",44),l.nc("outputParams",(function(e){return l.Pc(t),l.rc().getIndexParams(e)})),l.ac(),l.ac(),l.ac()}if(2&t){const t=l.rc();l.Hb(6),l.Zc(t.totalItems),l.Hb(1),l.zc("ngIf",!t.isReportSubmitted),l.Hb(4),l.zc("ngModel",t.reportsData),l.Hb(7),l.zc("ngClass",t.getFieldOrderBy("vendorName")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("vendorInvoiceId")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("creditAmount")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("debitAmount")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("glaccountname")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("documentDate")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("documentNumber")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("enteredByName")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("entryDateTime")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("postingDate")),l.Hb(3),l.zc("ngClass",t.getFieldOrderBy("clearingDate")),l.Hb(2),l.zc("ngForOf",l.vc(51,20,l.vc(52,24,l.uc(53,28,t.reportsDataList,t.reportsData),t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex)),l.Hb(4),l.zc("ngIf",t.isNoItemsAvailable()),l.Hb(1),l.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}const Yc=[{path:"",redirectTo:"subledger",pathMatch:"full"},{path:"settings",component:pc},{path:"subledger",component:H},{path:"view-invoice-history/:id",component:kt},{path:"all-invoices",component:nt},{path:"post-multi-invoice/:id/:type",component:re},{path:"edit-invoice/:id",component:Gt},{path:"post-collection/:id",component:ye},{path:"receipts",component:N},{path:"creditnote",component:R},{path:"add-credit/:id/:type",component:Je},{path:"edit-credit/:id",component:Je},{path:"defaulters",component:Ht},{path:"ageing",component:Ue},{path:"reports",component:ec},{path:"reports/customer",component:Ac},{path:"reports/vendor",component:(()=>{class t{constructor(t,e,c,n,i,a){this.apartmentService=t,this.vendorService=e,this.accountsService=c,this.sharedService=n,this.lookupService=i,this.cookieService=a,this.glAccountIndicator="Liability",this.isBlockSelected=!1,this.isUnitSelected=!1,this.ItemStartIndex=0,this.itemLimit=8,this.unitFieldType="unitno",this.unitOrder=!0,this.isReportSubmitted=!0,this.isDataLoaded=!0}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}getDate(t){return null!=t?O(t).format("MM-DD-YYYY"):""}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}getDateFormat(t){return O(t).format("YYYY-MM-DD")}getTimeFormat(t){return O(t).format("YYYY-MM-DD HH:mm")}submitIncomeReportsVendorForm(t){this.isReportSubmitted=!0,this.isDataLoaded=!1;let e={BlockID:null,DocumentdateFrom:this.getDateFormat(this.report.documentDateFrom),DocumentdateTo:this.getDateFormat(this.report.documentDateTo),PostingdateFrom:this.getDateFormat(this.report.PostingdateFrom),PostingdateTo:this.getDateFormat(this.report.PostingdateTo),VendorId:parseInt(this.report.vendorId),GLaccountID:parseInt(this.report.GLaccountID),GLDocumentTypeID:149,apartmentId:parseInt(this.cookieService.get("apartmentId"))};this.accountsService.getVendorGltransactionsMultiFilter(e).subscribe(t=>{this.reportsDataList=t,console.log(this.reportsDataList),this.totalItems=this.reportsDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isDataLoaded=!0,this.isReportSubmitted=!1},t=>{})}ngOnInit(){this.report={},this.report.apartmentBlockId="",this.report.vendorId="",this.report.GLaccountID="",this.report.GLDocumentTypeID="",this.apartmentService.getApartmentBlockByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.blockData=t}),this.vendorService.getVendorByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.vendorData=t}),this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountsDataList=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),this.lookupService.getLookupValueByLookupTypeId(31).subscribe(t=>{this.glDocumentTypeDataList=t},t=>{})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(a.a),l.Wb(yc.a),l.Wb(o.a),l.Wb(r.a),l.Wb(V.a),l.Wb(u.a))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-tracker-reports-vendor"]],decls:65,vars:27,consts:[[1,"income-tracker-reports-vendor-reports"],[1,"main-title-mini"],[1,"card","clear"],[1,"card-body"],["name","incomeReportsVendorForm","novalidate","",3,"ngSubmit"],["incomeReportsVendorForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["name","documentDateFrom","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["documentDateFrom",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","calendar","width","18",1,"icon","date","float-left"],["name","documentDateTo","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["documentDateTo",""],["name","PostingDateFrom","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["PostingDateFrom",""],["name","PostingdateTo","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["PostingdateTo",""],[1,"select-box"],["name","vendorName","id","vendorName",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","glAccountNo","id","glAccountNo",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"btn","blue",3,"disabled"],[4,"ngIf"],["class","card clear mt-30",4,"ngIf"],[3,"value"],[1,"card","clear","mt-30"],[1,"card-header"],[1,"list-inline","float-left"],[1,"badge","lime-green"],[1,"list-inline","float-right"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"table","table-stretch","table-responsive"],["scope","col",3,"click"],[3,"ngClass"],[4,"ngFor","ngForOf"],["class","button-wrapper border-top",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"tc-blue","m-bold"],[1,"name"],[1,"grey"],[1,"button-wrapper","border-top"],[1,"snippet"]],template:function(t,e){if(1&t){const t=l.cc();l.bc(0,"div",0),l.bc(1,"h4",1),l.Yc(2,"Vendor Journal Entries"),l.ac(),l.bc(3,"div",2),l.bc(4,"div",3),l.bc(5,"form",4,5),l.nc("ngSubmit",(function(){l.Pc(t);const c=l.Mc(6);return e.submitIncomeReportsVendorForm(c)})),l.bc(7,"div",6),l.bc(8,"div",7),l.bc(9,"div",8),l.bc(10,"label"),l.Yc(11,"Document Date From"),l.ac(),l.bc(12,"input",9),l.nc("ngModelChange",(function(t){return e.report.documentDateFrom=t})),l.ac(),l.Xb(13,"owl-date-time",10,11),l.bc(15,"div",12),l.Xb(16,"i-feather",13),l.ac(),l.ac(),l.ac(),l.bc(17,"div",7),l.bc(18,"div",8),l.bc(19,"label"),l.Yc(20,"Document Date To"),l.ac(),l.bc(21,"input",14),l.nc("ngModelChange",(function(t){return e.report.documentDateTo=t})),l.ac(),l.Xb(22,"owl-date-time",10,15),l.bc(24,"div",12),l.Xb(25,"i-feather",13),l.ac(),l.ac(),l.ac(),l.bc(26,"div",7),l.bc(27,"div",8),l.bc(28,"label"),l.Yc(29,"Posting Date From*"),l.ac(),l.bc(30,"input",16),l.nc("ngModelChange",(function(t){return e.report.PostingdateFrom=t})),l.ac(),l.Xb(31,"owl-date-time",10,17),l.bc(33,"div",12),l.Xb(34,"i-feather",13),l.ac(),l.ac(),l.ac(),l.bc(35,"div",7),l.bc(36,"div",8),l.bc(37,"label"),l.Yc(38,"Posting Date To*"),l.ac(),l.bc(39,"input",18),l.nc("ngModelChange",(function(t){return e.report.PostingdateTo=t})),l.ac(),l.Xb(40,"owl-date-time",10,19),l.bc(42,"div",12),l.Xb(43,"i-feather",13),l.ac(),l.ac(),l.ac(),l.bc(44,"div",7),l.bc(45,"div",20),l.bc(46,"label"),l.Yc(47,"Vendor"),l.ac(),l.bc(48,"select",21),l.nc("ngModelChange",(function(t){return e.report.vendorId=t})),l.bc(49,"option",22),l.Yc(50,"Select"),l.ac(),l.Wc(51,kc,2,2,"option",23),l.ac(),l.ac(),l.ac(),l.bc(52,"div",7),l.bc(53,"div",20),l.bc(54,"label"),l.Yc(55,"Gl Account"),l.ac(),l.bc(56,"select",24),l.nc("ngModelChange",(function(t){return e.report.GLaccountID=t})),l.bc(57,"option",22),l.Yc(58,"Select"),l.ac(),l.Wc(59,Sc,2,3,"option",23),l.ac(),l.ac(),l.ac(),l.bc(60,"div",25),l.bc(61,"button",26),l.Yc(62,"Generate"),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.Wc(63,Pc,1,0,"app-loader",27),l.Wc(64,Oc,56,31,"div",28),l.ac()}if(2&t){const t=l.Mc(6),c=l.Mc(14),n=l.Mc(23),i=l.Mc(32),a=l.Mc(41);l.Hb(12),l.zc("owlDateTime",c)("owlDateTimeTrigger",c)("ngModel",e.report.documentDateFrom),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",c),l.Hb(6),l.zc("owlDateTime",n)("owlDateTimeTrigger",n)("ngModel",e.report.documentDateTo),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",n),l.Hb(6),l.zc("owlDateTime",i)("owlDateTimeTrigger",i)("ngModel",e.report.PostingdateFrom),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",i),l.Hb(6),l.zc("owlDateTime",a)("owlDateTimeTrigger",a)("ngModel",e.report.PostingdateTo),l.Hb(1),l.zc("pickerType","calendar"),l.Hb(2),l.zc("owlDateTimeTrigger",a),l.Hb(6),l.zc("ngModel",e.report.vendorId),l.Hb(3),l.zc("ngForOf",e.vendorData),l.Hb(5),l.zc("ngModel",e.report.GLaccountID),l.Hb(3),l.zc("ngForOf",e.glAccountsDataList),l.Hb(2),l.zc("disabled",t.invalid),l.Hb(2),l.zc("ngIf",!e.isDataLoaded),l.Hb(1),l.zc("ngIf",e.isDataLoaded&&!e.isReportSubmitted)}},directives:[g.z,g.m,g.n,it.c,g.d,it.e,g.l,g.o,it.b,b.b,g.v,g.w,g.p,g.y,n.k,n.l,m.a,p.b,n.j,h.a],pipes:[n.t,v.a,v.e],styles:[""]}),t})()},{path:"**",redirectTo:"subledger",pathMatch:"full"}];let Fc=(()=>{class t{}return t.\u0275mod=l.Ub({type:t}),t.\u0275inj=l.Tb({factory:function(e){return new(e||t)},imports:[[i.f.forChild(Yc)],i.f]}),t})();var wc=c("PCNd");let Tc=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Qb({type:t,selectors:[["app-income-tracker"]],decls:1,vars:0,template:function(t,e){1&t&&l.Xb(0,"router-outlet")},directives:[i.g],styles:[""]}),t})();c.d(e,"IncomeTrackerModule",(function(){return zc}));let zc=(()=>{class t{}return t.\u0275mod=l.Ub({type:t,bootstrap:[Tc]}),t.\u0275inj=l.Tb({factory:function(e){return new(e||t)},imports:[[n.b,wc.a,Fc]]}),t})()}}]);