(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"z+D7":function(t,e,n){"use strict";n.r(e);var r=n("ofXK"),i=n("tyNb"),a=n("fXoL");let c=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Lb({type:t,selectors:[["app-security-setup"]],decls:2,vars:0,template:function(t,e){1&t&&(a.Wb(0,"p"),a.Tc(1," security-setup works!\n"),a.Vb())},styles:[""]}),t})();var o=n("NutR"),s=n("Yt4J"),l=n("MXRh"),p=n("ThaB"),d=n("wbvY"),g=n("F/us"),b=n("wd/R"),u=n("b6Qw"),m=n("668k"),f=n("3Pt+");function h(t,e){1&t&&a.Sb(0,"app-loader")}function C(t,e){1&t&&a.Sb(0,"app-loader")}function v(t,e){if(1&t){const t=a.Xb();a.Wb(0,"textarea",29),a.ic("ngModelChange",(function(e){return a.Kc(t),a.mc(3).$implicit.notes=e})),a.Vb()}if(2&t){const t=a.mc(3).$implicit;a.uc("ngModel",t.notes)("disabled",!0)}}function M(t,e){if(1&t){const t=a.Xb();a.Wb(0,"textarea",30),a.ic("ngModelChange",(function(e){return a.Kc(t),a.mc(3).$implicit.notes=e})),a.Vb()}if(2&t){const t=a.mc(3).$implicit;a.uc("ngModel",t.notes)}}function O(t,e){if(1&t&&(a.Wb(0,"div",20),a.Wb(1,"div",25),a.Wb(2,"div",26),a.Wb(3,"label"),a.Tc(4,"Comments"),a.Vb(),a.Rc(5,v,1,2,"textarea",27),a.Rc(6,M,1,1,"textarea",28),a.Vb(),a.Vb(),a.Vb()),2&t){const t=a.mc(2).$implicit,e=a.mc(2);a.Cb(5),a.uc("ngIf",!e.isInProgressStatus(t.alertStatusId)),a.Cb(1),a.uc("ngIf",e.isInProgressStatus(t.alertStatusId))}}function P(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",31),a.Wb(1,"a",32),a.ic("click",(function(){a.Kc(t);const e=a.mc(2).$implicit;return a.mc(2).approveAlert(e,"approve")})),a.Tc(2,"Acknowledge"),a.Vb(),a.Vb()}}function y(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",31),a.Wb(1,"a",32),a.ic("click",(function(){a.Kc(t);const e=a.mc(2).$implicit;return a.mc(2).approveAlert(e,"close")})),a.Tc(2,"Close"),a.Vb(),a.Vb()}}function I(t,e){if(1&t&&(a.Wb(0,"div",19),a.Wb(1,"div",20),a.Wb(2,"div",21),a.Wb(3,"div",22),a.Wb(4,"h5"),a.Tc(5,"Person Name"),a.Vb(),a.Wb(6,"p"),a.Tc(7),a.Vb(),a.Vb(),a.Wb(8,"div",22),a.Wb(9,"h5"),a.Tc(10,"Phone Number"),a.Vb(),a.Wb(11,"p"),a.Tc(12),a.Vb(),a.Vb(),a.Wb(13,"div",22),a.Wb(14,"h5"),a.Tc(15,"Alert Received Time"),a.Vb(),a.Wb(16,"p"),a.Tc(17),a.Vb(),a.Vb(),a.Vb(),a.Sb(18,"div",21),a.Vb(),a.Rc(19,O,7,2,"div",23),a.Rc(20,P,3,0,"div",24),a.Rc(21,y,3,0,"div",24),a.Vb()),2&t){const t=a.mc().$implicit,e=a.mc(2);a.Cb(7),a.Uc(e.getUserName(t.insertedBy)),a.Cb(5),a.Uc(e.getContactNumber(t.insertedBy)),a.Cb(5),a.Uc(e.getDateTime(t.receivedDate)),a.Cb(2),a.uc("ngIf",!e.isOpenStatus(t.alertStatusId)),a.Cb(1),a.uc("ngIf",e.isOpenStatus(t.alertStatusId)),a.Cb(1),a.uc("ngIf",e.isInProgressStatus(t.alertStatusId))}}function _(t,e){if(1&t&&(a.Ub(0),a.Wb(1,"li",7),a.Wb(2,"div",8),a.Wb(3,"div",9),a.Wb(4,"div",10),a.Wb(5,"div"),a.Sb(6,"img",11),a.Vb(),a.Wb(7,"div",12),a.Wb(8,"h5"),a.Tc(9),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(10,"div",13),a.Wb(11,"span",14),a.Tc(12),a.Vb(),a.Vb(),a.Vb(),a.Wb(13,"div",15),a.Wb(14,"p"),a.Wb(15,"span",16),a.Tc(16,"Date:"),a.Vb(),a.Tc(17),a.Vb(),a.Wb(18,"p"),a.Wb(19,"span",16),a.Tc(20,"Block:"),a.Vb(),a.Tc(21),a.Vb(),a.Vb(),a.Vb(),a.Wb(22,"div",17),a.Rc(23,C,1,0,"app-loader",1),a.Rc(24,I,22,6,"div",18),a.Vb(),a.Tb()),2&t){const t=e.$implicit,n=a.mc(2);a.Cb(1),a.Gb("list-group-item collapsed ",n.getEmergencyType(t.alertTypeId)," "),a.Eb("data-target","#collapse",t.apartmentBlockUnitAlertId,""),a.Cb(4),a.Gb("s-circle ",n.getEmergencyType(t.alertTypeId)," text-center"),a.Cb(1),a.wc("src","assets/images/",n.getEmergencyType(t.alertTypeId),"-e-icon.svg",a.Mc),a.Cb(3),a.Uc(n.getAlertName(t.alertTypeId)),a.Cb(2),a.uc("ngClass",n.getAlertStatus(t.alertStatusId)),a.Cb(1),a.Uc(n.getAlertStatus(t.alertStatusId)),a.Cb(5),a.Uc(n.getDate(t.receivedDate)),a.Cb(4),a.Uc(n.getBlock(t.apartmentBlockUnitId)),a.Cb(1),a.wc("id","collapse",t.apartmentBlockUnitAlertId,""),a.Cb(1),a.uc("ngIf",n.isAlertUpdated),a.Cb(1),a.uc("ngIf",!n.isAlertUpdated)}}function k(t,e){1&t&&(a.Ub(0),a.Wb(1,"div",33),a.Wb(2,"div",34),a.Wb(3,"h4"),a.Tc(4,"No Active Alerts available"),a.Vb(),a.Vb(),a.Vb(),a.Tb())}function w(t,e){if(1&t&&(a.Ub(0),a.Wb(1,"h3",2),a.Tc(2,"Active Alerts"),a.Vb(),a.Wb(3,"div",3),a.Wb(4,"div",4),a.Wb(5,"ul",5),a.Rc(6,_,25,16,"ng-container",6),a.Rc(7,k,5,0,"ng-container",1),a.Vb(),a.Vb(),a.Vb(),a.Tb()),2&t){const t=a.mc();a.Cb(6),a.uc("ngForOf",t.alertList),a.Cb(1),a.uc("ngIf",t.isNoAlerts())}}const V=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:c},{path:"active-alerts",component:(()=>{class t{constructor(t,e,n,r,i,a){this.userService=t,this.apartmentService=e,this.alertService=n,this.lookupService=r,this.sharedService=i,this.cookieService=a,this.isAlertsLoaded=!1,this.isAlertUpdated=!1,this.userDetails=[],this.blockDetails=[],this.locationDetails=[]}getEmergencyType(t){return 130==t?"medical":131==t?"theft":132==t?"fire":133==t?"shooter":134==t?"police":"other"}getAlertName(t){var e=g.filter(this.emergencyTypeList,(function(e){if(e.lookupValueId===t)return e}));return void 0===e||0==e.length?"":e[0].lookupValueName.toLowerCase()}getAlertStatus(t){var e=g.filter(this.alertTypeList,(function(e){if(e.lookupValueId===t)return e}));return void 0===e||0==e.length?"":e[0].lookupValueName.toLowerCase()}getBlock(t){var e=g.filter(this.blockDetails,(function(e){if(e.apartmentBlockUnitId===t)return e}));return void 0===e||0==e.length?"":e[0].apartmentBlockNumber+" "+e[0].apartmentBlockUnitNumber}getUserName(t){var e=g.filter(this.userDetails,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].firstName}getContactNumber(t){var e=g.filter(this.userDetails,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].phoneNumber}getDate(t){return b(t).format("MM/DD/YYYY, h:mm A")}getDateTime(t){return b(t).format("MM/DD/YYYY, h:mm A")}isOpenStatus(t){return 135==t}isInProgressStatus(t){return 136==t}isClosedStatus(t){return 137==t}getLatitude(t){var e=g.filter(this.locationDetails,(function(e){if(e.userId===t)return e}));if(void 0===e||0==e.length)return"";var n=e[0].coords.split(",");return parseFloat(n[0])}getLongitude(t){var e=g.filter(this.locationDetails,(function(e){if(e.userId===t)return e}));if(void 0===e||0==e.length)return"";var n=e[0].coords.split(",");return parseFloat(n[1])}approveAlert(t,e){this.isAlertUpdated=!0;let n={};null==t.gpslocation&&(t.gpslocation=" "),n="approve"==e?{apartmentBlockUnitAlertId:t.apartmentBlockUnitAlertId,apartmentBlockUnitId:t.apartmentBlockUnitId,receivedDate:t.receivedDate,alertTypeId:t.alertTypeId,location:"string",gpslocation:t.gpslocation,assignedTo:parseInt(this.cookieService.get("userId")),alertStatusId:136,notes:t.notes,isActive:t.isActive,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-06T13:45:09.296Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-06T13:45:09.296Z"}:{apartmentBlockUnitAlertId:t.apartmentBlockUnitAlertId,apartmentBlockUnitId:t.apartmentBlockUnitId,receivedDate:t.receivedDate,alertTypeId:t.alertTypeId,location:"string",gpslocation:t.gpslocation,assignedTo:parseInt(this.cookieService.get("userId")),alertStatusId:137,notes:t.notes,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-06T13:45:09.296Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-06T13:45:09.296Z"},this.alertService.updateApartmentBlockUnitAlert(n).subscribe(t=>{t.message?this.alertService.getAllApartmentBlockUnitAlertByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.alertList=t.filter(t=>t.isActive),this.isAlertUpdated=!1},t=>{console.log(t)}):this.isAlertUpdated=!1},t=>{console.log(t)})}isNoAlerts(){return 0==this.alertList.length}ngOnInit(){this.alert={},this.alert.gpsLocation=" ",this.alert.notes=" ",this.alertService.getAllApartmentBlockUnitAlertByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.alertList=t.filter(t=>t.isActive),this.isAlertsLoaded=!0,console.log(this.alertList),g.each(this.alertList,t=>{this.userService.getUserById(parseInt(t.insertedBy)).subscribe(t=>{this.userDetails.push(t[0]),console.log(this.userDetails)},t=>{console.log(t)}),this.apartmentService.getApartmentBlockUnitById(t.apartmentBlockUnitId).subscribe(t=>{this.blockDetails.push(t[0])},t=>{console.log(t)}),null!=t.gpslocation&&0!=t.gpslocation.length||(t.gpslocation="47.4925,19.0513"),this.locationDetails.push({userId:t.insertedBy,coords:t.gpslocation})})},t=>{console.log(t)}),this.lookupService.getLookupValueByLookupTypeId(29).subscribe(t=>{this.emergencyTypeList=t}),this.lookupService.getLookupValueByLookupTypeId(30).subscribe(t=>{this.alertTypeList=t})}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(o.a),a.Rb(s.a),a.Rb(l.a),a.Rb(p.a),a.Rb(d.a),a.Rb(u.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["app-security-active-alerts"]],decls:3,vars:2,consts:[[1,"secuirty-active-alerts-wrapper"],[4,"ngIf"],[1,"main-title"],[1,"card","mb-30"],["id","accordion",1,"card-body","p-0"],[1,"list-group","tabs","clear"],[4,"ngFor","ngForOf"],["data-toggle","collapse","aria-expanded","true","attr.aria-controls","collapseOne"],[1,"details"],[1,"float-left"],[1,"media"],["width","14",3,"src"],[1,"media-body"],[1,"float-right","mr-4"],[1,"badge","small","min","ml-3","text-capitalize",3,"ngClass"],[1,"info"],[1,"mr-2"],["aria-labelledby","headingOne","data-parent","#accordion",1,"collapse",3,"id"],["class","additional-desp",4,"ngIf"],[1,"additional-desp"],[1,"row"],[1,"col-sm-6"],[1,"lists"],["class","row",4,"ngIf"],["class","btn-wrapper text-center",4,"ngIf"],[1,"col-sm-12","mt-4","mb-2"],[1,"input-box"],["placeholder","some text here","name","healthIssue",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["placeholder","some text here","name","healthIssue",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","some text here","name","healthIssue",3,"ngModel","disabled","ngModelChange"],["placeholder","some text here","name","healthIssue",3,"ngModel","ngModelChange"],[1,"btn-wrapper","text-center"],[1,"btn","blue","mt-4","mb-4",3,"click"],[1,"card"],[1,"card-body","gen-message"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Rc(1,h,1,0,"app-loader",1),a.Rc(2,w,8,2,"ng-container",1),a.Vb()),2&t&&(a.Cb(1),a.uc("ngIf",!e.isAlertsLoaded),a.Cb(1),a.uc("ngIf",e.isAlertsLoaded))},directives:[r.l,m.a,r.k,r.j,f.d,f.n,f.q],styles:['.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:3px;height:100%!important}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.medical[_ngcontent-%COMP%]:before{background-color:#00bcd4}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.theft[_ngcontent-%COMP%]:before{background-color:#ef60a5}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.fire[_ngcontent-%COMP%]:before{background-color:#ff9800}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.shooter[_ngcontent-%COMP%]:before{background-color:#9100ff}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.police[_ngcontent-%COMP%]:before{background-color:#06bf58}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 20px;width:100%!important;float:left;border:none}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.8rem;color:#373946;text-transform:capitalize;margin:2px 0 0}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:0 20px;width:100%!important;float:left;margin:10px 0 0}@media (max-width:576px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin:12px 0 0}}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;color:#373946;display:inline-block}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(:last-child){margin:0 40px 0 0!important}@media (max-width:576px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px}}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#8391a1}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-top:none}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]{padding:20px 35px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]:not(:last-child){margin:0 0 20px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.6rem;padding:0 0 4px;color:#191c1e}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;color:#8391a1}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:500;letter-spacing:.2px;font-size:1.6rem;color:#191c1e;margin:0 0 7px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{height:300px}@media (max-width:991px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{margin:15px 0 0;display:block}}']}),t})()},{path:"history",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Lb({type:t,selectors:[["app-security-history"]],decls:2,vars:0,template:function(t,e){1&t&&(a.Wb(0,"p"),a.Tc(1," security-history works!\n"),a.Vb())},styles:[""]}),t})()},{path:"reports",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Lb({type:t,selectors:[["app-security-reports"]],decls:2,vars:0,template:function(t,e){1&t&&(a.Wb(0,"p"),a.Tc(1," security-reports works!\n"),a.Vb())},styles:[""]}),t})()},{path:"**",redirectTo:"settings",pathMatch:"full"}];let T=(()=>{class t{}return t.\u0275mod=a.Pb({type:t}),t.\u0275inj=a.Ob({factory:function(e){return new(e||t)},imports:[[i.f.forChild(V)],i.f]}),t})();var A=n("PCNd");let W=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Lb({type:t,selectors:[["app-security"]],decls:1,vars:0,template:function(t,e){1&t&&a.Sb(0,"router-outlet")},directives:[i.g],styles:[""]}),t})();n.d(e,"SecurityModule",(function(){return S}));let S=(()=>{class t{}return t.\u0275mod=a.Pb({type:t,bootstrap:[W]}),t.\u0275inj=a.Ob({factory:function(e){return new(e||t)},imports:[[r.b,A.a,T]]}),t})()}}]);