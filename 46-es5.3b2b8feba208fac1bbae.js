function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"z+D7":function(t,e,n){"use strict";n.r(e);var c,a=n("ofXK"),r=n("tyNb"),i=n("fXoL"),o=((c=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||c)},c.\u0275cmp=i.Qb({type:c,selectors:[["app-security-setup"]],decls:2,vars:0,template:function(t,e){1&t&&(i.bc(0,"p"),i.Yc(1," security-setup works!\n"),i.ac())},styles:[""]}),c),s=n("NutR"),l=n("Yt4J"),p=n("MXRh"),u=n("ThaB"),d=n("wbvY"),g=n("F/us"),f=n("wd/R"),b=n("b6Qw"),v=n("668k"),m=n("3Pt+");function h(t,e){1&t&&i.Xb(0,"app-loader")}function C(t,e){1&t&&i.Xb(0,"app-loader")}function y(t,e){if(1&t){var n=i.cc();i.bc(0,"textarea",29),i.nc("ngModelChange",(function(t){return i.Pc(n),i.rc(3).$implicit.notes=t})),i.ac()}if(2&t){var c=i.rc(3).$implicit;i.zc("ngModel",c.notes)("disabled",!0)}}function M(t,e){if(1&t){var n=i.cc();i.bc(0,"textarea",30),i.nc("ngModelChange",(function(t){return i.Pc(n),i.rc(3).$implicit.notes=t})),i.ac()}if(2&t){var c=i.rc(3).$implicit;i.zc("ngModel",c.notes)}}function O(t,e){if(1&t&&(i.bc(0,"div",20),i.bc(1,"div",25),i.bc(2,"div",26),i.bc(3,"label"),i.Yc(4,"Comments"),i.ac(),i.Wc(5,y,1,2,"textarea",27),i.Wc(6,M,1,1,"textarea",28),i.ac(),i.ac(),i.ac()),2&t){var n=i.rc(2).$implicit,c=i.rc(2);i.Hb(5),i.zc("ngIf",!c.isInProgressStatus(n.alertStatusId)),i.Hb(1),i.zc("ngIf",c.isInProgressStatus(n.alertStatusId))}}function _(t,e){if(1&t){var n=i.cc();i.bc(0,"div",31),i.bc(1,"a",32),i.nc("click",(function(){i.Pc(n);var t=i.rc(2).$implicit;return i.rc(2).approveAlert(t,"approve")})),i.Yc(2,"Acknowledge"),i.ac(),i.ac()}}function P(t,e){if(1&t){var n=i.cc();i.bc(0,"div",31),i.bc(1,"a",32),i.nc("click",(function(){i.Pc(n);var t=i.rc(2).$implicit;return i.rc(2).approveAlert(t,"close")})),i.Yc(2,"Close"),i.ac(),i.ac()}}function k(t,e){if(1&t&&(i.bc(0,"div",19),i.bc(1,"div",20),i.bc(2,"div",21),i.bc(3,"div",22),i.bc(4,"h5"),i.Yc(5,"Person Name"),i.ac(),i.bc(6,"p"),i.Yc(7),i.ac(),i.ac(),i.bc(8,"div",22),i.bc(9,"h5"),i.Yc(10,"Phone Number"),i.ac(),i.bc(11,"p"),i.Yc(12),i.ac(),i.ac(),i.bc(13,"div",22),i.bc(14,"h5"),i.Yc(15,"Alert Received Time"),i.ac(),i.bc(16,"p"),i.Yc(17),i.ac(),i.ac(),i.ac(),i.Xb(18,"div",21),i.ac(),i.Wc(19,O,7,2,"div",23),i.Wc(20,_,3,0,"div",24),i.Wc(21,P,3,0,"div",24),i.ac()),2&t){var n=i.rc().$implicit,c=i.rc(2);i.Hb(7),i.Zc(c.getUserName(n.insertedBy)),i.Hb(5),i.Zc(c.getContactNumber(n.insertedBy)),i.Hb(5),i.Zc(c.getDateTime(n.receivedDate)),i.Hb(2),i.zc("ngIf",!c.isOpenStatus(n.alertStatusId)),i.Hb(1),i.zc("ngIf",c.isOpenStatus(n.alertStatusId)),i.Hb(1),i.zc("ngIf",c.isInProgressStatus(n.alertStatusId))}}function I(t,e){if(1&t&&(i.Zb(0),i.bc(1,"li",7),i.bc(2,"div",8),i.bc(3,"div",9),i.bc(4,"div",10),i.bc(5,"div"),i.Xb(6,"img",11),i.ac(),i.bc(7,"div",12),i.bc(8,"h5"),i.Yc(9),i.ac(),i.ac(),i.ac(),i.ac(),i.bc(10,"div",13),i.bc(11,"span",14),i.Yc(12),i.ac(),i.ac(),i.ac(),i.bc(13,"div",15),i.bc(14,"p"),i.bc(15,"span",16),i.Yc(16,"Date:"),i.ac(),i.Yc(17),i.ac(),i.bc(18,"p"),i.bc(19,"span",16),i.Yc(20,"Block:"),i.ac(),i.Yc(21),i.ac(),i.ac(),i.ac(),i.bc(22,"div",17),i.Wc(23,C,1,0,"app-loader",1),i.Wc(24,k,22,6,"div",18),i.ac(),i.Yb()),2&t){var n=e.$implicit,c=i.rc(2);i.Hb(1),i.Lb("list-group-item collapsed ",c.getEmergencyType(n.alertTypeId)," "),i.Jb("data-target","#collapse",n.apartmentBlockUnitAlertId,""),i.Hb(4),i.Lb("s-circle ",c.getEmergencyType(n.alertTypeId)," text-center"),i.Hb(1),i.Bc("src","assets/images/",c.getEmergencyType(n.alertTypeId),"-e-icon.svg",i.Rc),i.Hb(3),i.Zc(c.getAlertName(n.alertTypeId)),i.Hb(2),i.zc("ngClass",c.getAlertStatus(n.alertStatusId)),i.Hb(1),i.Zc(c.getAlertStatus(n.alertStatusId)),i.Hb(5),i.Zc(c.getDate(n.receivedDate)),i.Hb(4),i.Zc(c.getBlock(n.apartmentBlockUnitId)),i.Hb(1),i.Bc("id","collapse",n.apartmentBlockUnitAlertId,""),i.Hb(1),i.zc("ngIf",c.isAlertUpdated),i.Hb(1),i.zc("ngIf",!c.isAlertUpdated)}}function w(t,e){1&t&&(i.Zb(0),i.bc(1,"div",33),i.bc(2,"div",34),i.bc(3,"h4"),i.Yc(4,"No Active Alerts available"),i.ac(),i.ac(),i.ac(),i.Yb())}function A(t,e){if(1&t&&(i.Zb(0),i.bc(1,"h3",2),i.Yc(2,"Active Alerts"),i.ac(),i.bc(3,"div",3),i.bc(4,"div",4),i.bc(5,"ul",5),i.Wc(6,I,25,16,"ng-container",6),i.Wc(7,w,5,0,"ng-container",1),i.ac(),i.ac(),i.ac(),i.Yb()),2&t){var n=i.rc();i.Hb(6),i.zc("ngForOf",n.alertList),i.Hb(1),i.zc("ngIf",n.isNoAlerts())}}var S,B,x,T,Y,U=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:o},{path:"active-alerts",component:(x=function(){function t(e,n,c,a,r,i){_classCallCheck(this,t),this.userService=e,this.apartmentService=n,this.alertService=c,this.lookupService=a,this.sharedService=r,this.cookieService=i,this.isAlertsLoaded=!1,this.isAlertUpdated=!1,this.userDetails=[],this.blockDetails=[],this.locationDetails=[]}return _createClass(t,[{key:"getEmergencyType",value:function(t){return 130==t?"medical":131==t?"theft":132==t?"fire":133==t?"shooter":134==t?"police":"other"}},{key:"getAlertName",value:function(t){var e=g.filter(this.emergencyTypeList,(function(e){if(e.lookupValueId===t)return e}));return void 0===e||0==e.length?"":e[0].lookupValueName.toLowerCase()}},{key:"getAlertStatus",value:function(t){var e=g.filter(this.alertTypeList,(function(e){if(e.lookupValueId===t)return e}));return void 0===e||0==e.length?"":e[0].lookupValueName.toLowerCase()}},{key:"getBlock",value:function(t){var e=g.filter(this.blockDetails,(function(e){if(e.apartmentBlockUnitId===t)return e}));return void 0===e||0==e.length?"":e[0].apartmentBlockNumber+" "+e[0].apartmentBlockUnitNumber}},{key:"getUserName",value:function(t){var e=g.filter(this.userDetails,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].firstName}},{key:"getContactNumber",value:function(t){var e=g.filter(this.userDetails,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].phoneNumber}},{key:"getDate",value:function(t){return f(t).format("MM/DD/YYYY, h:mm A")}},{key:"getDateTime",value:function(t){return f(t).format("MM/DD/YYYY, h:mm A")}},{key:"isOpenStatus",value:function(t){return 135==t}},{key:"isInProgressStatus",value:function(t){return 136==t}},{key:"isClosedStatus",value:function(t){return 137==t}},{key:"getLatitude",value:function(t){var e=g.filter(this.locationDetails,(function(e){if(e.userId===t)return e}));if(void 0===e||0==e.length)return"";var n=e[0].coords.split(",");return parseFloat(n[0])}},{key:"getLongitude",value:function(t){var e=g.filter(this.locationDetails,(function(e){if(e.userId===t)return e}));if(void 0===e||0==e.length)return"";var n=e[0].coords.split(",");return parseFloat(n[1])}},{key:"approveAlert",value:function(t,e){var n,c=this;this.isAlertUpdated=!0,null==t.gpslocation&&(t.gpslocation=" "),n="approve"==e?{apartmentBlockUnitAlertId:t.apartmentBlockUnitAlertId,apartmentBlockUnitId:t.apartmentBlockUnitId,receivedDate:t.receivedDate,alertTypeId:t.alertTypeId,location:"string",gpslocation:t.gpslocation,assignedTo:parseInt(this.cookieService.get("userId")),alertStatusId:136,notes:t.notes,isActive:t.isActive,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-06T13:45:09.296Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-06T13:45:09.296Z"}:{apartmentBlockUnitAlertId:t.apartmentBlockUnitAlertId,apartmentBlockUnitId:t.apartmentBlockUnitId,receivedDate:t.receivedDate,alertTypeId:t.alertTypeId,location:"string",gpslocation:t.gpslocation,assignedTo:parseInt(this.cookieService.get("userId")),alertStatusId:137,notes:t.notes,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-06T13:45:09.296Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-06T13:45:09.296Z"},this.alertService.updateApartmentBlockUnitAlert(n).subscribe((function(t){t.message?c.alertService.getAllApartmentBlockUnitAlertByApartmentId(parseInt(c.cookieService.get("apartmentId"))).subscribe((function(t){c.alertList=t.filter((function(t){return t.isActive})),c.isAlertUpdated=!1}),(function(t){console.log(t)})):c.isAlertUpdated=!1}),(function(t){console.log(t)}))}},{key:"isNoAlerts",value:function(){return 0==this.alertList.length}},{key:"ngOnInit",value:function(){var t=this;this.alert={},this.alert.gpsLocation=" ",this.alert.notes=" ",this.alertService.getAllApartmentBlockUnitAlertByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(e){t.alertList=e.filter((function(t){return t.isActive})),t.isAlertsLoaded=!0,console.log(t.alertList),g.each(t.alertList,(function(e){t.userService.getUserById(parseInt(e.insertedBy)).subscribe((function(e){t.userDetails.push(e[0]),console.log(t.userDetails)}),(function(t){console.log(t)})),t.apartmentService.getApartmentBlockUnitById(e.apartmentBlockUnitId).subscribe((function(e){t.blockDetails.push(e[0])}),(function(t){console.log(t)})),null!=e.gpslocation&&0!=e.gpslocation.length||(e.gpslocation="47.4925,19.0513"),t.locationDetails.push({userId:e.insertedBy,coords:e.gpslocation})}))}),(function(t){console.log(t)})),this.lookupService.getLookupValueByLookupTypeId(29).subscribe((function(e){t.emergencyTypeList=e})),this.lookupService.getLookupValueByLookupTypeId(30).subscribe((function(e){t.alertTypeList=e}))}}]),t}(),x.\u0275fac=function(t){return new(t||x)(i.Wb(s.a),i.Wb(l.a),i.Wb(p.a),i.Wb(u.a),i.Wb(d.a),i.Wb(b.a))},x.\u0275cmp=i.Qb({type:x,selectors:[["app-security-active-alerts"]],decls:3,vars:2,consts:[[1,"secuirty-active-alerts-wrapper"],[4,"ngIf"],[1,"main-title"],[1,"card","mb-30"],["id","accordion",1,"card-body","p-0"],[1,"list-group","tabs","clear"],[4,"ngFor","ngForOf"],["data-toggle","collapse","aria-expanded","true","attr.aria-controls","collapseOne"],[1,"details"],[1,"float-left"],[1,"media"],["width","14",3,"src"],[1,"media-body"],[1,"float-right","mr-4"],[1,"badge","small","min","ml-3","text-capitalize",3,"ngClass"],[1,"info"],[1,"mr-2"],["aria-labelledby","headingOne","data-parent","#accordion",1,"collapse",3,"id"],["class","additional-desp",4,"ngIf"],[1,"additional-desp"],[1,"row"],[1,"col-sm-6"],[1,"lists"],["class","row",4,"ngIf"],["class","btn-wrapper text-center",4,"ngIf"],[1,"col-sm-12","mt-4","mb-2"],[1,"input-box"],["placeholder","some text here","name","healthIssue",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["placeholder","some text here","name","healthIssue",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","some text here","name","healthIssue",3,"ngModel","disabled","ngModelChange"],["placeholder","some text here","name","healthIssue",3,"ngModel","ngModelChange"],[1,"btn-wrapper","text-center"],[1,"btn","blue","mt-4","mb-4",3,"click"],[1,"card"],[1,"card-body","gen-message"]],template:function(t,e){1&t&&(i.bc(0,"div",0),i.Wc(1,h,1,0,"app-loader",1),i.Wc(2,A,8,2,"ng-container",1),i.ac()),2&t&&(i.Hb(1),i.zc("ngIf",!e.isAlertsLoaded),i.Hb(1),i.zc("ngIf",e.isAlertsLoaded))},directives:[a.l,v.a,a.k,a.j,m.d,m.l,m.o],styles:['.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:3px;height:100%!important}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.medical[_ngcontent-%COMP%]:before{background-color:#00bcd4}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.theft[_ngcontent-%COMP%]:before{background-color:#ef60a5}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.fire[_ngcontent-%COMP%]:before{background-color:#ff9800}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.shooter[_ngcontent-%COMP%]:before{background-color:#9100ff}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.police[_ngcontent-%COMP%]:before{background-color:#06bf58}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 20px;width:100%!important;float:left;border:none}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.8rem;color:#373946;text-transform:capitalize;margin:2px 0 0}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:0 20px;width:100%!important;float:left;margin:10px 0 0}@media (max-width:576px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin:12px 0 0}}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;color:#373946;display:inline-block}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(:last-child){margin:0 40px 0 0!important}@media (max-width:576px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px}}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#8391a1}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-top:none}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]{padding:20px 35px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]:not(:last-child){margin:0 0 20px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.6rem;padding:0 0 4px;color:#191c1e}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;color:#8391a1}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:500;letter-spacing:.2px;font-size:1.6rem;color:#191c1e;margin:0 0 7px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{height:300px}@media (max-width:991px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{margin:15px 0 0;display:block}}']}),x)},{path:"history",component:(B=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),B.\u0275fac=function(t){return new(t||B)},B.\u0275cmp=i.Qb({type:B,selectors:[["app-security-history"]],decls:2,vars:0,template:function(t,e){1&t&&(i.bc(0,"p"),i.Yc(1," security-history works!\n"),i.ac())},styles:[""]}),B)},{path:"reports",component:(S=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),S.\u0275fac=function(t){return new(t||S)},S.\u0275cmp=i.Qb({type:S,selectors:[["app-security-reports"]],decls:2,vars:0,template:function(t,e){1&t&&(i.bc(0,"p"),i.Yc(1," security-reports works!\n"),i.ac())},styles:[""]}),S)},{path:"**",redirectTo:"settings",pathMatch:"full"}],D=((T=function t(){_classCallCheck(this,t)}).\u0275mod=i.Ub({type:T}),T.\u0275inj=i.Tb({factory:function(t){return new(t||T)},imports:[[r.f.forChild(U)],r.f]}),T),L=n("PCNd"),H=((Y=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Y)},Y.\u0275cmp=i.Qb({type:Y,selectors:[["app-security"]],decls:1,vars:0,template:function(t,e){1&t&&i.Xb(0,"router-outlet")},directives:[r.g],styles:[""]}),Y);n.d(e,"SecurityModule",(function(){return N}));var z,N=((z=function t(){_classCallCheck(this,t)}).\u0275mod=i.Ub({type:z,bootstrap:[H]}),z.\u0275inj=i.Tb({factory:function(t){return new(t||z)},imports:[[a.b,L.a,D]]}),z)}}]);