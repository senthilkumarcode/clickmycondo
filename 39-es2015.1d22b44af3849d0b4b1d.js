(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{r9Ow:function(t,e,i){"use strict";i.r(e);var c=i("ofXK"),n=i("tyNb"),o=i("Yt4J"),a=i("VeBv"),r=i("wbvY"),s=i("F/us"),d=i("fXoL"),l=i("0IaG"),u=i("b6Qw"),h=i("668k"),m=i("8mtn"),p=i("BR9Y"),g=i("3Pt+"),f=i("NhFE"),v=i("bvAq");const I=["viewInvoiceTypeRef"];function b(t,e){1&t&&d.ec(0,"app-loader")}function y(t,e){1&t&&(d.ic(0,"ul",5),d.ic(1,"li",6),d.ec(2,"span",7),d.fd(3,"Pending"),d.hc(),d.ic(4,"li",6),d.ec(5,"span",8),d.fd(6,"Nill"),d.hc(),d.hc())}function O(t,e){if(1&t){const t=d.jc();d.ic(0,"a",37),d.uc("click",(function(){d.Wc(t);const i=e.$implicit;return d.yc(2).getSingleBlock(i)})),d.fd(1),d.hc()}if(2&t){const t=e.$implicit;d.Ob(1),d.gd(t.apartmentBlockNumber)}}function D(t,e){1&t&&(d.ic(0,"span"),d.fd(1,"All Blocks"),d.hc())}function A(t,e){if(1&t&&(d.ic(0,"span"),d.fd(1),d.hc()),2&t){const t=d.yc(2);d.Ob(1),d.hd("Residents under ",t.singleBlock,"")}}function k(t,e){if(1&t){const t=d.jc();d.ic(0,"tr"),d.ic(1,"td",38),d.fd(2),d.hc(),d.ic(3,"td",39),d.fd(4),d.hc(),d.ic(5,"td",39),d.fd(6),d.hc(),d.ic(7,"td",38),d.fd(8),d.hc(),d.ic(9,"td",40),d.ec(10,"span",41),d.hc(),d.ic(11,"td",42),d.ic(12,"a",43),d.ec(13,"span",44),d.ec(14,"span",44),d.ec(15,"span",44),d.hc(),d.ic(16,"div",45),d.ic(17,"a",46),d.fd(18,"View History"),d.hc(),d.ic(19,"a",37),d.uc("click",(function(){d.Wc(t);const i=e.$implicit;return d.yc(2).showInvoiceTypes(i)})),d.fd(20,"Post Invoice"),d.hc(),d.ic(21,"a",46),d.fd(22,"Post Collection"),d.hc(),d.ic(23,"a",47),d.fd(24,"Print"),d.hc(),d.hc(),d.hc(),d.hc()}if(2&t){const t=e.$implicit,i=d.yc(2);d.Ob(2),d.gd(t.primayContact),d.Ob(2),d.gd(t.billToParty),d.Ob(2),d.id("",t.apartmentBlockNumber," ",t.apartmentBlockUnitNumber,""),d.Ob(2),d.gd(t.due),d.Ob(2),d.Gc("ngClass",i.getDueAmount(t.due)),d.Ob(7),d.Ic("routerLink","/ams/income/view-invoice-history/",t.apartmentBlockUnitId,""),d.Ob(4),d.Ic("routerLink","/ams/income/post-collection/",t.apartmentBlockUnitId,"")}}function S(t,e){if(1&t&&(d.ic(0,"tr",48),d.ic(1,"td",38),d.fd(2,"Net"),d.hc(),d.ec(3,"td",39),d.ec(4,"td",39),d.ic(5,"td",38),d.fd(6),d.hc(),d.ic(7,"td",40),d.ec(8,"span",41),d.hc(),d.ec(9,"td",38),d.hc()),2&t){const t=d.yc(2);d.Ob(6),d.gd(t.netDueAmount),d.Ob(2),d.Gc("ngClass",t.getDueAmount(t.netDueAmount))}}function C(t,e){1&t&&(d.ic(0,"div",49),d.ic(1,"p",50),d.fd(2,"No Data Available"),d.hc(),d.hc())}function L(t,e){if(1&t&&(d.ic(0,"div",51),d.ic(1,"p",50),d.fd(2,"Total Amount Due : "),d.ic(3,"span",52),d.fd(4),d.hc(),d.hc(),d.ic(5,"p",50),d.fd(6,"Total Excess Payments & Incentives Due : "),d.ic(7,"span",52),d.fd(8),d.hc(),d.hc(),d.ic(9,"p",50),d.fd(10,"Net Amount : "),d.ic(11,"span",52),d.fd(12),d.hc(),d.hc(),d.hc()),2&t){const t=d.yc(2);d.Ob(4),d.gd(t.totalDueAmount),d.Ob(4),d.gd(t.totalDueAmount-t.netDueAmount),d.Ob(4),d.gd(t.netDueAmount)}}function M(t,e){if(1&t){const t=d.jc();d.ic(0,"div",9),d.ic(1,"div",10),d.ic(2,"h6"),d.ec(3,"i-feather",11),d.fd(4,"Filter By"),d.hc(),d.ic(5,"div",12),d.ic(6,"a",13),d.uc("click",(function(){return d.Wc(t),d.yc().getAllBlockData("all")})),d.ic(7,"span"),d.fd(8,"All Blocks"),d.hc(),d.hc(),d.hc(),d.ic(9,"div",12),d.ic(10,"a",14),d.ic(11,"span"),d.fd(12),d.hc(),d.ic(13,"div",15),d.ec(14,"i",16),d.hc(),d.hc(),d.ic(15,"div",17),d.dd(16,O,2,1,"a",18),d.hc(),d.hc(),d.hc(),d.ic(17,"div",19),d.ic(18,"div",20),d.ic(19,"h5"),d.fd(20,"Sub Ledgers "),d.ic(21,"span",21),d.fd(22),d.hc(),d.hc(),d.ic(23,"p"),d.dd(24,D,2,0,"span",1),d.dd(25,A,2,1,"span",1),d.hc(),d.hc(),d.ic(26,"ul",22),d.ic(27,"li",23),d.ec(28,"i",24),d.ic(29,"input",25),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().subLedgerData=e})),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(30,"div",26),d.ic(31,"table",27),d.ic(32,"thead"),d.ic(33,"tr"),d.ic(34,"th",28),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("primayContact")})),d.fd(35,"Primary Contact "),d.ec(36,"span",29),d.hc(),d.ic(37,"th",28),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("billToParty")})),d.fd(38,"Bill to Party "),d.ec(39,"span",29),d.hc(),d.ic(40,"th",28),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("apartmentBlockNumber")})),d.fd(41,"Block Details "),d.ec(42,"span",29),d.hc(),d.ic(43,"th",28),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("due")})),d.fd(44,"Due"),d.ec(45,"span",29),d.hc(),d.ic(46,"th",30),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("status")})),d.fd(47,"Status"),d.ec(48,"span",29),d.hc(),d.ic(49,"th",31),d.fd(50,"Actions"),d.hc(),d.hc(),d.hc(),d.ic(51,"tbody"),d.dd(52,k,25,8,"tr",32),d.zc(53,"simpleSearch"),d.zc(54,"slice"),d.zc(55,"orderBy"),d.dd(56,S,10,2,"tr",33),d.hc(),d.hc(),d.dd(57,C,3,0,"div",34),d.dd(58,L,13,3,"div",35),d.ic(59,"app-pagination",36),d.uc("outputParams",(function(e){return d.Wc(t),d.yc().getIndexParams(e)})),d.hc(),d.hc(),d.hc()}if(2&t){const t=d.yc();d.Ob(6),d.Gc("ngClass",t.getSelected("all")),d.Ob(4),d.Gc("ngClass",t.getSelected("single")),d.Ob(2),d.gd(t.singleBlock),d.Ob(4),d.Gc("ngForOf",t.blockListData),d.Ob(6),d.gd(t.totalItems),d.Ob(2),d.Gc("ngIf","all"==t.filterSelected),d.Ob(1),d.Gc("ngIf","all"!=t.filterSelected),d.Ob(4),d.Gc("ngModel",t.subLedgerData),d.Ob(2),d.Gc("ngClass",t.isMobileView()),d.Ob(5),d.Gc("ngClass",t.getFieldOrderBy("primayContact")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("billToParty")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("apartmentBlockNumber")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("due")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("status")),d.Ob(4),d.Gc("ngForOf",d.Bc(53,22,d.Cc(54,25,d.Cc(55,29,t.subLedgerDataList,t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex),t.subLedgerData)),d.Ob(4),d.Gc("ngIf",t.isItemsAvailable()),d.Ob(1),d.Gc("ngIf",t.isNoItemsAvailable()),d.Ob(1),d.Gc("ngIf",t.isItemsAvailable()),d.Ob(1),d.Gc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}const G=function(){return{exact:!0}};function x(t,e){if(1&t){const t=d.jc();d.ic(0,"div",53),d.ic(1,"div",54),d.ec(2,"i-feather",55),d.hc(),d.ic(3,"div",56),d.ic(4,"h5"),d.fd(5,"Select Invoice Types"),d.hc(),d.hc(),d.ic(6,"div",57),d.ic(7,"div",58),d.ic(8,"ul",59),d.ic(9,"li",6),d.ic(10,"a",60),d.uc("click",(function(){return d.Wc(t),d.yc().dialogClose()})),d.fd(11,"Invoice - Single Line"),d.hc(),d.hc(),d.ic(12,"li",6),d.ic(13,"a",60),d.uc("click",(function(){return d.Wc(t),d.yc().dialogClose()})),d.fd(14,"Invoice - Multi Line"),d.hc(),d.hc(),d.ic(15,"li",6),d.ic(16,"a",61),d.uc("click",(function(){return d.Wc(t),d.yc().dialogClose()})),d.fd(17,"Credit Note"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.hc()}if(2&t){const t=e.$implicit;d.Ob(10),d.Ic("routerLink","/ams/income/post-invoice/",t.apartmentBlockUnitId,"/new"),d.Gc("routerLinkActiveOptions",d.Mc(7,G)),d.Ob(3),d.Ic("routerLink","/ams/income/post-multi-invoice/",t.apartmentBlockUnitId,"/new"),d.Gc("routerLinkActiveOptions",d.Mc(8,G)),d.Ob(3),d.Ic("routerLink","/ams/income/add-credit/",t.apartmentBlockUnitId,"/new"),d.Gc("ngClass",t.isInvoiceAvailable?"":"disabled")("routerLinkActiveOptions",d.Mc(9,G))}}let T=(()=>{class t{constructor(t,e,i,c,n,o){this.injector=t,this.dialog=e,this.apartmentService=i,this.accountsService=c,this.sharedService=n,this.cookieService=o,this.isSubLedgerDataLoaded=!1,this.subLedgerData="",this.ItemStartIndex=0,this.itemLimit=10,this.unitFieldType="unitno",this.unitOrder=!1,this.isMobile=!1,this.totalDueAmount=0,this.netDueAmount=0,this.filterSelected="all",this.singleBlock="Select Block"}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"desc":"asc":""}isMobileView(){return window.innerWidth<=767?"table-responsive":""}getDueAmount(t){return t>0?"high":"low"}getSelected(t){return this.filterSelected==t?"selected":""}clearFilter(){this.filterSelected="all",this.singleBlock="Select Block"}showInvoiceTypes(t){var e={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:t.apartmentBlockUnitId};this.accountsService.getCustInvoicesByApartmentBlockUnitId(e).subscribe(e=>{t.isInvoiceAvailable=0!=e.length,console.log(e),console.log(t),this.dialogRef=this.dialog.open(this.viewInvoiceTypeRef,{panelClass:"material",disableClose:!0,data:t})})}dialogClose(){this.dialogRef.close()}stopPropagation(t){t.stopPropagation()}getAllBlockData(){this.isSubLedgerDataLoaded=!1,this.filterSelected="all",this.singleBlock="Select Block",this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.subLedgerDataList=t,this.totalItems=this.subLedgerDataList.length,this.netDueAmount=0,this.totalDueAmount=0,s.each(this.subLedgerDataList,(t,e)=>{this.netDueAmount=this.netDueAmount+t.due,t.due>=0&&(this.totalDueAmount=this.totalDueAmount+t.due)}),this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isSubLedgerDataLoaded=!0})}getSingleBlock(t){this.filterSelected="single",this.singleBlock=t.apartmentBlockNumber,this.selectedBlockId=t.apartmentBlockId,this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.subLedgerDataList=t.filter(t=>t.apartmentBlockNumber==this.singleBlock),this.totalItems=this.subLedgerDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.netDueAmount=0,this.totalDueAmount=0,s.each(this.subLedgerDataList,(t,e)=>{this.netDueAmount=this.netDueAmount+t.due,t.due>=0&&(this.totalDueAmount=this.totalDueAmount+t.due)})})}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}ngOnInit(){this.apartmentService.getApartmentBlockByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.blockListData=t,this.getAllBlockData()})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(d.x),d.dc(l.b),d.dc(o.a),d.dc(a.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-sub-ledger"]],viewQuery:function(t,e){var i;1&t&&d.ld(I,!0),2&t&&d.Sc(i=d.vc())&&(e.viewInvoiceTypeRef=i.first)},decls:6,vars:3,consts:[[1,"income-sub-ledger-wrapper"],[4,"ngIf"],["class","legends list-inline",4,"ngIf"],["class","card clear card-table",4,"ngIf"],["viewInvoiceTypeRef",""],[1,"legends","list-inline"],[1,"list-inline-item"],[1,"dots","high"],[1,"dots","low"],[1,"card","clear","card-table"],[1,"card-body","filter-box"],["name","filter",1,"icon","mr-2"],[1,"dropdown"],["href","#","role","button","data-toggle","dropdown","id","AllBlockDropDown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle",3,"ngClass","click"],["href","#","role","button","data-toggle","dropdown","id","singleBlockDropDown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle",3,"ngClass"],[1,"arrow"],["aria-hidden","true",1,"fa","fa-angle-down"],["aria-labelledby","singleBlockDropDown",1,"dropdown-menu"],["href","javascript:void(0)",3,"click",4,"ngFor","ngForOf"],[1,"card-header"],[1,"float-left"],[1,"badge","blue"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],["scope","col",1,"max-50","text-center",3,"click"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["class","selected",4,"ngIf"],["class","button-wrapper border-top",4,"ngIf"],["class","button-wrapper",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],["href","javascript:void(0)",3,"click"],[1,"name"],[1,"grey"],[1,"name","text-center"],[1,"dots","ml-1",3,"ngClass"],[1,"name","actions","text-center"],["href","javascript:void(0)","role","button","data-toggle","dropdown","id","invoiceDropDown","aria-haspopup","true","aria-expanded","false"],[1,"action-dot"],["aria-labelledby","invoiceDropDown",1,"dropdown-menu","action-menu","dropdown-menu-right"],["href","javascript:void(0)",3,"routerLink"],["href","javascript:void(0)"],[1,"selected"],[1,"button-wrapper","border-top"],[1,"snippet"],[1,"button-wrapper"],[1,"ml-1"],[1,"menu-info"],["mat-dialog-close","",1,"close-icon"],["name","x","width","20",1,"icon","del"],[1,"title"],[1,"card"],[1,"card-body","p-0","lists","other"],[1,"list-group"],["href","javascript:void(0)","routerLinkActive","active",1,"tc-d-grey",3,"routerLink","routerLinkActiveOptions","click"],["href","javascript:void(0)","routerLinkActive","active",1,"tc-d-grey",3,"ngClass","routerLink","routerLinkActiveOptions","click"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.dd(1,b,1,0,"app-loader",1),d.dd(2,y,7,0,"ul",2),d.dd(3,M,60,33,"div",3),d.dd(4,x,18,10,"ng-template",null,4,d.ed),d.hc()),2&t&&(d.Ob(1),d.Gc("ngIf",!e.isSubLedgerDataLoaded),d.Ob(1),d.Gc("ngIf",e.isSubLedgerDataLoaded),d.Ob(1),d.Gc("ngIf",e.isSubLedgerDataLoaded))},directives:[c.l,h.a,m.b,c.j,c.k,p.c,p.a,g.d,g.n,g.q,f.a,n.e,l.c,n.d],pipes:[v.b,c.t,v.a],styles:[""]}),t})();var w=i("wd/R"),B=i("1kSV");function F(t,e){1&t&&d.ec(0,"app-loader")}function P(t,e){if(1&t&&(d.ic(0,"div",34),d.ic(1,"ul"),d.ic(2,"li"),d.ic(3,"p"),d.fd(4,"Comments"),d.hc(),d.ic(5,"small"),d.fd(6),d.hc(),d.hc(),d.hc(),d.hc()),2&t){const t=d.yc().$implicit;d.Ob(6),d.gd(t.comment)}}function N(t,e){if(1&t){const t=d.jc();d.ic(0,"tr"),d.ic(1,"td",26),d.fd(2),d.hc(),d.ic(3,"td",27),d.ic(4,"a",28),d.fd(5),d.hc(),d.dd(6,P,7,1,"ng-template",null,29,d.ed),d.hc(),d.ic(8,"td",27),d.fd(9),d.hc(),d.ic(10,"td",27),d.fd(11),d.hc(),d.ic(12,"td",27),d.fd(13),d.hc(),d.ic(14,"td"),d.ic(15,"label",30),d.ic(16,"input",31),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.isEmailsent=i})),d.hc(),d.ic(17,"span",32),d.uc("click",(function(){d.Wc(t);const e=d.yc(2);return e.setActive(e.item)})),d.hc(),d.hc(),d.hc(),d.ic(18,"td"),d.ic(19,"div",33),d.ic(20,"label",30),d.ic(21,"input",31),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.isSmssent=i})),d.hc(),d.ic(22,"span",32),d.uc("click",(function(){d.Wc(t);const e=d.yc(2);return e.setActive(e.item)})),d.hc(),d.hc(),d.hc(),d.hc(),d.hc()}if(2&t){const t=e.$implicit,i=d.Tc(7),c=d.yc(2);d.Ob(2),d.gd(t.receiptNumber),d.Ob(2),d.Gc("ngbPopover",i),d.Ob(1),d.hd(" ",t.name,""),d.Ob(4),d.gd(c.getDate(t.paymentDate)),d.Ob(2),d.id("",t.blockNum," ",t.flatNum,""),d.Ob(2),d.gd(t.amount),d.Ob(3),d.Gc("ngModel",t.isEmailsent),d.Ob(5),d.Gc("ngModel",t.isSmssent)}}const E=function(){return{exact:!0}};function W(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"div",2),d.ic(2,"div",3),d.ic(3,"a",4),d.ic(4,"div",5),d.ec(5,"img",6),d.hc(),d.ic(6,"span",7),d.fd(7,"View Credit Note"),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(8,"div",8),d.ic(9,"div",9),d.ic(10,"div",10),d.ic(11,"h5"),d.fd(12,"Total Receipts "),d.ic(13,"span",11),d.fd(14),d.hc(),d.hc(),d.hc(),d.ic(15,"ul",12),d.ic(16,"li",13),d.ec(17,"i",14),d.ic(18,"input",15),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().receiptsData=e})),d.hc(),d.hc(),d.ic(19,"li",16),d.ic(20,"a",17),d.ec(21,"i-feather",18),d.ic(22,"span"),d.fd(23,"Print"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(24,"div",19),d.ic(25,"table",20),d.ic(26,"thead"),d.ic(27,"tr"),d.ic(28,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("receiptNumber")})),d.fd(29,"Receipt No "),d.ec(30,"span",22),d.hc(),d.ic(31,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("name")})),d.fd(32,"Name "),d.ec(33,"span",22),d.hc(),d.ic(34,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("paymentDate")})),d.fd(35,"Payment Date"),d.ec(36,"span",22),d.hc(),d.ic(37,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("flatNum")})),d.fd(38,"Flat No"),d.ec(39,"span",22),d.hc(),d.ic(40,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("comment")})),d.fd(41,"Credit Note Amount"),d.ec(42,"span",22),d.hc(),d.ic(43,"th",23),d.fd(44,"Email Sent"),d.hc(),d.ic(45,"th",23),d.fd(46,"SMS Sent"),d.hc(),d.hc(),d.hc(),d.ic(47,"tbody"),d.dd(48,N,23,9,"tr",24),d.zc(49,"simpleSearch"),d.zc(50,"slice"),d.zc(51,"orderBy"),d.hc(),d.hc(),d.ic(52,"app-pagination",25),d.uc("outputParams",(function(e){return d.Wc(t),d.yc().getIndexParams(e)})),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.yc();d.Ob(3),d.Gc("routerLinkActiveOptions",d.Mc(25,E)),d.Ob(11),d.gd(t.totalItems),d.Ob(4),d.Gc("ngModel",t.receiptsData),d.Ob(7),d.Gc("ngClass",t.isMobileView()),d.Ob(5),d.Gc("ngClass",t.getFieldOrderBy("receiptNumber")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("name")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("paymentDate")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("flatNum")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("comment")),d.Ob(6),d.Gc("ngForOf",d.Bc(49,14,d.Cc(50,17,d.Cc(51,21,t.receiptsDataList,t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex),t.receiptsData)),d.Ob(4),d.Gc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let U=(()=>{class t{constructor(t,e,i,c,n,o){this.injector=t,this.dialog=e,this.apartmentService=i,this.accountsService=c,this.sharedService=n,this.cookieService=o,this.isReceiptsLoaded=!1,this.receiptsData="",this.ItemStartIndex=0,this.itemLimit=20,this.unitFieldType="unitno",this.unitOrder=!1,this.isMobile=!1}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"desc":"asc":""}getEmailStatus(t){return t?"Y":"N"}getDate(t){return w(t).format("DD/MM/YYYY")}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}setActive(t){return""}ngOnInit(){this.accountsService.GetIncomeTrackerReceiptsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.receiptsDataList=t,console.log(t),this.totalItems=this.receiptsDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isReceiptsLoaded=!0},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(d.x),d.dc(l.b),d.dc(o.a),d.dc(a.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-view-receipts"]],decls:3,vars:2,consts:[[1,"income-receipts-wrapper"],[4,"ngIf"],[1,"relative-card","float-right"],[1,"relative-icon"],["href","javascript:void(0)","routerLink","/ams/income/creditnote","routerLinkActive","active",3,"routerLinkActiveOptions"],[1,"icon-wrapper"],["src","assets/images/book-icon.svg","width","17",1,"svg"],[1,"d-inline-block"],[1,"card","card-table","clear"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","trans-white","mt_5"],["name","printer",1,"icon","print"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],["scope","col"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],[1,"grey"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",3,"ngbPopover"],["popContent",""],[1,"switch","float-left"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slider","round",3,"click"],[1,"form-group"],[1,"pop-desp"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.dd(1,F,1,0,"app-loader",1),d.dd(2,W,53,26,"ng-container",1),d.hc()),2&t&&(d.Ob(1),d.Gc("ngIf",!e.isReceiptsLoaded),d.Ob(1),d.Gc("ngIf",e.isReceiptsLoaded))},directives:[c.l,h.a,n.e,n.d,p.e,p.c,p.a,g.d,g.n,g.q,m.b,c.j,c.k,f.a,B.c,g.a],pipes:[v.b,c.t,v.a],styles:[""]}),t})();var R=i("NutR");function _(t,e){1&t&&d.ec(0,"app-loader")}function V(t,e){if(1&t&&(d.ic(0,"div",36),d.ic(1,"ul"),d.ic(2,"li"),d.ic(3,"h5"),d.fd(4,"Comments"),d.hc(),d.ic(5,"small"),d.fd(6),d.hc(),d.hc(),d.hc(),d.hc()),2&t){const t=d.yc().$implicit;d.Ob(6),d.gd(t.comment)}}const j=function(){return{exact:!0}};function q(t,e){if(1&t){const t=d.jc();d.ic(0,"tr"),d.ic(1,"td",26),d.fd(2),d.hc(),d.ic(3,"td",26),d.ic(4,"a",27),d.fd(5),d.hc(),d.dd(6,V,7,1,"ng-template",null,28,d.ed),d.hc(),d.ic(8,"td",29),d.fd(9),d.hc(),d.ic(10,"td",29),d.fd(11),d.hc(),d.ic(12,"td",29),d.fd(13),d.hc(),d.ic(14,"td"),d.ic(15,"label",30),d.ic(16,"input",31),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.isEmailSent=i})),d.hc(),d.ic(17,"span",32),d.uc("click",(function(){d.Wc(t);const i=e.$implicit;return d.yc(2).updateCreditItem(i)})),d.hc(),d.hc(),d.hc(),d.ic(18,"td"),d.ic(19,"div",33),d.ic(20,"label",30),d.ic(21,"input",31),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.isSmssent=i})),d.hc(),d.ic(22,"span",32),d.uc("click",(function(){d.Wc(t);const i=e.$implicit;return d.yc(2).updateCreditItem(i)})),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(23,"td"),d.ic(24,"a",34),d.ec(25,"i-feather",35),d.hc(),d.hc(),d.hc()}if(2&t){const t=e.$implicit,i=d.Tc(7),c=d.yc(2);d.Ob(2),d.gd(t.invoiceId),d.Ob(2),d.Gc("ngbPopover",i),d.Ob(1),d.hd(" ",c.getCustomerName(t.insertedBy),""),d.Ob(4),d.gd(c.getDate(t.insertedOn)),d.Ob(2),d.gd(c.getBlockDetails(t.invoiceId)),d.Ob(2),d.gd(t.amount),d.Ob(3),d.Gc("ngModel",t.isEmailSent),d.Ob(5),d.Gc("ngModel",t.isSmssent),d.Ob(3),d.Ic("routerLink","/ams/income/edit-credit/",t.creditNoteId,""),d.Gc("routerLinkActiveOptions",d.Mc(10,j))}}function $(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"div",2),d.ic(2,"div",3),d.ic(3,"a",4),d.ic(4,"div",5),d.ec(5,"img",6),d.hc(),d.ic(6,"span",7),d.fd(7,"View Receipts"),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(8,"div",8),d.ic(9,"div",9),d.ic(10,"div",10),d.ic(11,"h5"),d.fd(12,"Credit Notes "),d.ic(13,"span",11),d.fd(14),d.hc(),d.hc(),d.hc(),d.ic(15,"ul",12),d.ic(16,"li",13),d.ec(17,"i",14),d.ic(18,"input",15),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().creditNoteData=e})),d.hc(),d.hc(),d.ic(19,"li",16),d.ic(20,"a",17),d.ec(21,"i-feather",18),d.ic(22,"span"),d.fd(23,"Print"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(24,"div",19),d.ic(25,"table",20),d.ic(26,"thead"),d.ic(27,"tr"),d.ic(28,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("invoiceId")})),d.fd(29,"Invoice Id "),d.ec(30,"span",22),d.hc(),d.ic(31,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("postedBy")})),d.fd(32,"Name "),d.ec(33,"span",22),d.hc(),d.ic(34,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("postedOn")})),d.fd(35,"Posted Date"),d.ec(36,"span",22),d.hc(),d.ic(37,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("flatNo")})),d.fd(38,"Flat No"),d.ec(39,"span",22),d.hc(),d.ic(40,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("amount")})),d.fd(41,"Amount"),d.ec(42,"span",22),d.hc(),d.ic(43,"th",23),d.fd(44,"Sent Email"),d.hc(),d.ic(45,"th",23),d.fd(46,"SMS/Email"),d.hc(),d.ic(47,"th",23),d.fd(48,"Actions"),d.hc(),d.hc(),d.hc(),d.ic(49,"tbody"),d.dd(50,q,26,11,"tr",24),d.zc(51,"simpleSearch"),d.zc(52,"slice"),d.zc(53,"orderBy"),d.hc(),d.hc(),d.ic(54,"app-pagination",25),d.uc("outputParams",(function(e){return d.Wc(t),d.yc().getIndexParams(e)})),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.yc();d.Ob(3),d.Gc("routerLinkActiveOptions",d.Mc(25,j)),d.Ob(11),d.gd(t.totalItems),d.Ob(4),d.Gc("ngModel",t.creditNoteData),d.Ob(7),d.Gc("ngClass",t.isMobileView()),d.Ob(5),d.Gc("ngClass",t.getFieldOrderBy("invoiceId")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("postedBy")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("postedOn")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("flatNo")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("amount")),d.Ob(8),d.Gc("ngForOf",d.Bc(51,14,d.Cc(52,17,d.Cc(53,21,t.creditNoteDataList,t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex),t.creditNoteData)),d.Ob(4),d.Gc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let Y=(()=>{class t{constructor(t,e,i,c,n,o,a){this.injector=t,this.dialog=e,this.userService=i,this.apartmentService=c,this.accountsService=n,this.sharedService=o,this.cookieService=a,this.isCreditNoteLoaded=!1,this.creditNoteData="",this.ItemStartIndex=0,this.itemLimit=20,this.unitFieldType="unitno",this.unitOrder=!1,this.isMobile=!1}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"desc":"asc":""}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}getCustomerName(t){var e=s.filter(this.userDataList,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].firstName+" "+e[0].lastName}getBlockDetails(t){var e=s.filter(this.custInvoiceDataList,(function(e){if(e.invoiceGLAccounts[0].invoiceId===t)return e}));return void 0===e||0==e.length?"":e[0].apartmentBlockNumber+" "+e[0].apartmentBlockUnitNumber}getEmailStatus(t){return t?"Y":"N"}getDate(t){return w(t).format("DD/MM/YYYY")}updateCreditItem(t){setTimeout(()=>{this.isCreditNoteLoaded=!1;var e={creditNoteId:parseInt(t.creditNoteId),apartmentId:parseInt(this.cookieService.get("apartmentId")),amount:parseInt(t.amount),collectionId:parseInt(t.collectionId),invoiceId:parseInt(t.invoiceId),isEmailSent:t.isEmailSent,isSmssent:t.isSmssent,comment:t.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:(new Date).toISOString(),transReference1:"string",transReference2:"string",glAcctIndicator:"Income",apartmentBlockUnitId:parseInt(t.apartmentBlockUnitId)};this.accountsService.updateCreditNote(e).subscribe(t=>{t.message?(this.isCreditNoteLoaded=!0,this.sharedService.setAlertMessage("Credit Note updated successfully")):this.isCreditNoteLoaded=!0},t=>{this.isCreditNoteLoaded=!0})},1e3)}ngOnInit(){this.userDataList=[],this.userService.getAllUsers().subscribe(t=>{this.userDataList=t}),this.accountsService.getAllCreditNotes().subscribe(t=>{this.creditNoteDataList=t.filter(t=>t.apartmentId==parseInt(this.cookieService.get("apartmentId"))&&t.isActive),this.totalItems=this.creditNoteDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isCreditNoteLoaded=!0,this.accountsService.getCustInvoicesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.custInvoiceDataList=t.filter(t=>t.isActive)},t=>{console.log(t)})},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(d.x),d.dc(l.b),d.dc(R.a),d.dc(o.a),d.dc(a.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-view-credit"]],decls:3,vars:2,consts:[[1,"income-credit-note-wrapper"],[4,"ngIf"],[1,"relative-card","float-right"],[1,"relative-icon"],["href","javascript:void(0)","routerLink","/ams/income/receipts","routerLinkActive","active",3,"routerLinkActiveOptions"],[1,"icon-wrapper"],["src","assets/images/booking-icon.svg","width","17",1,"svg"],[1,"d-inline-block"],[1,"card","clear","card-table"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","l-blue","mt_5"],["name","printer",1,"icon","print"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],["scope","col"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",3,"ngbPopover"],["popContent",""],[1,"grey"],[1,"switch","float-left"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slider","round",3,"click"],[1,"form-group"],["href","javascript:void(0)","routerLinkActive","active",1,"mr-2",3,"routerLink","routerLinkActiveOptions"],["name","edit",1,"icon","edit"],[1,"pop-desp"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.dd(1,_,1,0,"app-loader",1),d.dd(2,$,55,26,"ng-container",1),d.hc()),2&t&&(d.Ob(1),d.Gc("ngIf",!e.isCreditNoteLoaded),d.Ob(1),d.Gc("ngIf",e.isCreditNoteLoaded))},directives:[c.l,h.a,n.e,n.d,p.e,p.c,p.a,g.d,g.n,g.q,m.b,c.j,c.k,f.a,B.c,g.a],pipes:[v.b,c.t,v.a],styles:[""]}),t})();var z=i("ThaB");function X(t,e){1&t&&d.ec(0,"app-loader")}function H(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"form",1,2),d.uc("ngSubmit",(function(){d.Wc(t);const e=d.Tc(2);return d.yc().submitReverseIncomeInvoiceForm(e)})),d.ic(3,"div",3),d.ic(4,"div",4),d.ic(5,"div",5),d.ic(6,"label"),d.fd(7,"Comments"),d.hc(),d.ic(8,"input",6),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().invoice.comment=e})),d.hc(),d.hc(),d.hc(),d.ic(9,"div",7),d.ic(10,"button",8),d.fd(11,"Submit"),d.hc(),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.Tc(2),e=d.yc();d.Ob(8),d.Gc("ngModel",e.invoice.comment),d.Ob(2),d.Gc("disabled",t.invalid)}}let Q=(()=>{class t{constructor(t,e,i,c,n,o){this.router=t,this.route=e,this.accountsService=i,this.sharedService=c,this.lookupService=n,this.cookieService=o,this.isInvoiceSubmitted=!0,this.isError=!1,this.alertMessage=""}submitReverseIncomeInvoiceForm(t){this.isInvoiceSubmitted=!1;let e={apartmentId:parseInt(this.cookieService.get("apartmentId")),amount:this.invoice.custInvoiceAmount,collectionId:0,invoiceId:this.invoice.custInvoiceId,isEmailSent:!0,isSmssent:!0,comment:this.invoice.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:null,updatedOn:null,transReference1:"string",transReference2:"string",glAcctIndicator:"Income"};this.accountsService.addCustTransReversal(e).subscribe(t=>{t.message?(this.isInvoiceSubmitted=!0,this.sharedService.setAlertMessage("Invoice reversed successfully")):(this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(d.dc(n.c),d.dc(n.a),d.dc(a.a),d.dc(r.a),d.dc(z.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-invoice-reverse"]],inputs:{invoice:"invoice"},decls:2,vars:2,consts:[[4,"ngIf"],["name","reverseIncomeInvoiceForm","novalidate","",3,"ngSubmit"],["reverseIncomeInvoiceForm","ngForm"],[1,"row"],[1,"col-sm-12"],[1,"input-box"],["type","text","placeholder","Enter text","name","comment","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue",3,"disabled"]],template:function(t,e){1&t&&(d.dd(0,X,1,0,"app-loader",0),d.dd(1,H,12,2,"ng-container",0)),2&t&&(d.Gc("ngIf",!e.isInvoiceSubmitted),d.Ob(1),d.Gc("ngIf",e.isInvoiceSubmitted))},directives:[c.l,h.a,g.B,g.o,g.p,p.a,g.d,g.x,g.n,g.q],styles:[""]}),t})();function J(t,e){1&t&&d.ec(0,"app-loader")}function Z(t,e){1&t&&(d.ic(0,"ul",26),d.ic(1,"li",27),d.ec(2,"span",28),d.fd(3,"Pending"),d.hc(),d.ic(4,"li",27),d.ec(5,"span",29),d.fd(6,"Nill"),d.hc(),d.hc())}function K(t,e){if(1&t&&(d.ic(0,"div",46),d.ic(1,"ul"),d.ic(2,"li"),d.ic(3,"h5"),d.fd(4,"Posted Date"),d.hc(),d.ic(5,"small"),d.fd(6),d.hc(),d.hc(),d.ic(7,"li"),d.ic(8,"h5"),d.fd(9,"Comment"),d.hc(),d.ic(10,"small"),d.fd(11),d.hc(),d.hc(),d.hc(),d.hc()),2&t){const t=d.yc().$implicit,e=d.yc(2);d.Ob(6),d.gd(e.getInvoiceDate(t.custInvoiceDate)),d.Ob(5),d.gd(t.comments)}}const tt=function(){return{exact:!0}};function et(t,e){if(1&t){const t=d.jc();d.ic(0,"tr"),d.ic(1,"td",30),d.ic(2,"a",31),d.fd(3),d.hc(),d.hc(),d.ic(4,"td",32),d.ic(5,"a",33),d.fd(6),d.hc(),d.dd(7,K,12,2,"ng-template",null,34,d.ed),d.hc(),d.ic(9,"td",30),d.fd(10),d.hc(),d.ic(11,"td",32),d.fd(12),d.hc(),d.ic(13,"td"),d.ic(14,"label",35),d.ic(15,"input",36),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.isEmailSent=i})),d.hc(),d.ic(16,"span",37),d.uc("click",(function(){d.Wc(t);const i=e.$implicit;return d.yc(2).updateInvoiceItem(i)})),d.hc(),d.hc(),d.hc(),d.ic(17,"td"),d.ic(18,"div",38),d.ic(19,"label",35),d.ic(20,"input",36),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.isSmssent=i})),d.hc(),d.ic(21,"span",37),d.uc("click",(function(){d.Wc(t);const i=e.$implicit;return d.yc(2).updateInvoiceItem(i)})),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(22,"td",39),d.ic(23,"a",40),d.ec(24,"i-feather",41),d.hc(),d.ic(25,"div",42),d.uc("click",(function(e){return d.Wc(t),d.yc(2).stopPropagation(e)})),d.ec(26,"app-income-invoice-reverse",43),d.hc(),d.ic(27,"a",44),d.ec(28,"i-feather",45),d.hc(),d.hc(),d.hc()}if(2&t){const t=e.$implicit,i=d.Tc(8),c=d.yc(2);d.Ob(3),d.gd(t.custInvoiceId),d.Ob(2),d.Gc("ngbPopover",i),d.Ob(1),d.hd(" ",c.getUserName(t.postedBy),""),d.Ob(4),d.gd(c.getAccountName(t.invoiceGLAccounts)),d.Ob(2),d.gd(t.custInvoiceAmount),d.Ob(3),d.Gc("ngModel",t.isEmailSent),d.Ob(5),d.Gc("ngModel",t.isSmssent),d.Ob(6),d.Gc("invoice",t),d.Ob(1),d.Ic("routerLink","/ams/income/edit-invoice/",t.custInvoiceId,""),d.Gc("routerLinkActiveOptions",d.Mc(10,tt))}}function it(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"div",2),d.ic(2,"div",3),d.ic(3,"a",4),d.ic(4,"div",5),d.ec(5,"img",6),d.hc(),d.ic(6,"span",7),d.fd(7,"View Sub Ledger"),d.hc(),d.hc(),d.hc(),d.hc(),d.dd(8,Z,7,0,"ul",8),d.ic(9,"div",9),d.ic(10,"div",10),d.ic(11,"div",11),d.ic(12,"h5"),d.fd(13,"All Invoices "),d.ic(14,"span",12),d.fd(15),d.hc(),d.hc(),d.hc(),d.ic(16,"ul",13),d.ic(17,"li",14),d.ec(18,"i",15),d.ic(19,"input",16),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().invoiceData=e})),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(20,"div",17),d.ic(21,"table",18),d.ic(22,"thead"),d.ic(23,"tr"),d.ic(24,"th",19),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("custInvoiceId")})),d.fd(25,"Invoice Id"),d.ec(26,"span",20),d.hc(),d.ic(27,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("postedDate")})),d.fd(28,"Posted By"),d.ec(29,"span",20),d.hc(),d.ic(30,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("glaccountId")})),d.fd(31,"Account"),d.ec(32,"span",20),d.hc(),d.ic(33,"th",21),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("custInvoiceAmount")})),d.fd(34,"Due"),d.ec(35,"span",20),d.hc(),d.ic(36,"th",22),d.fd(37,"Sent Email"),d.hc(),d.ic(38,"th",22),d.fd(39,"SMS/Email"),d.hc(),d.ic(40,"th",23),d.fd(41,"Actions"),d.hc(),d.hc(),d.hc(),d.ic(42,"tbody"),d.dd(43,et,29,11,"tr",24),d.zc(44,"simpleSearch"),d.zc(45,"slice"),d.zc(46,"orderBy"),d.hc(),d.hc(),d.ic(47,"app-pagination",25),d.uc("outputParams",(function(e){return d.Wc(t),d.yc().getIndexParams(e)})),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.yc();d.Ob(3),d.Gc("routerLinkActiveOptions",d.Mc(25,tt)),d.Ob(5),d.Gc("ngIf",t.isInvoiceDataLoaded),d.Ob(7),d.gd(t.totalItems),d.Ob(4),d.Gc("ngModel",t.invoiceData),d.Ob(2),d.Gc("ngClass",t.isMobileView()),d.Ob(5),d.Gc("ngClass",t.getFieldOrderBy("custInvoiceId")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("postedDate")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("glaccountId")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("custInvoiceAmount")),d.Ob(8),d.Gc("ngForOf",d.Bc(44,14,d.Cc(45,17,d.Cc(46,21,t.invoiceDataList,t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex),t.invoiceData)),d.Ob(4),d.Gc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let ct=(()=>{class t{constructor(t,e,i,c,n,o){this.router=t,this.route=e,this.userService=i,this.accountsService=c,this.sharedService=n,this.cookieService=o,this.isInvoiceDataLoaded=!1,this.invoiceData="",this.ItemStartIndex=0,this.itemLimit=20,this.unitFieldType="unitno",this.unitOrder=!1,this.isMobile=!1,this.glAccountIndicator="Income"}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"desc":"asc":""}getUserName(t){var e=s.filter(this.userDataList,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].firstName+" "+e[0].lastName}getInvoiceDate(t){return w(t).format("DD/MM/YYYY")}getAccountName(t){var e={glaccountId:0};e.glaccountId=null==t||0==t.length?0:t[0].glaccountId;var i=s.filter(this.glAccountListData,(function(t){if(t.glaccountId===e.glaccountId)return t}));return void 0===i||0==i.length?"":i[0].glaccountName}getDueAmount(t,e){return t-e>0?"high":"low"}isMobileView(){return window.innerWidth<=767?"table-responsive":""}stopPropagation(t){t.stopPropagation()}updateInvoiceItem(t){setTimeout(()=>{this.isInvoiceDataLoaded=!1;let e={custInvoiceId:t.custInvoiceId,apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:t.apartmentBlockUnitId,custInvoiceAmount:parseInt(t.custInvoiceAmount),custInvoiceDate:(new Date).toISOString(),dueDate:t.dueDate,tax1:0,tax2:0,tax3:0,isTax:t.isTax,isRecurCustInvoice:t.isRecurCustInvoice,isEmailSent:!1,isSmssent:!1,custInvoiceStatusId:1,postedBy:parseInt(this.cookieService.get("userId")),postedOn:(new Date).toISOString(),billToPay:"string",comments:t.comments||"",penaltyAmount:0,penaltyComment:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:(new Date).toISOString(),transReference1:"string",transReference2:"string",invoiceGLAccounts:[{invoiceGlaccountId:t.invoiceGLAccounts[0].invoiceGlaccountId,apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:t.invoiceGLAccounts[0].glaccountId,comments:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:(new Date).toISOString(),amount:t.custInvoiceAmount}]};this.accountsService.updateCustInvoice(e).subscribe(t=>{t.message?(this.isInvoiceDataLoaded=!0,this.sharedService.setAlertMessage("Invoice updated successfully")):this.isInvoiceDataLoaded=!0},t=>{this.isInvoiceDataLoaded=!0})},1e3)}ngOnInit(){parseInt(this.cookieService.get("apartmentId")),this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountListData=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),parseInt(this.cookieService.get("apartmentId")),this.accountsService.getCustInvoicesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.invoiceDataList=t,this.totalItems=this.invoiceDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.userDataList=t,this.isInvoiceDataLoaded=!0},t=>{})})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(n.c),d.dc(n.a),d.dc(R.a),d.dc(a.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-view-invoice"]],decls:3,vars:2,consts:[[1,"income-view-invoice-wrapper"],[4,"ngIf"],[1,"relative-card","float-right"],[1,"relative-icon"],["href","javascript:void(0)","routerLink","/ams/income/subledger","routerLinkActive","active",3,"routerLinkActiveOptions"],[1,"icon-wrapper"],["src","assets/images/book-icon.svg","width","17",1,"svg"],[1,"d-inline-block"],["class","legends list-inline",4,"ngIf"],[1,"card","clear","card-table"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",1,"max-50",3,"click"],[3,"ngClass"],["scope","col",3,"click"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"legends","list-inline"],[1,"list-inline-item"],[1,"dots","high"],[1,"dots","low"],[1,"grey"],["href","javascript:void(0)"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",1,"t-decor",3,"ngbPopover"],["popContent",""],[1,"switch","float-left"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slider","round",3,"click"],[1,"form-group"],[1,"name","text-center"],["href","javascript:void(0)","role","button","data-toggle","dropdown","id","reverseIncomeInvoiceDropDown","aria-haspopup","true","aria-expanded","false",1,"mr-3"],["name","activity",1,"icon","send","ot"],["aria-labelledby","reverseIncomeInvoiceDropDown",1,"dropdown-menu","page-menu","icon-menu","dropdown-menu-right",3,"click"],[3,"invoice"],["href","javascript:void(0)","routerLinkActive","active",1,"mr-2",3,"routerLink","routerLinkActiveOptions"],["name","edit",1,"icon","edit"],[1,"pop-desp"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.dd(1,J,1,0,"app-loader",1),d.dd(2,it,48,26,"ng-container",1),d.hc()),2&t&&(d.Ob(1),d.Gc("ngIf",!e.isInvoiceDataLoaded),d.Ob(1),d.Gc("ngIf",e.isInvoiceDataLoaded))},directives:[c.l,h.a,n.e,n.d,p.e,p.c,p.a,g.d,g.n,g.q,c.j,c.k,f.a,B.c,g.a,m.b,Q],pipes:[v.b,c.t,v.a],styles:[""]}),t})();var nt=i("z17N");function ot(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"li",34),d.fd(2),d.ic(3,"i-feather",35),d.uc("click",(function(){d.Wc(t);const i=e.$implicit;return d.yc(2).removeFilterItem(i)})),d.hc(),d.hc(),d.fc()}if(2&t){const t=e.$implicit,i=d.yc(2);d.Ob(1),d.Gc("ngClass",i.isItem(t)?"d-inline-block":"d-none"),d.Ob(1),d.hd(" ",i.getFilterData(t)," ")}}function at(t,e){if(1&t&&(d.gc(0),d.dd(1,ot,4,2,"ng-container",33),d.fc()),2&t){const t=d.yc();d.Ob(1),d.Gc("ngForOf",t.Object.keys(t.filter))}}let rt=(()=>{class t{constructor(t,e,i){this.accountsService=t,this.sharedService=e,this.cookieService=i,this.Object=Object,this.fieldParams=new d.q}onFilterFieldChange(t){this.filterDataList=t}getFilterData(t){if("postedDate"==t)return this.getInvoiceDate(this.filter[t]);if("billNo"==t)return this.filter[t];if("receiptNo"==t)return this.filter[t];if("isReversed"==t){if(this.filter[t])return"is Reverse"}else if("isCreditNote"==t&&this.filter[t])return"is Credit Note"}removeFilterItem(t){this.filter[t]=("string"==typeof t||"number"==typeof t)&&null,this.isFilterObjectNull()&&(this.resetFilter(),this.fieldParams.emit(this.filter))}isFilterObjectNull(){for(var t in this.filter)if(null!=this.filter[t]&&""!=this.filter[t])return!1;return!0}getInvoiceDate(t){return w(t).format("DD/MM/YYYY")}clearFilterItems(){this.resetFilter(),this.fieldParams.emit(this.filter)}submitIncomeFilterForm(t){this.fieldParams.emit(this.filter)}isItem(t){return!(!this.filter[t]||null==this.filter[t])}resetFilter(){this.filter={},this.filter.isReversed=null,this.filter.isCreditNote=null,this.filter.postedDate=null,this.filter.billNo=null,this.filter.receiptNo=null}ngOnInit(){this.resetFilter()}}return t.\u0275fac=function(e){return new(e||t)(d.dc(a.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-tracker-filter"]],outputs:{fieldParams:"fieldParams"},decls:53,vars:10,consts:[[1,"filter-box","p-0","mb-3","no-border"],["name","filter",1,"icon","mr-2"],[1,"card","mb-20","filter-card"],["name","incomeFilterForm","novalidate","",3,"ngSubmit"],["incomeFilterForm","ngForm"],[1,"card-header"],[1,"row"],[1,"col-sm-3"],[1,"select-box","mb-2"],["name","postedDate","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["postedDate",""],[1,"date-btn"],["name","calendar","width","18",1,"icon","date","float-left"],[1,"input-box","mb-2"],["type","number","OnlyNumber","true","placeholder","Enter text","name","billNo",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter text","name","receiptNo",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline"],[1,"list-inline-item","mr-5"],[1,"input-box","d-inline-block","oh","mb-0","mt-1"],[1,"form-group"],[1,"form-check","recur-check","float-left"],["type","checkbox","id","isInvoiceCreditNote","name","isInvoiceCreditNote",1,"form-check-input",3,"ngModel","value","ngModelChange"],["for","isInvoiceCreditNote",1,"form-check-label","tiny"],[1,"list-inline-item"],["type","checkbox","id","isInvoiceReverse","name","isInvoiceReverse",1,"form-check-input",3,"ngModel","ngModelChange"],["for","isInvoiceReverse",1,"form-check-label","tiny"],[1,"card-body"],[1,"col-sm-8"],[4,"ngIf"],[1,"col-sm-4","text-right"],[1,"btn","lime-green","sf",3,"disabled"],[1,"btn","trans-red","ml-3","sf",3,"click"],[4,"ngFor","ngForOf"],[1,"list-inline-item","filter-badge","grey-blue",3,"ngClass"],["name","x",1,"icon","del",3,"click"]],template:function(t,e){if(1&t){const t=d.jc();d.ic(0,"div",0),d.ic(1,"h6"),d.ec(2,"i-feather",1),d.fd(3,"Filter By"),d.hc(),d.hc(),d.ic(4,"div",2),d.ic(5,"form",3,4),d.uc("ngSubmit",(function(){d.Wc(t);const i=d.Tc(6);return e.submitIncomeFilterForm(i)})),d.ic(7,"div",5),d.ic(8,"div",6),d.ic(9,"div",7),d.ic(10,"div",8),d.ic(11,"label"),d.fd(12,"Posted On"),d.hc(),d.ic(13,"input",9),d.uc("ngModelChange",(function(t){return e.filter.postedDate=t})),d.hc(),d.ec(14,"owl-date-time",10,11),d.ic(16,"div",12),d.ec(17,"i-feather",13),d.hc(),d.hc(),d.hc(),d.ic(18,"div",7),d.ic(19,"div",14),d.ic(20,"label"),d.fd(21,"Bill Number"),d.hc(),d.ic(22,"input",15),d.uc("ngModelChange",(function(t){return e.filter.billNo=t})),d.hc(),d.hc(),d.hc(),d.ic(23,"div",7),d.ic(24,"div",14),d.ic(25,"label"),d.fd(26,"Receipt Number"),d.hc(),d.ic(27,"input",16),d.uc("ngModelChange",(function(t){return e.filter.receiptNo=t})),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(28,"div",5),d.ic(29,"ul",17),d.ic(30,"li",18),d.ic(31,"div",19),d.ic(32,"div",20),d.ic(33,"div",21),d.ic(34,"input",22),d.uc("ngModelChange",(function(t){return e.filter.isCreditNote=t})),d.hc(),d.ic(35,"label",23),d.fd(36,"Is Credit Note"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(37,"li",24),d.ic(38,"div",19),d.ic(39,"div",20),d.ic(40,"div",21),d.ic(41,"input",25),d.uc("ngModelChange",(function(t){return e.filter.isReversed=t})),d.hc(),d.ic(42,"label",26),d.fd(43,"Is Reverse"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(44,"div",27),d.ic(45,"div",6),d.ic(46,"div",28),d.dd(47,at,2,1,"ng-container",29),d.hc(),d.ic(48,"div",30),d.ic(49,"button",31),d.fd(50,"Apply Filter"),d.hc(),d.ic(51,"div",32),d.uc("click",(function(){return e.clearFilterItems()})),d.fd(52,"Clear"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.hc()}if(2&t){const t=d.Tc(15);d.Ob(13),d.Gc("owlDateTime",t)("owlDateTimeTrigger",t)("ngModel",e.filter.postedDate),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("ngModel",e.filter.billNo),d.Ob(5),d.Gc("ngModel",e.filter.receiptNo),d.Ob(7),d.Gc("ngModel",e.filter.isCreditNote),d.Ob(7),d.Gc("ngModel",e.filter.isReversed),d.Ob(6),d.Gc("ngIf",!e.isFilterObjectNull()),d.Ob(2),d.Gc("disabled",e.isFilterObjectNull())}},directives:[m.b,g.B,g.o,g.p,p.a,nt.b,g.d,nt.d,g.n,g.q,nt.a,g.s,p.b,g.a,c.l,c.k,c.j],styles:[""]}),t})();function st(t,e){1&t&&d.ec(0,"app-loader")}function dt(t,e){if(1&t&&(d.ic(0,"div",9),d.ic(1,"p",10),d.ic(2,"span"),d.fd(3,"Bill to party: "),d.hc(),d.fd(4),d.hc(),d.ic(5,"p",11),d.ic(6,"span"),d.fd(7,"Contact Person: "),d.hc(),d.fd(8),d.hc(),d.ic(9,"p",11),d.ic(10,"span"),d.fd(11,"Unit: "),d.hc(),d.fd(12),d.hc(),d.hc()),2&t){const t=d.yc(3);d.Ob(4),d.gd(t.accountDataList[0].billToParty),d.Ob(4),d.gd(t.accountDataList[0].primayContact),d.Ob(4),d.id("",t.accountDataList[0].apartmentBlockNumber," ",t.accountDataList[0].apartmentBlockUnitNumber,"")}}function lt(t,e){if(1&t&&(d.ic(0,"div",6),d.ic(1,"div",7),d.dd(2,dt,13,4,"div",8),d.hc(),d.hc()),2&t){const t=d.yc(2);d.Ob(2),d.Gc("ngIf",t.isAccountDataLoaded)}}function ut(t,e){if(1&t&&(d.ic(0,"div",4),d.dd(1,lt,3,1,"div",5),d.hc()),2&t){const t=d.yc();d.Ob(1),d.Gc("ngIf",t.isAccountDataLoaded)}}function ht(t,e){if(1&t){const t=d.jc();d.ic(0,"app-income-tracker-filter",12),d.uc("fieldParams",(function(e){return d.Wc(t),d.yc().getFieldParams(e)})),d.hc()}}function mt(t,e){1&t&&(d.ic(0,"ul",25),d.ic(1,"li",26),d.ic(2,"span",27),d.fd(3,"C"),d.hc(),d.fd(4,"Credit"),d.hc(),d.ic(5,"li",26),d.ic(6,"span",28),d.fd(7,"R"),d.hc(),d.fd(8,"Reversed"),d.hc(),d.hc())}function pt(t,e){if(1&t&&(d.ic(0,"p"),d.fd(1),d.hc()),2&t){const t=d.yc(2);d.Ob(1),d.id("Resident under ",t.accountDataList[0].apartmentBlockNumber," ",t.accountDataList[0].apartmentBlockUnitNumber,"")}}function gt(t,e){1&t&&d.ec(0,"app-loader")}function ft(t,e){if(1&t&&(d.ic(0,"div",55),d.ic(1,"ul"),d.ic(2,"li"),d.ic(3,"p"),d.fd(4,"Account"),d.hc(),d.ic(5,"small"),d.fd(6),d.hc(),d.hc(),d.ic(7,"li"),d.ic(8,"p"),d.fd(9,"Comment"),d.hc(),d.ic(10,"small"),d.fd(11),d.hc(),d.hc(),d.hc(),d.hc()),2&t){const t=d.yc().$implicit;d.Ob(6),d.gd(t.account),d.Ob(5),d.gd(t.comments)}}function vt(t,e){1&t&&(d.ic(0,"span"),d.fd(1,"R"),d.hc())}function It(t,e){1&t&&(d.ic(0,"span"),d.fd(1,"C"),d.hc())}function bt(t,e){1&t&&(d.ic(0,"div",55),d.ic(1,"h6"),d.fd(2,"Reverse"),d.hc(),d.hc())}const yt=function(){return{exact:!0}};function Ot(t,e){if(1&t&&(d.ic(0,"a",56),d.ec(1,"i-feather",57),d.hc()),2&t){const t=d.yc().$implicit;d.Ic("routerLink","/ams/income/edit-invoice/",t.billNo,""),d.Gc("routerLinkActiveOptions",d.Mc(2,yt))}}function Dt(t,e){if(1&t&&(d.ic(0,"a",56),d.ec(1,"i-feather",57),d.hc()),2&t){const t=d.yc().$implicit;d.Ic("routerLink","/ams/income/edit-invoice/",t.receiptNo,""),d.Gc("routerLinkActiveOptions",d.Mc(2,yt))}}function At(t,e){if(1&t){const t=d.jc();d.ic(0,"tr"),d.ic(1,"td",35),d.ic(2,"a",36),d.fd(3),d.hc(),d.dd(4,ft,12,2,"ng-template",null,37,d.ed),d.hc(),d.ic(6,"td",38),d.ic(7,"a",39),d.fd(8),d.hc(),d.hc(),d.ic(9,"td",38),d.ic(10,"a",39),d.fd(11),d.hc(),d.hc(),d.ic(12,"td",35),d.fd(13),d.hc(),d.ic(14,"td",35),d.fd(15),d.hc(),d.ic(16,"td",35),d.fd(17),d.hc(),d.ic(18,"td",40),d.ic(19,"span",41),d.dd(20,vt,2,0,"span",1),d.dd(21,It,2,0,"span",1),d.hc(),d.hc(),d.ic(22,"td",40),d.ic(23,"a",42),d.ec(24,"img",43),d.dd(25,bt,3,0,"ng-template",null,44,d.ed),d.hc(),d.ic(27,"div",45),d.uc("click",(function(e){return d.Wc(t),d.yc(3).stopPropagation(e)})),d.ic(28,"form",46,47),d.ic(30,"div",48),d.ic(31,"div",49),d.ic(32,"div",50),d.ic(33,"label"),d.fd(34,"Comments"),d.hc(),d.ic(35,"input",51),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc(3).reverse.comment=e})),d.hc(),d.hc(),d.hc(),d.ic(36,"div",52),d.ic(37,"a",53),d.uc("click",(function(){d.Wc(t);const i=e.$implicit;return d.yc(3).reverseItem(i)})),d.fd(38,"Submit"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.dd(39,Ot,2,3,"a",54),d.dd(40,Dt,2,3,"a",54),d.hc(),d.hc()}if(2&t){const t=e.$implicit,i=d.Tc(5),c=d.Tc(26),n=d.Tc(29),o=d.yc(3);d.Ob(2),d.Gc("ngbPopover",i),d.Ob(1),d.hd(" ",o.getInvoiceDate(t.postedDate),""),d.Ob(5),d.gd(t.billNo),d.Ob(3),d.gd(t.receiptNo),d.Ob(2),d.gd(t.invoiceAmount),d.Ob(2),d.gd(t.amountPaid),d.Ob(2),d.gd(t.balance),d.Ob(2),d.Gc("ngClass",t.isReversed?"red":""),d.Ob(1),d.Gc("ngIf",t.isReversed),d.Ob(1),d.Gc("ngIf",t.isCreditNote),d.Ob(2),d.Gc("ngbPopover",c)("ngClass",t.isReversed?"disabled":"reverse"),d.Ob(12),d.Gc("ngModel",o.reverse.comment),d.Ob(2),d.Gc("ngClass",n.invalid?"disabled":""),d.Ob(2),d.Gc("ngIf",null!=t.billNo),d.Ob(1),d.Gc("ngIf",null!=t.receiptNo)}}function kt(t,e){if(1&t){const t=d.jc();d.ic(0,"table",29),d.ic(1,"thead"),d.ic(2,"tr"),d.ic(3,"th",30),d.uc("click",(function(){return d.Wc(t),d.yc(2).sortUnitData("postedDate")})),d.ec(4,"span",31),d.fd(5," Posted On"),d.hc(),d.ic(6,"th",30),d.uc("click",(function(){return d.Wc(t),d.yc(2).sortUnitData("billNo")})),d.ec(7,"span",31),d.fd(8," Bill No"),d.hc(),d.ic(9,"th",30),d.uc("click",(function(){return d.Wc(t),d.yc(2).sortUnitData("receiptNo")})),d.ec(10,"span",31),d.fd(11," Receipt No"),d.hc(),d.ic(12,"th",30),d.uc("click",(function(){return d.Wc(t),d.yc(2).sortUnitData("invoiceAmount")})),d.ec(13,"span",31),d.fd(14," Billed Amount"),d.hc(),d.ic(15,"th",30),d.uc("click",(function(){return d.Wc(t),d.yc(2).sortUnitData("amountPaid")})),d.ec(16,"span",31),d.fd(17," Receipt Amount"),d.hc(),d.ic(18,"th",30),d.uc("click",(function(){return d.Wc(t),d.yc(2).sortUnitData("balance")})),d.ec(19,"span",31),d.fd(20," Due"),d.hc(),d.ic(21,"th",32),d.fd(22,"Status"),d.hc(),d.ic(23,"th",33),d.fd(24,"Actions"),d.hc(),d.hc(),d.hc(),d.ic(25,"tbody"),d.dd(26,At,41,16,"tr",34),d.zc(27,"simpleSearch"),d.zc(28,"slice"),d.zc(29,"orderBy"),d.hc(),d.hc()}if(2&t){const t=d.yc(2);d.Ob(4),d.Gc("ngClass",t.getFieldOrderBy("postedDate")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("billNo")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("receiptNo")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("invoiceAmount")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("amountPaid")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("balance")),d.Ob(7),d.Gc("ngForOf",d.Bc(27,7,d.Cc(28,10,d.Cc(29,14,t.invoiceDataList,t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex),t.invoiceData))}}function St(t,e){1&t&&(d.ic(0,"div",58),d.ic(1,"p",59),d.fd(2,"No Data Available"),d.hc(),d.hc())}function Ct(t,e){if(1&t){const t=d.jc();d.ic(0,"app-pagination",60),d.uc("outputParams",(function(e){return d.Wc(t),d.yc(2).getIndexParams(e)})),d.hc()}if(2&t){const t=d.yc(2);d.Gc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}function Lt(t,e){if(1&t){const t=d.jc();d.gc(0),d.dd(1,mt,9,0,"ul",13),d.ic(2,"div",14),d.ic(3,"div",15),d.ic(4,"div",7),d.ic(5,"h5"),d.fd(6,"Account History "),d.ic(7,"span",16),d.fd(8),d.hc(),d.hc(),d.dd(9,pt,2,2,"p",1),d.hc(),d.ic(10,"ul",17),d.ic(11,"li",18),d.ec(12,"i",19),d.ic(13,"input",20),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().invoiceData=e})),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(14,"div",21),d.dd(15,gt,1,0,"app-loader",1),d.dd(16,kt,30,18,"table",22),d.dd(17,St,3,0,"div",23),d.dd(18,Ct,1,4,"app-pagination",24),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.yc();d.Ob(1),d.Gc("ngIf",t.isInvoiceDataLoaded),d.Ob(7),d.gd(t.totalItems),d.Ob(1),d.Gc("ngIf",t.isAccountDataLoaded),d.Ob(4),d.Gc("ngModel",t.invoiceData),d.Ob(2),d.Gc("ngIf",!t.isInvoiceDataTableLoaded),d.Ob(1),d.Gc("ngIf",t.isInvoiceDataTableLoaded),d.Ob(1),d.Gc("ngIf",t.isNoItemsAvailable()),d.Ob(1),d.Gc("ngIf",t.isInvoiceDataTableLoaded)}}let Mt=(()=>{class t{constructor(t,e,i,c,n,o){this.router=t,this.route=e,this.userService=i,this.accountsService=c,this.sharedService=n,this.cookieService=o,this.isInvoiceDataLoaded=!1,this.isInvoiceDataTableLoaded=!0,this.invoiceData="",this.isAccountDataLoaded=!1,this.ItemStartIndex=0,this.itemLimit=20,this.unitFieldType="unitno",this.unitOrder=!1,this.isMobile=!1}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"desc":"asc":""}getUserName(t){var e=s.filter(this.userDataList,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].firstName+" "+e[0].lastName}getInvoiceDate(t){return w(t).format("DD/MM/YYYY")}getAccountName(t){var e={glaccountId:0};e.glaccountId=null==t||0==t.length?0:t[0].glaccountId;var i=s.filter(this.glAccountListData,(function(t){if(t.glaccountId===e.glaccountId)return t}));return void 0===i||0==i.length?"":i[0].glaccountName}getDueAmount(t,e){return t-e>0?"high":"low"}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isNoItemsAvailable(){return 0==this.totalItems}stopPropagation(t){t.stopPropagation()}getFieldParams(t){this.isInvoiceDataTableLoaded=!1,this.accountsService.GetAccountHistoryByApartmentUnitId(this.route.params.value.id).subscribe(e=>{this.invoiceDataList=e,null!=t.isReversed&&(this.invoiceDataList=this.invoiceDataList.filter(e=>e.isReversed==t.isReversed)),null!=t.isCreditNote&&(this.invoiceDataList=this.invoiceDataList.filter(e=>e.isCreditNote==t.isCreditNote)),null!=t.postedDate&&(this.invoiceDataList=this.invoiceDataList.filter(e=>w(e.postedDate).format("DD/MM/YYYY")==w(t.postedDate).format("DD/MM/YYYY"))),null!=t.billNo&&(this.invoiceDataList=this.invoiceDataList.filter(e=>e.billNo==t.billNo)),null!=t.receiptNo&&(this.invoiceDataList=this.invoiceDataList.filter(e=>e.receiptNo==t.receiptNo)),this.invoiceDataList.sort((t,e)=>new Date(e.postedDate).getTime()-new Date(t.postedDate).getTime()),this.totalItems=this.invoiceDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isInvoiceDataTableLoaded=!0},t=>{})}reverseItem(t){let e={apartmentId:parseInt(this.cookieService.get("apartmentId")),amount:t.invoiceAmount,collectionId:0,invoiceId:t.billNo,isEmailSent:!0,isSmssent:!0,comment:this.reverse.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:0,updatedOn:(new Date).toISOString(),transReference1:"string",transReference2:"string",glAcctIndicator:"string"};this.accountsService.addCustTransReversal(e).subscribe(t=>{t.message&&(this.reverse.comment="",this.sharedService.setAlertMessage("Invoice Reversed"),this.accountsService.GetAccountHistoryByApartmentUnitId(this.route.params.value.id).subscribe(t=>{this.invoiceDataList=t,this.invoiceDataList.sort((t,e)=>new Date(e.postedDate).getTime()-new Date(t.postedDate).getTime())}))},t=>{})}ngOnInit(){this.reverse={},this.accountsService.getAllGLAccounts().subscribe(t=>{var e=t.filter(t=>t.apartmentId==parseInt(this.cookieService.get("apartmentId")));this.glAccountListData=e}),parseInt(this.cookieService.get("apartmentId")),this.accountsService.GetAccountHistoryByApartmentUnitId(this.route.params.value.id).subscribe(t=>{this.invoiceDataList=t,console.log(this.invoiceDataList),this.invoiceDataList.sort((t,e)=>new Date(e.postedDate).getTime()-new Date(t.postedDate).getTime()),this.totalItems=this.invoiceDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isInvoiceDataLoaded=!0,this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.route.params.value.id),this.isAccountDataLoaded=!0}),this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.userDataList=t,this.isInvoiceDataLoaded=!0},t=>{})})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(n.c),d.dc(n.a),d.dc(R.a),d.dc(a.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-view-invoice-history"]],decls:5,vars:4,consts:[[1,"income-view-invoice-history-wrapper"],[4,"ngIf"],["class","card mb-20 no-shadow",4,"ngIf"],[3,"fieldParams",4,"ngIf"],[1,"card","mb-20","no-shadow"],["class","card-header at-header",4,"ngIf"],[1,"card-header","at-header"],[1,"float-left"],["class","sub-details",4,"ngIf"],[1,"sub-details"],[1,"d-inline-block","ft"],[1,"d-inline-block","ft","ml-md-4"],[3,"fieldParams"],["class","legends list-inline",4,"ngIf"],[1,"card","clear","card-table"],[1,"card-header"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],["class","table table-stretch table-responsive",4,"ngIf"],["class","button-wrapper border-top",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams",4,"ngIf"],[1,"legends","list-inline"],[1,"list-inline-item"],[1,"squares","medium","green"],[1,"squares","medium","red"],[1,"table","table-stretch","table-responsive"],["scope","col",3,"click"],[3,"ngClass"],[1,"max-50","text-center"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",1,"t-decor",3,"ngbPopover"],["popContent",""],[1,"grey"],["href","javascript:void(0)",1,"t-decor","tc-s-blue"],[1,"name","text-center"],[1,"squares","medium","ml-1",3,"ngClass"],["href","javascript:void(0)","placement","top","triggers","mouseenter:mouseleave","role","button","data-toggle","dropdown","id","reverseDropDownMenu","aria-haspopup","true","aria-expanded","false",1,"mr-2",3,"ngbPopover","ngClass"],["src","assets/images/undo-icon.svg",1,"svg","reverse"],["popReverseContent",""],["aria-labelledby","reverseDropDownMenu",1,"dropdown-menu","page-menu",3,"click"],["name","reverseInvoiceForm","novalidate",""],["reverseInvoiceForm","ngForm"],[1,"row"],[1,"col-sm-12"],[1,"input-box"],["type","text","placeholder","Enter text","name","comment","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue","t-no-decor",3,"ngClass","click"],["href","javascript:void(0)","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngIf"],[1,"pop-desp"],["href","javascript:void(0)","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["name","edit",1,"icon","edit"],[1,"button-wrapper","border-top"],[1,"snippet"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.dd(1,st,1,0,"app-loader",1),d.dd(2,ut,2,1,"div",2),d.dd(3,ht,1,0,"app-income-tracker-filter",3),d.dd(4,Lt,19,8,"ng-container",1),d.hc()),2&t&&(d.Ob(1),d.Gc("ngIf",!e.isInvoiceDataLoaded),d.Ob(1),d.Gc("ngIf",e.isInvoiceDataLoaded),d.Ob(1),d.Gc("ngIf",e.isInvoiceDataLoaded),d.Ob(1),d.Gc("ngIf",e.isInvoiceDataLoaded))},directives:[c.l,h.a,rt,p.c,p.a,g.d,g.n,g.q,c.j,c.k,B.c,p.e,g.B,g.o,g.p,g.x,n.e,n.d,m.b,f.a],pipes:[v.b,c.t,v.a],styles:[""]}),t})();function Gt(t,e){1&t&&d.ec(0,"app-loader")}function xt(t,e){if(1&t){const t=d.jc();d.ic(0,"tr",24),d.ic(1,"td",29),d.ic(2,"div",19),d.ic(3,"div",20),d.ic(4,"input",30),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.checked=i}))("ngModelChange",(function(){d.Wc(t);const i=e.$implicit;return d.yc(2).getSelectedAllDefaulters(i)})),d.hc(),d.ec(5,"label",31),d.hc(),d.hc(),d.hc(),d.ic(6,"td",32),d.fd(7),d.hc(),d.ic(8,"td",33),d.fd(9),d.hc(),d.ic(10,"td",33),d.fd(11),d.hc(),d.ic(12,"td",33),d.fd(13),d.hc(),d.ic(14,"td",32),d.fd(15),d.hc(),d.ic(16,"td",33),d.fd(17),d.hc(),d.hc()}if(2&t){const t=e.$implicit;d.Gc("ngClass",t.checked?"selected":""),d.Ob(4),d.Hc("id",t.invoiceNumber),d.Hc("name",t.invoiceNumber),d.Gc("ngModel",t.checked),d.Ob(1),d.Hc("for",t.invoiceNumber),d.Ob(2),d.gd(t.type),d.Ob(2),d.gd(t.unit),d.Ob(2),d.gd(t.primaryContact),d.Ob(2),d.gd(t.phone),d.Ob(2),d.gd(t.due),d.Ob(2),d.gd(t.emailSetting)}}const Tt=function(){return{exact:!0}};function wt(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"div",2),d.ic(2,"div",3),d.ic(3,"a",4),d.ic(4,"div",5),d.ec(5,"img",6),d.hc(),d.ic(6,"span",7),d.fd(7,"View Sub Ledger"),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(8,"div",8),d.ic(9,"div",9),d.ic(10,"div",10),d.ic(11,"h5"),d.fd(12,"View Defaulters "),d.ic(13,"span",11),d.fd(14),d.hc(),d.hc(),d.hc(),d.ic(15,"ul",12),d.ic(16,"li",13),d.ec(17,"i",14),d.ic(18,"input",15),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().defaultData=e})),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(19,"div",16),d.ic(20,"table",17),d.ic(21,"thead"),d.ic(22,"tr"),d.ic(23,"th",18),d.ic(24,"div",19),d.ic(25,"div",20),d.ic(26,"input",21),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().selectAllDefaulters=e}))("ngModelChange",(function(){return d.Wc(t),d.yc().getAllDefaulters()})),d.hc(),d.ec(27,"label",22),d.hc(),d.hc(),d.hc(),d.ic(28,"th",23),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("type")})),d.fd(29,"Type"),d.ec(30,"span",24),d.hc(),d.ic(31,"th",23),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("unit")})),d.fd(32,"Unit"),d.ec(33,"span",24),d.hc(),d.ic(34,"th",23),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("primaryContact")})),d.fd(35,"Primary Contact "),d.ec(36,"span",24),d.hc(),d.ic(37,"th",23),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("phone")})),d.fd(38,"Phone"),d.ec(39,"span",24),d.hc(),d.ic(40,"th",23),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("due")})),d.fd(41,"Amount"),d.ec(42,"span",24),d.hc(),d.ic(43,"th",23),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("emailSetting")})),d.fd(44,"Email"),d.ec(45,"span",24),d.hc(),d.hc(),d.hc(),d.ic(46,"tbody"),d.dd(47,xt,18,11,"tr",25),d.zc(48,"simpleSearch"),d.zc(49,"slice"),d.zc(50,"orderBy"),d.hc(),d.hc(),d.ic(51,"div",26),d.ic(52,"a",27),d.uc("click",(function(){return d.Wc(t),d.yc().sendEmail()})),d.ic(53,"span"),d.fd(54,"Send Email"),d.hc(),d.hc(),d.ic(55,"a",27),d.uc("click",(function(){return d.Wc(t),d.yc().sendSMS()})),d.ic(56,"span"),d.fd(57,"Send SMS"),d.hc(),d.hc(),d.hc(),d.ic(58,"app-pagination",28),d.uc("outputParams",(function(e){return d.Wc(t),d.yc().getIndexParams(e)})),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.yc();d.Ob(3),d.Gc("routerLinkActiveOptions",d.Mc(29,Tt)),d.Ob(11),d.gd(t.totalItems),d.Ob(4),d.Gc("ngModel",t.defaultData),d.Ob(2),d.Gc("ngClass",t.isMobileView()),d.Ob(6),d.Gc("ngModel",t.selectAllDefaulters),d.Ob(4),d.Gc("ngClass",t.getFieldOrderBy("type")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("unit")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("primaryContact")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("phone")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("due")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("emailSetting")),d.Ob(2),d.Gc("ngForOf",d.Bc(48,18,d.Cc(49,21,d.Cc(50,25,t.defaultDataList,t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex),t.defaultData)),d.Ob(5),d.Gc("ngClass",t.isDefaultSelected?"":"disabled"),d.Ob(3),d.Gc("ngClass",t.isDefaultSelected?"":"disabled"),d.Ob(3),d.Gc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let Bt=(()=>{class t{constructor(t,e,i,c,n,o){this.router=t,this.route=e,this.userService=i,this.accountsService=c,this.sharedService=n,this.cookieService=o,this.isDefaultersDataLoaded=!1,this.defaultData="",this.ItemStartIndex=0,this.itemLimit=20,this.unitFieldType="unitno",this.unitOrder=!1,this.isMobile=!1,this.isDefaultSelected=!1,this.selectAllDefaulters=!1,this.sendMessage=null}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"desc":"asc":""}getAllDefaulters(){this.selectAllDefaulters?(s.each(this.defaultDataList,t=>{t.checked=!0}),this.isDefaultSelected=!0):(s.each(this.defaultDataList,t=>{t.checked=!1}),this.isDefaultSelected=!1)}getSelectedAllDefaulters(t){var e=0;s.each(this.defaultDataList,t=>{t.checked&&e++}),this.isDefaultSelected=e>0,0==e&&(this.selectAllDefaulters=!1),e==this.defaultDataList.length&&(this.selectAllDefaulters=!0)}sendEmail(){this.isDefaultersDataLoaded=!0,s.each(this.defaultDataList,(t,e)=>{})}sendSMS(){this.isDefaultersDataLoaded=!0,s.each(this.defaultDataList,(t,e)=>{})}isMobileView(){return window.innerWidth<=767?"table-responsive":""}onResize(t){this.isMobile=t.target.innerWidth<=991}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}ngOnInit(){this.accountsService.GetIncomeTrackerDefaulterByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.defaultDataList=t,this.totalItems=this.defaultDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isDefaultersDataLoaded=!0},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(n.c),d.dc(n.a),d.dc(R.a),d.dc(a.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-view-defaulters"]],hostBindings:function(t,e){1&t&&d.uc("resize",(function(t){return e.onResize(t)}),!1,d.Vc)},decls:3,vars:2,consts:[[1,"income-view-defaulters-wrapper"],[4,"ngIf"],[1,"relative-card","float-right"],[1,"relative-icon"],["href","javascript:void(0)","routerLink","/ams/income/subledger","routerLinkActive","active",3,"routerLinkActiveOptions"],[1,"icon-wrapper"],["src","assets/images/book-icon.svg","width","17",1,"svg"],[1,"d-inline-block"],[1,"card","clear","card-table"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",1,"select"],[1,"form-group"],[1,"form-check","float-left"],["type","checkbox","id","selectAllDefaulters","name","selectAllDefaulters",1,"form-check-input",3,"ngModel","ngModelChange"],["for","selectAllDefaulters",1,"form-check-label"],["scope","col",3,"click"],[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"button-wrapper"],[1,"btn","lime-green","sf",3,"ngClass","click"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"select"],["type","checkbox",1,"form-check-input",3,"id","name","ngModel","ngModelChange"],[1,"form-check-label",3,"for"],[1,"name"],[1,"grey"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.dd(1,Gt,1,0,"app-loader",1),d.dd(2,wt,59,30,"ng-container",1),d.hc()),2&t&&(d.Ob(1),d.Gc("ngIf",!e.isDefaultersDataLoaded),d.Ob(1),d.Gc("ngIf",e.isDefaultersDataLoaded))},directives:[c.l,h.a,n.e,n.d,p.e,p.c,p.a,g.d,g.n,g.q,c.j,p.d,g.a,c.k,f.a],pipes:[v.b,c.t,v.a],styles:[""]}),t})();var Ft=i("wlDI");function Pt(t,e){1&t&&(d.ic(0,"h5"),d.fd(1,"Post Single Invoice"),d.hc())}function Nt(t,e){1&t&&(d.ic(0,"h5"),d.fd(1,"Edit Single Invoice"),d.hc())}function Et(t,e){if(1&t&&(d.ic(0,"div",18),d.ic(1,"p",19),d.ic(2,"span"),d.fd(3,"Bill to party: "),d.hc(),d.fd(4),d.hc(),d.ic(5,"p",20),d.ic(6,"span"),d.fd(7,"Contact Person: "),d.hc(),d.fd(8),d.hc(),d.ic(9,"p",20),d.ic(10,"span"),d.fd(11,"Unit: "),d.hc(),d.fd(12),d.hc(),d.hc()),2&t){const t=d.yc(2);d.Ob(4),d.gd(t.accountDataList[0].billToParty),d.Ob(4),d.gd(t.accountDataList[0].primayContact),d.Ob(4),d.id("",t.accountDataList[0].apartmentBlockNumber," ",t.accountDataList[0].apartmentBlockUnitNumber,"")}}function Wt(t,e){if(1&t&&(d.ic(0,"div",16),d.ic(1,"div",9),d.dd(2,Et,13,4,"div",17),d.hc(),d.hc()),2&t){const t=d.yc();d.Ob(2),d.Gc("ngIf",t.isAccountDataLoaded)}}function Ut(t,e){1&t&&d.ec(0,"app-loader")}function Rt(t,e){if(1&t&&(d.ic(0,"option",43),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.glaccountId),d.Ob(1),d.gd(t.glaccountName)}}function _t(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"div",22),d.ic(2,"div",23),d.ic(3,"label"),d.fd(4,"VAT"),d.hc(),d.ic(5,"input",44),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc(2).invoice.vatPercent=e})),d.hc(),d.hc(),d.hc(),d.ic(6,"div",22),d.ic(7,"div",23),d.ic(8,"label"),d.fd(9,"Discount"),d.hc(),d.ic(10,"input",45),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc(2).invoice.discount=e})),d.hc(),d.hc(),d.hc(),d.ic(11,"div",22),d.ic(12,"div",23),d.ic(13,"label"),d.fd(14,"Total Amount"),d.hc(),d.ic(15,"input",46),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc(2).invoice.totalAmount=e})),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.yc(2);d.Ob(5),d.Gc("ngModel",t.invoice.vatPercent),d.Ob(5),d.Gc("ngModel",t.invoice.discount),d.Ob(5),d.Gc("ngModel",t.invoice.totalAmount)}}function Vt(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"div",21),d.ic(2,"div",22),d.ic(3,"div",23),d.ic(4,"label"),d.fd(5,"Invoice Amount*"),d.hc(),d.ic(6,"input",24),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().invoice.custInvoiceAmount=e}))("ngModelChange",(function(){d.Wc(t);const e=d.yc();return e.onInvoiceAmountChange(e.invoice.custInvoiceAmount)})),d.hc(),d.hc(),d.hc(),d.ic(7,"div",22),d.ic(8,"div",25),d.ic(9,"label"),d.fd(10,"Account*"),d.hc(),d.ic(11,"select",26),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().invoice.glaccountId=e})),d.ic(12,"option",27),d.fd(13,"Select"),d.hc(),d.dd(14,Rt,2,2,"option",28),d.hc(),d.hc(),d.hc(),d.ic(15,"div",22),d.ic(16,"div",23),d.ic(17,"label"),d.fd(18,"Invoice Date*"),d.hc(),d.ic(19,"input",29),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().invoice.dueDate=e})),d.hc(),d.ec(20,"owl-date-time",30,31),d.ic(22,"div",32),d.ec(23,"i-feather",33),d.hc(),d.hc(),d.hc(),d.ic(24,"div",22),d.ic(25,"div",23),d.ic(26,"label"),d.fd(27,"Comments"),d.hc(),d.ic(28,"input",34),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().invoice.comments=e})),d.hc(),d.hc(),d.hc(),d.ic(29,"div",35),d.ic(30,"div",36),d.ic(31,"div",37),d.ic(32,"div",38),d.ic(33,"input",39),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().invoice.isTax=e}))("ngModelChange",(function(){d.Wc(t);const e=d.yc();return e.onVatChange(e.invoice.isTax)})),d.hc(),d.ic(34,"label",40),d.fd(35,"VAT"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.dd(36,_t,16,3,"ng-container",10),d.ic(37,"div",41),d.ic(38,"button",42),d.fd(39,"Submit"),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.Tc(21),e=d.yc(),i=d.Tc(15);d.Ob(6),d.Gc("ngModel",e.invoice.custInvoiceAmount),d.Ob(5),d.Gc("ngModel",e.invoice.glaccountId),d.Ob(3),d.Gc("ngForOf",e.glAccountListData),d.Ob(5),d.Gc("owlDateTime",t)("owlDateTimeTrigger",t)("ngModel",e.invoice.dueDate),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("ngModel",e.invoice.comments),d.Ob(5),d.Gc("ngModel",e.invoice.isTax),d.Ob(3),d.Gc("ngIf",e.invoice.isTax),d.Ob(2),d.Gc("disabled",i.invalid)}}const jt=function(){return{exact:!0}};let qt=(()=>{class t{constructor(t,e,i,c,n,o,a,r){this.router=t,this.route=e,this.accountsService=i,this.userService=c,this.apartmentService=n,this.sharedService=o,this.lookupService=a,this.cookieService=r,this.invoiceId="",this.isEditInvoice=!1,this.isNewInvoice=!1,this.isInvoiceSubmitted=!0,this.isError=!1,this.alertMessage="",this.isAccountDataLoaded=!1,this.glAccountIndicator="Income"}submitIncomeInvoiceForm(t){if(this.isInvoiceSubmitted=!1,this.isEditInvoice){let t={custInvoiceId:this.invoice.custInvoiceId,apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:this.invoice.apartmentBlockUnitId,custInvoiceAmount:parseInt(this.invoice.totalAmount),custInvoiceDate:(new Date).toISOString(),dueDate:this.invoice.dueDate,tax1:0,tax2:0,tax3:0,isTax:this.invoice.isTax,isRecurCustInvoice:this.invoice.isRecurCustInvoice,isEmailSent:!1,isSmssent:!1,custInvoiceStatusId:1,postedBy:parseInt(this.cookieService.get("userId")),postedOn:(new Date).toISOString(),billToPay:"string",comments:this.invoice.comments||"",penaltyAmount:0,penaltyComment:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:(new Date).toISOString(),transReference1:"string",transReference2:"string",invoiceGLAccounts:[{invoiceGlaccountId:this.invoice.invoiceGlaccountId,apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:parseInt(this.invoice.glaccountId),comments:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:(new Date).toISOString(),amount:parseInt(this.invoice.totalAmount)}]};this.accountsService.updateCustInvoice(t).subscribe(t=>{t.message?(this.isInvoiceSubmitted=!0,this.sharedService.setAlertMessage("Invoice updated successfully"),this.router.navigate(["ams/income/subledger"])):(this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}else{let t={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:parseInt(this.route.params.value.id),custInvoiceAmount:parseInt(this.invoice.totalAmount),custInvoiceDate:(new Date).toISOString(),dueDate:this.invoice.dueDate,tax1:0,tax2:0,tax3:0,isTax:this.invoice.isTax,isRecurCustInvoice:this.invoice.isRecurCustInvoice,isEmailSent:!1,isSmssent:!1,custInvoiceStatusId:1,postedBy:parseInt(this.cookieService.get("userId")),postedOn:(new Date).toISOString(),billToPay:"string",comments:this.invoice.comments||"",penaltyAmount:0,penaltyComment:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:null,updatedOn:(new Date).toISOString(),transReference1:"string",transReference2:"string",invoiceGLAccounts:[{apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:parseInt(this.invoice.glaccountId),comments:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:null,updatedOn:(new Date).toISOString(),amount:parseInt(this.invoice.totalAmount)}]};this.accountsService.addCustInvoice(t).subscribe(t=>{t.message?(this.isInvoiceSubmitted=!0,this.sharedService.setAlertMessage("Invoice added successfully"),this.router.navigate(["ams/income/subledger"])):(this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}}onInvoiceAmountChange(t){this.invoice.totalAmount=this.invoice.isTax?t+t*((this.invoice.vatPercent-this.invoice.discount)/100):t}onVatChange(t){this.invoice.totalAmount=this.invoice.custInvoiceAmount+this.invoice.custInvoiceAmount*((this.invoice.vatPercent-this.invoice.discount)/100)}ngOnInit(){if(this.invoice={},this.invoice.primaryContact="",this.invoice.glaccountId="",this.invoice.isRecurCustInvoice=!0,this.invoice.isTax=!1,null!=this.route.params.value.id&&null==this.route.params.value.type){this.isEditInvoice=!0;var t={apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:this.route.params.value.id};this.accountsService.getCustInvoiceById(t).subscribe(t=>{this.invoice=t[0],this.invoice.invoiceGlaccountId=this.invoice.invoiceGLAccounts[0].invoiceGlaccountId,this.invoice.glaccountId=this.invoice.invoiceGLAccounts[0].glaccountId,this.apartmentBlockUnitId=this.invoice.apartmentBlockUnitId,console.log(this.invoice),this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.apartmentBlockUnitId),this.isAccountDataLoaded=!0})},t=>{}),this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.userDataList=t.filter(t=>t.isActive),this.apartmentService.getAllApartmentBlockUnitUsersByApartmentBlockUnitId(this.apartmentBlockUnitId).subscribe(t=>{var e=s.filter(this.userDataList,e=>e.userId==t[0].userId);this.invoice.primaryContact=e[0].firstName+" "+e[0].lastName})})}else this.isNewInvoice=!0,this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.route.params.value.id),this.isAccountDataLoaded=!0}),this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.userDataList=t.filter(t=>t.isActive),this.apartmentService.getAllApartmentBlockUnitUsersByApartmentBlockUnitId(this.route.params.value.id).subscribe(t=>{var e=s.filter(this.userDataList,e=>e.userId==t[0].userId);this.invoice.primaryContact=e[0].firstName+" "+e[0].lastName})});this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountListData=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),this.lookupService.getLookupValueByLookupTypeId(77).subscribe(t=>{this.vatTypeDataList=t,this.invoice.vatPercent=parseFloat(this.vatTypeDataList[0].lookupValueName)}),this.lookupService.getLookupValueByLookupTypeId(75).subscribe(t=>{this.discountTypeDataList=t,this.invoice.discount=parseFloat(this.discountTypeDataList[0].lookupValueName)})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(n.c),d.dc(n.a),d.dc(a.a),d.dc(R.a),d.dc(o.a),d.dc(r.a),d.dc(z.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-post-invoice"]],decls:20,vars:9,consts:[[1,"income-post-invoice-wrapper"],[1,"relative-card","float-right"],[1,"relative-icon"],["href","javascript:void(0)","routerLink","/ams/income/subledger","routerLinkActive","active",3,"routerLinkActiveOptions"],[1,"icon-wrapper"],["src","assets/images/book-icon.svg","width","17",1,"svg"],[1,"d-inline-block"],[1,"card","clear","mb-30"],[1,"card-header"],[1,"float-left"],[4,"ngIf"],["class","card-header at-header",4,"ngIf"],["name","postIncomeInvoiceForm","novalidate","",3,"ngSubmit"],["postIncomeInvoiceForm","ngForm"],[1,"card-body"],[3,"message","isError"],[1,"card-header","at-header"],["class","sub-details",4,"ngIf"],[1,"sub-details"],[1,"d-inline-block","ft"],[1,"d-inline-block","ft","ml-md-4"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["type","number","OnlyNumber","true","placeholder","Enter text","name","invoiceAmount","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"select-box"],["name","accountType","id","accountType","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","invoiceDueDate","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["invoiceDueDate",""],[1,"date-btn"],["name","calendar","width","18",1,"icon","date","float-left"],["type","text","placeholder","Enter text","name","comments",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-8"],[1,"input-box","d-inline-block","oh"],[1,"form-group","mt-sm-35"],[1,"form-check","recur-check","float-left"],["type","checkbox","id","GSTInvoiceChecked","name","GSTInvoiceChecked",1,"form-check-input",3,"ngModel","ngModelChange"],["for","GSTInvoiceChecked",1,"form-check-label","tiny"],[1,"col-sm-12","text-right"],[1,"btn","blue",3,"disabled"],[3,"value"],["type","number","OnlyNumber","true","placeholder","","name","invoiceVatPercent","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","","name","invoiceDiscount","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","","name","totalAmount","readonly","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){const t=d.jc();d.ic(0,"div",0),d.ic(1,"div",1),d.ic(2,"div",2),d.ic(3,"a",3),d.ic(4,"div",4),d.ec(5,"img",5),d.hc(),d.ic(6,"span",6),d.fd(7,"View Sub Ledger"),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(8,"div",7),d.ic(9,"div",8),d.ic(10,"div",9),d.dd(11,Pt,2,0,"h5",10),d.dd(12,Nt,2,0,"h5",10),d.hc(),d.hc(),d.dd(13,Wt,3,1,"div",11),d.ic(14,"form",12,13),d.uc("ngSubmit",(function(){d.Wc(t);const i=d.Tc(15);return e.submitIncomeInvoiceForm(i)})),d.ic(16,"div",14),d.dd(17,Ut,1,0,"app-loader",10),d.ec(18,"app-alert-message",15),d.dd(19,Vt,40,11,"ng-container",10),d.hc(),d.hc(),d.hc(),d.hc()}2&t&&(d.Ob(3),d.Gc("routerLinkActiveOptions",d.Mc(8,jt)),d.Ob(8),d.Gc("ngIf",!e.isEditInvoice&&e.isNewInvoice),d.Ob(1),d.Gc("ngIf",e.isEditInvoice&&!e.isNewInvoice),d.Ob(1),d.Gc("ngIf",e.isAccountDataLoaded),d.Ob(4),d.Gc("ngIf",!e.isInvoiceSubmitted),d.Ob(1),d.Gc("message",e.alertMessage)("isError",e.isError),d.Ob(1),d.Gc("ngIf",e.isInvoiceSubmitted))},directives:[n.e,n.d,p.e,c.l,g.B,g.o,g.p,Ft.a,h.a,p.a,g.s,g.d,p.b,g.x,g.n,g.q,g.y,g.r,g.A,c.k,nt.b,nt.d,nt.a,m.b,g.a],styles:[""]}),t})();const $t=["searchFieldElem"];function Yt(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"li",8),d.uc("click",(function(){d.Wc(t);const i=e.$implicit,c=d.yc();return c.getSelectedItem(i,c.fieldItemName)})),d.fd(2),d.hc(),d.fc()}if(2&t){const t=e.$implicit,i=d.yc();d.Ob(1),d.Gc("ngClass",i.isSelectedItem(t,i.fieldModel)),d.Ob(1),d.hd(" ",i.getItemName(t,i.fieldItemName)," ")}}let zt=(()=>{class t{constructor(t){this.cdRef=t,this.isItemSelected=!1,this.inputChange=new d.q,this.inputStatus=new d.q}isFieldRequired(){return"required"==this.fieldRequired}getSelectedItem(t,e){this.fieldModel=t[e],this.inputChange.emit(t),this.isItemSelected=!0}getItemName(t,e){return t[e]}isSelectedItem(t,e){return t==e?"selected":""}clearList(){this.fieldModel="",this.isItemSelected=!1,document.querySelectorAll(".user-search-field-list").forEach((function(t){t.classList.remove("selected")}))}isFieldModelChanged(){this.isItemSelected=!1,setTimeout(()=>{this.el.nativeElement.classList.contains("ng-valid")?this.inputStatus.emit(!0):this.inputStatus.emit(!1)},200)}ngOnInit(){}ngAfterViewInit(){this.el.nativeElement.classList.contains("ng-valid")&&this.inputStatus.emit(!0)}ngOnChanges(t){null!=this.fieldModel&&(this.isItemSelected=""!=this.fieldModel)}}return t.\u0275fac=function(e){return new(e||t)(d.dc(d.i))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-select-search-box"]],viewQuery:function(t,e){var i;1&t&&d.bd($t,!0),2&t&&d.Sc(i=d.vc())&&(e.el=i.first)},inputs:{fieldName:"fieldName",fieldText:"fieldText",fieldPlaceholder:"fieldPlaceholder",fieldModel:"fieldModel",fieldRequired:"fieldRequired",fieldList:"fieldList",isLabel:"isLabel",fieldItemName:"fieldItemName"},outputs:{inputChange:"inputChange",inputStatus:"inputStatus"},features:[d.Nb([],[{provide:g.c,useExisting:g.p}]),d.Mb],decls:10,vars:15,consts:[[1,"search-wrapper"],[1,"text-uppercase",3,"for","ngClass"],["type","text","autocomplete","off",1,"form-control","search","multi-search",3,"ngClass","placeholder","name","ngModel","required","ngModelChange"],["searchFieldElem",""],[1,"search-control",3,"ngClass"],["name","x",1,"icon","edit",3,"click"],[1,"select-list-dropdown"],[4,"ngFor","ngForOf"],[1,"user-search-field-list",3,"ngClass","click"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.ic(1,"label",1),d.fd(2),d.hc(),d.ic(3,"input",2,3),d.uc("ngModelChange",(function(t){return e.fieldModel=t}))("ngModelChange",(function(){return e.isFieldModelChanged()})),d.hc(),d.ic(5,"span",4),d.ic(6,"i-feather",5),d.uc("click",(function(){return e.clearList()})),d.hc(),d.hc(),d.ic(7,"div",6),d.dd(8,Yt,3,2,"ng-container",7),d.zc(9,"simpleSearch"),d.hc(),d.hc()),2&t&&(d.Ob(1),d.Hc("for",e.fieldName),d.Gc("ngClass","true"==e.isLabel?"":"d-none"),d.Ob(1),d.gd(e.fieldText),d.Ob(1),d.Hc("placeholder",e.fieldPlaceholder),d.Hc("name",e.fieldName),d.Gc("ngClass",e.isItemSelected?"no-link":"")("ngModel",e.fieldModel)("required",e.isFieldRequired()?"required":null),d.Ob(2),d.Gc("ngClass",e.isItemSelected?"d-inline-block":"d-none"),d.Ob(3),d.Gc("ngForOf",d.Dc(9,10,e.fieldList,e.fieldModel,"",e.isItemSelected)))},directives:[c.j,p.a,g.d,p.c,g.n,g.q,g.x,m.b,c.k],pipes:[v.b],styles:[""]}),t})();const Xt=["selectFieldElem"];function Ht(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"li",9),d.uc("click",(function(){d.Wc(t);const i=e.$implicit,c=d.yc();return c.getSelectedItem(i,c.fieldItemName)})),d.fd(2),d.hc(),d.fc()}if(2&t){const t=e.$implicit,i=d.yc();d.Ob(1),d.Gc("ngClass",i.isSelectedItem(t,i.fieldModel)),d.Ob(1),d.gd(i.getItemName(t,i.fieldItemName))}}let Qt=(()=>{class t{constructor(){this.isDisabled=!0,this.inputChange=new d.q,this.inputStatus=new d.q,this.isItemSelected=!1}isFieldRequired(){return"required"==this.fieldRequired}getSelectedItem(t,e){this.fieldModel=t[e],this.inputChange.emit(t),this.inputStatus.emit(!0),this.isItemSelected=!0}getItemName(t,e){return t[e]}isSelectedItem(t,e){return t==e?"selected":""}clearList(){this.fieldModel="",this.isItemSelected=!1,this.inputStatus.emit(!1)}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.el.nativeElement.classList.contains("ng-valid")&&this.inputStatus.emit(!0)},200)}ngDoCheck(){"null"!=this.fieldModel&&"undefined"!=this.fieldModel&&0!=this.fieldModel||(this.fieldModel=null)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Xb({type:t,selectors:[["app-select-box"]],viewQuery:function(t,e){var i;1&t&&d.bd(Xt,!0),2&t&&d.Sc(i=d.vc())&&(e.el=i.first)},inputs:{fieldName:"fieldName",fieldText:"fieldText",fieldPlaceholder:"fieldPlaceholder",fieldModel:"fieldModel",fieldRequired:"fieldRequired",fieldList:"fieldList",fieldClass:"fieldClass",isDisabled:"isDisabled",fieldItemName:"fieldItemName",isLabel:"isLabel"},outputs:{inputChange:"inputChange",inputStatus:"inputStatus"},decls:10,vars:13,consts:[[1,"form-group",3,"ngClass"],[3,"for","ngClass"],["type","text","readonly","","autocomplete","off",3,"placeholder","name","required","ngModel","ngModelChange"],["selectFieldElem",""],[1,"select-arrow","down"],[1,"select-list-dropdown"],[4,"ngFor","ngForOf"],[1,"select-control",3,"ngClass"],["name","x",1,"icon","del",3,"click"],[3,"ngClass","click"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.ic(1,"label",1),d.fd(2),d.hc(),d.ic(3,"input",2,3),d.uc("ngModelChange",(function(t){return e.fieldModel=t})),d.hc(),d.ec(5,"span",4),d.ic(6,"div",5),d.dd(7,Ht,3,2,"ng-container",6),d.hc(),d.hc(),d.ic(8,"div",7),d.ic(9,"i-feather",8),d.uc("click",(function(){return e.clearList()})),d.hc(),d.hc()),2&t&&(d.Gc("ngClass",e.isDisabled?"disabled":""),d.Ob(1),d.Hc("for",e.fieldName),d.Gc("ngClass","true"==e.isLabel?"":"d-none"),d.Ob(1),d.gd(e.fieldText),d.Ob(1),d.Sb("form-control select ",e.fieldClass,""),d.Hc("placeholder",e.fieldPlaceholder),d.Hc("name",e.fieldName),d.Gc("required",e.isFieldRequired()?"required":null)("ngModel",e.fieldModel),d.Ob(4),d.Gc("ngForOf",e.fieldList),d.Ob(1),d.Gc("ngClass",e.isItemSelected?"d-inline-block":"d-none"))},directives:[c.j,p.a,g.d,g.x,g.n,g.q,c.k,m.b],styles:[""]}),t})();const Jt=["postIncomeMultiInvoiceFieldsForm"];function Zt(t,e){if(1&t){const t=d.jc();d.ic(0,"tr"),d.ic(1,"td"),d.ic(2,"div",10),d.ic(3,"app-select-search-box",11),d.uc("inputChange",(function(e){return d.Wc(t),d.yc().onAccountChange(e)})),d.hc(),d.hc(),d.hc(),d.ic(4,"td"),d.ic(5,"div",12),d.ic(6,"input",13),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.amount=i}))("ngModelChange",(function(){d.Wc(t);const i=e.$implicit,c=e.index;return d.yc().onInvoiceAmountChange(i.amount,c)})),d.hc(),d.hc(),d.hc(),d.ic(7,"td"),d.ic(8,"div",12),d.ic(9,"textarea",14),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.comments=i}))("ngModelChange",(function(){d.Wc(t);const i=e.$implicit;return d.yc().onCommentChange(i.comments)})),d.fd(10,"\t\t\t\t                "),d.hc(),d.hc(),d.hc(),d.ic(11,"td"),d.ic(12,"div",15),d.ic(13,"div",16),d.ic(14,"div",12),d.ic(15,"input",17),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.discountAmount=i})),d.hc(),d.hc(),d.hc(),d.ic(16,"div",16),d.ic(17,"div",18),d.ic(18,"app-select-box",19),d.uc("inputChange",(function(i){d.Wc(t);const c=e.index;return d.yc().onDiscountChange(i,c)}))("inputStatus",(function(i){d.Wc(t);const c=e.index;return d.yc().onDiscountStatus(i,c)})),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(19,"td"),d.ic(20,"div",15),d.ic(21,"div",20),d.ic(22,"div",21),d.ic(23,"app-select-box",22),d.uc("inputChange",(function(e){return d.Wc(t),d.yc().onVatChange(e)})),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(24,"td",23),d.ic(25,"div",12),d.ic(26,"input",24),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.totalAmount=i})),d.hc(),d.hc(),d.hc(),d.ic(27,"td",25),d.ic(28,"div",26),d.uc("click",(function(){return d.Wc(t),d.yc().deleteBlock()})),d.ec(29,"i-feather",27),d.hc(),d.ic(30,"div",28),d.ec(31,"i-feather",29),d.hc(),d.hc(),d.hc()}if(2&t){const t=e.$implicit,i=e.index,c=d.yc();d.Ob(3),d.Ic("fieldName","accountType",i,""),d.Gc("fieldModel",t.glaccountId)("fieldList",c.glAccountListData),d.Ob(3),d.Gc("ngModel",t.amount),d.Ob(3),d.Gc("ngModel",t.comments),d.Ob(6),d.Gc("ngModel",t.discountAmount)("readonly",!t.isDiscount),d.Ob(3),d.Ic("fieldName","discountType",i,""),d.Gc("fieldModel",t.discountId)("fieldRequired","required")("fieldList",c.curTypeDataList),d.Ob(5),d.Ic("fieldName","vatType",i,""),d.Gc("fieldModel",t.vatid)("fieldRequired","required")("fieldList",c.vatTypeDataList),d.Ob(3),d.Gc("ngModel",t.totalAmount),d.Ob(2),d.Gc("ngClass",c.isArrayOne()?"delete":"disabled"),d.Ob(2),d.Gc("ngClass",c.invoiceForm.valid?"valid":"disabled")}}let Kt=(()=>{class t{constructor(t,e,i,c,n,o,a){this.cd=t,this.router=e,this.route=i,this.accountsService=c,this.sharedService=n,this.lookupService=o,this.cookieService=a,this.invoiceId="",this.isEditInvoice=!1,this.isInvoiceSubmitted=!0,this.isError=!1,this.alertMessage="",this.glAccountIndicator="Income",this.fieldParams=new d.q}deleteBlock(){this.invoiceGLAccountsArray.splice(this.index,1),this.fieldParams.emit(this.invoiceGLAccountsArray)}isArrayOne(){return this.invoiceGLAccountsArray.length>1}isMobileView(){return window.innerWidth<=767?"table-responsive":""}onAccountChange(t){this.invoiceGLAccountsArray[this.index].glaccountId=parseInt(t.glaccountId),this.invoiceGLAccountsArray[this.index].form=this.invoiceForm.valid,this.fieldParams.emit(this.invoiceGLAccountsArray)}onInvoiceAmountChange(t,e){this.invoiceGLAccountsArray[e].amount=parseFloat(t),this.invoiceGLAccountsArray[e].totalAmount=parseFloat(t),this.invoiceGLAccountsArray[e].form=this.invoiceForm.valid,this.fieldParams.emit(this.invoiceGLAccountsArray)}onDiscountChange(t,e){this.invoiceGLAccountsArray[e].isDiscount=!0}onDiscountStatus(t,e){this.invoiceGLAccountsArray[e].isDiscount=t,this.invoiceGLAccountsArray[e].discountAmount=""}onInvoiceTotalAmountChange(t){this.invoiceGLAccountsArray[this.index].amount=parseFloat(t),this.invoiceGLAccountsArray[this.index].form=this.invoiceForm.valid,this.fieldParams.emit(this.invoiceGLAccountsArray)}onCommentChange(t){this.invoiceGLAccountsArray[this.index].comments=t,this.invoiceGLAccountsArray[this.index].form=this.invoiceForm.valid,this.fieldParams.emit(this.invoiceGLAccountsArray)}onVatChange(t){this.invoiceGLAccountsData.totalAmount=this.invoiceGLAccountsData.amount+this.invoiceGLAccountsData.amount*((this.invoiceGLAccountsData.vatPercent-this.invoiceGLAccountsData.discount)/100),this.fieldParams.emit(this.invoiceGLAccountsArray)}ngOnInit(){this.invoiceGLAccountsData=this.invoiceGLAccountsArray[this.index],this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountListData=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),this.lookupService.getLookupValueByLookupTypeId(77).subscribe(t=>{this.vatTypeDataList=t}),this.lookupService.getLookupValueByLookupTypeId(75).subscribe(t=>{this.discountTypeDataList=t}),this.lookupService.getLookupValueByLookupTypeId(88).subscribe(t=>{this.curTypeDataList=t})}ngOnChanges(t){this.invoiceGLAccountsData=this.invoiceGLAccountsArray[this.index]}}return t.\u0275fac=function(e){return new(e||t)(d.dc(d.i),d.dc(n.c),d.dc(n.a),d.dc(a.a),d.dc(r.a),d.dc(z.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-post-multi-invoice-fields"]],viewQuery:function(t,e){var i;1&t&&d.bd(Jt,!0),2&t&&d.Sc(i=d.vc())&&(e.invoiceForm=i.first)},inputs:{index:"index",invoiceGLAccountsArray:"invoiceGLAccountsArray"},outputs:{fieldParams:"fieldParams"},features:[d.Mb],decls:23,vars:2,consts:[[1,"income-post-invoice-fields-wrapper"],["name","postIncomeMultiInvoiceFieldsForm"],["postIncomeMultiInvoiceFieldsForm","ngForm"],[1,"invoice-fields",3,"ngClass"],[1,"table","table-stretch","table-special","table-responsive"],[1,"w-300"],[1,"w-150"],[1,"w-200"],[1,"w-70"],[4,"ngFor","ngForOf"],[1,"input-box","special-box"],["fieldText","t5r4","isLabel","false","fieldItemName","glaccountName","fieldPlaceholder","Type...","fieldRequired","'required'",3,"fieldName","fieldModel","fieldList","inputChange"],[1,"input-box"],["type","number","OnlyNumber","true","OnlyNumber","true","placeholder","Enter","name","invoiceAmount","required","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Enter","name","comments","required","","autocomplete","off",3,"ngModel","ngModelChange"],[1,"d-flex"],[1,"float-left","mr-3"],["type","number","OnlyNumber","true","placeholder","Enter","name","discountAmount","autocomplete","off",1,"form-control",3,"ngModel","readonly","ngModelChange"],[1,"input-box","w-85","mt-7"],["fieldText","","fieldItemName","lookupValueName","isLabel","false","fieldPlaceholder","Select",3,"fieldName","fieldModel","fieldRequired","fieldList","inputChange","inputStatus"],[1,"float-left","mr-3","ml-3"],[1,"input-box","w-95","mt-7"],["fieldText","","fieldItemName","lookupValueName","isLabel","false","fieldPlaceholder","Select",3,"fieldName","fieldModel","fieldRequired","fieldList","inputChange"],[1,"grey-bg"],["type","number","OnlyNumber","true","placeholder","","name","totalAmount","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"vta-m","text-center"],[1,"float-close",3,"ngClass","click"],["name","minus",1,"icon","rotate"],[1,"float-close",3,"ngClass"],["name","check",1,"icon","rotate"]],template:function(t,e){if(1&t&&(d.ic(0,"div",0),d.ic(1,"form",1,2),d.ic(3,"div",3),d.ic(4,"table",4),d.ic(5,"thead"),d.ic(6,"tr"),d.ic(7,"th",5),d.fd(8,"Account*"),d.hc(),d.ic(9,"th",6),d.fd(10,"Invoice Amount*"),d.hc(),d.ic(11,"th",5),d.fd(12,"Comments*"),d.hc(),d.ic(13,"th",7),d.fd(14,"Discount"),d.hc(),d.ic(15,"th",7),d.fd(16,"Tax"),d.hc(),d.ic(17,"th",6),d.fd(18,"Amount"),d.hc(),d.ic(19,"th",8),d.fd(20,"Actions"),d.hc(),d.hc(),d.hc(),d.ic(21,"tbody"),d.dd(22,Zt,32,18,"tr",9),d.hc(),d.hc(),d.hc(),d.hc(),d.hc()),2&t){const t=d.Tc(2);d.Ob(3),d.Gc("ngClass",t.valid?"valid":""),d.Ob(19),d.Gc("ngForOf",e.invoiceGLAccountsArray)}},directives:[g.B,g.o,g.p,c.j,c.k,zt,p.a,g.s,g.d,p.b,g.x,g.n,g.q,Qt,m.b],styles:[".income-post-invoice-fields-wrapper[_ngcontent-%COMP%]   .float-close[_ngcontent-%COMP%]{width:24px;height:24px;display:flex;justify-content:center;align-items:center;border-radius:24px!important;background-color:#5cd694;cursor:pointer;display:inline-block;margin:9px 4px}.income-post-invoice-fields-wrapper[_ngcontent-%COMP%]   .float-close.disabled[_ngcontent-%COMP%]{background-color:#c5c6c7;pointer-events:none}.income-post-invoice-fields-wrapper[_ngcontent-%COMP%]   .float-close.disabled[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#e6e6e6}.income-post-invoice-fields-wrapper[_ngcontent-%COMP%]   .float-close.delete[_ngcontent-%COMP%]{background-color:#ea7962}.income-post-invoice-fields-wrapper[_ngcontent-%COMP%]   .float-close.valid[_ngcontent-%COMP%]{background-color:#5cd694}.income-post-invoice-fields-wrapper[_ngcontent-%COMP%]   .float-close[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{cursor:pointer;width:14px;color:#fff}"]}),t})();function te(t,e){1&t&&(d.ic(0,"span"),d.fd(1,"Post Multi Invoice"),d.hc())}function ee(t,e){1&t&&(d.ic(0,"span"),d.fd(1,"Edit Multi Invoice"),d.hc())}function ie(t,e){if(1&t&&(d.ic(0,"div",26),d.ic(1,"p",27),d.ic(2,"span"),d.fd(3,"Bill to party: "),d.hc(),d.fd(4),d.hc(),d.ic(5,"p",28),d.ic(6,"span"),d.fd(7,"Contact Person: "),d.hc(),d.fd(8),d.hc(),d.ic(9,"p",28),d.ic(10,"span"),d.fd(11,"Unit: "),d.hc(),d.fd(12),d.hc(),d.hc()),2&t){const t=d.yc(2);d.Ob(4),d.gd(t.accountDataList[0].billToParty),d.Ob(4),d.gd(t.accountDataList[0].primayContact),d.Ob(4),d.id("",t.accountDataList[0].apartmentBlockNumber," ",t.accountDataList[0].apartmentBlockUnitNumber,"")}}function ce(t,e){if(1&t&&(d.ic(0,"div",22),d.ic(1,"div",23),d.ic(2,"div",24),d.dd(3,ie,13,4,"div",25),d.hc(),d.hc(),d.hc()),2&t){const t=d.yc();d.Ob(3),d.Gc("ngIf",t.isAccountDataLoaded)}}function ne(t,e){1&t&&d.ec(0,"app-loader")}function oe(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"div",15),d.ic(2,"div",29),d.ic(3,"div",30),d.ic(4,"label"),d.fd(5,"Invoice Date*"),d.hc(),d.ic(6,"input",31),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().invoice.custInvoiceDate=e})),d.hc(),d.ec(7,"owl-date-time",32,33),d.ic(9,"div",34),d.ec(10,"i-feather",35),d.hc(),d.hc(),d.hc(),d.ic(11,"div",29),d.ic(12,"div",30),d.ic(13,"label"),d.fd(14,"Due Date*"),d.hc(),d.ic(15,"input",36),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().invoice.dueDate=e})),d.hc(),d.ec(16,"owl-date-time",32,37),d.ic(18,"div",34),d.ec(19,"i-feather",35),d.hc(),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.Tc(8),e=d.Tc(17),i=d.yc();d.Ob(6),d.Gc("owlDateTime",t)("owlDateTimeTrigger",t)("ngModel",i.invoice.custInvoiceDate),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("owlDateTime",e)("owlDateTimeTrigger",e)("ngModel",i.invoice.dueDate),d.Ob(1),d.Gc("pickerType","calendar")}}let ae=(()=>{class t{constructor(t,e,i,c,n,o){this.cd=t,this.router=e,this.route=i,this.accountsService=c,this.sharedService=n,this.cookieService=o,this.invoiceId="",this.isEditInvoice=!1,this.isInvoiceSubmitted=!0,this.isError=!1,this.alertMessage="",this.isFormInValid=!0,this.isAccountDataLoaded=!1}addInvoice(){let t={apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:this.invoiceGLAccountsData.glaccountId,comments:"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:0,updatedOn:(new Date).toISOString(),amount:this.invoiceGLAccountsData.amount,vatid:this.invoiceGLAccountsData.vatid,vatamount:this.invoiceGLAccountsData.vatamount,tax1Id:this.invoiceGLAccountsData.tax1Id,tax1Amount:this.invoiceGLAccountsData.tax1Amount,tax2Id:this.invoiceGLAccountsData.tax2Id,tax2Amount:this.invoiceGLAccountsData.tax2Amount,tax3Id:this.invoiceGLAccountsData.tax3Id,tax3Amount:this.invoiceGLAccountsData.tax3Amount,discountId:this.invoiceGLAccountsData.discountId,discountAmount:this.invoiceGLAccountsData.discountAmount,lineItemTotal:this.invoiceGLAccountsData.lineItemTotal,form:!1};this.invoiceGLAccountsArray.push(t),s.each(this.invoiceGLAccountsArray,t=>{this.isFormInValid=!t.form})}getFieldParams(t){this.invoiceGLAccountsArray=t;var e=this;e.invoice.custInvoiceSubAmount=0,e.invoice.custInvoiceTotalAmount=0,e.invoice.custInvoiceVatAmount=0,e.invoice.custInvoiceAddVatAmount=0,s.each(this.invoiceGLAccountsArray,t=>{this.isFormInValid=!t.form,e.invoice.custInvoiceSubAmount=e.invoice.custInvoiceSubAmount+t.amount,e.invoice.custInvoiceVatAmount=(.125*e.invoice.custInvoiceSubAmount).toFixed(2),e.invoice.custInvoiceAddVatAmount=(.1*e.invoice.custInvoiceSubAmount).toFixed(2),e.invoice.custInvoiceTotalAmount=(parseFloat(e.invoice.custInvoiceSubAmount)+parseFloat(e.invoice.custInvoiceVatAmount)+parseFloat(e.invoice.custInvoiceAddVatAmount)).toFixed(2)})}submitIncomeMultiInvoiceForm(t){this.isInvoiceSubmitted=!1;var e=this;this.invoiceGLAccountsArray.map((function(t){return e.invoice.custInvoiceAmount=e.invoice.custInvoiceAmount+t.totalAmount,delete t.form,t}));let i={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:parseInt(this.route.params.value.id),custInvoiceAmount:parseInt(this.invoice.custInvoiceAmount),custInvoiceDate:this.invoice.custInvoiceDate,dueDate:this.invoice.dueDate,tax1:0,tax2:0,tax3:0,isTax:this.invoice.isTax,isRecurCustInvoice:this.invoice.isRecurCustInvoice,isEmailSent:!1,isSmssent:!1,custInvoiceStatusId:1,postedBy:parseInt(this.cookieService.get("userId")),postedOn:(new Date).toISOString(),billToPay:"string",comments:this.invoice.comments||"",penaltyAmount:0,penaltyComment:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:0,updatedOn:(new Date).toISOString(),transReference1:"string",transReference2:"string",invoiceGLAccounts:this.invoiceGLAccountsArray};this.accountsService.addCustInvoice(i).subscribe(t=>{t.message?(this.isInvoiceSubmitted=!0,this.sharedService.setAlertMessage("All Invoices added successfully"),this.router.navigate(["ams/income/subledger"])):(this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isInvoiceSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}ngOnInit(){this.invoice={},this.invoice.custInvoiceSubAmount=0,this.invoice.custInvoiceVatAmount=0,this.invoice.custInvoiceAddVatAmount=0,this.invoice.custInvoiceTotalAmount=0,this.invoice.isRecurCustInvoice=!0,this.invoice.isTax=!0,this.invoice.custInvoiceDate=(new Date).toISOString(),this.invoiceGLAccountsData={},this.invoiceGLAccountsData.glaccountId="",this.invoiceGLAccountsData.vatid="",this.invoiceGLAccountsData.discountId="",this.invoiceGLAccountsData.amount="",this.invoiceGLAccountsData.comments="",this.invoiceGLAccountsArray=[{apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:this.invoiceGLAccountsData.glaccountId,comments:"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:0,updatedOn:(new Date).toISOString(),amount:this.invoiceGLAccountsData.amount,isTax:!1,isDiscount:!1,vatid:this.invoiceGLAccountsData.vatid,vatamount:this.invoiceGLAccountsData.vatamount,tax1Id:this.invoiceGLAccountsData.tax1Id,tax1Amount:this.invoiceGLAccountsData.tax1Amount,tax2Id:this.invoiceGLAccountsData.tax2Id,tax2Amount:this.invoiceGLAccountsData.tax2Amount,tax3Id:this.invoiceGLAccountsData.tax3Id,tax3Amount:this.invoiceGLAccountsData.tax3Amount,discountId:this.invoiceGLAccountsData.discountId,discountAmount:this.invoiceGLAccountsData.discountAmount,lineItemTotal:this.invoiceGLAccountsData.lineItemTotal},{apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:this.invoiceGLAccountsData.glaccountId,comments:"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:0,updatedOn:(new Date).toISOString(),amount:this.invoiceGLAccountsData.amount,isTax:!1,isDiscount:!1,vatid:this.invoiceGLAccountsData.vatid,vatamount:this.invoiceGLAccountsData.vatamount,tax1Id:this.invoiceGLAccountsData.tax1Id,tax1Amount:this.invoiceGLAccountsData.tax1Amount,tax2Id:this.invoiceGLAccountsData.tax2Id,tax2Amount:this.invoiceGLAccountsData.tax2Amount,tax3Id:this.invoiceGLAccountsData.tax3Id,tax3Amount:this.invoiceGLAccountsData.tax3Amount,discountId:this.invoiceGLAccountsData.discountId,discountAmount:this.invoiceGLAccountsData.discountAmount,lineItemTotal:this.invoiceGLAccountsData.lineItemTotal},{apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:0,glaccountId:this.invoiceGLAccountsData.glaccountId,comments:"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:(new Date).toISOString(),updatedBy:0,updatedOn:(new Date).toISOString(),amount:this.invoiceGLAccountsData.amount,isTax:!1,isDiscount:!1,vatid:this.invoiceGLAccountsData.vatid,vatamount:this.invoiceGLAccountsData.vatamount,tax1Id:this.invoiceGLAccountsData.tax1Id,tax1Amount:this.invoiceGLAccountsData.tax1Amount,tax2Id:this.invoiceGLAccountsData.tax2Id,tax2Amount:this.invoiceGLAccountsData.tax2Amount,tax3Id:this.invoiceGLAccountsData.tax3Id,tax3Amount:this.invoiceGLAccountsData.tax3Amount,discountId:this.invoiceGLAccountsData.discountId,discountAmount:this.invoiceGLAccountsData.discountAmount,lineItemTotal:this.invoiceGLAccountsData.lineItemTotal}],this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.route.params.value.id),this.isAccountDataLoaded=!0})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(d.i),d.dc(n.c),d.dc(n.a),d.dc(a.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-post-multi-invoice"]],decls:55,vars:13,consts:[[1,"income-post-invoice-wrapper"],[1,"mb-3"],[4,"ngIf"],["class","card mb-20 no-shadow",4,"ngIf"],["name","postIncomeMultiInvoiceForm","novalidate","",3,"ngSubmit"],["postIncomeMultiInvoiceForm","ngForm"],[1,"card","clear","mb-20"],[1,"card-body","pb-0"],[3,"message","isError"],[1,"card"],[1,"card-body","p-0"],[3,"invoiceGLAccountsArray","fieldParams"],[1,"add-invoice-box"],[1,"btn","grey-special","sf",3,"click"],[1,"total-box"],[1,"row"],[1,"offset-sm-7","col-sm-3"],[1,"col-sm-2","amt"],[1,"ml-1"],[1,"total-box","final"],[1,"card-body","text-right"],[1,"btn","blue",3,"disabled"],[1,"card","mb-20","no-shadow"],[1,"card-header","at-header"],[1,"float-left"],["class","sub-details",4,"ngIf"],[1,"sub-details"],[1,"d-inline-block","ft"],[1,"d-inline-block","ft","ml-md-4"],[1,"col-sm-3"],[1,"input-box"],["name","custInvoiceDate","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["custInvoiceDate",""],[1,"date-btn"],["name","calendar","width","18",1,"icon","date","float-left"],["name","invoiceDueDate","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["invoiceDueDate",""]],template:function(t,e){if(1&t){const t=d.jc();d.ic(0,"div",0),d.ic(1,"h5",1),d.dd(2,te,2,0,"span",2),d.dd(3,ee,2,0,"span",2),d.hc(),d.dd(4,ce,4,1,"div",3),d.ic(5,"form",4,5),d.uc("ngSubmit",(function(){d.Wc(t);const i=d.Tc(6);return e.submitIncomeMultiInvoiceForm(i)})),d.ic(7,"div",6),d.ic(8,"div",7),d.dd(9,ne,1,0,"app-loader",2),d.ec(10,"app-alert-message",8),d.dd(11,oe,20,8,"ng-container",2),d.hc(),d.hc(),d.hc(),d.ic(12,"div",9),d.ic(13,"div",10),d.ic(14,"app-income-post-multi-invoice-fields",11),d.uc("fieldParams",(function(t){return e.getFieldParams(t)})),d.hc(),d.ic(15,"div",12),d.ic(16,"div",13),d.uc("click",(function(){return e.addInvoice()})),d.fd(17,"Add Another Invoice"),d.hc(),d.hc(),d.hc(),d.ic(18,"div",14),d.ic(19,"div",15),d.ic(20,"div",16),d.ic(21,"p"),d.fd(22,"Sub Amount:"),d.hc(),d.hc(),d.ic(23,"div",17),d.ic(24,"p"),d.ic(25,"span",18),d.fd(26),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(27,"div",15),d.ic(28,"div",16),d.ic(29,"p"),d.fd(30,"VAT: [12%]"),d.hc(),d.hc(),d.ic(31,"div",17),d.ic(32,"p"),d.ic(33,"span",18),d.fd(34),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(35,"div",15),d.ic(36,"div",16),d.ic(37,"p"),d.fd(38,"Additional VAT: [10%]"),d.hc(),d.hc(),d.ic(39,"div",17),d.ic(40,"p"),d.ic(41,"span",18),d.fd(42),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(43,"div",19),d.ic(44,"div",15),d.ic(45,"div",16),d.ic(46,"p"),d.fd(47,"Total Amount:"),d.hc(),d.hc(),d.ic(48,"div",17),d.ic(49,"p"),d.ic(50,"span",18),d.fd(51),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(52,"div",20),d.ic(53,"button",21),d.fd(54,"Submit"),d.hc(),d.hc(),d.hc(),d.hc()}if(2&t){const t=d.Tc(6);d.Ob(2),d.Gc("ngIf",!e.isEditInvoice),d.Ob(1),d.Gc("ngIf",e.isEditInvoice),d.Ob(1),d.Gc("ngIf",e.isAccountDataLoaded),d.Ob(5),d.Gc("ngIf",!e.isInvoiceSubmitted),d.Ob(1),d.Gc("message",e.alertMessage)("isError",e.isError),d.Ob(1),d.Gc("ngIf",e.isInvoiceSubmitted),d.Ob(3),d.Gc("invoiceGLAccountsArray",e.invoiceGLAccountsArray),d.Ob(12),d.gd(e.invoice.custInvoiceSubAmount),d.Ob(8),d.gd(e.invoice.custInvoiceVatAmount),d.Ob(8),d.gd(e.invoice.custInvoiceAddVatAmount),d.Ob(9),d.gd(e.invoice.custInvoiceTotalAmount),d.Ob(2),d.Gc("disabled",t.invalid)}},directives:[c.l,g.B,g.o,g.p,Ft.a,Kt,h.a,p.a,nt.b,g.d,g.x,nt.d,g.n,g.q,nt.a,m.b],styles:[".income-post-invoice-wrapper[_ngcontent-%COMP%]   .add-invoice-block[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px solid #eaeaea}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .add-invoice-box[_ngcontent-%COMP%]{margin:20px 14px}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .total-box[_ngcontent-%COMP%]{padding:15px 14px;background-color:#f9f9f9;text-align:right}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .total-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:400;letter-spacing:.3px;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;margin:0 0 6px!important;font-size:1.4rem}.income-post-invoice-wrapper[_ngcontent-%COMP%]   .total-box.final[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:500;letter-spacing:.2px;margin:10px 0 6px;font-size:1.6rem}"]}),t})(),re=(()=>{class t{validate(t){let e=t.value;if(null!=e)return e<this.customMin?{customMin:!0}:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=d.Yb({type:t,selectors:[["","customMin","","formControlName",""],["","customMin","","formControl",""],["","customMin","","ngModel",""]],inputs:{customMin:"customMin"},features:[d.Nb([{provide:g.k,useExisting:t,multi:!0}])]}),t})(),se=(()=>{class t{validate(t){let e=t.value;if(null!=e)return e>this.customMax?{customMax:!0}:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=d.Yb({type:t,selectors:[["","customMax","","formControlName",""],["","customMax","","formControl",""],["","customMax","","ngModel",""]],inputs:{customMax:"customMax"},features:[d.Nb([{provide:g.k,useExisting:t,multi:!0}])]}),t})();function de(t,e){1&t&&d.ec(0,"app-loader")}function le(t,e){1&t&&(d.ic(0,"div"),d.ic(1,"p",28),d.fd(2,"Enter amount equal to or lesser than the selected entries"),d.hc(),d.hc())}function ue(t,e){if(1&t&&(d.ic(0,"option",29),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.lookupValueId),d.Ob(1),d.gd(t.lookupValueName)}}function he(t,e){if(1&t&&(d.ic(0,"option",29),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.id),d.Ob(1),d.gd(t.id)}}function me(t,e){if(1&t&&(d.ic(0,"option",29),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.lookupValueId),d.Ob(1),d.gd(t.lookupValueName)}}function pe(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"div",9),d.ic(2,"div",10),d.ic(3,"div",11),d.ic(4,"label"),d.fd(5,"Amount*"),d.hc(),d.ic(6,"input",12,13),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().collection.amount=e})),d.hc(),d.dd(8,le,3,0,"div",7),d.hc(),d.hc(),d.ic(9,"div",10),d.ic(10,"div",14),d.ic(11,"label"),d.fd(12,"Instrument Type*"),d.hc(),d.ic(13,"select",15),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().collection.instrumentTypeId=e})),d.ic(14,"option",16),d.fd(15,"Select"),d.hc(),d.dd(16,ue,2,2,"option",17),d.hc(),d.hc(),d.hc(),d.ic(17,"div",10),d.ic(18,"div",14),d.ic(19,"label"),d.fd(20,"Deposit Slip Number*"),d.hc(),d.ic(21,"select",18),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().collection.depositSlipNumber=e})),d.ic(22,"option",16),d.fd(23,"Select"),d.hc(),d.dd(24,he,2,2,"option",17),d.hc(),d.hc(),d.hc(),d.ic(25,"div",10),d.ic(26,"div",11),d.ic(27,"label"),d.fd(28,"Post On*"),d.hc(),d.ic(29,"input",19),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().collection.postOn=e})),d.hc(),d.ec(30,"owl-date-time",20,21),d.ic(32,"div",22),d.ec(33,"i-feather",23),d.hc(),d.hc(),d.hc(),d.ic(34,"div",10),d.ic(35,"div",14),d.ic(36,"label"),d.fd(37,"Payment Status*"),d.hc(),d.ic(38,"select",24),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().collection.collectionStatusId=e})),d.ic(39,"option",16),d.fd(40,"Select"),d.hc(),d.dd(41,me,2,2,"option",17),d.hc(),d.hc(),d.hc(),d.ic(42,"div",10),d.ic(43,"div",11),d.ic(44,"label"),d.fd(45,"Comments"),d.hc(),d.ic(46,"input",25),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().collection.comment=e})),d.hc(),d.hc(),d.hc(),d.ic(47,"div",26),d.ic(48,"button",27),d.fd(49,"Submit"),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.Tc(7),e=d.Tc(31),i=d.yc(),c=d.Tc(7);d.Ob(6),d.Gc("customMin",i.minCollectionAmount)("customMax",i.maxCollectionAmount)("ngModel",i.collection.amount)("readonly",i.isMultipleEntry),d.Ob(2),d.Gc("ngIf",t.errors),d.Ob(5),d.Gc("ngModel",i.collection.instrumentTypeId),d.Ob(3),d.Gc("ngForOf",i.instrumentTypeListData),d.Ob(5),d.Gc("ngModel",i.collection.depositSlipNumber),d.Ob(3),d.Gc("ngForOf",i.depositSlipLisData),d.Ob(5),d.Gc("owlDateTime",e)("owlDateTimeTrigger",e)("ngModel",i.collection.postOn),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("ngModel",i.collection.collectionStatusId),d.Ob(3),d.Gc("ngForOf",i.paymentStatusListData),d.Ob(5),d.Gc("ngModel",i.collection.comment),d.Ob(2),d.Gc("disabled",c.invalid)}}let ge=(()=>{class t{constructor(t,e,i,c,n,o){this.router=t,this.route=e,this.accountsService=i,this.lookupService=c,this.sharedService=n,this.cookieService=o,this.collection={},this.isCollectionSubmitted=!1,this.isError=!1,this.alertMessage="",this.minCollectionAmount=1,this.maxCollectionAmount=0,this.isMultipleEntry=!1,this.collectionParams=new d.q(!1)}submitIncomePostCollectionForm(t){var e=[];s.each(this.invoiceIdArray,1==this.invoiceIdArray.length?(t,i)=>{var c={apartmentId:parseInt(this.cookieService.get("apartmentId")),collectionId:0,invoiceId:t,amount:this.collection.amount,comment:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2020-01-10T06:59:54.422Z",updatedBy:0,updatedOn:"2020-01-10T06:59:54.422Z"};e.push(c)}:(t,i)=>{var c={apartmentId:parseInt(this.cookieService.get("apartmentId")),collectionId:0,invoiceId:t,amount:this.totalAmountArray[i],comment:"string",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2020-01-10T06:59:54.422Z",updatedBy:0,updatedOn:"2020-01-10T06:59:54.422Z"};e.push(c)}),this.isCollectionSubmitted=!1;let i={apartmentId:parseInt(this.cookieService.get("apartmentId")),receiptNumber:0,receiptDate:(new Date).toISOString(),amount:parseInt(this.collection.amount),instrumentTypeId:parseInt(this.collection.instrumentTypeId),postOn:this.collection.postOn||(new Date).toISOString(),collectionAccountTypeId:165,depositSlipNumber:0,postExcessAmountTo:0,collectionStatusId:parseInt(this.collection.collectionStatusId),collectionStatus:"string",isEmailSent:!0,isSmssent:!0,comment:this.collection.comment||"",isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-15T19:36:14.09",updatedBy:null,updatedOn:null,invoiceId:this.invoiceIdArray[0],transReference1:"string",transReference2:"string",glAcctIndicator:"Asset",collectionInvoice:e};this.accountsService.addCollection(i).subscribe(t=>{t.message?(this.isCollectionSubmitted=!0,this.sharedService.setAlertMessage("Collection done successfully"),this.collectionParams.emit(!0)):(this.isCollectionSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isCollectionSubmitted=!0})}ngOnInit(){this.collection={},this.collection.instrumentTypeId="",this.collection.collectionAccountTypeId="",this.collection.depositSlipNumber="",this.collection.collectionStatusId="",this.collection.amount=this.totalAmountArray[0],this.maxCollectionAmount=this.totalAmountArray[0],console.log(this.maxCollectionAmount),this.lookupService.getLookupValueByLookupTypeId(34).subscribe(t=>{this.paymentStatusListData=t.filter(t=>t.isActive)},t=>{}),this.lookupService.getLookupValueByLookupTypeId(33).subscribe(t=>{this.instrumentTypeListData=t.filter(t=>t.isActive)},t=>{});var t={apartmentId:parseInt(this.cookieService.get("apartmentId")),groupId:3};this.accountsService.getGLAccountsByGroupId(t).subscribe(t=>{this.glAccountListData=t}),this.depositSlipLisData=[{id:1},{id:2},{id:3},{id:4}],this.isCollectionSubmitted=!0}ngOnChanges(t){this.collection.amount=this.totalAmountArray.reduce((t,e)=>(this.maxCollectionAmount=t+e,t+e)),this.totalAmountArray.length>1?this.isMultipleEntry=!0:(this.isMultipleEntry=!1,this.collection.amount=this.totalAmountArray[0],this.maxCollectionAmount=this.totalAmountArray[0])}}return t.\u0275fac=function(e){return new(e||t)(d.dc(n.c),d.dc(n.a),d.dc(a.a),d.dc(z.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-post-collection"]],inputs:{totalAmountArray:"totalAmountArray",invoiceIdArray:"invoiceIdArray"},outputs:{collectionParams:"collectionParams"},features:[d.Mb],decls:12,vars:4,consts:[[1,"income-post-collection-wrapper","mt-20"],[1,"card","mb-30"],[1,"card-header"],[1,"float-left"],["name","postIncomeCollectionForm","novalidate","",3,"ngSubmit"],["postIncomeCollectionForm","ngForm"],[1,"card-body"],[4,"ngIf"],[3,"message","isError"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["type","number","OnlyNumber","true","placeholder","Enter text","name","collectionAmount","required","",1,"form-control",3,"customMin","customMax","ngModel","readonly","ngModelChange"],["collectionAmount","ngModel"],[1,"select-box"],["name","InstrumentType","id","InstrumentType","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","depositSlipNo","id","depositSlipNo","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","collectionPostOn","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["collectionPostOn",""],[1,"date-btn"],["name","calendar","width","18",1,"icon","date","float-left"],["name","paymentStatusType","id","paymentStatusType","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter text","name","comments",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue",3,"disabled"],[1,"input-error"],[3,"value"]],template:function(t,e){if(1&t){const t=d.jc();d.ic(0,"div",0),d.ic(1,"div",1),d.ic(2,"div",2),d.ic(3,"div",3),d.ic(4,"h5"),d.fd(5,"Post Collection"),d.hc(),d.hc(),d.hc(),d.ic(6,"form",4,5),d.uc("ngSubmit",(function(){d.Wc(t);const i=d.Tc(7);return e.submitIncomePostCollectionForm(i)})),d.ic(8,"div",6),d.dd(9,de,1,0,"app-loader",7),d.ec(10,"app-alert-message",8),d.dd(11,pe,50,17,"ng-container",7),d.hc(),d.hc(),d.hc(),d.hc()}2&t&&(d.Ob(9),d.Gc("ngIf",!e.isCollectionSubmitted),d.Ob(1),d.Gc("message",e.alertMessage)("isError",e.isError),d.Ob(1),d.Gc("ngIf",e.isCollectionSubmitted))},directives:[g.B,g.o,g.p,c.l,Ft.a,h.a,p.a,g.s,g.d,p.b,g.x,re,se,g.n,g.q,g.y,g.r,g.A,c.k,nt.b,nt.d,nt.a,m.b],styles:[""]}),t})();function fe(t,e){1&t&&d.ec(0,"app-loader")}function ve(t,e){if(1&t&&(d.ic(0,"div",32),d.ic(1,"p",33),d.ic(2,"span"),d.fd(3,"Bill to party: "),d.hc(),d.fd(4),d.hc(),d.ic(5,"p",34),d.ic(6,"span"),d.fd(7,"Contact Person: "),d.hc(),d.fd(8),d.hc(),d.ic(9,"p",34),d.ic(10,"span"),d.fd(11,"Unit: "),d.hc(),d.fd(12),d.hc(),d.hc()),2&t){const t=d.yc(3);d.Ob(4),d.gd(t.accountDataList[0].billToParty),d.Ob(4),d.gd(t.accountDataList[0].primayContact),d.Ob(4),d.id("",t.accountDataList[0].apartmentBlockNumber," ",t.accountDataList[0].apartmentBlockUnitNumber,"")}}function Ie(t,e){if(1&t&&(d.ic(0,"div",30),d.ic(1,"div",11),d.dd(2,ve,13,4,"div",31),d.hc(),d.hc()),2&t){const t=d.yc(2);d.Ob(2),d.Gc("ngIf",t.isAccountDataLoaded)}}const be=function(){return{exact:!0}};function ye(t,e){if(1&t){const t=d.jc();d.ic(0,"tr",26),d.ic(1,"td",35),d.ic(2,"div",21),d.ic(3,"div",22),d.ic(4,"input",36),d.uc("ngModelChange",(function(i){return d.Wc(t),e.$implicit.checked=i}))("ngModelChange",(function(){d.Wc(t);const i=e.$implicit;return d.yc(2).getSelectedInvoice(i)})),d.hc(),d.ec(5,"label",37),d.hc(),d.hc(),d.hc(),d.ic(6,"td",38),d.ic(7,"a",39),d.fd(8),d.hc(),d.hc(),d.ic(9,"td",40),d.fd(10),d.hc(),d.ic(11,"td",40),d.fd(12),d.hc(),d.ic(13,"td",40),d.fd(14),d.hc(),d.ic(15,"td",40),d.fd(16),d.hc(),d.ic(17,"td",40),d.fd(18),d.hc(),d.hc()}if(2&t){const t=e.$implicit,i=d.yc(2);d.Gc("ngClass",t.checked?"selected":""),d.Ob(4),d.Hc("id",t.custInvoiceID),d.Hc("name",t.custInvoiceID),d.Gc("ngModel",t.checked),d.Ob(1),d.Hc("for",t.custInvoiceID),d.Ob(2),d.Ic("routerLink","/ams/income/edit-invoice/",t.custInvoiceID,""),d.Gc("routerLinkActiveOptions",d.Mc(13,be)),d.Ob(1),d.gd(t.custInvoiceID),d.Ob(2),d.gd(i.getInvoiceDate(t.custInvoiceDate)),d.Ob(2),d.gd(i.getInvoiceDate(t.dueDate)),d.Ob(2),d.gd(t.comments),d.Ob(2),d.gd(t.billAmount),d.Ob(2),d.gd(t.remainingAmount)}}function Oe(t,e){1&t&&(d.ic(0,"div",41),d.ic(1,"p",42),d.fd(2,"No Data Available"),d.hc(),d.hc())}function De(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"div",3),d.ic(2,"div",4),d.ic(3,"a",5),d.ic(4,"div",6),d.ec(5,"img",7),d.hc(),d.ic(6,"span",8),d.fd(7,"View Sub Ledger"),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(8,"div",9),d.ic(9,"div",10),d.ic(10,"div",11),d.ic(11,"h5"),d.fd(12,"Bills to be payed "),d.ic(13,"span",12),d.fd(14),d.hc(),d.hc(),d.hc(),d.ic(15,"ul",13),d.ic(16,"li",14),d.ec(17,"i",15),d.ic(18,"input",16),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().invoiceData=e})),d.hc(),d.hc(),d.hc(),d.hc(),d.dd(19,Ie,3,1,"div",17),d.ic(20,"div",18),d.ic(21,"table",19),d.ic(22,"thead"),d.ic(23,"tr"),d.ic(24,"th",20),d.ic(25,"div",21),d.ic(26,"div",22),d.ic(27,"input",23),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().selectAllInvoices=e}))("ngModelChange",(function(){return d.Wc(t),d.yc().getAllInvoices()})),d.hc(),d.ec(28,"label",24),d.hc(),d.hc(),d.hc(),d.ic(29,"th",25),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("custInvoiceID")})),d.fd(30,"Bill No "),d.ec(31,"span",26),d.hc(),d.ic(32,"th",25),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("custInvoiceDate")})),d.fd(33,"Bill Date"),d.ec(34,"span",26),d.hc(),d.ic(35,"th",25),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("dueDate")})),d.fd(36,"Due Date"),d.ec(37,"span",26),d.hc(),d.ic(38,"th",25),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("comments")})),d.fd(39,"Comments"),d.ec(40,"span",26),d.hc(),d.ic(41,"th",25),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("billAmount")})),d.fd(42,"Bill Amount"),d.ec(43,"span",26),d.hc(),d.ic(44,"th",25),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("remainingAmount")})),d.fd(45,"Remaining Amount"),d.ec(46,"span",26),d.hc(),d.hc(),d.hc(),d.ic(47,"tbody"),d.dd(48,ye,19,14,"tr",27),d.zc(49,"simpleSearch"),d.zc(50,"slice"),d.zc(51,"orderBy"),d.hc(),d.hc(),d.dd(52,Oe,3,0,"div",28),d.ic(53,"app-pagination",29),d.uc("outputParams",(function(e){return d.Wc(t),d.yc().getIndexParams(e)})),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.yc();d.Ob(3),d.Gc("routerLinkActiveOptions",d.Mc(31,be)),d.Ob(11),d.gd(t.totalItems),d.Ob(4),d.Gc("ngModel",t.invoiceData),d.Ob(1),d.Gc("ngIf",t.isAccountDataLoaded),d.Ob(2),d.Gc("ngClass",t.isMobileView()),d.Ob(3),d.Gc("ngClass",t.isNoItemsAvailable()?"no-link":""),d.Ob(3),d.Gc("ngModel",t.selectAllInvoices),d.Ob(1),d.Gc("ngClass",t.isNoItemsAvailable()?"disabled":""),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("custInvoiceID")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("custInvoiceDate")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("dueDate")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("comments")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("billAmount")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("remainingAmount")),d.Ob(2),d.Gc("ngForOf",d.Bc(49,20,d.Cc(50,23,d.Cc(51,27,t.invoiceDataList,t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex),t.invoiceData)),d.Ob(4),d.Gc("ngIf",t.isNoItemsAvailable()),d.Ob(1),d.Gc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}function Ae(t,e){if(1&t){const t=d.jc();d.ic(0,"app-income-post-collection",43),d.uc("collectionParams",(function(e){return d.Wc(t),d.yc().isCollectionMade(e)})),d.hc()}if(2&t){const t=d.yc();d.Gc("totalAmountArray",t.totalAmountArray)("invoiceIdArray",t.selectedInvoiceIdArray)}}let ke=(()=>{class t{constructor(t,e,i,c,n,o){this.router=t,this.route=e,this.userService=i,this.accountsService=c,this.sharedService=n,this.cookieService=o,this.isInvoiceDataLoaded=!1,this.invoiceData="",this.ItemStartIndex=0,this.itemLimit=10,this.unitFieldType="unitno",this.unitOrder=!1,this.isMobile=!1,this.isInvoiceSelected=!1,this.selectAllInvoices=!1,this.isAccountDataLoaded=!1}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"desc":"asc":""}getUserName(t){var e=s.filter(this.userDataList,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].firstName+" "+e[0].lastName}getInvoiceDate(t){return w(t).format("DD/MM/YYYY")}getAccountName(t){var e={glaccountId:0};e.glaccountId=null==t||0==t.length?0:t[0].glaccountId;var i=s.filter(this.glAccountListData,(function(t){if(t.glaccountId===e.glaccountId)return t}));return void 0===i||0==i.length?"":i[0].glaccountName}getAllInvoices(){this.totalAmountArray=[],this.selectedInvoiceIdArray=[],this.selectAllInvoices?(s.each(this.invoiceDataList,t=>{t.checked=!0,this.totalAmountArray.push(t.billAmount),this.selectedInvoiceIdArray.push(t.custInvoiceID)}),this.isInvoiceSelected=!0):(s.each(this.invoiceDataList,t=>{t.checked=!1}),this.isInvoiceSelected=!1)}getSelectedInvoice(t){var e=0;this.totalAmountArray=[],this.selectedInvoiceIdArray=[],s.each(this.invoiceDataList,t=>{t.checked&&(e++,this.totalAmountArray.push(t.billAmount),this.selectedInvoiceIdArray.push(t.custInvoiceID))}),e>0?this.isInvoiceSelected=!0:(this.isInvoiceSelected=!1,this.totalAmountArray=[],this.selectedInvoiceIdArray=[]),0==e&&(this.selectAllInvoices=!1,this.totalAmountArray=[],this.selectedInvoiceIdArray=[]),e==this.invoiceDataList.length&&(this.selectAllInvoices=!0)}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isNoItemsAvailable(){return 0==this.totalItems}isCollectionMade(t){t&&(this.totalAmountArray=[],this.selectedInvoiceIdArray=[],this.isInvoiceSelected=!1,this.getCustInvoices())}getCustInvoices(){this.accountsService.GetARBalancewithDueByAptBlkUnitId(this.route.params.value.id).subscribe(t=>{this.invoiceDataList=t,this.totalItems=this.invoiceDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.userDataList=t,this.isInvoiceDataLoaded=!0},t=>{})})}ngOnInit(){this.getCustInvoices(),this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.route.params.value.id),this.isAccountDataLoaded=!0});var t={apartmentId:parseInt(this.cookieService.get("apartmentId")),groupId:3};this.accountsService.getGLAccountsByGroupId(t).subscribe(t=>{this.glAccountListData=t})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(n.c),d.dc(n.a),d.dc(R.a),d.dc(a.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-pay-invoice"]],decls:4,vars:3,consts:[[1,"income-pay-invoice-wrapper"],[4,"ngIf"],[3,"totalAmountArray","invoiceIdArray","collectionParams",4,"ngIf"],[1,"relative-card","float-right"],[1,"relative-icon"],["href","javascript:void(0)","routerLink","/ams/income/subledger","routerLinkActive","active",3,"routerLinkActiveOptions"],[1,"icon-wrapper"],["src","assets/images/book-icon.svg","width","17",1,"svg"],[1,"d-inline-block"],[1,"card","clear","card-table"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],["class","card-header at-header",4,"ngIf"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",1,"select",3,"ngClass"],[1,"form-group"],[1,"form-check","float-left"],["type","checkbox","id","selectAllInvoices","name","selectAllInvoices",1,"form-check-input",3,"ngModel","ngModelChange"],["for","selectAllInvoices",1,"form-check-label",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["class","button-wrapper border-top",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"card-header","at-header"],["class","sub-details",4,"ngIf"],[1,"sub-details"],[1,"d-inline-block","ft"],[1,"d-inline-block","ft","ml-md-4"],[1,"select"],["type","checkbox",1,"form-check-input",3,"id","name","ngModel","ngModelChange"],[1,"form-check-label",3,"for"],[1,"grey"],["href","javascript:void(0)","routerLinkActive","active",1,"t-decor","tc-s-blue",3,"routerLink","routerLinkActiveOptions"],[1,"name"],[1,"button-wrapper","border-top"],[1,"snippet"],[3,"totalAmountArray","invoiceIdArray","collectionParams"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.dd(1,fe,1,0,"app-loader",1),d.dd(2,De,54,32,"ng-container",1),d.dd(3,Ae,1,2,"app-income-post-collection",2),d.hc()),2&t&&(d.Ob(1),d.Gc("ngIf",!e.isInvoiceDataLoaded),d.Ob(1),d.Gc("ngIf",e.isInvoiceDataLoaded),d.Ob(1),d.Gc("ngIf",e.isInvoiceSelected))},directives:[c.l,h.a,n.e,n.d,p.e,p.c,p.a,g.d,g.n,g.q,c.j,p.d,g.a,c.k,f.a,ge],pipes:[v.b,c.t,v.a],styles:[""]}),t})();var Se=i("MO+k");const Ce=["incomePieChart"];function Le(t,e){if(1&t&&(d.ic(0,"h6",12),d.fd(1),d.hc()),2&t){const t=d.yc();d.Ob(1),d.hd("",t.totalInvoices," Invoices")}}function Me(t,e){1&t&&d.ec(0,"app-loader")}function Ge(t,e){if(1&t){const t=d.jc();d.ic(0,"div",13),d.ic(1,"div",14),d.ic(2,"div",15),d.ic(3,"ul",16),d.ic(4,"li",17),d.ic(5,"p"),d.ec(6,"i-feather",18),d.ic(7,"span"),d.fd(8,"Filter"),d.hc(),d.hc(),d.hc(),d.ic(9,"li",19),d.uc("click",(function(){return d.Wc(t),d.yc().setDataType("DueAge")})),d.ic(10,"p"),d.fd(11,"Due Age"),d.hc(),d.hc(),d.ic(12,"li",19),d.uc("click",(function(){return d.Wc(t),d.yc().setDataType("InvoiceAge")})),d.ic(13,"p"),d.fd(14,"Invoice Age"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.hc()}if(2&t){const t=d.yc();d.Ob(9),d.Gc("ngClass","DueAge"==t.dataType?"active":""),d.Ob(3),d.Gc("ngClass","InvoiceAge"==t.dataType?"active":"")}}function xe(t,e){1&t&&d.ec(0,"app-loader")}function Te(t,e){if(1&t&&(d.ic(0,"ul",20),d.ic(1,"li"),d.ic(2,"div",21),d.ec(3,"span",22),d.fd(4," 0 - 30 days"),d.hc(),d.ic(5,"div"),d.fd(6),d.hc(),d.hc(),d.ic(7,"li"),d.ic(8,"div",21),d.ec(9,"span",23),d.fd(10," 31 - 60 days"),d.hc(),d.ic(11,"div"),d.fd(12),d.hc(),d.hc(),d.ic(13,"li"),d.ic(14,"div",21),d.ec(15,"span",24),d.fd(16," 61 - 90 days"),d.hc(),d.ic(17,"div"),d.fd(18),d.hc(),d.hc(),d.ic(19,"li"),d.ic(20,"div",21),d.ec(21,"span",25),d.fd(22," Over 90 days"),d.hc(),d.ic(23,"div"),d.fd(24),d.hc(),d.hc(),d.hc()),2&t){const t=d.yc();d.Ob(6),d.gd(t.totalAmountItem1),d.Ob(6),d.gd(t.totalAmountItem3),d.Ob(6),d.gd(t.totalAmountItem4),d.Ob(6),d.gd(t.totalAmountItem5)}}function we(t,e){if(1&t&&(d.ic(0,"td",55),d.ic(1,"p",60),d.fd(2,"Due Age"),d.hc(),d.ic(3,"p",61),d.fd(4),d.hc(),d.hc()),2&t){const t=d.yc().$implicit;d.Ob(4),d.gd(t.dueAge)}}function Be(t,e){if(1&t&&(d.ic(0,"td",55),d.ic(1,"p",60),d.fd(2,"Invoice Age"),d.hc(),d.ic(3,"p",61),d.fd(4),d.hc(),d.hc()),2&t){const t=d.yc().$implicit;d.Ob(4),d.gd(t.invoiceAge)}}function Fe(t,e){if(1&t&&(d.ic(0,"tr",54),d.ic(1,"td",55),d.ic(2,"div",56),d.ic(3,"div",57),d.ec(4,"span",58),d.hc(),d.ic(5,"div",59),d.ic(6,"p",60),d.fd(7,"Invoice ID"),d.hc(),d.ic(8,"p",49),d.fd(9),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(10,"td",55),d.ic(11,"p",60),d.fd(12,"Invoice Amount"),d.hc(),d.ic(13,"p",61),d.fd(14),d.hc(),d.hc(),d.ic(15,"td",55),d.ic(16,"p",60),d.fd(17,"Collection Amount"),d.hc(),d.ic(18,"p",61),d.fd(19),d.hc(),d.hc(),d.ic(20,"td",55),d.ic(21,"p",60),d.fd(22,"Due Date"),d.hc(),d.ic(23,"p",61),d.fd(24),d.hc(),d.hc(),d.dd(25,we,5,1,"td",62),d.dd(26,Be,5,1,"td",62),d.ic(27,"td",55),d.ic(28,"p",60),d.fd(29,"Balance Amount"),d.hc(),d.ic(30,"p",61),d.fd(31),d.hc(),d.hc(),d.hc()),2&t){const t=e.$implicit,i=d.yc(3);d.Ob(9),d.gd(t.custInvoiceId),d.Ob(5),d.gd(t.invoiceAmt),d.Ob(5),d.gd(t.collectionAmt),d.Ob(5),d.gd(i.getDate(t.dueDate)),d.Ob(1),d.Gc("ngIf","DueAge"==i.dateType),d.Ob(1),d.Gc("ngIf","DueAge"!=i.dateType),d.Ob(5),d.gd(t.balanceAmt)}}function Pe(t,e){if(1&t&&(d.gc(0),d.ic(1,"tr",46),d.ic(2,"td",47),d.ec(3,"div",48),d.ic(4,"span"),d.fd(5),d.hc(),d.hc(),d.ic(6,"td",47),d.ic(7,"div"),d.fd(8),d.hc(),d.ic(9,"div",49),d.fd(10),d.hc(),d.hc(),d.ic(11,"td",47),d.ic(12,"div"),d.fd(13),d.hc(),d.ic(14,"div",49),d.fd(15),d.hc(),d.hc(),d.ic(16,"td",47),d.ic(17,"div"),d.fd(18),d.hc(),d.ic(19,"div",49),d.fd(20),d.hc(),d.hc(),d.ic(21,"td",47),d.ic(22,"div"),d.fd(23),d.hc(),d.ic(24,"div",49),d.fd(25),d.hc(),d.hc(),d.ic(26,"td",47),d.ic(27,"div"),d.fd(28),d.hc(),d.hc(),d.hc(),d.ic(29,"tr",50),d.ic(30,"td",51),d.ic(31,"table",52),d.dd(32,Fe,32,7,"tr",53),d.hc(),d.hc(),d.hc(),d.fc()),2&t){const t=e.$implicit;d.Ob(1),d.Qb("data-target","#collapse",t.unitID,""),d.Qb("aria-controls","collapse",t.unitID,""),d.Ob(4),d.id("",t.apartmentBlockNumber," ",t.apartmentBlockUnitNumber,""),d.Ob(3),d.gd(t.bucketAmt1+t.bucketAmt2),d.Ob(2),d.hd("",t.bucketCount1+t.bucketCount2," Invoices"),d.Ob(3),d.gd(t.bucketAmt3),d.Ob(2),d.hd("",t.bucketCount3," Invoices"),d.Ob(3),d.gd(t.bucketAmt4),d.Ob(2),d.hd("",t.bucketCount4," Invoices"),d.Ob(3),d.gd(t.bucketAmt5),d.Ob(2),d.hd("",t.bucketCount5," Invoices"),d.Ob(3),d.gd(t.bucketAmt6),d.Ob(1),d.Ic("id","collapse",t.unitID,""),d.Qb("aria-labelledby","collapse",t.unitID,""),d.Ob(3),d.Gc("ngForOf",t.invoiceDetails)}}function Ne(t,e){if(1&t&&(d.ic(0,"tr",63),d.ic(1,"td",47),d.fd(2,"Total"),d.hc(),d.ic(3,"td",47),d.fd(4),d.hc(),d.ic(5,"td",47),d.fd(6),d.hc(),d.ic(7,"td",47),d.fd(8),d.hc(),d.ic(9,"td",47),d.fd(10),d.hc(),d.ic(11,"td",47),d.fd(12),d.hc(),d.hc()),2&t){const t=d.yc(2);d.Ob(4),d.gd(t.totalAmountItem1),d.Ob(2),d.gd(t.totalAmountItem3),d.Ob(2),d.gd(t.totalAmountItem4),d.Ob(2),d.gd(t.totalAmountItem5),d.Ob(2),d.gd(t.totalAmount)}}function Ee(t,e){1&t&&(d.ic(0,"div",64),d.ic(1,"p",65),d.fd(2,"No Data Available"),d.hc(),d.hc())}function We(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"div",26),d.ic(2,"div",27),d.ic(3,"div",28),d.ic(4,"h5"),d.fd(5,"Collection on each Unit "),d.ic(6,"span",29),d.fd(7),d.hc(),d.hc(),d.ic(8,"p",30),d.fd(9),d.hc(),d.hc(),d.ic(10,"ul",16),d.ic(11,"li",31),d.ec(12,"i",32),d.ic(13,"input",33),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().ageingData=e})),d.hc(),d.hc(),d.ic(14,"li",34),d.ic(15,"a",35),d.ec(16,"i-feather",36),d.ic(17,"span"),d.fd(18,"Print"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(19,"div",37),d.ic(20,"table",38),d.ic(21,"thead"),d.ic(22,"tr"),d.ic(23,"th",39),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("primayContact")})),d.fd(24,"Tower Unit Name "),d.ec(25,"span",40),d.hc(),d.ic(26,"th",39),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("billToParty")})),d.fd(27,"0 - 30 Days"),d.ec(28,"span",40),d.hc(),d.ic(29,"th",39),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("apartmentBlockNumber")})),d.fd(30,"31 - 60 Days"),d.ec(31,"span",40),d.hc(),d.ic(32,"th",39),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("apartmentBlockNumber")})),d.fd(33,"61 - 90 Days"),d.ec(34,"span",40),d.hc(),d.ic(35,"th",39),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("due")})),d.fd(36,"Over 90 Days"),d.ec(37,"span",40),d.hc(),d.ic(38,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("status")})),d.fd(39,"Total"),d.ec(40,"span",40),d.hc(),d.hc(),d.hc(),d.ic(41,"tbody"),d.dd(42,Pe,33,16,"ng-container",42),d.zc(43,"simpleSearch"),d.zc(44,"slice"),d.zc(45,"orderBy"),d.dd(46,Ne,13,5,"tr",43),d.hc(),d.hc(),d.dd(47,Ee,3,0,"div",44),d.ic(48,"app-pagination",45),d.uc("outputParams",(function(e){return d.Wc(t),d.yc().getIndexParams(e)})),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.yc();d.Ob(7),d.gd(t.totalItems),d.Ob(2),d.hd("Data as of Today ( ",t.asOfDate," )"),d.Ob(4),d.Gc("ngModel",t.ageingData),d.Ob(7),d.Gc("ngClass",t.isMobileView()),d.Ob(5),d.Gc("ngClass",t.getFieldOrderBy("primayContact")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("billToParty")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("apartmentBlockNumber")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("apartmentBlockNumber")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("due")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("status")),d.Ob(2),d.Gc("ngForOf",d.Bc(43,17,d.Cc(44,20,d.Cc(45,24,t.ageingDataDataList,t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex),t.ageingData)),d.Ob(4),d.Gc("ngIf",t.isItemsAvailable()),d.Ob(1),d.Gc("ngIf",t.isNoItemsAvailable()),d.Ob(1),d.Gc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let Ue=(()=>{class t{constructor(t,e,i){this.accountsService=t,this.sharedService=e,this.cookieService=i,this.isDataLoaded=!1,this.isChartLoaded=!1,this.ageingData="",this.ItemStartIndex=0,this.itemLimit=10,this.unitFieldType="unitno",this.unitOrder=!1,this.isMobile=!1,this.totalInvoices=0,this.dataType="DueAge"}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"desc":"asc":""}getDate(t){return w(t).format("MM-DD-YYYY")}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}setDataType(t){this.dataType=t,this.getAgeingData()}drawChart(){setTimeout(()=>{this.isChartLoaded=!0,this.chart=new Se.Chart(this.chartRef.nativeElement,{type:"doughnut",data:{labels:["0-30 Days","31-60 Days","61-90 Days","Over 90 Days"],datasets:[{data:[this.totalAmountItem1Percent,this.totalAmountItem3Percent,this.totalAmountItem4Percent,this.totalAmountItem5Percent],backgroundColor:["#5bcc73","#00bcd4","#ff3638","#3f51b5"],hoverBackgroundColor:["#5bcc73","#00bcd4","#ff3638","#3f51b5"]}]},options:{responsive:!0,legend:{display:!1},cutoutPercentage:60,rotation:120,animation:{onComplete:t=>{}}}})},500)}getAgeingData(){this.totalAmountItem1=0,this.totalAmountItem3=0,this.totalAmountItem4=0,this.totalAmountItem5=0,this.totalAmount=0,this.totalAmountItem1Percent=0,this.totalAmountItem3Percent=0,this.totalAmountItem4Percent=0,this.totalAmountItem5Percent=0,this.totalInvoices=0,this.asOfDate=w().format("MM-DD-YYYY");var t={ApartmentID:parseInt(this.cookieService.get("apartmentId")),asOfDate:this.asOfDate,type:this.dataType,AgeFrom1:0,AgeTo1:10,AgeFrom2:11,AgeTo2:30,AgeFrom3:31,AgeTo3:60,AgeFrom4:61,AgeTo4:90,AgeFrom5:91,AgeTo5:null};this.isDataLoaded=!1,this.isChartLoaded=!1,this.accountsService.GetARAgingCollectionDueSummary(t).subscribe(t=>{this.isDataLoaded=!0,this.ageingDataDataList=t,this.totalItems=this.ageingDataDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,s.each(this.ageingDataDataList,(t,e)=>{this.totalInvoices=this.totalInvoices+t.bucketCount1+t.bucketCount2+t.bucketCount3+t.bucketCount4+t.bucketCount5,this.totalAmountItem1=this.totalAmountItem1+t.bucketAmt1+t.bucketAmt2,this.totalAmountItem3=this.totalAmountItem3+t.bucketAmt3,this.totalAmountItem4=this.totalAmountItem4+t.bucketAmt4,this.totalAmountItem5=this.totalAmountItem5+t.bucketAmt5,this.totalAmount=this.totalAmountItem1+this.totalAmountItem3+this.totalAmountItem4+this.totalAmountItem5,this.totalAmountItem1Percent=this.totalAmountItem1/this.totalAmount*100,this.totalAmountItem3Percent=this.totalAmountItem3/this.totalAmount*100,this.totalAmountItem4Percent=this.totalAmountItem4/this.totalAmount*100,this.totalAmountItem5Percent=this.totalAmountItem5/this.totalAmount*100,e==this.ageingDataDataList.length-1&&this.drawChart();var i={ApartmentID:parseInt(this.cookieService.get("apartmentId")),asOfDate:this.asOfDate,unitId:t.unitID};this.accountsService.GetARAgingCollectionDueByUnitId(i).subscribe(e=>{t.invoiceDetails=e},t=>{})})})}ngOnInit(){this.getAgeingData()}ngAfterViewInit(){}}return t.\u0275fac=function(e){return new(e||t)(d.dc(a.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-tracker-ageing"]],viewQuery:function(t,e){var i;1&t&&d.ld(Ce,!0),2&t&&d.Sc(i=d.vc())&&(e.chartRef=i.first)},decls:16,vars:7,consts:[[1,"income-tracker-ageing-wrapper"],[1,"main-title-mini","float-left"],["class","head-label",4,"ngIf"],[4,"ngIf"],["class","filter-box",4,"ngIf"],[1,"row"],[1,"col-sm-12","col-md-12","col-lg-12"],[1,"card","clear","account-chart-card"],[1,"card-body"],[1,"chart-box",3,"ngClass"],["incomePieChart",""],["class","legends-list",4,"ngIf"],[1,"head-label"],[1,"filter-box"],[1,"card"],[1,"card-body","p-0"],[1,"list-inline"],[1,"list-inline-item","title"],["name","filter",1,"icon","mr-2"],[1,"list-inline-item",3,"ngClass","click"],[1,"legends-list"],[1,"title"],[1,"dots","small","low","mr-2"],[1,"dots","small","cyan","mr-2"],[1,"dots","small","m-red","mr-2"],[1,"dots","small","blue","mr-2"],[1,"card","card-table","clear","table-accordion"],[1,"card-header"],[1,"float-left"],[1,"badge","blue"],[1,"d-none","d-md-inline-block","tc-blue"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","trans-white","mt_5"],["name","printer",1,"icon","print"],["id","accordion",1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],["scope","col",1,"max-50","text-center",3,"click"],[4,"ngFor","ngForOf"],["class","selected",4,"ngIf"],["class","button-wrapper border-top",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],["data-toggle","collapse","aria-expanded","true",1,"collapsed"],[1,"name"],[1,"toggle-icon"],[1,"tc-grey"],["data-parent","#accordion",1,"collapse",3,"id"],["colspan","6",1,"collapse-cell"],[1,"table"],["class","details-wrapper",4,"ngFor","ngForOf"],[1,"details-wrapper"],[1,"details-info"],[1,"media"],[1,"text-center"],[1,"dots","small","low"],[1,"media-body"],[1,"head"],[1,"tc-grey","desp"],["class","details-info",4,"ngIf"],[1,"selected"],[1,"button-wrapper","border-top"],[1,"snippet"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.ic(1,"h4",1),d.fd(2,"Account Ageing"),d.hc(),d.dd(3,Le,2,1,"h6",2),d.dd(4,Me,1,0,"app-loader",3),d.dd(5,Ge,15,2,"div",4),d.ic(6,"div",5),d.ic(7,"div",6),d.ic(8,"div",7),d.ic(9,"div",8),d.dd(10,xe,1,0,"app-loader",3),d.ic(11,"div",9),d.ec(12,"canvas",null,10),d.hc(),d.dd(14,Te,25,4,"ul",11),d.hc(),d.hc(),d.hc(),d.hc(),d.dd(15,We,49,28,"ng-container",3),d.hc()),2&t&&(d.Ob(3),d.Gc("ngIf",e.isDataLoaded),d.Ob(1),d.Gc("ngIf",!e.isDataLoaded),d.Ob(1),d.Gc("ngIf",e.isDataLoaded),d.Ob(5),d.Gc("ngIf",!e.isChartLoaded),d.Ob(1),d.Gc("ngClass",e.isChartLoaded?"":"hide-chart"),d.Ob(3),d.Gc("ngIf",e.isChartLoaded),d.Ob(1),d.Gc("ngIf",e.isDataLoaded))},directives:[c.l,c.j,h.a,m.b,p.c,p.a,g.d,g.n,g.q,c.k,f.a],pipes:[v.b,c.t,v.a],styles:[".income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]{margin:30px 0 0;padding:0;border:0}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-right:1px solid #eaeaea;margin:0;padding:10px 20px;cursor:pointer}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:400;letter-spacing:.3px;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;font-size:1.4rem;color:#585858}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li.title[_ngcontent-%COMP%]{cursor:auto}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#8391a1!important}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%], .income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.title):hover{background-color:#5cd694}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .filter-box[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.title):hover   p[_ngcontent-%COMP%]{color:#fff}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]{margin:30px 0}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .chart-box[_ngcontent-%COMP%]{margin:10px 0;height:auto;width:300px;float:left}@media (min-width:576px) and (max-width:767px){.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .chart-box[_ngcontent-%COMP%]{width:235px}}@media (max-width:576px){.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .chart-box[_ngcontent-%COMP%]{float:none;width:auto}}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .chart-box[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:auto!important;height:100%!important}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .chart-box.hide-chart[_ngcontent-%COMP%]{overflow:hidden;visibility:hidden}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]{margin:10px 0 0!important;text-align:center}@media (max-width:576px){.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]{text-align:left;display:inline-block;transform:translateX(-45%)!important;position:relative;left:50%}}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin:0!important;padding:8px 0;overflow:auto;width:250px}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:500;letter-spacing:.2px;font-size:1.4rem;color:#8391a1}.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.title[_ngcontent-%COMP%]{color:#373946;float:left;min-width:180px!important}@media (min-width:576px){.income-tracker-ageing-wrapper[_ngcontent-%COMP%]   .account-chart-card[_ngcontent-%COMP%]   .legends-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.title[_ngcontent-%COMP%]{min-width:auto!important}}"]}),t})();function Re(t,e){1&t&&(d.ic(0,"h5"),d.fd(1,"Add Credit Note"),d.hc())}function _e(t,e){1&t&&(d.ic(0,"h5"),d.fd(1,"Edit Credit Note"),d.hc())}function Ve(t,e){if(1&t&&(d.ic(0,"div",12),d.ic(1,"p",13),d.ic(2,"span"),d.fd(3,"Bill to party: "),d.hc(),d.fd(4),d.hc(),d.ic(5,"p",14),d.ic(6,"span"),d.fd(7,"Contact Person: "),d.hc(),d.fd(8),d.hc(),d.ic(9,"p",14),d.ic(10,"span"),d.fd(11,"Unit: "),d.hc(),d.fd(12),d.hc(),d.hc()),2&t){const t=d.yc(2);d.Ob(4),d.gd(t.accountDataList[0].billToParty),d.Ob(4),d.gd(t.accountDataList[0].primayContact),d.Ob(4),d.id("",t.accountDataList[0].apartmentBlockNumber," ",t.accountDataList[0].apartmentBlockUnitNumber,"")}}function je(t,e){if(1&t&&(d.ic(0,"div",10),d.ic(1,"div",3),d.dd(2,Ve,13,4,"div",11),d.hc(),d.hc()),2&t){const t=d.yc();d.Ob(2),d.Gc("ngIf",t.isAccountDataLoaded)}}function qe(t,e){1&t&&d.ec(0,"app-loader")}function $e(t,e){if(1&t&&(d.ic(0,"option",37),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.apartmentBlockId),d.Ob(1),d.gd(t.apartmentBlockNumber)}}function Ye(t,e){if(1&t&&(d.ic(0,"option",37),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.apartmentBlockUnitId),d.Ob(1),d.gd(t.apartmentBlockUnitNumber)}}function ze(t,e){if(1&t){const t=d.jc();d.ic(0,"div",16),d.ic(1,"div",17),d.ic(2,"label"),d.fd(3,"Select Unit"),d.hc(),d.ic(4,"select",38),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc(2).apartmentBlockUnitId=e}))("ngModelChange",(function(){d.Wc(t);const e=d.yc(2);return e.showInvoiceData(e.apartmentBlockUnitId)})),d.ic(5,"option",19),d.fd(6,"Select"),d.hc(),d.dd(7,Ye,2,2,"option",20),d.hc(),d.hc(),d.hc()}if(2&t){const t=d.yc(2);d.Ob(4),d.Gc("ngModel",t.apartmentBlockUnitId),d.Ob(3),d.Gc("ngForOf",t.unitListData)}}function Xe(t,e){if(1&t&&(d.ic(0,"option",37),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.custInvoiceId),d.Ob(1),d.gd(t.custInvoiceId)}}function He(t,e){if(1&t){const t=d.jc();d.ic(0,"div",16),d.ic(1,"div",17),d.ic(2,"label"),d.fd(3,"Select Bill No"),d.hc(),d.ic(4,"select",39),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc(2).credit.invoiceId=e}))("ngModelChange",(function(){d.Wc(t);const e=d.yc(2);return e.getInvoice(e.credit.invoiceId)})),d.ic(5,"option",19),d.fd(6,"Select"),d.hc(),d.dd(7,Xe,2,2,"option",20),d.hc(),d.hc(),d.hc()}if(2&t){const t=d.yc(2);d.Ob(4),d.Gc("ngModel",t.credit.invoiceId),d.Ob(3),d.Gc("ngForOf",t.invoiceData)}}function Qe(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"div",15),d.ic(2,"div",16),d.ic(3,"div",17),d.ic(4,"label"),d.fd(5,"Select Block"),d.hc(),d.ic(6,"select",18),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().apartmentBlockId=e}))("ngModelChange",(function(){d.Wc(t);const e=d.yc();return e.showUnitData(e.apartmentBlockId)})),d.ic(7,"option",19),d.fd(8,"Select"),d.hc(),d.dd(9,$e,2,2,"option",20),d.hc(),d.hc(),d.hc(),d.dd(10,ze,8,2,"div",21),d.dd(11,He,8,2,"div",21),d.ic(12,"div",16),d.ic(13,"div",22),d.ic(14,"label"),d.fd(15,"Posted On*"),d.hc(),d.ic(16,"input",23),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().credit.insertedOn=e})),d.hc(),d.ec(17,"owl-date-time",24,25),d.ic(19,"div",26),d.ec(20,"i-feather",27),d.hc(),d.hc(),d.hc(),d.ic(21,"div",16),d.ic(22,"div",22),d.ic(23,"label"),d.fd(24,"Amount*"),d.hc(),d.ic(25,"input",28),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().credit.amount=e})),d.hc(),d.hc(),d.hc(),d.ic(26,"div",16),d.ic(27,"div",22),d.ic(28,"label"),d.fd(29,"Comments"),d.hc(),d.ic(30,"input",29),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().credit.comment=e})),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(31,"div",15),d.ic(32,"div",30),d.ic(33,"div",22),d.ic(34,"label"),d.fd(35,"Email*"),d.hc(),d.ic(36,"label",31),d.ic(37,"input",32),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().credit.isEmailSent=e})),d.hc(),d.ic(38,"span",33),d.uc("click",(function(){return d.Wc(t),d.yc().setActive()})),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(39,"div",30),d.ic(40,"div",22),d.ic(41,"label"),d.fd(42,"SMS*"),d.hc(),d.ic(43,"label",31),d.ic(44,"input",34),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().credit.isSmssent=e})),d.hc(),d.ic(45,"span",33),d.uc("click",(function(){return d.Wc(t),d.yc().setActive()})),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(46,"div",35),d.ic(47,"button",36),d.fd(48,"Submit"),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.Tc(18),e=d.yc(),i=d.Tc(8);d.Ob(6),d.Gc("ngModel",e.apartmentBlockId),d.Ob(3),d.Gc("ngForOf",e.blockData),d.Ob(1),d.Gc("ngIf",e.isBlockSelected),d.Ob(1),d.Gc("ngIf",e.isUnitSelected),d.Ob(5),d.Gc("owlDateTime",t)("owlDateTimeTrigger",t)("ngModel",e.credit.insertedOn),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("ngModel",e.credit.amount),d.Ob(5),d.Gc("ngModel",e.credit.comment),d.Ob(7),d.Gc("ngModel",e.credit.isEmailSent),d.Ob(7),d.Gc("ngModel",e.credit.isSmssent),d.Ob(3),d.Gc("disabled",i.invalid)}}let Je=(()=>{class t{constructor(t,e,i,c,n,o,a,r){this.router=t,this.route=e,this.userService=i,this.apartmentService=c,this.accountsService=n,this.sharedService=o,this.lookupService=a,this.cookieService=r,this.isEditCredit=!1,this.isCreditSubmitted=!0,this.isBlockSelected=!1,this.isUnitSelected=!1,this.isAmountAdded=!1,this.isError=!1,this.alertMessage="",this.isAccountDataLoaded=!1}showUnitData(t){this.apartmentService.getApartmentBlockUnitByBlockId(t).subscribe(t=>{this.unitListData=t,this.apartmentBlockUnitId="",this.isBlockSelected=!0,this.isUnitSelected=!1,this.isAmountAdded=!1})}showInvoiceData(t){var e={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:t};this.accountsService.getCustInvoicesByApartmentBlockUnitId(e).subscribe(t=>{this.invoiceData=t,this.credit.invoiceId="",this.isUnitSelected=!0})}getInvoice(t){var e=this.invoiceData.filter(e=>e.custInvoiceId==t),i={apartmentId:parseInt(this.cookieService.get("apartmentId")),invoiceId:t};this.accountsService.getCollectionInvoiceByInvoiceId(i).subscribe(t=>{this.credit.collectionId=void 0===t||0==t.length?null==this.route.params.value.type?null:0:t[0].collectionId}),this.credit.amount=e[0].custInvoiceAmount,this.isAmountAdded=!0}toggleEmail(){this.credit.isEmailSent=!0}toggleSms(){this.credit.isSmssent=!this.credit.isSmssent}setActive(){return""}getUnitData(t){this.apartmentService.getApartmentBlockUnitById(t).subscribe(t=>{this.unitListData=t,this.apartmentBlockId=""+t[0].apartmentBlockId,this.apartmentService.getApartmentBlockUnitByBlockId(t[0].apartmentBlockId).subscribe(t=>{this.unitListData=t})})}getInvoiceData(t){}submitAddCreditNoteForm(t){if(this.isEditCredit){let t={creditNoteId:this.credit.creditNoteId,apartmentId:parseInt(this.cookieService.get("apartmentId")),amount:parseInt(this.credit.amount),collectionId:null,invoiceId:parseInt(this.credit.invoiceId),isEmailSent:this.credit.isEmailSent,isSmssent:this.credit.isSmssent,comment:this.credit.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:this.credit.insertedOn,updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:this.credit.insertedOn,transReference1:"string",transReference2:"string",glAcctIndicator:"Income",apartmentBlockUnitId:parseInt(this.apartmentBlockUnitId)};this.accountsService.updateCreditNote(t).subscribe(t=>{t.message?(this.isCreditSubmitted=!0,this.sharedService.setAlertMessage("Credit Note updated successfully"),this.router.navigate(["ams/income/creditnote"])):(this.isCreditSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isCreditSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}else{let t={apartmentId:parseInt(this.cookieService.get("apartmentId")),amount:parseInt(this.credit.amount),collectionId:0,invoiceId:parseInt(this.credit.invoiceId),isEmailSent:this.credit.isEmailSent,isSmssent:this.credit.isSmssent,comment:this.credit.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:this.credit.insertedOn,updatedBy:0,updatedOn:this.credit.insertedOn,transReference1:"string",transReference2:"string",glAcctIndicator:"Income",apartmentBlockUnitId:parseInt(this.route.params.value.id)};this.accountsService.addCreditNote(t).subscribe(t=>{t.message?(this.isCreditSubmitted=!0,this.sharedService.setAlertMessage("Credit Note added successfully"),this.router.navigate(["ams/income/creditnote"])):(this.isCreditSubmitted=!0,this.isError=!0,this.alertMessage=t.errorMessage)},t=>{this.isCreditSubmitted=!0,this.isError=!0,this.alertMessage="Some error occured"})}}ngOnInit(){if(this.credit={},this.credit.invoiceId="",this.credit.comment="",this.credit.isEmailSent=!1,this.credit.isSmssent=!1,this.apartmentBlockId="",this.apartmentBlockUnitId="",null!=this.route.params.value.id&&null==this.route.params.value.type){var t={apartmentId:parseInt(this.cookieService.get("apartmentId")),creditNoteId:this.route.params.value.id};this.accountsService.getCreditNoteById(t).subscribe(t=>{this.credit=t[0],this.apartmentBlockUnitId=""+this.credit.apartmentBlockUnitId,this.getUnitData(this.credit.apartmentBlockUnitId);var e={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:this.credit.apartmentBlockUnitId};this.accountsService.getCustInvoicesByApartmentBlockUnitId(e).subscribe(t=>{this.invoiceData=t}),this.isEditCredit=!0,this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.credit.apartmentBlockUnitId),this.isAccountDataLoaded=!0})},t=>{})}else{this.accountsService.GetIncomeTrackerSubLedgersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.accountDataList=t.filter(t=>t.apartmentBlockUnitId==this.route.params.value.id),this.isAccountDataLoaded=!0}),this.apartmentBlockUnitId=""+this.route.params.value.id,this.getUnitData(this.route.params.value.id);var e={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentBlockUnitId:this.apartmentBlockUnitId};this.accountsService.getCustInvoicesByApartmentBlockUnitId(e).subscribe(t=>{this.invoiceData=t,this.isUnitSelected=!0}),this.isBlockSelected=!0}this.apartmentService.getApartmentBlockByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.blockData=t})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(n.c),d.dc(n.a),d.dc(R.a),d.dc(o.a),d.dc(a.a),d.dc(r.a),d.dc(z.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-add-credit"]],decls:13,vars:7,consts:[[1,"income-add-credit-wrapper"],[1,"card","clear"],[1,"card-header"],[1,"float-left"],[4,"ngIf"],["class","card-header at-header",4,"ngIf"],["name","addCreditNoteForm","novalidate","",3,"ngSubmit"],["addCreditNoteForm","ngForm"],[1,"card-body"],[3,"message","isError"],[1,"card-header","at-header"],["class","sub-details",4,"ngIf"],[1,"sub-details"],[1,"d-inline-block","ft"],[1,"d-inline-block","ft","ml-md-4"],[1,"row"],[1,"col-sm-4"],[1,"select-box"],["name","blockNo","id","blockNo","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["class","col-sm-4",4,"ngIf"],[1,"input-box"],["name","invoiceDueDate","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["postedOn",""],[1,"date-btn"],["name","calendar","width","18",1,"icon","date","float-left"],["type","number","OnlyNumber","true","placeholder","Enter text","name","creditAmount","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter text","name","comment","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-2"],[1,"switch"],["type","checkbox","name","isEmailSent",3,"ngModel","ngModelChange"],[1,"slider","round",3,"click"],["type","checkbox","name","isSmssent",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue",3,"disabled"],[3,"value"],["name","unitNo","id","unitNo","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","invoiceId","id","invoiceId","required","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){const t=d.jc();d.ic(0,"div",0),d.ic(1,"div",1),d.ic(2,"div",2),d.ic(3,"div",3),d.dd(4,Re,2,0,"h5",4),d.dd(5,_e,2,0,"h5",4),d.hc(),d.hc(),d.dd(6,je,3,1,"div",5),d.ic(7,"form",6,7),d.uc("ngSubmit",(function(){d.Wc(t);const i=d.Tc(8);return e.submitAddCreditNoteForm(i)})),d.ic(9,"div",8),d.dd(10,qe,1,0,"app-loader",4),d.ec(11,"app-alert-message",9),d.dd(12,Qe,49,13,"ng-container",4),d.hc(),d.hc(),d.hc(),d.hc()}2&t&&(d.Ob(4),d.Gc("ngIf",!e.isEditCredit),d.Ob(1),d.Gc("ngIf",e.isEditCredit),d.Ob(1),d.Gc("ngIf",e.isAccountDataLoaded),d.Ob(4),d.Gc("ngIf",!e.isCreditSubmitted),d.Ob(1),d.Gc("message",e.alertMessage)("isError",e.isError),d.Ob(1),d.Gc("ngIf",e.isCreditSubmitted))},directives:[c.l,g.B,g.o,g.p,Ft.a,h.a,g.y,g.x,g.n,g.q,g.r,g.A,c.k,p.a,nt.b,g.d,nt.d,nt.a,m.b,g.s,p.b,g.a],styles:[""]}),t})();const Ze=function(){return{exact:!0}};function Ke(t,e){if(1&t&&(d.gc(0),d.ic(1,"a",6),d.fd(2),d.hc(),d.fc()),2&t){const t=e.$implicit;d.Ob(1),d.Ic("routerLink","/ams/income/reports/",t.type,""),d.Gc("routerLinkActiveOptions",d.Mc(3,Ze)),d.Ob(1),d.gd(t.name)}}let ti=(()=>{class t{constructor(t,e){this.sharedService=t,this.cookieService=e}ngOnInit(){this.reportsDataList=[{name:"Customer Journal Report",type:"customer"},{name:"Vendor Journal Entires",type:"vendor"}]}}return t.\u0275fac=function(e){return new(e||t)(d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-tracker-reports"]],decls:7,vars:1,consts:[[1,"gl-other-reports-wrapper"],[1,"main-title-mini"],[1,"card"],[1,"card-body","p-0"],[1,"simple-lists"],[4,"ngFor","ngForOf"],["href","javascript:void(0)","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.ic(1,"h4",1),d.fd(2,"Select the reports"),d.hc(),d.ic(3,"div",2),d.ic(4,"div",3),d.ic(5,"div",4),d.dd(6,Ke,3,4,"ng-container",5),d.hc(),d.hc(),d.hc(),d.hc()),2&t&&(d.Ob(6),d.Gc("ngForOf",e.reportsDataList))},directives:[c.k,n.e,n.d],styles:[""]}),t})();function ei(t,e){1&t&&d.ec(0,"app-loader")}function ii(t,e){if(1&t&&(d.ic(0,"option",22),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.lookupValueId),d.Ob(1),d.gd(t.lookupValueName)}}function ci(t,e){if(1&t&&(d.ic(0,"option",22),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.glaccountId),d.Ob(1),d.gd(t.glaccountName)}}function ni(t,e){if(1&t&&(d.ic(0,"option",22),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.lookupValueId),d.Ob(1),d.gd(t.lookupValueName)}}function oi(t,e){if(1&t&&(d.ic(0,"option",22),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.lookupValueId),d.Ob(1),d.gd(t.lookupValueName)}}function ai(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"form",8,9),d.uc("ngSubmit",(function(){d.Wc(t);const e=d.Tc(2);return d.yc().submitIncomeSettingsForm(e)})),d.ic(3,"div",10),d.ic(4,"div",11),d.ic(5,"div",12),d.ic(6,"label"),d.fd(7,"Currency Type*"),d.hc(),d.ic(8,"select",13),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().setting.currencyId=e})),d.ic(9,"option",14),d.fd(10,"Select"),d.hc(),d.dd(11,ii,2,2,"option",15),d.hc(),d.hc(),d.hc(),d.ic(12,"div",11),d.ic(13,"div",12),d.ic(14,"label"),d.fd(15,"Gl Account*"),d.hc(),d.ic(16,"select",16),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().setting.glAccountId=e})),d.ic(17,"option",14),d.fd(18,"Select"),d.hc(),d.dd(19,ci,2,2,"option",15),d.hc(),d.hc(),d.hc(),d.ic(20,"div",11),d.ic(21,"div",12),d.ic(22,"label"),d.fd(23,"Customer Income Payment Term*"),d.hc(),d.ic(24,"select",17),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().setting.paymentTerm=e})),d.ic(25,"option",14),d.fd(26,"Select"),d.hc(),d.dd(27,ni,2,2,"option",15),d.hc(),d.hc(),d.hc(),d.ic(28,"div",11),d.ic(29,"div",12),d.ic(30,"label"),d.fd(31,"Customer Invoice VAT %*"),d.hc(),d.ic(32,"select",17),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().setting.vatPercentage=e})),d.ic(33,"option",14),d.fd(34,"Select"),d.hc(),d.dd(35,oi,2,2,"option",15),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(36,"div",10),d.ic(37,"div",18),d.ic(38,"ul",19),d.ic(39,"li",20),d.ic(40,"button",21),d.fd(41,"Save"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.Tc(2),e=d.yc();d.Ob(8),d.Gc("ngModel",e.setting.currencyId),d.Ob(3),d.Gc("ngForOf",e.currencyTypeDataList),d.Ob(5),d.Gc("ngModel",e.setting.glAccountId),d.Ob(3),d.Gc("ngForOf",e.glAccountListData),d.Ob(5),d.Gc("ngModel",e.setting.paymentTerm),d.Ob(3),d.Gc("ngForOf",e.paymentInvoiceDataList),d.Ob(5),d.Gc("ngModel",e.setting.vatPercentage),d.Ob(3),d.Gc("ngForOf",e.vatPecentageDataList),d.Ob(5),d.Gc("disabled",t.invalid)}}function ri(t,e){1&t&&d.ec(0,"app-loader")}function si(t,e){if(1&t&&(d.ic(0,"option",22),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.lookupValueId),d.Ob(1),d.gd(t.lookupValueName)}}function di(t,e){if(1&t&&(d.ic(0,"option",22),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.lookupValueId),d.Ob(1),d.gd(t.lookupValueName)}}function li(t,e){if(1&t&&(d.ic(0,"option",22),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.lookupValueId),d.Ob(1),d.gd(t.lookupValueName)}}function ui(t,e){if(1&t&&(d.ic(0,"option",22),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.lookupValueId),d.Ob(1),d.gd(t.lookupValueName)}}function hi(t,e){if(1&t){const t=d.jc();d.gc(0),d.ic(1,"form",23,24),d.uc("ngSubmit",(function(){d.Wc(t);const e=d.Tc(2);return d.yc().submitIncomePenaltySettingsForm(e)})),d.ic(3,"div",10),d.ic(4,"div",11),d.ic(5,"div",12),d.ic(6,"label"),d.fd(7,"Type*"),d.hc(),d.ic(8,"select",25),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().penalty.penaltyTypeId=e})),d.ic(9,"option",14),d.fd(10,"Select"),d.hc(),d.dd(11,si,2,2,"option",15),d.hc(),d.hc(),d.hc(),d.ic(12,"div",11),d.ic(13,"div",12),d.ic(14,"label"),d.fd(15,"Flat rate for Late payment*"),d.hc(),d.ic(16,"select",26),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().penalty.latePaymentId=e})),d.ic(17,"option",14),d.fd(18,"Select"),d.hc(),d.dd(19,di,2,2,"option",15),d.hc(),d.hc(),d.hc(),d.ic(20,"div",11),d.ic(21,"div",12),d.ic(22,"label"),d.fd(23,"% Penalty*"),d.hc(),d.ic(24,"select",27),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().penalty.penaltyPercentage=e})),d.ic(25,"option",14),d.fd(26,"Select"),d.hc(),d.dd(27,li,2,2,"option",15),d.hc(),d.hc(),d.hc(),d.ic(28,"div",11),d.ic(29,"div",12),d.ic(30,"label"),d.fd(31,"Grace Period for Invoice*"),d.hc(),d.ic(32,"select",28),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().penalty.gracePeriodInvoiceId=e})),d.ic(33,"option",14),d.fd(34,"Select"),d.hc(),d.dd(35,ui,2,2,"option",15),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(36,"div",10),d.ic(37,"div",18),d.ic(38,"ul",19),d.ic(39,"li",20),d.ic(40,"button",21),d.fd(41,"Save"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.fc()}if(2&t){const t=d.Tc(2),e=d.yc();d.Ob(8),d.Gc("ngModel",e.penalty.penaltyTypeId),d.Ob(3),d.Gc("ngForOf",e.penaltyDataList),d.Ob(5),d.Gc("ngModel",e.penalty.latePaymentId),d.Ob(3),d.Gc("ngForOf",e.lastPaymentDataList),d.Ob(5),d.Gc("ngModel",e.penalty.penaltyPercentage),d.Ob(3),d.Gc("ngForOf",e.penaltyPercentageDataList),d.Ob(5),d.Gc("ngModel",e.penalty.gracePeriodInvoiceId),d.Ob(3),d.Gc("ngForOf",e.gracePeriodInvoiceDataList),d.Ob(5),d.Gc("disabled",t.invalid)}}let mi=(()=>{class t{constructor(t,e,i,c){this.accountsService=t,this.lookupService=e,this.sharedService=i,this.cookieService=c,this.isSettingsDataLoaded=!0,this.isPenaltyDataLoaded=!0,this.isError=!1,this.errorMessage=!1,this.glAccountIndicator="Income"}submitIncomeSettingsForm(t){}submitIncomePenalitySettingsForm(t){}ngOnInit(){this.setting={},this.setting.currencyId="",this.setting.glAccountId="",this.setting.paymentTerm="",this.setting.vatPercentage="",this.penalty={},this.penalty.penaltyTypeId="",this.penalty.latePaymentId="",this.penalty.penaltyPercentage="",this.penalty.gracePeriodInvoiceId="",this.lookupService.getLookupValueByLookupTypeId(88).subscribe(t=>{this.currencyTypeDataList=t.filter(t=>t.isActive)}),this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountListData=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),this.lookupService.getLookupValueByLookupTypeId(74).subscribe(t=>{this.paymentInvoiceDataList=t.filter(t=>t.isActive)}),this.lookupService.getLookupValueByLookupTypeId(77).subscribe(t=>{this.vatPecentageDataList=t.filter(t=>t.isActive)}),this.lookupService.getLookupValueByLookupTypeId(80).subscribe(t=>{this.penaltyDataList=t.filter(t=>t.isActive)}),this.lookupService.getLookupValueByLookupTypeId(81).subscribe(t=>{this.lastPaymentDataList=t.filter(t=>t.isActive)}),this.lookupService.getLookupValueByLookupTypeId(82).subscribe(t=>{this.penaltyPercentageDataList=t.filter(t=>t.isActive)}),this.lookupService.getLookupValueByLookupTypeId(83).subscribe(t=>{this.gracePeriodInvoiceDataList=t.filter(t=>t.isActive)})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(a.a),d.dc(z.a),d.dc(r.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-tracker-setup"]],decls:19,vars:8,consts:[[1,"income-tracker-setup-wrapper"],[1,"card"],[1,"card-header"],[1,"float-left"],[1,"card-body"],[3,"message","isAlert"],[4,"ngIf"],[1,"card","mt-30"],["name","incomeSettingsForm","novalidate","",3,"ngSubmit"],["incomeSettingsForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"select-box"],["name","currencyType","id","currencyType","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","glAccount","id","glAccount","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","paymentTerm","id","paymentTerm","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"list-inline","float-right","mt-4"],[1,"list-inline-item"],[1,"btn","blue","mr-2",3,"disabled"],[3,"value"],["name","incomePenaltySettingsForm","novalidate","",3,"ngSubmit"],["incomePenaltySettingsForm","ngForm"],["name","penaltyType","id","penaltyType","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","latePayment","id","latePayment","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","penaltyPercentage","id","penaltyPercentage","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","gracePeriodInvoice","id","gracePeriodInvoice","required","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.ic(1,"div",1),d.ic(2,"div",2),d.ic(3,"div",3),d.ic(4,"h5"),d.fd(5,"Settings"),d.hc(),d.hc(),d.hc(),d.ic(6,"div",4),d.ec(7,"app-alert-message",5),d.dd(8,ei,1,0,"app-loader",6),d.dd(9,ai,42,9,"ng-container",6),d.hc(),d.hc(),d.ic(10,"div",7),d.ic(11,"div",2),d.ic(12,"div",3),d.ic(13,"h5"),d.fd(14,"Customer Penalty"),d.hc(),d.hc(),d.hc(),d.ic(15,"div",4),d.ec(16,"app-alert-message",5),d.dd(17,ri,1,0,"app-loader",6),d.dd(18,hi,42,9,"ng-container",6),d.hc(),d.hc(),d.hc()),2&t&&(d.Ob(7),d.Gc("message",e.errorMessage)("isAlert",e.isError),d.Ob(1),d.Gc("ngIf",!e.isSettingsDataLoaded),d.Ob(1),d.Gc("ngIf",e.isSettingsDataLoaded),d.Ob(7),d.Gc("message",e.errorMessage)("isAlert",e.isError),d.Ob(1),d.Gc("ngIf",!e.isPenaltyDataLoaded),d.Ob(1),d.Gc("ngIf",e.isPenaltyDataLoaded))},directives:[Ft.a,c.l,h.a,g.B,g.o,g.p,g.y,g.x,g.n,g.q,g.r,g.A,c.k],styles:[""]}),t})();function pi(t,e){if(1&t&&(d.ic(0,"option",30),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.apartmentBlockId),d.Ob(1),d.gd(t.apartmentBlockNumber)}}function gi(t,e){if(1&t&&(d.ic(0,"option",30),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.apartmentBlockUnitId),d.Ob(1),d.gd(t.apartmentBlockUnitNumber)}}function fi(t,e){if(1&t&&(d.ic(0,"option",30),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.glaccountId),d.Ob(1),d.id("",t.glaccountName," ",t.glaccountId,"")}}function vi(t,e){1&t&&d.ec(0,"app-loader")}function Ii(t,e){if(1&t&&(d.ic(0,"p"),d.fd(1,"Transactions From "),d.ic(2,"span",46),d.fd(3),d.hc(),d.fd(4," To "),d.ic(5,"span",46),d.fd(6),d.hc(),d.hc()),2&t){const t=d.yc(2);d.Ob(3),d.gd(t.getDate(t.report.documentDateFrom)),d.Ob(3),d.gd(t.getDate(t.report.documentDateTo))}}function bi(t,e){if(1&t&&(d.ic(0,"tr"),d.ic(1,"td",47),d.fd(2),d.hc(),d.ic(3,"td",48),d.fd(4),d.hc(),d.ic(5,"td",48),d.fd(6),d.hc(),d.ic(7,"td",48),d.fd(8),d.hc(),d.ic(9,"td",48),d.fd(10),d.hc(),d.ic(11,"td",48),d.fd(12),d.hc(),d.ic(13,"td",48),d.fd(14),d.hc(),d.ic(15,"td",48),d.fd(16),d.hc(),d.ic(17,"td",48),d.fd(18),d.hc(),d.ic(19,"td",48),d.fd(20),d.hc(),d.ic(21,"td",48),d.fd(22),d.hc(),d.ic(23,"td",48),d.fd(24),d.hc(),d.hc()),2&t){const t=e.$implicit,i=d.yc(2);d.Ob(2),d.gd(t.custInvoiceId),d.Ob(2),d.gd(t.apartmentBlock),d.Ob(2),d.gd(t.apartmentBlockUnitNumber),d.Ob(2),d.gd(t.creditAmount),d.Ob(2),d.gd(t.debitAmount),d.Ob(2),d.gd(t.glaccountname),d.Ob(2),d.gd(i.getDate(t.documentDate)),d.Ob(2),d.gd(t.enteredByName),d.Ob(2),d.gd(i.getTimeFormat(t.entryDateTime)),d.Ob(2),d.gd(i.getDate(t.postingDate)),d.Ob(2),d.gd(i.getDate(t.clearingDate)),d.Ob(2),d.gd(t.clearingDocumentNumber)}}function yi(t,e){1&t&&(d.ic(0,"div",49),d.ic(1,"p",50),d.fd(2,"No Data Available"),d.hc(),d.hc())}function Oi(t,e){if(1&t){const t=d.jc();d.ic(0,"div",31),d.ic(1,"div",32),d.ic(2,"div",33),d.ic(3,"h5"),d.fd(4,"Reports "),d.ic(5,"span",34),d.fd(6),d.hc(),d.hc(),d.dd(7,Ii,7,2,"p",28),d.hc(),d.ic(8,"ul",35),d.ic(9,"li",36),d.ec(10,"i",37),d.ic(11,"input",38),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().reportsData=e})),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(12,"div",39),d.ic(13,"table",40),d.ic(14,"thead"),d.ic(15,"tr"),d.ic(16,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("custInvoiceId")})),d.fd(17,"Customer Invoice Id"),d.ec(18,"span",42),d.hc(),d.ic(19,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("apartmentBlock")})),d.fd(20,"Block No"),d.ec(21,"span",42),d.hc(),d.ic(22,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("apartmentBlockUnitNumber")})),d.fd(23,"Unit No"),d.ec(24,"span",42),d.hc(),d.ic(25,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("creditAmount")})),d.fd(26,"Credit Amount"),d.ec(27,"span",42),d.hc(),d.ic(28,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("debitAmount")})),d.fd(29,"Debit Amount"),d.ec(30,"span",42),d.hc(),d.ic(31,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("glaccountname")})),d.fd(32,"Gl Account Name"),d.ec(33,"span",42),d.hc(),d.ic(34,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("documentDate")})),d.fd(35,"Document Date"),d.ec(36,"span",42),d.hc(),d.ic(37,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("enteredByName")})),d.fd(38,"Entered By"),d.ec(39,"span",42),d.hc(),d.ic(40,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("entryDateTime")})),d.fd(41,"Entry Date & Time"),d.ec(42,"span",42),d.hc(),d.ic(43,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("postingDate")})),d.fd(44,"Posting Date"),d.ec(45,"span",42),d.hc(),d.ic(46,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("clearingDate")})),d.fd(47,"Clearing Date"),d.ec(48,"span",42),d.hc(),d.ic(49,"th",41),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("clearingDocumentNumber")})),d.fd(50,"Clearing Document No "),d.ec(51,"span",42),d.hc(),d.hc(),d.hc(),d.ic(52,"tbody"),d.dd(53,bi,25,12,"tr",43),d.zc(54,"simpleSearch"),d.zc(55,"slice"),d.zc(56,"orderBy"),d.hc(),d.hc(),d.dd(57,yi,3,0,"div",44),d.ic(58,"app-pagination",45),d.uc("outputParams",(function(e){return d.Wc(t),d.yc().getIndexParams(e)})),d.hc(),d.hc(),d.hc()}if(2&t){const t=d.yc();d.Ob(6),d.gd(t.totalItems),d.Ob(1),d.Gc("ngIf",!t.isReportSubmitted),d.Ob(4),d.Gc("ngModel",t.reportsData),d.Ob(7),d.Gc("ngClass",t.getFieldOrderBy("custInvoiceId")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("apartmentBlock")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("apartmentBlockUnitNumber")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("creditAmount")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("debitAmount")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("glaccountname")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("documentDate")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("enteredByName")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("entryDateTime")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("postingDate")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("clearingDate")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("clearingDocumentNumber")),d.Ob(2),d.Gc("ngForOf",d.Bc(54,21,d.Cc(55,24,d.Cc(56,28,t.reportsDataList,t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex),t.reportsData)),d.Ob(4),d.Gc("ngIf",t.isNoItemsAvailable()),d.Ob(1),d.Gc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let Di=(()=>{class t{constructor(t,e,i,c,n){this.apartmentService=t,this.accountsService=e,this.sharedService=i,this.lookupService=c,this.cookieService=n,this.glAccountIndicator="Cust_Invoice",this.isBlockSelected=!1,this.isUnitSelected=!1,this.ItemStartIndex=0,this.itemLimit=8,this.unitFieldType="unitno",this.unitOrder=!1,this.isReportSubmitted=!0,this.isDataLoaded=!0}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"desc":"asc":""}getUnits(t){this.apartmentService.getApartmentBlockUnitByBlockId(parseInt(t)).subscribe(t=>{this.blockUnitData=t,this.isBlockSelected=!0})}getDate(t){return w(t).format("DD/MM/YYYY")}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}getDateFormat(t){return w(t).format("YYYY-MM-DD")}getTimeFormat(t){return w(t).format("YYYY-MM-DD HH:mm")}submitIncomeReportsCustomerForm(t){this.isReportSubmitted=!0,this.isDataLoaded=!1;let e={BlockID:parseInt(this.report.apartmentBlockId),ApartmentBlockUnitId:parseInt(this.report.apartmentBlockUnitId),DocumentdateFrom:this.getDateFormat(this.report.documentDateFrom),DocumentdateTo:this.getDateFormat(this.report.documentDateTo),PostingdateFrom:this.getDateFormat(this.report.PostingdateFrom),PostingdateTo:this.getDateFormat(this.report.PostingdateTo),GLaccountID:parseInt(this.report.GLaccountID),GLDocumentTypeID:142,apartmentId:parseInt(this.cookieService.get("apartmentId"))};this.accountsService.getCustGltransactionsMultiFilter(e).subscribe(t=>{this.reportsDataList=t,this.totalItems=this.reportsDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isDataLoaded=!0,this.isReportSubmitted=!1},t=>{})}ngOnInit(){this.report={},this.report.apartmentBlockId="",this.report.apartmentBlockUnitId="",this.report.GLaccountID="",this.report.GLDocumentTypeID="",this.apartmentService.getApartmentBlockByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.blockData=t}),this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountsDataList=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),this.lookupService.getLookupValueByLookupTypeId(31).subscribe(t=>{this.glDocumentTypeDataList=t},t=>{})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(o.a),d.dc(a.a),d.dc(r.a),d.dc(z.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-tracker-reports-customer"]],decls:73,vars:26,consts:[[1,"income-tracker-reports-customer-reports"],[1,"main-title-mini"],[1,"card","clear"],[1,"card-body"],["name","incomeReportsCustomerForm","novalidate","",3,"ngSubmit"],["incomeReportsCustomerForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"select-box"],["name","blockNo","id","blockNo",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","unitNo","id","unitNo",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"input-box"],["name","documentDateFrom","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["documentDateFrom",""],[1,"date-btn"],["name","calendar","width","18",1,"icon","date","float-left"],["name","documentDateTo","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["documentDateTo",""],["name","PostingDateFrom","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["PostingDateFrom",""],["name","PostingdateTo","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["PostingdateTo",""],["name","glAccountNo","id","glAccountNo",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"btn","blue",3,"disabled"],[4,"ngIf"],["class","card clear mt-30",4,"ngIf"],[3,"value"],[1,"card","clear","mt-30"],[1,"card-header"],[1,"list-inline","float-left"],[1,"badge","lime-green"],[1,"list-inline","float-right"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"table","table-stretch","table-responsive"],["scope","col",3,"click"],[3,"ngClass"],[4,"ngFor","ngForOf"],["class","button-wrapper border-top",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"tc-blue","m-bold"],[1,"name"],[1,"grey"],[1,"button-wrapper","border-top"],[1,"snippet"]],template:function(t,e){if(1&t){const t=d.jc();d.ic(0,"div",0),d.ic(1,"h4",1),d.fd(2,"Customer Journal Entries"),d.hc(),d.ic(3,"div",2),d.ic(4,"div",3),d.ic(5,"form",4,5),d.uc("ngSubmit",(function(){d.Wc(t);const i=d.Tc(6);return e.submitIncomeReportsCustomerForm(i)})),d.ic(7,"div",6),d.ic(8,"div",7),d.ic(9,"div",8),d.ic(10,"label"),d.fd(11,"Block No"),d.hc(),d.ic(12,"select",9),d.uc("ngModelChange",(function(t){return e.report.apartmentBlockId=t}))("ngModelChange",(function(){return e.getUnits(e.report.apartmentBlockId)})),d.ic(13,"option",10),d.fd(14,"Select"),d.hc(),d.dd(15,pi,2,2,"option",11),d.hc(),d.hc(),d.hc(),d.ic(16,"div",7),d.ic(17,"div",8),d.ic(18,"label"),d.fd(19,"Unit No"),d.hc(),d.ic(20,"select",12),d.uc("ngModelChange",(function(t){return e.report.apartmentBlockUnitId=t})),d.ic(21,"option",10),d.fd(22,"Select"),d.hc(),d.dd(23,gi,2,2,"option",11),d.hc(),d.hc(),d.hc(),d.ic(24,"div",7),d.ic(25,"div",13),d.ic(26,"label"),d.fd(27,"Document Date From"),d.hc(),d.ic(28,"input",14),d.uc("ngModelChange",(function(t){return e.report.documentDateFrom=t})),d.hc(),d.ec(29,"owl-date-time",15,16),d.ic(31,"div",17),d.ec(32,"i-feather",18),d.hc(),d.hc(),d.hc(),d.ic(33,"div",7),d.ic(34,"div",13),d.ic(35,"label"),d.fd(36,"Document Date To"),d.hc(),d.ic(37,"input",19),d.uc("ngModelChange",(function(t){return e.report.documentDateTo=t})),d.hc(),d.ec(38,"owl-date-time",15,20),d.ic(40,"div",17),d.ec(41,"i-feather",18),d.hc(),d.hc(),d.hc(),d.ic(42,"div",7),d.ic(43,"div",13),d.ic(44,"label"),d.fd(45,"Posting Date From*"),d.hc(),d.ic(46,"input",21),d.uc("ngModelChange",(function(t){return e.report.PostingdateFrom=t})),d.hc(),d.ec(47,"owl-date-time",15,22),d.ic(49,"div",17),d.ec(50,"i-feather",18),d.hc(),d.hc(),d.hc(),d.ic(51,"div",7),d.ic(52,"div",13),d.ic(53,"label"),d.fd(54,"Posting Date To*"),d.hc(),d.ic(55,"input",23),d.uc("ngModelChange",(function(t){return e.report.PostingdateTo=t})),d.hc(),d.ec(56,"owl-date-time",15,24),d.ic(58,"div",17),d.ec(59,"i-feather",18),d.hc(),d.hc(),d.hc(),d.ic(60,"div",7),d.ic(61,"div",8),d.ic(62,"label"),d.fd(63,"Gl Account"),d.hc(),d.ic(64,"select",25),d.uc("ngModelChange",(function(t){return e.report.GLaccountID=t})),d.ic(65,"option",10),d.fd(66,"Select"),d.hc(),d.dd(67,fi,2,3,"option",11),d.hc(),d.hc(),d.hc(),d.ic(68,"div",26),d.ic(69,"button",27),d.fd(70,"Generate"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.dd(71,vi,1,0,"app-loader",28),d.dd(72,Oi,59,32,"div",29),d.hc()}if(2&t){const t=d.Tc(6),i=d.Tc(30),c=d.Tc(39),n=d.Tc(48),o=d.Tc(57);d.Ob(12),d.Gc("ngModel",e.report.apartmentBlockId),d.Ob(3),d.Gc("ngForOf",e.blockData),d.Ob(5),d.Gc("ngModel",e.report.apartmentBlockUnitId)("disabled",!e.isBlockSelected),d.Ob(3),d.Gc("ngForOf",e.blockUnitData),d.Ob(5),d.Gc("owlDateTime",i)("owlDateTimeTrigger",i)("ngModel",e.report.documentDateFrom),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("owlDateTime",c)("owlDateTimeTrigger",c)("ngModel",e.report.documentDateTo),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("owlDateTime",n)("owlDateTimeTrigger",n)("ngModel",e.report.PostingdateFrom),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("owlDateTime",o)("owlDateTimeTrigger",o)("ngModel",e.report.PostingdateTo),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("ngModel",e.report.GLaccountID),d.Ob(3),d.Gc("ngForOf",e.glAccountsDataList),d.Ob(2),d.Gc("disabled",t.invalid),d.Ob(2),d.Gc("ngIf",!e.isDataLoaded),d.Ob(1),d.Gc("ngIf",e.isDataLoaded&&!e.isReportSubmitted)}},directives:[g.B,g.o,g.p,g.y,g.n,g.q,g.r,g.A,c.k,p.a,nt.b,g.d,nt.d,nt.a,m.b,g.x,c.l,h.a,p.c,c.j,f.a],pipes:[v.b,c.t,v.a],styles:[""]}),t})();var Ai=i("7229");function ki(t,e){if(1&t&&(d.ic(0,"option",29),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.vendorId),d.Ob(1),d.gd(t.vendorName)}}function Si(t,e){if(1&t&&(d.ic(0,"option",29),d.fd(1),d.hc()),2&t){const t=e.$implicit;d.Gc("value",t.glaccountId),d.Ob(1),d.id("",t.glaccountName," ",t.glaccountId,"")}}function Ci(t,e){1&t&&d.ec(0,"app-loader")}function Li(t,e){if(1&t&&(d.ic(0,"p"),d.fd(1,"Transactions From "),d.ic(2,"span",45),d.fd(3),d.hc(),d.fd(4," To "),d.ic(5,"span",45),d.fd(6),d.hc(),d.hc()),2&t){const t=d.yc(2);d.Ob(3),d.gd(t.getDate(t.report.documentDateFrom)),d.Ob(3),d.gd(t.getDate(t.report.documentDateTo))}}function Mi(t,e){if(1&t&&(d.ic(0,"tr"),d.ic(1,"td",46),d.fd(2),d.hc(),d.ic(3,"td",47),d.fd(4),d.hc(),d.ic(5,"td",47),d.fd(6),d.hc(),d.ic(7,"td",47),d.fd(8),d.hc(),d.ic(9,"td",47),d.fd(10),d.hc(),d.ic(11,"td",47),d.fd(12),d.hc(),d.ic(13,"td",47),d.fd(14),d.hc(),d.ic(15,"td",47),d.fd(16),d.hc(),d.ic(17,"td",47),d.fd(18),d.hc(),d.ic(19,"td",47),d.fd(20),d.hc(),d.ic(21,"td",47),d.fd(22),d.hc(),d.hc()),2&t){const t=e.$implicit,i=d.yc(2);d.Ob(2),d.gd(t.vendorName),d.Ob(2),d.gd(t.vendorInvoiceId),d.Ob(2),d.gd(t.creditAmount),d.Ob(2),d.gd(t.debitAmount),d.Ob(2),d.gd(t.glaccountname),d.Ob(2),d.gd(i.getDate(t.documentDate)),d.Ob(2),d.gd(t.documentNumber),d.Ob(2),d.gd(t.enteredByName),d.Ob(2),d.gd(i.getTimeFormat(t.entryDateTime)),d.Ob(2),d.gd(i.getDate(t.postingDate)),d.Ob(2),d.gd(i.getDate(t.clearingDate))}}function Gi(t,e){1&t&&(d.ic(0,"div",48),d.ic(1,"p",49),d.fd(2,"No Data Available"),d.hc(),d.hc())}function xi(t,e){if(1&t){const t=d.jc();d.ic(0,"div",30),d.ic(1,"div",31),d.ic(2,"div",32),d.ic(3,"h5"),d.fd(4,"Reports "),d.ic(5,"span",33),d.fd(6),d.hc(),d.hc(),d.dd(7,Li,7,2,"p",27),d.hc(),d.ic(8,"ul",34),d.ic(9,"li",35),d.ec(10,"i",36),d.ic(11,"input",37),d.uc("ngModelChange",(function(e){return d.Wc(t),d.yc().reportsData=e})),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(12,"div",38),d.ic(13,"table",39),d.ic(14,"thead"),d.ic(15,"tr"),d.ic(16,"th",40),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("vendorName")})),d.fd(17,"Vendor Name"),d.ec(18,"span",41),d.hc(),d.ic(19,"th",40),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("vendorInvoiceId")})),d.fd(20,"Vendor Invoice Id"),d.ec(21,"span",41),d.hc(),d.ic(22,"th",40),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("creditAmount")})),d.fd(23,"Credit Amount"),d.ec(24,"span",41),d.hc(),d.ic(25,"th",40),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("debitAmount")})),d.fd(26,"Debit Amount"),d.ec(27,"span",41),d.hc(),d.ic(28,"th",40),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("glaccountname")})),d.fd(29,"Gl Account Name"),d.ec(30,"span",41),d.hc(),d.ic(31,"th",40),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("documentDate")})),d.fd(32,"Document Date"),d.ec(33,"span",41),d.hc(),d.ic(34,"th",40),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("documentNumber")})),d.fd(35,"Document No"),d.ec(36,"span",41),d.hc(),d.ic(37,"th",40),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("enteredByName")})),d.fd(38,"Entered By"),d.ec(39,"span",41),d.hc(),d.ic(40,"th",40),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("entryDateTime")})),d.fd(41,"Entry Date & Time"),d.ec(42,"span",41),d.hc(),d.ic(43,"th",40),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("postingDate")})),d.fd(44,"Posting Date"),d.ec(45,"span",41),d.hc(),d.ic(46,"th",40),d.uc("click",(function(){return d.Wc(t),d.yc().sortUnitData("clearingDate")})),d.fd(47,"Clearing Date"),d.ec(48,"span",41),d.hc(),d.hc(),d.hc(),d.ic(49,"tbody"),d.dd(50,Mi,23,11,"tr",42),d.zc(51,"simpleSearch"),d.zc(52,"slice"),d.zc(53,"orderBy"),d.hc(),d.hc(),d.dd(54,Gi,3,0,"div",43),d.ic(55,"app-pagination",44),d.uc("outputParams",(function(e){return d.Wc(t),d.yc().getIndexParams(e)})),d.hc(),d.hc(),d.hc()}if(2&t){const t=d.yc();d.Ob(6),d.gd(t.totalItems),d.Ob(1),d.Gc("ngIf",!t.isReportSubmitted),d.Ob(4),d.Gc("ngModel",t.reportsData),d.Ob(7),d.Gc("ngClass",t.getFieldOrderBy("vendorName")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("vendorInvoiceId")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("creditAmount")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("debitAmount")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("glaccountname")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("documentDate")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("documentNumber")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("enteredByName")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("entryDateTime")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("postingDate")),d.Ob(3),d.Gc("ngClass",t.getFieldOrderBy("clearingDate")),d.Ob(2),d.Gc("ngForOf",d.Bc(51,20,d.Cc(52,23,d.Cc(53,27,t.reportsDataList,t.unitFieldType,t.unitOrder),t.ItemStartIndex,t.ItemEndIndex),t.reportsData)),d.Ob(4),d.Gc("ngIf",t.isNoItemsAvailable()),d.Ob(1),d.Gc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}const Ti=[{path:"",redirectTo:"subledger",pathMatch:"full"},{path:"settings",component:mi},{path:"subledger",component:T},{path:"view-invoice-history/:id",component:Mt},{path:"all-invoices",component:ct},{path:"post-invoice/:id/:type",component:qt},{path:"post-multi-invoice/:id/:type",component:ae},{path:"edit-invoice/:id",component:qt},{path:"post-collection/:id",component:ke},{path:"receipts",component:U},{path:"creditnote",component:Y},{path:"add-credit/:id/:type",component:Je},{path:"edit-credit/:id",component:Je},{path:"defaulters",component:Bt},{path:"ageing",component:Ue},{path:"reports",component:ti},{path:"reports/customer",component:Di},{path:"reports/vendor",component:(()=>{class t{constructor(t,e,i,c,n,o){this.apartmentService=t,this.vendorService=e,this.accountsService=i,this.sharedService=c,this.lookupService=n,this.cookieService=o,this.glAccountIndicator="Liability",this.isBlockSelected=!1,this.isUnitSelected=!1,this.ItemStartIndex=0,this.itemLimit=8,this.unitFieldType="unitno",this.unitOrder=!1,this.isReportSubmitted=!0,this.isDataLoaded=!0}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"desc":"asc":""}getDate(t){return null!=t?w(t).format("DD/MM/YYYY"):""}isMobileView(){return window.innerWidth<=767?"table-responsive":""}isItemsAvailable(){return this.totalItems>0}isNoItemsAvailable(){return 0==this.totalItems}getDateFormat(t){return w(t).format("YYYY-MM-DD")}getTimeFormat(t){return w(t).format("YYYY-MM-DD HH:mm")}submitIncomeReportsVendorForm(t){this.isReportSubmitted=!0,this.isDataLoaded=!1;let e={BlockID:null,DocumentdateFrom:this.getDateFormat(this.report.documentDateFrom),DocumentdateTo:this.getDateFormat(this.report.documentDateTo),PostingdateFrom:this.getDateFormat(this.report.PostingdateFrom),PostingdateTo:this.getDateFormat(this.report.PostingdateTo),VendorId:parseInt(this.report.vendorId),GLaccountID:parseInt(this.report.GLaccountID),GLDocumentTypeID:149,apartmentId:parseInt(this.cookieService.get("apartmentId"))};this.accountsService.getVendorGltransactionsMultiFilter(e).subscribe(t=>{this.reportsDataList=t,console.log(this.reportsDataList),this.totalItems=this.reportsDataList.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isDataLoaded=!0,this.isReportSubmitted=!1},t=>{})}ngOnInit(){this.report={},this.report.apartmentBlockId="",this.report.vendorId="",this.report.GLaccountID="",this.report.GLDocumentTypeID="",this.apartmentService.getApartmentBlockByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.blockData=t}),this.vendorService.getVendorByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.vendorData=t}),this.accountsService.getAllGLAccounts().subscribe(t=>{this.glAccountsDataList=t.filter(t=>t.isActive&&parseInt(this.cookieService.get("apartmentId"))&&t.indicator==this.glAccountIndicator)}),this.lookupService.getLookupValueByLookupTypeId(31).subscribe(t=>{this.glDocumentTypeDataList=t},t=>{})}}return t.\u0275fac=function(e){return new(e||t)(d.dc(o.a),d.dc(Ai.a),d.dc(a.a),d.dc(r.a),d.dc(z.a),d.dc(u.a))},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-tracker-reports-vendor"]],decls:65,vars:23,consts:[[1,"income-tracker-reports-vendor-reports"],[1,"main-title-mini"],[1,"card","clear"],[1,"card-body"],["name","incomeReportsVendorForm","novalidate","",3,"ngSubmit"],["incomeReportsVendorForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["name","documentDateFrom","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["documentDateFrom",""],[1,"date-btn"],["name","calendar","width","18",1,"icon","date","float-left"],["name","documentDateTo","placeholder","Date",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["documentDateTo",""],["name","PostingDateFrom","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["PostingDateFrom",""],["name","PostingdateTo","placeholder","Date","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["PostingdateTo",""],[1,"select-box"],["name","vendorName","id","vendorName",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","glAccountNo","id","glAccountNo",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"btn","blue",3,"disabled"],[4,"ngIf"],["class","card clear mt-30",4,"ngIf"],[3,"value"],[1,"card","clear","mt-30"],[1,"card-header"],[1,"list-inline","float-left"],[1,"badge","lime-green"],[1,"list-inline","float-right"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"table","table-stretch","table-responsive"],["scope","col",3,"click"],[3,"ngClass"],[4,"ngFor","ngForOf"],["class","button-wrapper border-top",4,"ngIf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"tc-blue","m-bold"],[1,"name"],[1,"grey"],[1,"button-wrapper","border-top"],[1,"snippet"]],template:function(t,e){if(1&t){const t=d.jc();d.ic(0,"div",0),d.ic(1,"h4",1),d.fd(2,"Vendor Journal Entries"),d.hc(),d.ic(3,"div",2),d.ic(4,"div",3),d.ic(5,"form",4,5),d.uc("ngSubmit",(function(){d.Wc(t);const i=d.Tc(6);return e.submitIncomeReportsVendorForm(i)})),d.ic(7,"div",6),d.ic(8,"div",7),d.ic(9,"div",8),d.ic(10,"label"),d.fd(11,"Document Date From"),d.hc(),d.ic(12,"input",9),d.uc("ngModelChange",(function(t){return e.report.documentDateFrom=t})),d.hc(),d.ec(13,"owl-date-time",10,11),d.ic(15,"div",12),d.ec(16,"i-feather",13),d.hc(),d.hc(),d.hc(),d.ic(17,"div",7),d.ic(18,"div",8),d.ic(19,"label"),d.fd(20,"Document Date To"),d.hc(),d.ic(21,"input",14),d.uc("ngModelChange",(function(t){return e.report.documentDateTo=t})),d.hc(),d.ec(22,"owl-date-time",10,15),d.ic(24,"div",12),d.ec(25,"i-feather",13),d.hc(),d.hc(),d.hc(),d.ic(26,"div",7),d.ic(27,"div",8),d.ic(28,"label"),d.fd(29,"Posting Date From*"),d.hc(),d.ic(30,"input",16),d.uc("ngModelChange",(function(t){return e.report.PostingdateFrom=t})),d.hc(),d.ec(31,"owl-date-time",10,17),d.ic(33,"div",12),d.ec(34,"i-feather",13),d.hc(),d.hc(),d.hc(),d.ic(35,"div",7),d.ic(36,"div",8),d.ic(37,"label"),d.fd(38,"Posting Date To*"),d.hc(),d.ic(39,"input",18),d.uc("ngModelChange",(function(t){return e.report.PostingdateTo=t})),d.hc(),d.ec(40,"owl-date-time",10,19),d.ic(42,"div",12),d.ec(43,"i-feather",13),d.hc(),d.hc(),d.hc(),d.ic(44,"div",7),d.ic(45,"div",20),d.ic(46,"label"),d.fd(47,"Vendor"),d.hc(),d.ic(48,"select",21),d.uc("ngModelChange",(function(t){return e.report.vendorId=t})),d.ic(49,"option",22),d.fd(50,"Select"),d.hc(),d.dd(51,ki,2,2,"option",23),d.hc(),d.hc(),d.hc(),d.ic(52,"div",7),d.ic(53,"div",20),d.ic(54,"label"),d.fd(55,"Gl Account"),d.hc(),d.ic(56,"select",24),d.uc("ngModelChange",(function(t){return e.report.GLaccountID=t})),d.ic(57,"option",22),d.fd(58,"Select"),d.hc(),d.dd(59,Si,2,3,"option",23),d.hc(),d.hc(),d.hc(),d.ic(60,"div",25),d.ic(61,"button",26),d.fd(62,"Generate"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.dd(63,Ci,1,0,"app-loader",27),d.dd(64,xi,56,31,"div",28),d.hc()}if(2&t){const t=d.Tc(6),i=d.Tc(14),c=d.Tc(23),n=d.Tc(32),o=d.Tc(41);d.Ob(12),d.Gc("owlDateTime",i)("owlDateTimeTrigger",i)("ngModel",e.report.documentDateFrom),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("owlDateTime",c)("owlDateTimeTrigger",c)("ngModel",e.report.documentDateTo),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("owlDateTime",n)("owlDateTimeTrigger",n)("ngModel",e.report.PostingdateFrom),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("owlDateTime",o)("owlDateTimeTrigger",o)("ngModel",e.report.PostingdateTo),d.Ob(1),d.Gc("pickerType","calendar"),d.Ob(8),d.Gc("ngModel",e.report.vendorId),d.Ob(3),d.Gc("ngForOf",e.vendorData),d.Ob(5),d.Gc("ngModel",e.report.GLaccountID),d.Ob(3),d.Gc("ngForOf",e.glAccountsDataList),d.Ob(2),d.Gc("disabled",t.invalid),d.Ob(2),d.Gc("ngIf",!e.isDataLoaded),d.Ob(1),d.Gc("ngIf",e.isDataLoaded&&!e.isReportSubmitted)}},directives:[g.B,g.o,g.p,p.a,nt.b,g.d,nt.d,g.n,g.q,nt.a,m.b,g.x,g.y,g.r,g.A,c.k,c.l,h.a,p.c,c.j,f.a],pipes:[v.b,c.t,v.a],styles:[""]}),t})()},{path:"**",redirectTo:"subledger",pathMatch:"full"}];let wi=(()=>{class t{}return t.\u0275mod=d.bc({type:t}),t.\u0275inj=d.ac({factory:function(e){return new(e||t)},imports:[[n.f.forChild(Ti)],n.f]}),t})();var Bi=i("PCNd");let Fi=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Xb({type:t,selectors:[["app-income-tracker"]],decls:1,vars:0,template:function(t,e){1&t&&d.ec(0,"router-outlet")},directives:[n.g],styles:[""]}),t})();i.d(e,"IncomeTrackerModule",(function(){return Pi}));let Pi=(()=>{class t{}return t.\u0275mod=d.bc({type:t,bootstrap:[Fi]}),t.\u0275inj=d.ac({factory:function(e){return new(e||t)},imports:[[c.b,Bi.a,wi]]}),t})()}}]);