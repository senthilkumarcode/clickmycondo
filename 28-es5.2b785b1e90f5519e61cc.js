function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{is7e:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("fXoL"),a=i("3Pt+"),o=i("ofXK"),c=i("8mtn"),l=["selectFieldElem"];function r(e,t){if(1&e){var i=n.Xb();n.Ub(0),n.Wb(1,"li",10),n.ic("click",(function(){n.Kc(i);var e=t.$implicit,a=n.mc();return a.getSelectedItem(e,a.fieldItemName)})),n.Tc(2),n.Vb(),n.Tb()}if(2&e){var a=t.$implicit,o=n.mc();n.Cb(1),n.uc("ngClass",o.isSelectedItem(o.getItemName(a,o.fieldItemName),o.fieldModel)),n.Cb(1),n.Uc(o.getItemName(a,o.fieldItemName))}}function s(e,t){if(1&e){var i=n.Xb();n.Wb(0,"div",11),n.ic("click",(function(){return n.Kc(i),n.mc().clearItems()})),n.Sb(1,"i-feather",12),n.Vb()}}var d=function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.element=t,this.renderer=i,this.inputChange=new n.n,this.inputStatus=new n.n,this.isItemSelected=!1,this.isExpanded=!1}return _createClass(e,[{key:"getItemName",value:function(e,t){return e[t]}},{key:"isFieldRequired",value:function(){return"required"==this.fieldRequired}},{key:"isSelectedItem",value:function(e,t){return e==t?"selected":""}},{key:"getSelectedItem",value:function(e,t){this.fieldModel=e[t],this.inputChange.emit(e),this.isItemSelected=!0,this.isExpanded=!1}},{key:"clearItems",value:function(e){this.fieldModel="",this.inputChange.emit(null),this.isItemSelected=!1,this.isExpanded=!1}},{key:"onDocumentClick",value:function(e){var t=this.element.nativeElement;if(t.children.length>0){var i=t.children[0].children[0].children[1].nextSibling.classList.contains("up");t.contains(e.target)||i&&this.enableSelect()}}},{key:"enableSelect",value:function(){var e=this.element.nativeElement.children[0].children[0].children[1].nextSibling,t=e.nextSibling,i=e.classList.contains("up"),n=t.classList.contains("active");i?this.renderer.removeClass(e,"up"):this.renderer.addClass(e,"up"),n?this.renderer.removeClass(t,"active"):this.renderer.addClass(t,"active")}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout((function(){e.el.nativeElement.classList.contains("ng-valid")&&e.inputStatus.emit(!0)}),200)}},{key:"ngDoCheck",value:function(){"null"!=this.fieldModel&&"undefined"!=this.fieldModel&&0!=this.fieldModel||(this.fieldModel=null)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.E))},e.\u0275cmp=n.Lb({type:e,selectors:[["app-simple-select-box"]],viewQuery:function(e,t){var i;1&e&&n.Pc(l,!0),2&e&&n.Gc(i=n.jc())&&(t.el=i.first)},hostBindings:function(e,t){1&e&&n.ic("click",(function(e){return t.onDocumentClick(e)}),!1,n.Ic)},inputs:{fieldName:"fieldName",fieldText:"fieldText",fieldPlaceholder:"fieldPlaceholder",fieldModel:"fieldModel",fieldRequired:"fieldRequired",fieldList:"fieldList",fieldClass:"fieldClass",isDisabled:"isDisabled",fieldItemName:"fieldItemName",isLabel:"isLabel"},outputs:{inputChange:"inputChange",inputStatus:"inputStatus"},features:[n.Bb([],[{provide:a.c,useExisting:a.p}])],decls:11,vars:16,consts:[["name","selectFieldForm","novalidate",""],["selectFieldForm","ngForm"],[1,"select-group","form-group",3,"ngClass"],[3,"for","ngClass"],["type","text","readonly","","autocomplete","off",3,"placeholder","name","required","ngModel","readonly","ngModelChange","click"],["selectFieldElem",""],[1,"select-arrow","down",3,"ngClass"],[1,"select-list-dropdown",3,"ngClass"],[4,"ngFor","ngForOf"],["class","clear-filter",3,"click",4,"ngIf"],[3,"ngClass","click"],[1,"clear-filter",3,"click"],["name","x",1,"icon","del"]],template:function(e,t){1&e&&(n.Wb(0,"form",0,1),n.Wb(2,"div",2),n.Wb(3,"label",3),n.Tc(4),n.Vb(),n.Wb(5,"input",4,5),n.ic("ngModelChange",(function(e){return t.fieldModel=e}))("click",(function(){return t.isExpanded=!t.isExpanded})),n.Vb(),n.Sb(7,"span",6),n.Wb(8,"div",7),n.Rc(9,r,3,2,"ng-container",8),n.Vb(),n.Rc(10,s,2,0,"div",9),n.Vb(),n.Vb()),2&e&&(n.Cb(2),n.uc("ngClass",t.isDisabled?"disabled":""),n.Cb(1),n.vc("for",t.fieldName),n.uc("ngClass","true"==t.isLabel?"":"d-none"),n.Cb(1),n.Uc(t.fieldText),n.Cb(1),n.Gb("form-control simple-select ",t.fieldClass,""),n.vc("placeholder",t.fieldPlaceholder),n.vc("name",t.fieldName),n.uc("required",t.isFieldRequired()?"required":null)("ngModel",t.fieldModel)("readonly",t.isDisabled),n.Cb(2),n.uc("ngClass",t.isExpanded?"up":""),n.Cb(1),n.uc("ngClass",t.isExpanded?"active":""),n.Cb(1),n.uc("ngForOf",t.fieldList),n.Cb(1),n.uc("ngIf",t.isItemSelected))},directives:[a.B,a.o,a.p,o.j,a.d,a.x,a.n,a.q,o.k,o.l,c.b],styles:['@charset "UTF-8";.select-group[_ngcontent-%COMP%]{position:relative}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%]{cursor:pointer;color:#8391a1}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%], .select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%]:focus{box-shadow:0 1px 3px 0 rgba(25,28,30,.1);-moz-box-shadow:0 1px 3px 0 rgba(25,28,30,.1);-webkit-box-shadow:0 1px 3px 0 rgba(25,28,30,.1);border:1px solid hsla(0,0%,91.8%,.8)!important}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%]:focus{background-color:#fff!important}.select-group[_ngcontent-%COMP%]   .simple-select[readonly][_ngcontent-%COMP%]{background-color:#f9f9f9!important;pointer-events:none}.select-group[_ngcontent-%COMP%]   .simple-select[readonly][_ngcontent-%COMP%]:-webkit-autofill{-webkit-box-shadow:0 0 0 1000px #e6e6e6 inset;-webkit-text-fill-color:#e6e6e6}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow[_ngcontent-%COMP%]{position:relative;top:-30px;right:20px;float:right}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow[_ngcontent-%COMP%]:before{position:absolute;font-family:FontAwesome;font-size:1.6rem;left:0!important}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow[_ngcontent-%COMP%]:after{content:none}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow.down[_ngcontent-%COMP%]:before{content:"\uf107"}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow.up[_ngcontent-%COMP%]:before{content:"\uf106"}.select-group[_ngcontent-%COMP%]   .clear-filter[_ngcontent-%COMP%]{position:absolute;right:-18px;top:12px;float:right}.select-group[_ngcontent-%COMP%]   .clear-filter[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:15px}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]{position:absolute;background:#fff;display:none;float:left;max-height:250px;min-width:200px;overflow:auto;z-index:1000;box-shadow:0 2px 12px rgba(0,0,0,.15);-moz-box-shadow:0 2px 12px rgba(0,0,0,.15);-webkit-box-shadow:0 2px 12px rgba(0,0,0,.15);border:1px solid #eaeaea;margin:3px 0 0}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;color:#8391a1;font-family:Lato,sans-serif;font-weight:400;letter-spacing:.3px;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;font-size:1.4rem;padding:7px 15px 6px;cursor:pointer;text-transform:capitalize}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #eaeaea}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:8px}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f3f5f7}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#f3f5f7;position:relative;color:#373946}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:after{content:"";background-image:url(https://senthilkumarcode.github.io/clickmycondo/assets/images/tick-icon.svg);width:12px;height:12px;position:absolute;background-repeat:no-repeat;right:25px;top:10px}.select-group[_ngcontent-%COMP%]   .select-list-dropdown.active[_ngcontent-%COMP%]{display:block}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_inside[_ngcontent-%COMP%] > .mCSB_container[_ngcontent-%COMP%]{margin-right:0!important}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_scrollTools[_ngcontent-%COMP%]{right:0!important;margin:5px 0}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_scrollTools[_ngcontent-%COMP%]   .mCSB_dragger[_ngcontent-%COMP%]   .mCSB_dragger_bar[_ngcontent-%COMP%]{background:#e5e5e5;width:10px;border-radius:4px!important}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_scrollTools[_ngcontent-%COMP%]   .mCSB_draggerRail[_ngcontent-%COMP%]{width:12px;background:#f6f8f8;border-radius:4px!important}']}),e}()},n8yt:function(e,t,i){"use strict";i.r(t);var n,a=i("ofXK"),o=i("tyNb"),c=i("fXoL"),l=((n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Lb({type:n,selectors:[["app-facility-reports"]],decls:2,vars:0,template:function(e,t){1&e&&(c.Wb(0,"p"),c.Tc(1," facility-reports works!\n"),c.Vb())},styles:[""]}),n),r=i("GUTR"),s=i("ThaB"),d=i("wbvY"),u=i("JK/P"),b=i("wd/R"),m=i("0IaG"),f=i("b6Qw"),g=i("668k"),p=i("8mtn"),y=i("wlDI"),h=i("3Pt+"),C=i("BR9Y"),v=i("BniF"),k=i("CzEO");function I(e,t){1&e&&c.Sb(0,"app-loader")}function S(e,t){if(1&e){var i=c.Xb();c.Ub(0),c.Wb(1,"form",3,4),c.ic("ngSubmit",(function(){c.Kc(i);var e=c.Hc(2);return c.mc().submitAddFacilitySlotForm(e)})),c.Wb(3,"div",5),c.Wb(4,"div",6),c.Wb(5,"div",7),c.Wb(6,"label"),c.Tc(7,"Begin Time*"),c.Vb(),c.Wb(8,"input",8),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().slot.slotBeginTime=e}))("dateTimeInput",(function(){return c.Kc(i),c.mc().emitSlotTime()})),c.Vb(),c.Sb(9,"owl-date-time",9,10),c.Wb(11,"div",11),c.Sb(12,"i-feather",12),c.Vb(),c.Vb(),c.Vb(),c.Wb(13,"div",6),c.Wb(14,"div",7),c.Wb(15,"label"),c.Tc(16,"End Time*"),c.Vb(),c.Wb(17,"input",13),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().slot.slotEndTime=e}))("dateTimeInput",(function(){return c.Kc(i),c.mc().emitSlotTime()})),c.Vb(),c.Sb(18,"owl-date-time",9,14),c.Wb(20,"div",11),c.Sb(21,"i-feather",12),c.Vb(),c.Vb(),c.Vb(),c.Wb(22,"div",6),c.Wb(23,"div",7),c.Wb(24,"label"),c.Tc(25,"Cost (in rs)*"),c.Vb(),c.Wb(26,"input",15),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().slot.cost=e})),c.Vb(),c.Vb(),c.Vb(),c.Wb(27,"div",16),c.Wb(28,"div",7),c.Wb(29,"label"),c.Tc(30,"Comments"),c.Vb(),c.Wb(31,"textarea",17),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().slot.comment=e})),c.Vb(),c.Vb(),c.Vb(),c.Wb(32,"div",18),c.Wb(33,"button",19),c.Tc(34,"Submit"),c.Vb(),c.Wb(35,"div",20),c.ic("click",(function(){c.Kc(i);var e=c.mc();return e.showConfirmModal(e.slot)})),c.Tc(36,"Delete"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Tb()}if(2&e){var n=c.Hc(2),a=c.Hc(10),o=c.Hc(19),l=c.mc();c.Cb(8),c.uc("owlDateTime",a)("owlDateTimeTrigger",a)("ngModel",l.slot.slotBeginTime),c.Cb(1),c.uc("pickerType","timer"),c.Cb(2),c.uc("owlDateTimeTrigger",a),c.Cb(6),c.uc("min",l.minEndTime)("owlDateTime",o)("owlDateTimeTrigger",o)("ngModel",l.slot.slotEndTime),c.Cb(1),c.uc("pickerType","timer"),c.Cb(2),c.uc("owlDateTimeTrigger",o),c.Cb(6),c.uc("ngModel",l.slot.cost),c.Cb(5),c.uc("ngModel",l.slot.comment),c.Cb(2),c.uc("disabled",n.invalid)}}var T,M=((T=function(){function e(t,i,n,a,o){_classCallCheck(this,e),this.injector=t,this.dialog=i,this.facilityService=n,this.sharedService=a,this.cookieService=o,this.alertMessage="",this.isError=!1,this.isSlotSubmitted=!0,this.facilityParams=new c.n,this.modalService=this.injector.get(u.a)}return _createClass(e,[{key:"submitAddFacilitySlotForm",value:function(e){var t=this;if(this.isSlotSubmitted=!1,"new"==this.type){var i={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentFacilityId:this.slot.apartmentFacilityId,slotBeginTime:b(this.slot.slotBeginTime).format("HH:mm:ss"),slotEndTime:b(this.slot.slotEndTime).format("HH:mm:ss"),cost:this.slot.cost,comment:this.slot.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-16T12:34:36.708Z",updatedBy:0,updatedOn:"2019-12-16T12:34:36.709Z"};this.facilityService.addApartmentFacilitySlot(i).subscribe((function(e){e.message&&(t.facilityParams.emit(!0),t.isSlotSubmitted=!0,t.sharedService.setAlertMessage("Slot added successfully"))}),(function(e){t.isError=!0,t.alertMessage="Some error occured"}))}else{var n={apartmentFacilitySlotId:this.slot.apartmentFacilitySlotId,apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentFacilityId:this.slot.apartmentFacilityId,slotBeginTime:b(this.slot.slotBeginTime).format("HH:mm:ss"),slotEndTime:b(this.slot.slotEndTime).format("HH:mm:ss"),cost:this.slot.cost,comment:this.slot.comment,isActive:!0,insertedBy:0,insertedOn:"2019-12-16T12:34:36.708Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-16T12:34:36.709Z"};this.facilityService.updateApartmentFacilitySlot(n).subscribe((function(e){e.message&&(t.facilityParams.emit(!0),t.isSlotSubmitted=!0,t.sharedService.setAlertMessage("Slot updated successfully"))}),(function(e){t.isError=!0,t.alertMessage="Some error occured"}))}}},{key:"emitSlotTime",value:function(){this.minEndTime=b(this.slot.slotBeginTime,"HH:mm:ss").toDate(),b(this.slot.slotBeginTime),b(this.slot.slotEndTime)}},{key:"showConfirmModal",value:function(e){this.modalService.showConfirmModal(e)}},{key:"ngOnInit",value:function(){var e=this;"new"!=this.type?(this.slot.slotBeginTime=b(this.slot.slotBeginTime,"HH:mm:ss").toDate(),this.slot.slotEndTime=b(this.slot.slotEndTime,"HH:mm:ss").toDate()):this.slot.comment="",this.sharedService.unitlistdeleteindexcast.subscribe((function(t){if(null!=t){var i={apartmentFacilityBookingId:t.apartmentFacilitySlotId,deleteBy:parseInt(e.cookieService.get("userId"))};e.facilityService.deleteApartmentFacilitySlot(i).subscribe((function(t){e.facilityParams.emit(!0),e.sharedService.setUnitListDeleteIndex(null)}),(function(e){console.log(e)}))}}))}}]),e}()).\u0275fac=function(e){return new(e||T)(c.Rb(c.r),c.Rb(m.b),c.Rb(r.a),c.Rb(d.a),c.Rb(f.a))},T.\u0275cmp=c.Lb({type:T,selectors:[["app-add-facility-slot"]],inputs:{slot:"slot",facilityId:"facilityId",type:"type"},outputs:{facilityParams:"facilityParams"},decls:4,vars:4,consts:[[1,"facility-add-slot-wrapper"],[3,"message","isError"],[4,"ngIf"],["name","addStaffForm","novalidate","",3,"ngSubmit"],["addFacilitySlotForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["name","slotBeginTime","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange","dateTimeInput"],[3,"pickerType"],["slotBeginTime",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","clock","width","18",1,"icon","time","float-left"],["name","slotEndTime","placeholder","Time","required","",1,"form-control",3,"min","owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange","dateTimeInput"],["slotEndTime",""],["type","number","OnlyNumber","true","placeholder","Enter value","name","cost","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],["placeholder","some text here","name","comments",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue","mr-3",3,"disabled"],[1,"btn","trans-red",3,"click"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Sb(1,"app-alert-message",1),c.Rc(2,I,1,0,"app-loader",2),c.Rc(3,S,37,14,"ng-container",2),c.Vb()),2&e&&(c.Cb(1),c.uc("message",t.alertMessage)("isError",t.isError),c.Cb(1),c.uc("ngIf",!t.isSlotSubmitted),c.Cb(1),c.uc("ngIf",t.isSlotSubmitted))},directives:[y.a,a.l,g.a,h.B,h.o,h.p,v.c,h.d,h.x,v.e,h.n,h.q,v.b,p.b,h.s,C.a],styles:[""]}),T);function V(e,t){1&e&&c.Sb(0,"app-loader")}function W(e,t){if(1&e&&(c.Wb(0,"p"),c.Tc(1),c.Vb()),2&e){var i=c.mc().$implicit,n=c.mc(2);c.Cb(1),c.Wc("",i.amount,"rs/- per ",n.getRateBase(i.rateBaseId),"")}}function F(e,t){1&e&&(c.Wb(0,"p"),c.Tc(1,"Free"),c.Vb())}var w=function(){return{exact:!0}};function B(e,t){if(1&e){var i=c.Xb();c.Ub(0),c.Wb(1,"li",7),c.Wb(2,"div",8),c.Wb(3,"div",13),c.Wb(4,"div",14),c.Wb(5,"a",15),c.Sb(6,"i-feather",16),c.Vb(),c.Wb(7,"a",17),c.Wb(8,"i-feather",18),c.ic("click",(function(){c.Kc(i);var e=t.$implicit;return c.mc(2).updateFacilityCategory(e)})),c.Vb(),c.Vb(),c.Vb(),c.Wb(9,"h6"),c.Tc(10),c.Vb(),c.Rc(11,W,2,2,"p",1),c.Rc(12,F,2,0,"p",1),c.Wb(13,"div",19),c.Wb(14,"p"),c.Tc(15),c.Vb(),c.Wb(16,"div",20),c.Wb(17,"a",21),c.ic("click",(function(){c.Kc(i);var e=t.$implicit;return c.mc(2).addNewSlot(e)})),c.Sb(18,"i-feather",22),c.Wb(19,"span"),c.Tc(20,"Add Slot"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Tb()}if(2&e){var n=t.$implicit,a=c.mc(2);c.Cb(5),c.wc("routerLink","/ams/facility/view/",n.apartmentFacilityId,""),c.uc("routerLinkActiveOptions",c.Ac(6,w)),c.Cb(5),c.Uc(n.facilityName),c.Cb(1),c.uc("ngIf",n.amount>0),c.Cb(1),c.uc("ngIf",0==n.amount),c.Cb(3),c.Vc("",a.getSlots(n.apartmentFacilitySlot).length," Slot(s)")}}function x(e,t){if(1&e){var i=c.Xb();c.Wb(0,"div",4),c.Wb(1,"h4",5),c.Tc(2,"Facilities"),c.Vb(),c.Rc(3,B,21,7,"ng-container",6),c.Wb(4,"li",7),c.Wb(5,"div",8),c.Wb(6,"div",9),c.Wb(7,"a",10),c.ic("click",(function(){return c.Kc(i),c.mc().addNewFacilityCategory()})),c.Wb(8,"div",11),c.Tc(9,"+"),c.Vb(),c.Vb(),c.Wb(10,"h6",12),c.Tc(11,"Add New Facility"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&e){var n=c.mc();c.Cb(3),c.uc("ngForOf",n.facilityCategoryData)}}function D(e,t){1&e&&(c.Wb(0,"h6"),c.Tc(1,"Add Facility"),c.Vb())}function O(e,t){1&e&&(c.Wb(0,"h6"),c.Tc(1,"Edit Facility"),c.Vb())}function L(e,t){if(1&e){var i=c.Xb();c.Ub(0),c.Wb(1,"li",69),c.Wb(2,"span",25),c.Tc(3),c.Vb(),c.Wb(4,"span",70),c.Tc(5),c.Vb(),c.Vb(),c.Wb(6,"div",71),c.Wb(7,"div",32),c.Wb(8,"app-add-facility-slot",72),c.ic("facilityParams",(function(e){return c.Kc(i),c.mc(3).getFacilityParams(e)})),c.Vb(),c.Vb(),c.Vb(),c.Tb()}if(2&e){var n=t.$implicit,a=t.index,o=c.mc(3);c.Cb(1),c.Eb("data-target","#slotCollapse",a,""),c.Eb("aria-controls","Collapse",a,""),c.Cb(2),c.Vc("Slot",a+1,""),c.Cb(2),c.Wc("",o.getSlotTime(n.slotBeginTime)," - ",o.getSlotTime(n.slotEndTime),""),c.Cb(1),c.wc("id","slotCollapse",a,""),c.Eb("aria-labelledby","Collapse",a,""),c.Cb(2),c.uc("slot",n)("facilityId",o.facility.apartmentFacilityId)}}function P(e,t){if(1&e&&(c.Ub(0),c.Rc(1,L,9,9,"ng-container",6),c.Tb()),2&e){var i=c.mc(2);c.Cb(1),c.uc("ngForOf",i.getSlots(i.facility.apartmentFacilitySlot))}}function _(e,t){if(1&e&&(c.Ub(0),c.Wb(1,"li",73),c.Tc(2,"No Slots Available"),c.Vb(),c.Sb(3,"div",74),c.Tb()),2&e){var i=c.mc(2);c.Cb(1),c.uc("ngClass",0==i.facilitySlotLength?"no-drop":"")}}function N(e,t){if(1&e){var i=c.Xb();c.Ub(0),c.Wb(1,"li",75),c.Tc(2,"New Slot"),c.Vb(),c.Wb(3,"div",76),c.Wb(4,"div",32),c.Wb(5,"app-add-facility-slot",77),c.ic("facilityParams",(function(e){return c.Kc(i),c.mc(2).getFacilityParams(e)})),c.Vb(),c.Vb(),c.Vb(),c.Tb()}if(2&e){var n=c.mc(2);c.Cb(5),c.uc("slot",n.facility)("facilityId",n.facility.apartmentFacilityId)}}function A(e,t){if(1&e){var i=c.Xb();c.Wb(0,"div",23),c.Wb(1,"div",24),c.Wb(2,"div",25),c.Rc(3,D,2,0,"h6",1),c.Rc(4,O,2,0,"h6",1),c.Vb(),c.Wb(5,"div",26),c.ic("click",(function(){return c.Kc(i),c.mc().removeCategoryBox()})),c.Sb(6,"i-feather",27),c.Vb(),c.Vb(),c.Wb(7,"div",28),c.Wb(8,"ul",29),c.Wb(9,"li",30),c.Tc(10,"Facility Info"),c.Vb(),c.Wb(11,"div",31),c.Wb(12,"div",32),c.Sb(13,"app-alert-message",33),c.Wb(14,"form",34,35),c.ic("ngSubmit",(function(){c.Kc(i);var e=c.Hc(15);return c.mc().submitFacilitySettingsForm(e)})),c.Wb(16,"div",36),c.Wb(17,"div",37),c.Wb(18,"div",38),c.Wb(19,"label"),c.Tc(20,"Facility Name*"),c.Vb(),c.Wb(21,"input",39),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.facilityName=e})),c.Vb(),c.Vb(),c.Vb(),c.Wb(22,"div",37),c.Wb(23,"div",40),c.Wb(24,"label"),c.Tc(25,"Approval Required* "),c.Vb(),c.Wb(26,"div",41),c.Wb(27,"input",42),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.approvalRequired=e})),c.Vb(),c.Wb(28,"label",43),c.Tc(29,"Yes"),c.Vb(),c.Vb(),c.Wb(30,"div",41),c.Wb(31,"input",44),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.approvalRequired=e})),c.Vb(),c.Wb(32,"label",45),c.Tc(33,"No"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(34,"div",37),c.Wb(35,"div",40),c.Wb(36,"label"),c.Tc(37,"Rate Type*"),c.Vb(),c.Wb(38,"div",41),c.Wb(39,"input",46),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.rateBaseId=e})),c.Vb(),c.Wb(40,"label",47),c.Tc(41,"Hour"),c.Vb(),c.Vb(),c.Wb(42,"div",41),c.Wb(43,"input",48),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.rateBaseId=e})),c.Vb(),c.Wb(44,"label",49),c.Tc(45,"Day"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(46,"div",37),c.Wb(47,"div",40),c.Wb(48,"label"),c.Tc(49,"Service Type*"),c.Vb(),c.Wb(50,"div",41),c.Wb(51,"input",50),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.facilityTypeId=e})),c.Vb(),c.Wb(52,"label",51),c.Tc(53,"Paid"),c.Vb(),c.Vb(),c.Wb(54,"div",41),c.Wb(55,"input",52),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.facilityTypeId=e})),c.Vb(),c.Wb(56,"label",53),c.Tc(57,"Free"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(58,"div",37),c.Wb(59,"div",38),c.Wb(60,"label"),c.Tc(61),c.Vb(),c.Wb(62,"input",54),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.amount=e})),c.Vb(),c.Vb(),c.Vb(),c.Wb(63,"div",37),c.Wb(64,"div",38),c.Wb(65,"label"),c.Tc(66,"Deposit (in rs)*"),c.Vb(),c.Wb(67,"input",55),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.cautionDeposit=e})),c.Vb(),c.Vb(),c.Vb(),c.Wb(68,"div",37),c.Wb(69,"div",38),c.Wb(70,"label"),c.Tc(71,"Auto Cancel (in days)*"),c.Vb(),c.Wb(72,"input",56),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.autoCancelDays=e})),c.Vb(),c.Vb(),c.Vb(),c.Wb(73,"div",37),c.Wb(74,"div",38),c.Wb(75,"label"),c.Tc(76,"Min Hours Booking*"),c.Vb(),c.Wb(77,"input",57),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.minHoursBooking=e})),c.Vb(),c.Vb(),c.Vb(),c.Wb(78,"div",37),c.Wb(79,"div",38),c.Wb(80,"label"),c.Tc(81,"Min Time Limit*"),c.Vb(),c.Wb(82,"input",58),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.minTimeLimit=e})),c.Vb(),c.Sb(83,"owl-date-time",59,60),c.Wb(85,"div",61),c.Sb(86,"i-feather",62),c.Vb(),c.Vb(),c.Vb(),c.Wb(87,"div",37),c.Wb(88,"div",38),c.Wb(89,"label"),c.Tc(90,"Max Time Limit*"),c.Vb(),c.Wb(91,"input",63),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.maxTimeLimit=e})),c.Vb(),c.Sb(92,"owl-date-time",59,64),c.Wb(94,"div",61),c.Sb(95,"i-feather",62),c.Vb(),c.Vb(),c.Vb(),c.Wb(96,"div",65),c.Wb(97,"div",38),c.Wb(98,"label"),c.Tc(99,"Description"),c.Vb(),c.Wb(100,"quill-editor",66),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().facility.description=e}))("onContentChanged",(function(e){return c.Kc(i),c.mc().onContentChanged(e)})),c.Vb(),c.Vb(),c.Vb(),c.Wb(101,"div",67),c.Wb(102,"button",68),c.Tc(103,"Submit"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Rc(104,P,2,1,"ng-container",1),c.Rc(105,_,4,1,"ng-container",1),c.Rc(106,N,6,2,"ng-container",1),c.Vb(),c.Vb(),c.Vb()}if(2&e){var n=c.Hc(15),a=c.Hc(84),o=c.Hc(93),l=c.mc();c.Cb(3),c.uc("ngIf",l.isFacilityCategoryNew),c.Cb(1),c.uc("ngIf",!l.isFacilityCategoryNew),c.Cb(5),c.uc("ngClass",l.isSlotNew?"collapsed":""),c.Cb(2),c.uc("ngClass",l.isSlotNew?"":"show"),c.Cb(2),c.uc("message",l.alertMessage)("isError",l.isCategoryError),c.Cb(8),c.uc("ngModel",l.facility.facilityName),c.Cb(6),c.uc("ngModel",l.facility.approvalRequired)("value",!0),c.Cb(4),c.uc("ngModel",l.facility.approvalRequired)("value",!1),c.Cb(8),c.uc("ngModel",l.facility.rateBaseId),c.Cb(4),c.uc("ngModel",l.facility.rateBaseId),c.Cb(8),c.uc("ngModel",l.facility.facilityTypeId),c.Cb(4),c.uc("ngModel",l.facility.facilityTypeId),c.Cb(6),c.Vc("Cost (in rs)* ",l.facility.amount,""),c.Cb(1),c.uc("ngModel",l.facility.amount),c.Cb(5),c.uc("ngModel",l.facility.cautionDeposit),c.Cb(5),c.uc("ngModel",l.facility.autoCancelDays),c.Cb(5),c.uc("ngModel",l.facility.minHoursBooking),c.Cb(5),c.uc("owlDateTime",a)("owlDateTimeTrigger",a)("ngModel",l.facility.minTimeLimit),c.Cb(1),c.uc("pickerType","timer"),c.Cb(2),c.uc("owlDateTimeTrigger",a),c.Cb(6),c.uc("owlDateTime",o)("owlDateTimeTrigger",o)("ngModel",l.facility.maxTimeLimit),c.Cb(1),c.uc("pickerType","timer"),c.Cb(2),c.uc("owlDateTimeTrigger",o),c.Cb(6),c.uc("ngModel",l.facility.description)("placeholder",l.editorPlacehorder),c.Cb(2),c.uc("disabled",n.invalid),c.Cb(2),c.uc("ngIf",!l.isFacilityCategoryNew),c.Cb(1),c.uc("ngIf",0==l.facilitySlotLength),c.Cb(1),c.uc("ngIf",l.isSlotNew)}}var R,E=((R=function(){function e(t,i,n,a,o,c){_classCallCheck(this,e),this.injector=t,this.dialog=i,this.facilityService=n,this.lookupService=a,this.sharedService=o,this.cookieService=c,this.isFacilityCategoryLoaded=!1,this.isEditFacilityCategory=!1,this.isFacilityCategoryNew=!1,this.isFacilityCategoryUpdate=!1,this.isSlotNew=!1,this.isCategoryError=!1,this.alertMessage="",this.facilityAmount="",this.modalService=this.injector.get(u.a)}return _createClass(e,[{key:"onContentChanged",value:function(e){this.facility.description=e.html}},{key:"submitFacilitySettingsForm",value:function(e){var t=this;if(this.isFacilityCategoryLoaded=!1,this.isFacilityCategoryNew){var i={facilityName:this.facility.facilityName,description:this.facility.description,apartmentId:parseInt(this.cookieService.get("apartmentId")),rateBaseId:parseInt(this.facility.rateBaseId),amount:this.facility.amount,approvalRequired:this.facility.approvalRequired,isApproved:!0,facilityTypeId:parseInt(this.faclityTypeId),minHoursBooking:this.facility.minHoursBooking,autoCancelDays:this.facility.autoCancelDays,cautionDeposit:this.facility.cautionDeposit,minTimeLimit:b(this.facility.minTimeLimit).format("HH:mm:ss"),maxTimeLimit:b(this.facility.maxTimeLimit).format("HH:mm:ss"),fileAttachmentId:null,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-15T08:45:26.010Z",updatedBy:0,updatedOn:"2019-12-15T08:45:26.010Z",apartmentFacilitySlot:null};this.facilityService.addApartmentFacility(i).subscribe((function(e){e.message?(t.isFacilityCategoryLoaded=!0,t.sharedService.setAlertMessage("Facility added successfully")):(t.isFacilityCategoryLoaded=!0,t.isCategoryError=!0,t.alertMessage=e.errorMessage)}),(function(e){t.isFacilityCategoryLoaded=!0,t.isCategoryError=!0,t.alertMessage="Some error occured"}))}else{var n={apartmentFacilityId:this.facility.apartmentFacilityId,facilityName:this.facility.facilityName,description:this.facility.description,apartmentId:parseInt(this.cookieService.get("apartmentId")),rateBaseId:parseInt(this.facility.rateBaseId),amount:this.facility.amount,approvalRequired:this.facility.approvalRequired,isApproved:!0,facilityTypeId:parseInt(this.facility.facilityTypeId),minHoursBooking:this.facility.minHoursBooking,autoCancelDays:this.facility.autoCancelDays,cautionDeposit:this.facility.cautionDeposit,minTimeLimit:b(this.facility.minTimeLimit).format("HH:mm:ss"),maxTimeLimit:b(this.facility.maxTimeLimit).format("HH:mm:ss"),fileAttachmentId:null,isActive:!0,insertedBy:0,insertedOn:"2019-12-15T08:45:26.010Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-15T08:45:26.010Z",apartmentFacilitySlot:null};this.facilityService.updateApartmentFacility(n).subscribe((function(e){e.message?(t.isFacilityCategoryLoaded=!0,t.isFacilityCategoryLoaded=!1,t.facilityService.getApartmentFacilitiesByApartmentId(parseInt(t.cookieService.get("apartmentId"))).subscribe((function(e){t.facilityCategoryData=e.filter((function(e){return e.isActive})),t.isFacilityCategoryLoaded=!0,t.sharedService.setAlertMessage("Facility updated successfully"),console.log(e)}),(function(e){}))):(t.isFacilityCategoryLoaded=!0,t.isCategoryError=!0,t.alertMessage=e.errorMessage)}),(function(e){t.isFacilityCategoryLoaded=!0,t.isCategoryError=!0,t.alertMessage="Some error occured"}))}}},{key:"addNewFacilityCategory",value:function(){this.isFacilityCategoryNew=!0,this.isSlotNew=!1,this.facility={}}},{key:"addNewSlot",value:function(e){this.isFacilityCategoryUpdate=!0,this.isFacilityCategoryNew=!1,this.isSlotNew=!0,this.updatefacilityData(e)}},{key:"updateFacilityCategory",value:function(e){this.isFacilityCategoryUpdate=!0,this.isFacilityCategoryNew=!1,this.isSlotNew=!1,this.updatefacilityData(e)}},{key:"updatefacilityData",value:function(e){this.facility=e,this.facility.rateBaseId=e.rateBaseId.toString(),this.facility.facilityTypeId=e.facilityTypeId.toString(),this.facility.minTimeLimit=b(e.minTimeLimit,"HH:mm:ss").toDate(),this.facility.maxTimeLimit=b(e.maxTimeLimit,"HH:mm:ss").toDate(),this.facilitySlotLength=e.apartmentFacilitySlot.length}},{key:"removeCategoryBox",value:function(){this.isFacilityCategoryNew=!1,this.isFacilityCategoryUpdate=!1,this.isCategoryError=!1}},{key:"getRateBase",value:function(e){return 138==e?"Hour":"Day"}},{key:"getSlots",value:function(e){return e.filter((function(e){return e.isActive}))}},{key:"getSlotTime",value:function(e){return b(e).format("HH:mm A")}},{key:"getFacilityParams",value:function(e){var t=this;this.isFacilityCategoryLoaded=!1,this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(e){t.facilityCategoryData=e.filter((function(e){return e.isActive})),t.isFacilityCategoryLoaded=!0}),(function(e){}))}},{key:"ngOnInit",value:function(){var e=this;this.facility={},this.facility.description="",this.facility.rateBaseId="",this.facility.facilityTypeId="",this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){e.facilityCategoryData=t.filter((function(e){return e.isActive})),e.isFacilityCategoryLoaded=!0}),(function(e){}))}}]),e}()).\u0275fac=function(e){return new(e||R)(c.Rb(c.r),c.Rb(m.b),c.Rb(r.a),c.Rb(s.a),c.Rb(d.a),c.Rb(f.a))},R.\u0275cmp=c.Lb({type:R,selectors:[["app-facility-setup"]],decls:4,vars:3,consts:[[1,"facility-settings-wrapper"],[4,"ngIf"],["class","category-list list-boxes big",4,"ngIf"],["class","card mt-20",4,"ngIf"],[1,"category-list","list-boxes","big"],[1,"main-title-mini"],[4,"ngFor","ngForOf"],[1,"list-inline-item"],[1,"card"],[1,"card-body","new","text-center"],["href","javascript:void(0)",1,"rounded-btn","green",3,"click"],[1,"icon"],[1,"tc-green"],[1,"card-body","nohover"],[1,"icons"],["href","javascript:void(0)","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["name","eye",1,"icon","view"],["href","javascript:void(0)"],["name","edit",1,"icon","edit",3,"click"],[1,"bottom"],[1,"ml-auto"],[1,"btn","sf","trans-white","hover-green",3,"click"],["name","plus",1,"icon","sm","plus"],[1,"card","mt-20"],[1,"card-header"],[1,"float-left"],[1,"float-right",3,"click"],["name","x",1,"icon","del"],["id","accordion",1,"card-body","p-0"],[1,"list-group","tabs","clear"],["data-toggle","collapse","data-target","#facilityCollapse","aria-expanded","true","aria-controls","facilityCollapseOne",1,"list-group-item",3,"ngClass"],["id","facilityCollapse","aria-labelledby","facilityCollapseOne","data-parent","#accordion",1,"collapse",3,"ngClass"],[1,"details"],[3,"message","isError"],["name","visitorSettingsForm","novalidate","",3,"ngSubmit"],["facilitySettingsForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["type","text","placeholder","Enter text","name","staffCategory","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-box","radio-box"],[1,"form-group"],["name","approvalType","id","Yes","type","radio","required","",3,"ngModel","value","ngModelChange"],["for","Yes",1,"radio-inline"],["name","approvalType","id","No","type","radio","required","",3,"ngModel","value","ngModelChange"],["for","No",1,"radio-inline"],["name","faclityRateBaseId","id","hourType","value","138","type","radio","required","",3,"ngModel","ngModelChange"],["for","hourType",1,"radio-inline"],["name","faclityRateBaseId","id","dayType","value","139","type","radio","required","",3,"ngModel","ngModelChange"],["for","dayType",1,"radio-inline"],["name","faclityTypeId","id","paidType","value","184","type","radio","required","",3,"ngModel","ngModelChange"],["for","paidType",1,"radio-inline"],["name","faclityTypeId","id","freeType","value","185","type","radio","required","",3,"ngModel","ngModelChange"],["for","freeType",1,"radio-inline"],["type","number","OnlyNumber","true","placeholder","Enter value","name","amount","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","deposit","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","autoCancelDays","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","minHoursBooking","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","minTimeLimit","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["minTimeLimit",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","clock","width","18",1,"icon","time","float-left"],["name","maxTimeLimit","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["maxTimeLimit",""],[1,"col-sm-12"],["name","description",1,"quill-editor",3,"ngModel","placeholder","ngModelChange","onContentChanged"],[1,"col-sm-12","text-right"],[1,"btn","blue","mr-2",3,"disabled"],["data-toggle","collapse","aria-expanded","true",1,"list-group-item","collapsed"],[1,"float-left","badge","time","ml-3","mt-2"],["data-parent","#accordion",1,"collapse",3,"id"],["type","edit",3,"slot","facilityId","facilityParams"],["data-toggle","collapse","data-target","#facilityNewCollapse","aria-expanded","true","aria-controls","facilityCollapseNewOne",1,"list-group-item","collapsed",3,"ngClass"],["id","facilityNewCollapse","attr.aria-labelledby","facilityCollapseNewOne","data-parent","#accordion",1,"collapse"],["data-toggle","collapse","data-target","#facilitySlotNew","aria-expanded","true","aria-controls","facilityNewSlot",1,"list-group-item"],["id","facilitySlotNew","aria-labelledby","facilityNewSlot","data-parent","#accordion",1,"collapse","show"],["type","new",3,"slot","facilityId","facilityParams"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Rc(1,V,1,0,"app-loader",1),c.Rc(2,x,12,1,"div",2),c.Rc(3,A,107,36,"div",3),c.Vb()),2&e&&(c.Cb(1),c.uc("ngIf",!t.isFacilityCategoryLoaded),c.Cb(1),c.uc("ngIf",t.isFacilityCategoryLoaded),c.Cb(1),c.uc("ngIf",t.isFacilityCategoryNew||t.isFacilityCategoryUpdate))},directives:[a.l,g.a,a.k,o.e,o.d,p.b,a.j,y.a,h.B,h.o,h.p,h.d,h.x,h.n,h.q,h.u,h.s,C.a,v.c,v.e,v.b,k.a,M],styles:[""]}),R),H=i("Nw7d"),K=i("NutR"),q=i("F/us"),U=i("is7e"),Y=i("6nBg"),j=i("NhFE"),X=i("bvAq");function z(e,t){1&e&&c.Sb(0,"app-loader")}function $(e,t){if(1&e&&(c.Wb(0,"span"),c.Tc(1),c.Vb()),2&e){var i=c.mc().$implicit;c.Cb(1),c.Uc(i.amount)}}function G(e,t){1&e&&(c.Wb(0,"span"),c.Tc(1,"Free"),c.Vb())}var Z=function(){return{exact:!0}};function J(e,t){if(1&e){var i=c.Xb();c.Wb(0,"tr",28),c.Wb(1,"td",29),c.Tc(2),c.Vb(),c.Wb(3,"td",30),c.Tc(4),c.Vb(),c.Wb(5,"td",30),c.Wb(6,"span",31),c.Tc(7),c.Vb(),c.Vb(),c.Wb(8,"td",30),c.Tc(9),c.Vb(),c.Wb(10,"td",32),c.Tc(11),c.Vb(),c.Wb(12,"td",30),c.Rc(13,$,2,1,"span",1),c.Rc(14,G,2,0,"span",1),c.Vb(),c.Wb(15,"td",33),c.Wb(16,"a",34),c.Sb(17,"i-feather",35),c.Vb(),c.Wb(18,"a",36),c.ic("click",(function(){c.Kc(i);var e=t.$implicit;return c.mc(2).showConfirmModal(e.apartmentFacilityBookingId)})),c.Sb(19,"i-feather",37),c.Vb(),c.Vb(),c.Vb()}if(2&e){var n=t.$implicit,a=t.index,o=c.mc(2);c.uc("ngClass",n.isActive?"active":"notactive"),c.Cb(2),c.Uc(o.getFacilityBookingName(n,n.apartmentFacilityId)),c.Cb(2),c.Uc(o.getFacilityBookingSlot(n,n.slotId)),c.Cb(2),c.uc("ngClass",o.getBookingStatus(n,n.facilityBookingStatusId)),c.Cb(1),c.Uc(o.getBookingStatus(n,n.facilityBookingStatusId)),c.Cb(2),c.Uc(o.getBookedDate(a,n.bookedForDate)),c.Cb(2),c.Uc(o.getUserName(n,n.neededUserId)),c.Cb(2),c.uc("ngIf",n.amount>0),c.Cb(1),c.uc("ngIf",0==n.amount),c.Cb(2),c.wc("routerLink","/ams/facility/edit-booking/",n.apartmentFacilityBookingId,""),c.uc("routerLinkActiveOptions",c.Ac(11,Z))}}function Q(e,t){if(1&e){var i=c.Xb();c.Wb(0,"div",3),c.Wb(1,"div",4),c.Wb(2,"div",5),c.Wb(3,"h5"),c.Tc(4,"All Bookings "),c.Wb(5,"span",6),c.Tc(6),c.Vb(),c.Vb(),c.Vb(),c.Wb(7,"ul",7),c.Wb(8,"li",8),c.Sb(9,"i",9),c.Wb(10,"input",10),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().bookingData=e})),c.Vb(),c.Vb(),c.Wb(11,"li",11),c.Wb(12,"a",12),c.Sb(13,"i-feather",13),c.Wb(14,"span"),c.Tc(15,"Create Booking"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(16,"div",14),c.Wb(17,"table",15),c.Wb(18,"thead"),c.Wb(19,"tr"),c.Wb(20,"th",16),c.Tc(21,"Facility Name "),c.Wb(22,"span",17),c.ic("click",(function(){return c.Kc(i),c.mc().sortUnitData("facilityName")})),c.Vb(),c.Wb(23,"app-simple-select-box",18),c.ic("inputChange",(function(e){return c.Kc(i),c.mc().onSelectChange(e,"facilityName","facilityName")})),c.Vb(),c.Vb(),c.Wb(24,"th",16),c.Tc(25,"Slot "),c.Wb(26,"span",17),c.ic("click",(function(){return c.Kc(i),c.mc().sortUnitData("apartmentFacilitySlot")})),c.Vb(),c.Wb(27,"app-simple-select-box",19),c.ic("inputChange",(function(e){return c.Kc(i),c.mc().onSelectChange(e,"apartmentFacilitySlot","slotBeginTime")})),c.Vb(),c.Vb(),c.Wb(28,"th",16),c.Tc(29,"Status "),c.Wb(30,"span",17),c.ic("click",(function(){return c.Kc(i),c.mc().sortUnitData("facilityBookingStatus")})),c.Vb(),c.Wb(31,"app-simple-select-box",20),c.ic("inputChange",(function(e){return c.Kc(i),c.mc().onSelectChange(e,"facilityBookingStatus","lookupValueName")})),c.Vb(),c.Vb(),c.Wb(32,"th",16),c.Tc(33,"Booked For "),c.Wb(34,"span",17),c.ic("click",(function(){return c.Kc(i),c.mc().sortUnitData("facilityBookedForDate")})),c.Vb(),c.Wb(35,"app-simple-date-box",21),c.ic("inputChange",(function(e){return c.Kc(i),c.mc().onDateChange(e,"facilityBookedForDate")})),c.Vb(),c.Vb(),c.Wb(36,"th",16),c.Tc(37,"User Name "),c.Wb(38,"span",17),c.ic("click",(function(){return c.Kc(i),c.mc().sortUnitData("userName")})),c.Vb(),c.Wb(39,"input",22),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().columnField.userName=e}))("ngModelChange",(function(){return c.Kc(i),c.mc().selectColInput("userName")})),c.Vb(),c.Vb(),c.Wb(40,"th",16),c.Tc(41,"Cost "),c.Wb(42,"span",17),c.ic("click",(function(){return c.Kc(i),c.mc().sortUnitData("amount")})),c.Vb(),c.Wb(43,"input",23),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().columnField.amount=e}))("ngModelChange",(function(){return c.Kc(i),c.mc().selectColInput("amount")})),c.Vb(),c.Vb(),c.Wb(44,"th",24),c.Tc(45," Actions "),c.Wb(46,"input",25),c.ic("ngModelChange",(function(e){return c.Kc(i),c.mc().columnField.action=e}))("ngModelChange",(function(){return c.Kc(i),c.mc().selectColInput("action")})),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(47,"tbody"),c.Rc(48,J,20,12,"tr",26),c.nc(49,"columnSearch"),c.nc(50,"simpleSearch"),c.nc(51,"slice"),c.nc(52,"orderBy"),c.Vb(),c.Vb(),c.Wb(53,"app-pagination",27),c.ic("outputParams",(function(e){return c.Kc(i),c.mc().getIndexParams(e)})),c.Vb(),c.Vb(),c.Vb()}if(2&e){var n=c.mc();c.Cb(6),c.Uc(n.totalItems),c.Cb(4),c.uc("ngModel",n.bookingData),c.Cb(2),c.uc("routerLinkActiveOptions",c.Ac(43,Z)),c.Cb(5),c.uc("ngClass",n.isMobileView()),c.Cb(5),c.uc("ngClass",n.getFieldOrderBy("facilityName")),c.Cb(1),c.uc("fieldModel",n.apartmentFacilityId)("fieldRequired","required")("fieldList",n.facilityCategoryData),c.Cb(3),c.uc("ngClass",n.getFieldOrderBy("apartmentFacilitySlot")),c.Cb(1),c.uc("fieldModel",n.apartmentFacilitySlotId)("fieldRequired","required")("fieldList",n.facilitySlotData),c.Cb(3),c.uc("ngClass",n.getFieldOrderBy("facilityBookingStatus")),c.Cb(1),c.uc("fieldModel",n.facilityBookingStatusId)("fieldRequired","required")("fieldList",n.statusTypeData),c.Cb(3),c.uc("ngClass",n.getFieldOrderBy("facilityBookedForDate")),c.Cb(1),c.uc("dateModel",n.facilityBookedForDate),c.Cb(3),c.uc("ngClass",n.getFieldOrderBy("userName")),c.Cb(1),c.uc("ngModel",n.columnField.userName),c.Cb(3),c.uc("ngClass",n.getFieldOrderBy("amount")),c.Cb(1),c.uc("ngModel",n.columnField.amount),c.Cb(3),c.uc("ngModel",n.columnField.action),c.Cb(2),c.uc("ngForOf",c.qc(49,28,c.pc(50,32,c.qc(51,35,c.qc(52,39,n.bookingListData,n.unitFieldType,n.unitOrder),n.ItemUserStartIndex,n.ItemUserEndIndex),n.bookingData),n.columnField,n.selectedInput)),c.Cb(5),c.uc("totalItems",n.totalItems)("ItemStartIndex",n.ItemStartIndex)("ItemEndIndex",n.ItemEndIndex)("itemLimit",n.itemLimit)}}var ee,te=((ee=function(){function e(t,i,n,a,o,c,l,r){_classCallCheck(this,e),this.router=t,this.route=i,this.injector=n,this.userService=a,this.facilityService=o,this.lookupService=c,this.sharedService=l,this.cookieService=r,this.isBookingDataLoaded=!1,this.unitFieldType="unitno",this.unitOrder=!1,this.ItemStartIndex=0,this.itemLimit=20,this.bookingData="",this.staffData="",this.selectedInput="",this.columnField={},this.modalService=this.injector.get(u.a)}return _createClass(e,[{key:"getIndexParams",value:function(e){this.ItemStartIndex=e.ItemStartIndex,this.ItemEndIndex=e.ItemEndIndex,this.itemLimit=e.itemLimit}},{key:"sortUnitData",value:function(e){this.unitFieldType=e,this.unitOrder=!this.unitOrder}},{key:"getFieldOrderBy",value:function(e){return this.unitFieldType==e?this.unitOrder?"desc":"asc":""}},{key:"selectColInput",value:function(e){this.selectedInput=e}},{key:"onSelectChange",value:function(e,t,i){q.isEmpty(e)?this.columnField={}:(this.selectedInput=t,this.columnField[t]=e[i])}},{key:"onDateChange",value:function(e,t){null!=e?(this.selectedInput=t,this.columnField[t]=b(e).format("DD/MM/YYYY")):this.columnField={}}},{key:"isMobileView",value:function(){return window.innerWidth<=767?"table-responsive":""}},{key:"getFacilityBookingName",value:function(e,t){var i=q.filter(this.facilityCategoryData,(function(e){if(e.apartmentFacilityId===t)return e}));return void 0===i||0==i.length?"":(this.bookingListData.map((function(t){t.apartmentFacilityBookingId==e.apartmentFacilityBookingId&&(t.facilityName=i[0].facilityName)})),i[0].facilityName)}},{key:"getFacilityBookingSlot",value:function(e,t){var i=q.filter(this.facilitySlotData,(function(e){if(e.apartmentFacilitySlotId===t)return e}));if(void 0===i||0==i.length)return"";var n=b(i[0].slotBeginTime,"HH:mm:ss").toDate(),a=b(n).format("HH:mm A"),o=b(i[0].slotEndTime,"HH:mm:ss").toDate(),c=b(o).format("HH:mm A");return this.bookingListData.map((function(t){t.apartmentFacilityBookingId==e.apartmentFacilityBookingId&&(t.apartmentFacilitySlot=a)})),a+" - "+c}},{key:"getBookedDate",value:function(e,t){return q.each(this.bookingListData,(function(e,t){e.facilityBookedForDate=b(e.bookedForDate).format("DD/MM/YYYY")})),b(t).format("DD/MM/YYYY")}},{key:"getUserName",value:function(e,t){var i=q.filter(this.userListData,(function(e){if(e.userId===t)return e}));return void 0===i||0==i.length?"":(this.bookingListData.map((function(t){t.apartmentFacilityBookingId==e.apartmentFacilityBookingId&&(t.userName=i[0].firstName)})),i[0].firstName)}},{key:"getBookingStatus",value:function(e,t){var i=q.filter(this.statusTypeData,(function(e){if(e.lookupValueId===t)return e}));return void 0===i||0==i.length?"":(this.bookingListData.map((function(t){t.apartmentFacilityBookingId==e.apartmentFacilityBookingId&&(t.facilityBookingStatus=i[0].lookupValueName.toLowerCase())})),i[0].lookupValueName.toLowerCase())}},{key:"showConfirmModal",value:function(e){this.modalService.showConfirmModal(e)}},{key:"ngOnInit",value:function(){var e=this;this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){e.facilityCategoryData=t.filter((function(e){return e.isActive}))}),(function(e){})),this.lookupService.getLookupValueByLookupTypeId(40).subscribe((function(t){e.statusTypeData=t.filter((function(e){return e.isActive}))}),(function(e){})),this.facilityService.getApartmentFacilitySlotsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){e.facilitySlotData=t.filter((function(e){return e.isActive})),q.each(e.facilitySlotData,(function(e){var t=b(e.slotBeginTime,"HH:mm:ss").toDate(),i=b(t).format("HH:mm A");e.slotBeginTime=i}))}),(function(e){})),this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){e.userListData=t.filter((function(e){return e.isActive}))}),(function(e){})),this.facilityService.getApartmentFacilityBookingsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){e.bookingListData=t.filter((function(e){return e.isActive})),e.totalItems=e.bookingListData.length,e.ItemEndIndex=e.totalItems>e.itemLimit?e.itemLimit:e.totalItems,e.isBookingDataLoaded=!0}),(function(e){})),this.sharedService.unitlistdeleteindexcast.subscribe((function(t){if(null!=t){var i={apartmentFacilityBookingId:t,deleteBy:parseInt(e.cookieService.get("userId"))};e.facilityService.deleteApartmentFacilityBooking(i).subscribe((function(i){q.each(e.bookingListData,(function(e){e.apartmentFacilityBookingId==t&&(e.isActive=!1)})),setTimeout((function(){e.bookingListData=e.bookingListData.filter((function(e){return e.ticketId!==t})),e.totalItems=e.bookingListData.length,e.sharedService.setAlertMessage("Booking deleted"),e.sharedService.setUnitListDeleteIndex(null)}),500)}),(function(e){console.log(e)}))}}))}}]),e}()).\u0275fac=function(e){return new(e||ee)(c.Rb(o.c),c.Rb(o.a),c.Rb(c.r),c.Rb(K.a),c.Rb(r.a),c.Rb(s.a),c.Rb(d.a),c.Rb(f.a))},ee.\u0275cmp=c.Lb({type:ee,selectors:[["app-facility-booking-actions"]],decls:3,vars:2,consts:[[1,"facilitybooking-actions-wrapper"],[4,"ngIf"],["class","card table-card",4,"ngIf"],[1,"card","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],["routerLink","/ams/facility/create-booking","routerLinkActive","active",1,"btn","lime-green","mt_5",3,"routerLinkActiveOptions"],["name","plus",1,"icon","plus"],[1,"card-body","p-0"],[1,"table","table-checker","table-resizable",3,"ngClass"],["scope","col"],[3,"ngClass","click"],["fieldName","facilityName","fieldText","","fieldItemName","facilityName","isLabel","false","fieldPlaceholder","Select",3,"fieldModel","fieldRequired","fieldList","inputChange"],["fieldName","apartmentFacilitySlot","fieldText","","fieldItemName","slotBeginTime","isLabel","false","fieldPlaceholder","Select",3,"fieldModel","fieldRequired","fieldList","inputChange"],["fieldName","facilityBookingStatus","fieldText","","fieldItemName","lookupValueName","isLabel","false","fieldPlaceholder","Select",3,"fieldModel","fieldRequired","fieldList","inputChange"],[3,"dateModel","inputChange"],["type","text","placeholder","User Name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Cost",1,"form-control",3,"ngModel","ngModelChange"],["scope","col",1,"simple-actions"],["type","text","placeholder","Action",1,"form-control","vis-h",3,"ngModel","ngModelChange"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[3,"ngClass"],[1,"name"],[1,"grey"],[1,"badge","small","min","text-capitalize",3,"ngClass"],[1,"grey","text-capitalize"],[1,"simple-actions"],["href","javascript:void(0)","placement","top","routerLinkActive","active",1,"mr-2",3,"routerLink","routerLinkActiveOptions"],["name","edit",1,"icon","edit"],["href","javascript:void(0)",3,"click"],["name","trash",1,"icon","delete"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Rc(1,z,1,0,"app-loader",1),c.Rc(2,Q,54,44,"div",2),c.Vb()),2&e&&(c.Cb(1),c.uc("ngIf",!t.isBookingDataLoaded),c.Cb(1),c.uc("ngIf",t.isBookingDataLoaded))},directives:[a.l,g.a,C.b,h.d,h.n,h.q,o.e,o.d,p.b,C.d,a.j,U.a,Y.a,a.k,j.a],pipes:[X.a,X.c,a.t,X.b],styles:[""]}),ee),ie=i("iOEq"),ne=i("IvIE");function ae(e,t){1&e&&c.Sb(0,"app-loader")}var oe=function(){return{left:"today, prev,next",center:"title",right:"dayGridDay,dayGridWeek,dayGridMonth"}};function ce(e,t){if(1&e){var i=c.Xb();c.Ub(0),c.Wb(1,"full-calendar",2),c.ic("eventClick",(function(e){return c.Kc(i),c.mc().handleEventClick(e)})),c.Vb(),c.Tb()}if(2&e){var n=c.mc();c.Cb(1),c.uc("plugins",n.calendarPlugins)("header",c.Ac(3,oe))("events",n.calendarEvents)}}var le,re,se,de=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:E},{path:"create-booking",component:H.a},{path:"edit-booking/:id",component:H.a},{path:"calendar",component:(le=function(){function e(t,i,n,a,c,l){var r=this;_classCallCheck(this,e),this.router=t,this.route=i,this.facilityService=n,this.lookupService=a,this.sharedService=c,this.cookieService=l,this.calendarPlugins=[ie.a],this.calendarEvents=[],this.isCalenderLoaded=!1,this.router.events.subscribe((function(e){e instanceof o.b&&-1!=r.router.url.indexOf("facility")&&r.getFacilityBookingData()}))}return _createClass(e,[{key:"handleEventClick",value:function(e){this.router.navigate(["/ams/facility/edit-booking",e.event.id])}},{key:"getFacilityBookingData",value:function(){var e=this;this.facilityService.getApartmentFacilitySlotsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){e.facilitySlotData=t.filter((function(e){return e.isActive}))}),(function(e){})),this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe((function(t){e.facilityCategoryData=t.filter((function(e){return e.isActive})),e.facilityService.getApartmentFacilityBookingsByApartmentId(parseInt(e.cookieService.get("apartmentId"))).subscribe((function(t){e.facilityBookingData=t.filter((function(e){return e.isActive})),q.each(e.facilityBookingData,(function(t){var i=b(t.bookedForDate).format("YYYY-MM-DD"),n=e.facilityCategoryData.filter((function(e){return e.apartmentFacilityId==t.apartmentFacilityId})),a=e.facilitySlotData.filter((function(e){return e.apartmentFacilitySlotId==t.slotId})),o=b(a[0].slotBeginTime,"HH:mm:ss").toDate(),c=b(o).format("HH:mm A"),l=b(a[0].slotEndTime,"HH:mm:ss").toDate(),r=b(l).format("HH:mm A");e.calendarEvents.push({title:n[0].facilityName+" ( "+c+"-"+r+" ) ",date:i,id:n[0].apartmentFacilityId}),e.isCalenderLoaded=!0}))}),(function(e){}))}),(function(e){}))}},{key:"ngOnInit",value:function(){}}]),e}(),le.\u0275fac=function(e){return new(e||le)(c.Rb(o.c),c.Rb(o.a),c.Rb(r.a),c.Rb(s.a),c.Rb(d.a),c.Rb(f.a))},le.\u0275cmp=c.Lb({type:le,selectors:[["app-full-calendar"]],decls:3,vars:2,consts:[[1,"full-calendar-wrapper"],[4,"ngIf"],["defaultView","dayGridMonth",3,"plugins","header","events","eventClick"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Rc(1,ae,1,0,"app-loader",1),c.Rc(2,ce,2,4,"ng-container",1),c.Vb()),2&e&&(c.Cb(1),c.uc("ngIf",!t.isCalenderLoaded),c.Cb(1),c.uc("ngIf",t.isCalenderLoaded))},directives:[a.l,g.a,ne.a],styles:[""]}),le)},{path:"all-bookings",component:te},{path:"reports",component:l},{path:"**",redirectTo:"settings",pathMatch:"full"}],ue=((re=function e(){_classCallCheck(this,e)}).\u0275mod=c.Pb({type:re}),re.\u0275inj=c.Ob({factory:function(e){return new(e||re)},imports:[[o.f.forChild(de)],o.f]}),re),be=i("PCNd"),me=((se=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||se)},se.\u0275cmp=c.Lb({type:se,selectors:[["app-facility"]],decls:1,vars:0,template:function(e,t){1&e&&c.Sb(0,"router-outlet")},directives:[o.g],styles:[""]}),se);i.d(t,"FacilityModule",(function(){return ge}));var fe,ge=((fe=function e(){_classCallCheck(this,e)}).\u0275mod=c.Pb({type:fe,bootstrap:[me]}),fe.\u0275inj=c.Ob({factory:function(e){return new(e||fe)},imports:[[a.b,be.a,ue]]}),fe)}}]);