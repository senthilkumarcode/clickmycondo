(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"z+D7":function(t,e,n){"use strict";n.r(e);var c=n("ofXK"),r=n("tyNb"),a=n("fXoL");let i=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Qb({type:t,selectors:[["app-security-setup"]],decls:2,vars:0,template:function(t,e){1&t&&(a.bc(0,"p"),a.Yc(1," security-setup works!\n"),a.ac())},styles:[""]}),t})();var o=n("NutR"),s=n("Yt4J"),l=n("MXRh"),p=n("ThaB"),d=n("wbvY"),g=n("F/us"),u=n("wd/R"),b=n("b6Qw"),m=n("668k"),f=n("3Pt+");function h(t,e){1&t&&a.Xb(0,"app-loader")}function v(t,e){1&t&&a.Xb(0,"app-loader")}function M(t,e){if(1&t){const t=a.cc();a.bc(0,"textarea",29),a.nc("ngModelChange",(function(e){return a.Pc(t),a.rc(3).$implicit.notes=e})),a.ac()}if(2&t){const t=a.rc(3).$implicit;a.zc("ngModel",t.notes)("disabled",!0)}}function C(t,e){if(1&t){const t=a.cc();a.bc(0,"textarea",30),a.nc("ngModelChange",(function(e){return a.Pc(t),a.rc(3).$implicit.notes=e})),a.ac()}if(2&t){const t=a.rc(3).$implicit;a.zc("ngModel",t.notes)}}function O(t,e){if(1&t&&(a.bc(0,"div",20),a.bc(1,"div",25),a.bc(2,"div",26),a.bc(3,"label"),a.Yc(4,"Comments"),a.ac(),a.Wc(5,M,1,2,"textarea",27),a.Wc(6,C,1,1,"textarea",28),a.ac(),a.ac(),a.ac()),2&t){const t=a.rc(2).$implicit,e=a.rc(2);a.Hb(5),a.zc("ngIf",!e.isInProgressStatus(t.alertStatusId)),a.Hb(1),a.zc("ngIf",e.isInProgressStatus(t.alertStatusId))}}function P(t,e){if(1&t){const t=a.cc();a.bc(0,"div",31),a.bc(1,"a",32),a.nc("click",(function(){a.Pc(t);const e=a.rc(2).$implicit;return a.rc(2).approveAlert(e,"approve")})),a.Yc(2,"Acknowledge"),a.ac(),a.ac()}}function y(t,e){if(1&t){const t=a.cc();a.bc(0,"div",31),a.bc(1,"a",32),a.nc("click",(function(){a.Pc(t);const e=a.rc(2).$implicit;return a.rc(2).approveAlert(e,"close")})),a.Yc(2,"Close"),a.ac(),a.ac()}}function I(t,e){if(1&t&&(a.bc(0,"div",19),a.bc(1,"div",20),a.bc(2,"div",21),a.bc(3,"div",22),a.bc(4,"h5"),a.Yc(5,"Person Name"),a.ac(),a.bc(6,"p"),a.Yc(7),a.ac(),a.ac(),a.bc(8,"div",22),a.bc(9,"h5"),a.Yc(10,"Phone Number"),a.ac(),a.bc(11,"p"),a.Yc(12),a.ac(),a.ac(),a.bc(13,"div",22),a.bc(14,"h5"),a.Yc(15,"Alert Received Time"),a.ac(),a.bc(16,"p"),a.Yc(17),a.ac(),a.ac(),a.ac(),a.Xb(18,"div",21),a.ac(),a.Wc(19,O,7,2,"div",23),a.Wc(20,P,3,0,"div",24),a.Wc(21,y,3,0,"div",24),a.ac()),2&t){const t=a.rc().$implicit,e=a.rc(2);a.Hb(7),a.Zc(e.getUserName(t.insertedBy)),a.Hb(5),a.Zc(e.getContactNumber(t.insertedBy)),a.Hb(5),a.Zc(e.getDateTime(t.receivedDate)),a.Hb(2),a.zc("ngIf",!e.isOpenStatus(t.alertStatusId)),a.Hb(1),a.zc("ngIf",e.isOpenStatus(t.alertStatusId)),a.Hb(1),a.zc("ngIf",e.isInProgressStatus(t.alertStatusId))}}function _(t,e){if(1&t&&(a.Zb(0),a.bc(1,"li",7),a.bc(2,"div",8),a.bc(3,"div",9),a.bc(4,"div",10),a.bc(5,"div"),a.Xb(6,"img",11),a.ac(),a.bc(7,"div",12),a.bc(8,"h5"),a.Yc(9),a.ac(),a.ac(),a.ac(),a.ac(),a.bc(10,"div",13),a.bc(11,"span",14),a.Yc(12),a.ac(),a.ac(),a.ac(),a.bc(13,"div",15),a.bc(14,"p"),a.bc(15,"span",16),a.Yc(16,"Date:"),a.ac(),a.Yc(17),a.ac(),a.bc(18,"p"),a.bc(19,"span",16),a.Yc(20,"Block:"),a.ac(),a.Yc(21),a.ac(),a.ac(),a.ac(),a.bc(22,"div",17),a.Wc(23,v,1,0,"app-loader",1),a.Wc(24,I,22,6,"div",18),a.ac(),a.Yb()),2&t){const t=e.$implicit,n=a.rc(2);a.Hb(1),a.Lb("list-group-item collapsed ",n.getEmergencyType(t.alertTypeId)," "),a.Jb("data-target","#collapse",t.apartmentBlockUnitAlertId,""),a.Hb(4),a.Lb("s-circle ",n.getEmergencyType(t.alertTypeId)," text-center"),a.Hb(1),a.Bc("src","assets/images/",n.getEmergencyType(t.alertTypeId),"-e-icon.svg",a.Rc),a.Hb(3),a.Zc(n.getAlertName(t.alertTypeId)),a.Hb(2),a.zc("ngClass",n.getAlertStatus(t.alertStatusId)),a.Hb(1),a.Zc(n.getAlertStatus(t.alertStatusId)),a.Hb(5),a.Zc(n.getDate(t.receivedDate)),a.Hb(4),a.Zc(n.getBlock(t.apartmentBlockUnitId)),a.Hb(1),a.Bc("id","collapse",t.apartmentBlockUnitAlertId,""),a.Hb(1),a.zc("ngIf",n.isAlertUpdated),a.Hb(1),a.zc("ngIf",!n.isAlertUpdated)}}function k(t,e){1&t&&(a.Zb(0),a.bc(1,"div",33),a.bc(2,"div",34),a.bc(3,"h4"),a.Yc(4,"No Active Alerts available"),a.ac(),a.ac(),a.ac(),a.Yb())}function w(t,e){if(1&t&&(a.Zb(0),a.bc(1,"h3",2),a.Yc(2,"Active Alerts"),a.ac(),a.bc(3,"div",3),a.bc(4,"div",4),a.bc(5,"ul",5),a.Wc(6,_,25,16,"ng-container",6),a.Wc(7,k,5,0,"ng-container",1),a.ac(),a.ac(),a.ac(),a.Yb()),2&t){const t=a.rc();a.Hb(6),a.zc("ngForOf",t.alertList),a.Hb(1),a.zc("ngIf",t.isNoAlerts())}}const A=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:i},{path:"active-alerts",component:(()=>{class t{constructor(t,e,n,c,r,a){this.userService=t,this.apartmentService=e,this.alertService=n,this.lookupService=c,this.sharedService=r,this.cookieService=a,this.isAlertsLoaded=!1,this.isAlertUpdated=!1,this.userDetails=[],this.blockDetails=[],this.locationDetails=[]}getEmergencyType(t){return 130==t?"medical":131==t?"theft":132==t?"fire":133==t?"shooter":134==t?"police":"other"}getAlertName(t){var e=g.filter(this.emergencyTypeList,(function(e){if(e.lookupValueId===t)return e}));return void 0===e||0==e.length?"":e[0].lookupValueName.toLowerCase()}getAlertStatus(t){var e=g.filter(this.alertTypeList,(function(e){if(e.lookupValueId===t)return e}));return void 0===e||0==e.length?"":e[0].lookupValueName.toLowerCase()}getBlock(t){var e=g.filter(this.blockDetails,(function(e){if(e.apartmentBlockUnitId===t)return e}));return void 0===e||0==e.length?"":e[0].apartmentBlockNumber+" "+e[0].apartmentBlockUnitNumber}getUserName(t){var e=g.filter(this.userDetails,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].firstName}getContactNumber(t){var e=g.filter(this.userDetails,(function(e){if(e.userId===t)return e}));return void 0===e||0==e.length?"":e[0].phoneNumber}getDate(t){return u(t).format("MM/DD/YYYY, h:mm A")}getDateTime(t){return u(t).format("MM/DD/YYYY, h:mm A")}isOpenStatus(t){return 135==t}isInProgressStatus(t){return 136==t}isClosedStatus(t){return 137==t}getLatitude(t){var e=g.filter(this.locationDetails,(function(e){if(e.userId===t)return e}));if(void 0===e||0==e.length)return"";var n=e[0].coords.split(",");return parseFloat(n[0])}getLongitude(t){var e=g.filter(this.locationDetails,(function(e){if(e.userId===t)return e}));if(void 0===e||0==e.length)return"";var n=e[0].coords.split(",");return parseFloat(n[1])}approveAlert(t,e){this.isAlertUpdated=!0;let n={};null==t.gpslocation&&(t.gpslocation=" "),n="approve"==e?{apartmentBlockUnitAlertId:t.apartmentBlockUnitAlertId,apartmentBlockUnitId:t.apartmentBlockUnitId,receivedDate:t.receivedDate,alertTypeId:t.alertTypeId,location:"string",gpslocation:t.gpslocation,assignedTo:parseInt(this.cookieService.get("userId")),alertStatusId:136,notes:t.notes,isActive:t.isActive,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-06T13:45:09.296Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-06T13:45:09.296Z"}:{apartmentBlockUnitAlertId:t.apartmentBlockUnitAlertId,apartmentBlockUnitId:t.apartmentBlockUnitId,receivedDate:t.receivedDate,alertTypeId:t.alertTypeId,location:"string",gpslocation:t.gpslocation,assignedTo:parseInt(this.cookieService.get("userId")),alertStatusId:137,notes:t.notes,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-06T13:45:09.296Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-06T13:45:09.296Z"},this.alertService.updateApartmentBlockUnitAlert(n).subscribe(t=>{t.message?this.alertService.getAllApartmentBlockUnitAlertByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.alertList=t.filter(t=>t.isActive),this.isAlertUpdated=!1},t=>{console.log(t)}):this.isAlertUpdated=!1},t=>{console.log(t)})}isNoAlerts(){return 0==this.alertList.length}ngOnInit(){this.alert={},this.alert.gpsLocation=" ",this.alert.notes=" ",this.alertService.getAllApartmentBlockUnitAlertByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.alertList=t.filter(t=>t.isActive),this.isAlertsLoaded=!0,console.log(this.alertList),g.each(this.alertList,t=>{this.userService.getUserById(parseInt(t.insertedBy)).subscribe(t=>{this.userDetails.push(t[0]),console.log(this.userDetails)},t=>{console.log(t)}),this.apartmentService.getApartmentBlockUnitById(t.apartmentBlockUnitId).subscribe(t=>{this.blockDetails.push(t[0])},t=>{console.log(t)}),null!=t.gpslocation&&0!=t.gpslocation.length||(t.gpslocation="47.4925,19.0513"),this.locationDetails.push({userId:t.insertedBy,coords:t.gpslocation})})},t=>{console.log(t)}),this.lookupService.getLookupValueByLookupTypeId(29).subscribe(t=>{this.emergencyTypeList=t}),this.lookupService.getLookupValueByLookupTypeId(30).subscribe(t=>{this.alertTypeList=t})}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(o.a),a.Wb(s.a),a.Wb(l.a),a.Wb(p.a),a.Wb(d.a),a.Wb(b.a))},t.\u0275cmp=a.Qb({type:t,selectors:[["app-security-active-alerts"]],decls:3,vars:2,consts:[[1,"secuirty-active-alerts-wrapper"],[4,"ngIf"],[1,"main-title"],[1,"card","mb-30"],["id","accordion",1,"card-body","p-0"],[1,"list-group","tabs","clear"],[4,"ngFor","ngForOf"],["data-toggle","collapse","aria-expanded","true","attr.aria-controls","collapseOne"],[1,"details"],[1,"float-left"],[1,"media"],["width","14",3,"src"],[1,"media-body"],[1,"float-right","mr-4"],[1,"badge","small","min","ml-3","text-capitalize",3,"ngClass"],[1,"info"],[1,"mr-2"],["aria-labelledby","headingOne","data-parent","#accordion",1,"collapse",3,"id"],["class","additional-desp",4,"ngIf"],[1,"additional-desp"],[1,"row"],[1,"col-sm-6"],[1,"lists"],["class","row",4,"ngIf"],["class","btn-wrapper text-center",4,"ngIf"],[1,"col-sm-12","mt-4","mb-2"],[1,"input-box"],["placeholder","some text here","name","healthIssue",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["placeholder","some text here","name","healthIssue",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","some text here","name","healthIssue",3,"ngModel","disabled","ngModelChange"],["placeholder","some text here","name","healthIssue",3,"ngModel","ngModelChange"],[1,"btn-wrapper","text-center"],[1,"btn","blue","mt-4","mb-4",3,"click"],[1,"card"],[1,"card-body","gen-message"]],template:function(t,e){1&t&&(a.bc(0,"div",0),a.Wc(1,h,1,0,"app-loader",1),a.Wc(2,w,8,2,"ng-container",1),a.ac()),2&t&&(a.Hb(1),a.zc("ngIf",!e.isAlertsLoaded),a.Hb(1),a.zc("ngIf",e.isAlertsLoaded))},directives:[c.l,m.a,c.k,c.j,f.d,f.l,f.o],styles:['.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:3px;height:100%!important}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.medical[_ngcontent-%COMP%]:before{background-color:#00bcd4}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.theft[_ngcontent-%COMP%]:before{background-color:#ef60a5}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.fire[_ngcontent-%COMP%]:before{background-color:#ff9800}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.shooter[_ngcontent-%COMP%]:before{background-color:#9100ff}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li.police[_ngcontent-%COMP%]:before{background-color:#06bf58}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 20px;width:100%!important;float:left;border:none}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.8rem;color:#373946;text-transform:capitalize;margin:2px 0 0}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:0 20px;width:100%!important;float:left;margin:10px 0 0}@media (max-width:576px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin:12px 0 0}}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;color:#373946;display:inline-block}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(:last-child){margin:0 40px 0 0!important}@media (max-width:576px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px}}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#8391a1}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-top:none}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]{padding:20px 35px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]:not(:last-child){margin:0 0 20px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.6rem;padding:0 0 4px;color:#191c1e}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;color:#8391a1}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .additional-desp[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:500;letter-spacing:.2px;font-size:1.6rem;color:#191c1e;margin:0 0 7px}.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{height:300px}@media (max-width:991px){.secuirty-active-alerts-wrapper[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{margin:15px 0 0;display:block}}']}),t})()},{path:"history",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Qb({type:t,selectors:[["app-security-history"]],decls:2,vars:0,template:function(t,e){1&t&&(a.bc(0,"p"),a.Yc(1," security-history works!\n"),a.ac())},styles:[""]}),t})()},{path:"reports",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Qb({type:t,selectors:[["app-security-reports"]],decls:2,vars:0,template:function(t,e){1&t&&(a.bc(0,"p"),a.Yc(1," security-reports works!\n"),a.ac())},styles:[""]}),t})()},{path:"**",redirectTo:"settings",pathMatch:"full"}];let S=(()=>{class t{}return t.\u0275mod=a.Ub({type:t}),t.\u0275inj=a.Tb({factory:function(e){return new(e||t)},imports:[[r.f.forChild(A)],r.f]}),t})();var B=n("PCNd");let x=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Qb({type:t,selectors:[["app-security"]],decls:1,vars:0,template:function(t,e){1&t&&a.Xb(0,"router-outlet")},directives:[r.g],styles:[""]}),t})();n.d(e,"SecurityModule",(function(){return Y}));let Y=(()=>{class t{}return t.\u0275mod=a.Ub({type:t,bootstrap:[x]}),t.\u0275inj=a.Tb({factory:function(e){return new(e||t)},imports:[[c.b,B.a,S]]}),t})()}}]);