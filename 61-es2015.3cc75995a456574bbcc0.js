(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{EPAP:function(t,i,e){"use strict";e.r(i);var r=e("ofXK"),s=e("tyNb"),c=e("fXoL"),o=e("NutR"),n=e("wbvY"),a=e("ThaB"),d=e("Yt4J"),l=e("S4bl"),u=e("DtdB"),p=e("wd/R"),b=e("b6Qw"),h=e("wlDI"),m=e("8mtn"),v=e("668k"),g=e("3Pt+"),f=e("BR9Y"),I=e("BniF");function x(t,i){1&t&&(c.bc(0,"span"),c.Yc(1,"Create Expected Visitor"),c.ac())}function V(t,i){1&t&&(c.bc(0,"span"),c.Yc(1,"Edit Expected Visitor"),c.ac())}const y=function(){return{exact:!0}};function T(t,i){1&t&&(c.bc(0,"div",9),c.bc(1,"a",10),c.Xb(2,"i-feather",11),c.ac(),c.ac()),2&t&&(c.Hb(1),c.zc("routerLinkActiveOptions",c.Fc(1,y)))}function S(t,i){if(1&t){const t=c.cc();c.bc(0,"div",12),c.nc("click",(function(){return c.Pc(t),c.rc().deleteVisitor()})),c.Xb(1,"i-feather",13),c.ac()}}function D(t,i){1&t&&c.Xb(0,"app-loader")}function M(t,i){if(1&t&&(c.bc(0,"option",38),c.Yc(1),c.ac()),2&t){const t=i.$implicit;c.zc("value",t.lookupValueId),c.Hb(1),c.Zc(t.lookupValueName)}}function k(t,i){if(1&t){const t=c.cc();c.Zb(0),c.bc(1,"form",14,15),c.nc("ngSubmit",(function(){c.Pc(t);const i=c.Mc(2);return c.rc().submitAddVisitorForm(i)})),c.bc(3,"div",16),c.bc(4,"div",17),c.bc(5,"div",18),c.bc(6,"label"),c.Yc(7,"Expected Visitor Name*"),c.ac(),c.bc(8,"input",19),c.nc("ngModelChange",(function(i){return c.Pc(t),c.rc().visitor.expectedVisitorName=i})),c.ac(),c.ac(),c.ac(),c.bc(9,"div",17),c.bc(10,"div",18),c.bc(11,"label"),c.Yc(12,"Expected Visitor Count*"),c.ac(),c.bc(13,"input",20),c.nc("ngModelChange",(function(i){return c.Pc(t),c.rc().visitor.expectedVisitorCount=i})),c.ac(),c.ac(),c.ac(),c.bc(14,"div",17),c.bc(15,"div",18),c.bc(16,"label"),c.Yc(17,"Expected Phone/Mobile*"),c.ac(),c.bc(18,"input",21),c.nc("ngModelChange",(function(i){return c.Pc(t),c.rc().visitor.expectedVisitorPhone=i})),c.ac(),c.ac(),c.ac(),c.bc(19,"div",17),c.bc(20,"div",18),c.bc(21,"label"),c.Yc(22,"Expected Visitor In-time*"),c.ac(),c.bc(23,"input",22),c.nc("ngModelChange",(function(i){return c.Pc(t),c.rc().visitor.expectedVisitorInTime=i}))("ngModelChange",(function(){return c.Pc(t),c.rc().expectedDurationChange()})),c.ac(),c.Xb(24,"owl-date-time",null,23),c.bc(26,"div",24),c.Xb(27,"i-feather",25),c.ac(),c.ac(),c.ac(),c.bc(28,"div",17),c.bc(29,"div",18),c.bc(30,"label"),c.Yc(31,"Expected Visitor Out-time*"),c.ac(),c.bc(32,"input",26),c.nc("ngModelChange",(function(i){return c.Pc(t),c.rc().visitor.expectedVisitorOutTime=i}))("ngModelChange",(function(){return c.Pc(t),c.rc().expectedDurationChange()})),c.ac(),c.Xb(33,"owl-date-time",null,27),c.bc(35,"div",24),c.Xb(36,"i-feather",25),c.ac(),c.ac(),c.ac(),c.bc(37,"div",17),c.bc(38,"div",18),c.bc(39,"label"),c.Yc(40,"Expected Duration*"),c.ac(),c.bc(41,"input",28),c.nc("ngModelChange",(function(i){return c.Pc(t),c.rc().visitor.expectedDuration=i})),c.ac(),c.ac(),c.ac(),c.bc(42,"div",17),c.bc(43,"div",29),c.bc(44,"label"),c.Yc(45,"Expected Visit Type*"),c.ac(),c.bc(46,"select",30),c.nc("ngModelChange",(function(i){return c.Pc(t),c.rc().visitTypeId=i})),c.bc(47,"option",31),c.Yc(48,"Select"),c.ac(),c.Wc(49,M,2,2,"option",32),c.ac(),c.ac(),c.ac(),c.bc(50,"div",17),c.bc(51,"div",18),c.bc(52,"label"),c.Yc(53,"Purpose"),c.ac(),c.bc(54,"textarea",33),c.nc("ngModelChange",(function(i){return c.Pc(t),c.rc().visitor.purpose=i})),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(55,"div",16),c.bc(56,"div",34),c.bc(57,"ul",35),c.bc(58,"li",36),c.bc(59,"button",37),c.Yc(60,"Submit"),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.Yb()}if(2&t){const t=c.Mc(2),i=c.Mc(25),e=c.Mc(34),r=c.rc();c.Hb(8),c.zc("ngModel",r.visitor.expectedVisitorName),c.Hb(5),c.zc("ngModel",r.visitor.expectedVisitorCount),c.Hb(5),c.zc("ngModel",r.visitor.expectedVisitorPhone),c.Hb(5),c.zc("owlDateTime",i)("owlDateTimeTrigger",i)("ngModel",r.visitor.expectedVisitorInTime)("disabled",!0),c.Hb(3),c.zc("owlDateTimeTrigger",i),c.Hb(6),c.zc("owlDateTime",e)("owlDateTimeTrigger",e)("ngModel",r.visitor.expectedVisitorOutTime),c.Hb(3),c.zc("owlDateTimeTrigger",e),c.Hb(6),c.zc("ngModel",r.visitor.expectedDuration)("disabled",!0),c.Hb(5),c.zc("ngModel",r.visitTypeId),c.Hb(3),c.zc("ngForOf",r.visitByData),c.Hb(5),c.zc("ngModel",r.visitor.purpose),c.Hb(5),c.zc("disabled",t.invalid)}}let P=(()=>{class t{constructor(t,i,e,r,s,o,n,a,d){this.router=t,this.route=i,this.userService=e,this.apartmentService=r,this.visitorService=s,this.lookupService=o,this.sharedService=n,this.cookieService=a,this.SharedToaster=d,this.isEditVisitor=!1,this.isVisitorSubmitted=!1,this.isError=!1,this.errorMessage="",this.visitor={expectedVisitorInTime:""},this.visitTypeId="",this.outputParams=new c.o,this.minDate=p(new Date).format("YYYY-MM-DD"),this.visitor.expectedVisitorInTime=p(new Date)}isArrayOne(){return this.visitorArray.length>1}deleteVisitor(){this.visitorArray.splice(this.index,1),this.outputParams.emit(this.visitorArray)}submitAddVisitorForm(t){if(this.isVisitorSubmitted=!0,this.isError=!1,this.isEditVisitor){let t={expectedVisitorId:this.route.params.value.id,apartmentUnitId:this.apartmentUnitId,apartmentId:parseInt(this.cookieService.get("apartmentId")),expectedVisitorName:this.visitor.expectedVisitorName,expectedVisitorCount:this.visitor.expectedVisitorCount,expectedVisitorPhone:this.visitor.expectedVisitorPhone.toString(),expectedVisitorInTime:this.visitor.expectedVisitorInTime,expectedVisitorOutTime:this.visitor.expectedVisitorOutTime,expectedDuration:this.visitor.expectedDurationInHours,meetingPersonId:1,visitTypeId:parseInt(this.visitTypeId),expectedVisitorsOrg:"string",entryGateId:null,exitGateId:null,purpose:this.visitor.purpose,enteredBy:parseInt(this.cookieService.get("userId")),isActive:!0,insertedBy:0,insertedOn:"2019-11-18T15:27:41.030Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-11-18T15:27:41.030Z"};this.visitorService.updateExpectedVisitor(t).subscribe(t=>{t.message?(this.isVisitorSubmitted=!0,this.sharedService.setAlertMessage("Visitor updated successfully"),this.router.navigate(["user/visitor/my-visitor"])):(this.isVisitorSubmitted=!1,this.isError=!0,this.errorMessage=t.errorMessage)},t=>{this.isVisitorSubmitted=!1,this.isError=!0,this.errorMessage=t})}else{let t={apartmentUnitId:this.apartmentUnitId,apartmentId:parseInt(this.cookieService.get("apartmentId")),expectedVisitorName:this.visitor.expectedVisitorName,expectedVisitorCount:this.visitor.expectedVisitorCount,expectedVisitorPhone:this.visitor.expectedVisitorPhone.toString(),expectedVisitorInTime:this.visitor.expectedVisitorInTime,expectedVisitorOutTime:this.visitor.expectedVisitorOutTime,expectedDuration:this.visitor.expectedDurationInHours,meetingPersonId:1,visitTypeId:parseInt(this.visitTypeId),expectedVisitorsOrg:"string",entryGateId:null,exitGateId:null,purpose:this.visitor.purpose,enteredBy:parseInt(this.cookieService.get("userId")),isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-11-18T15:27:41.030Z",updatedBy:0,updatedOn:"2019-11-18T15:27:41.030Z"};this.visitorService.addExpectedVisitor(t).subscribe(t=>{t.message?(this.isVisitorSubmitted=!0,this.sharedService.setAlertMessage("Visitor added successfully"),this.router.navigate(["user/visitor/my-visitor"])):(this.isVisitorSubmitted=!1,this.isError=!0,this.errorMessage=t.errorMessage)},t=>{this.isVisitorSubmitted=!1,this.isError=!0,this.errorMessage=t})}}ngOnInit(){this.visitor={},null!=this.route.params.value.id&&(this.isEditVisitor=!0),null!=this.route.params.value.id&&(this.isEditVisitor=!0,this.visitorService.getExpectedVisitorById(this.route.params.value.id).subscribe(t=>{this.visitor=t[0],this.visitor.purpose="",this.visitTypeId=this.visitor.visitTypeId},t=>{})),this.lookupService.getLookupValueByLookupTypeId(15).subscribe(t=>{this.visitByData=t},t=>{}),this.lookupService.getLookupValueByLookupTypeId(9).subscribe(t=>{console.log(t)},t=>{}),this.apartmentService.getApartmentBlockUnitByUserId(parseInt(this.cookieService.get("userId"))).subscribe(t=>{this.apartmentUnitId=t[0].apartmentBlockUnitId},t=>{}),this.visitor.expectedVisitorInTime=p(new Date)}expectedDurationChange(){if(this.minDate>p(this.visitor.expectedVisitorInTime).format("YYYY-MM-DD"))return console.log("min date"),this.visitor.expectedVisitorInTime=void 0,void this.SharedToaster.openSnackBar("Please Select valid Date","");if(this.minDate>p(this.visitor.expectedVisitorOutTime).format("YYYY-MM-DD"))return console.log(this.visitor.expectedVisitorOutTime),this.visitor.expectedVisitorOutTime=void 0,console.log(this.visitor.expectedVisitorOutTime),void this.SharedToaster.openSnackBar("Please Select valid Date","");let t=p(this.visitor.expectedVisitorInTime),i=p(this.visitor.expectedVisitorOutTime);var e=p.duration(i.diff(t));this.visitor.expectedDuration=e.days()+" days "+this.isSingleDigit(e.hours())+":"+this.isSingleDigit(e.minutes())+" hours";let r=p.duration(i.diff(t)).asHours();this.visitor.expectedDurationInHours=Math.round(r)}isSingleDigit(t){return console.log("isSingleDigit:",t.toString().length,t),t<=0?"00":t.toString().length>1?t:"0"+t}}return t.\u0275fac=function(i){return new(i||t)(c.Wb(s.c),c.Wb(s.a),c.Wb(o.a),c.Wb(d.a),c.Wb(l.a),c.Wb(a.a),c.Wb(n.a),c.Wb(b.a),c.Wb(u.a))},t.\u0275cmp=c.Qb({type:t,selectors:[["app-add-visitor"]],inputs:{index:"index",visitorArray:["array","visitorArray"]},outputs:{outputParams:"outputParams"},decls:13,vars:8,consts:[[1,"add-visitor-wrapper"],[1,"card","mb-30"],[1,"card-header"],[1,"float-left"],[4,"ngIf"],["class","float-right",4,"ngIf"],["class","float-right",3,"click",4,"ngIf"],[1,"card-body"],[3,"message","isAlert"],[1,"float-right"],["href","javascript:void(0)","routerLink","/user/my-visitors","routerLinkActive","active",3,"routerLinkActiveOptions"],["name","chevron-left",1,"icon","back"],[1,"float-right",3,"click"],["name","x","width","20",1,"icon","del"],["name","addVisitorForm","novalidate","",3,"ngSubmit"],["addVisitorForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["type","text","placeholder","Enter Name","name","visitorName","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Count","name","visitorCount","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Number","name","phoneNo",1,"form-control",3,"ngModel","ngModelChange"],["name","visitorInTime","placeholder","Select In-Time",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","disabled","ngModelChange"],["visitorInTime",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","calendar","width","18",1,"icon","date","float-left"],["name","visitorOutTime","placeholder","Select Out-Time",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["visitorOutTime",""],["type","text","OnlyNumber","true","placeholder","Enter Duration","name","visitorCount","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"input-box","radio-box"],["name","visitBy","id","visitBy","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Enter purpose","name","visitorpurpose",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"list-inline","float-right","mt-4"],[1,"list-inline-item"],[1,"btn","blue","mr-2",3,"disabled"],[3,"value"]],template:function(t,i){1&t&&(c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"h5"),c.Wc(5,x,2,0,"span",4),c.Wc(6,V,2,0,"span",4),c.ac(),c.ac(),c.Wc(7,T,3,2,"div",5),c.Wc(8,S,2,0,"div",6),c.ac(),c.bc(9,"div",7),c.Xb(10,"app-alert-message",8),c.Wc(11,D,1,0,"app-loader",4),c.Wc(12,k,61,18,"ng-container",4),c.ac(),c.ac(),c.ac()),2&t&&(c.Hb(5),c.zc("ngIf",!i.isEditVisitor),c.Hb(1),c.zc("ngIf",i.isEditVisitor),c.Hb(1),c.zc("ngIf",!i.isArrayOne()),c.Hb(1),c.zc("ngIf",i.isArrayOne()&&!i.isEditVisitor),c.Hb(2),c.zc("message",i.errorMessage)("isAlert",i.isError),c.Hb(1),c.zc("ngIf",i.isVisitorSubmitted),c.Hb(1),c.zc("ngIf",!i.isVisitorSubmitted))},directives:[r.l,h.a,s.e,s.d,m.b,v.a,g.z,g.m,g.n,g.d,g.v,g.l,g.o,g.q,f.a,I.c,I.e,I.b,g.w,g.p,g.y,r.k],styles:[""]}),t})();function C(t,i){if(1&t){const t=c.cc();c.Zb(0),c.bc(1,"app-add-visitor",2),c.nc("outputParams",(function(i){return c.Pc(t),c.rc().getVisitorArray(i)})),c.ac(),c.Yb()}if(2&t){const t=i.index,e=c.rc();c.Hb(1),c.zc("index",t)("array",e.visitorArray)}}let O=(()=>{class t{constructor(t,i){this.router=t,this.route=i,this.visitorCount=1,this.isEditVisitor=!1}addVisitor(){this.visitorCount++,this.visitorArray=Array(this.visitorCount).fill(0).map((t,i)=>i)}getVisitorArray(t){this.visitorArray=t,this.visitorCount=this.visitorArray.length}isMobileView(){return window.innerWidth<=576}ngOnInit(){null!=this.route.params.value.id&&(this.isEditVisitor=!0),this.visitorArray=Array(this.visitorCount).fill(0).map((t,i)=>i)}}return t.\u0275fac=function(i){return new(i||t)(c.Wb(s.c),c.Wb(s.a))},t.\u0275cmp=c.Qb({type:t,selectors:[["app-create-visitor"]],decls:2,vars:1,consts:[[1,"create-visitor-wrapper"],[4,"ngFor","ngForOf"],[3,"index","array","outputParams"]],template:function(t,i){1&t&&(c.bc(0,"div",0),c.Wc(1,C,2,2,"ng-container",1),c.ac()),2&t&&(c.Hb(1),c.zc("ngForOf",i.visitorArray))},directives:[r.k,P],styles:[""]}),t})();var w=e("JK/P"),H=e("F/us"),Y=e("NhFE"),A=e("HApA"),E=e("1kSV"),L=e("bvAq");function z(t,i){1&t&&c.Xb(0,"app-loader")}function B(t,i){if(1&t){const t=c.cc();c.bc(0,"app-filter-box",24),c.nc("outputParams",(function(i){return c.Pc(t),c.rc(2).getFilterData(i)})),c.ac()}if(2&t){const t=c.rc(2);c.zc("totalItems",t.totalFilterItems)}}function F(t,i){if(1&t&&(c.bc(0,"div",34),c.bc(1,"ul"),c.bc(2,"li"),c.bc(3,"h5"),c.Yc(4,"Visitor Count"),c.ac(),c.bc(5,"small"),c.Yc(6),c.ac(),c.ac(),c.bc(7,"li"),c.bc(8,"h5"),c.Yc(9,"Expected Duration"),c.ac(),c.bc(10,"small"),c.Yc(11),c.ac(),c.ac(),c.ac(),c.ac()),2&t){const t=c.rc().$implicit;c.Hb(6),c.Zc(t.expectedVisitorCount),c.Hb(5),c.Zc(t.expectedDuration)}}const W=function(){return{exact:!0}};function U(t,i){if(1&t){const t=c.cc();c.bc(0,"tr"),c.bc(1,"td",25),c.bc(2,"a",26),c.Yc(3),c.ac(),c.Wc(4,F,12,2,"ng-template",null,27,c.Xc),c.ac(),c.bc(6,"td",28),c.Yc(7),c.ac(),c.bc(8,"td",28),c.Yc(9),c.ac(),c.bc(10,"td",28),c.Yc(11),c.ac(),c.bc(12,"td",29),c.Yc(13),c.ac(),c.bc(14,"td"),c.bc(15,"a",30),c.Xb(16,"i-feather",31),c.ac(),c.bc(17,"a",32),c.nc("click",(function(){c.Pc(t);const e=i.index;return c.rc(2).showConfirmModal(e)})),c.Xb(18,"i-feather",33),c.ac(),c.ac(),c.ac()}if(2&t){const t=i.$implicit,e=c.Mc(5),r=c.rc(2);c.Hb(2),c.zc("ngbPopover",e),c.Hb(1),c.ad(" ",t.expectedVisitorName,""),c.Hb(4),c.Zc(t.expectedVisitorPhone),c.Hb(2),c.Zc(t.expectedVisitorInTime),c.Hb(2),c.Zc(t.expectedVisitorOutTime),c.Hb(2),c.Zc(r.getVisitType(t.visitTypeId)),c.Hb(2),c.Bc("routerLink","/user/visitor/edit-visitor/",t.expectedVisitorId,""),c.zc("routerLinkActiveOptions",c.Fc(8,W))}}const N=function(){return{data:"user"}};function X(t,i){if(1&t){const t=c.cc();c.bc(0,"div",3),c.bc(1,"div",4),c.bc(2,"div",5),c.bc(3,"h5"),c.Yc(4,"All Visitors "),c.bc(5,"span",6),c.Yc(6),c.ac(),c.ac(),c.ac(),c.bc(7,"ul",7),c.bc(8,"li",8),c.Xb(9,"i",9),c.bc(10,"input",10),c.nc("ngModelChange",(function(i){return c.Pc(t),c.rc().visitorData=i})),c.ac(),c.ac(),c.bc(11,"li",11),c.bc(12,"a",12),c.Xb(13,"i-feather",13),c.bc(14,"span"),c.Yc(15,"Print"),c.ac(),c.ac(),c.ac(),c.bc(16,"li",11),c.bc(17,"a",14),c.Xb(18,"i-feather",15),c.bc(19,"span"),c.Yc(20,"Add Visitor"),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.Wc(21,B,1,1,"app-filter-box",16),c.bc(22,"div",17),c.bc(23,"table",18),c.bc(24,"thead"),c.bc(25,"tr"),c.bc(26,"th",19),c.nc("click",(function(){return c.Pc(t),c.rc().sortUnitData("name")})),c.Yc(27,"Visitor Name "),c.Xb(28,"span",20),c.ac(),c.bc(29,"th",19),c.nc("click",(function(){return c.Pc(t),c.rc().sortUnitData("phone")})),c.Yc(30,"Phone Number "),c.Xb(31,"span",20),c.ac(),c.bc(32,"th",19),c.nc("click",(function(){return c.Pc(t),c.rc().sortUnitData("intime")})),c.Yc(33,"In-time "),c.Xb(34,"span",20),c.ac(),c.bc(35,"th",19),c.nc("click",(function(){return c.Pc(t),c.rc().sortUnitData("outtime")})),c.Yc(36,"Out-time "),c.Xb(37,"span",20),c.ac(),c.bc(38,"th",19),c.nc("click",(function(){return c.Pc(t),c.rc().sortUnitData("type")})),c.Yc(39,"Visit Type "),c.Xb(40,"span",20),c.ac(),c.bc(41,"th",21),c.Yc(42,"Action"),c.ac(),c.ac(),c.ac(),c.bc(43,"tbody"),c.Wc(44,U,19,9,"tr",22),c.sc(45,"slice"),c.sc(46,"sort"),c.sc(47,"simpleSearch"),c.ac(),c.ac(),c.bc(48,"app-pagination",23),c.nc("outputParams",(function(i){return c.Pc(t),c.rc().getIndexParams(i)})),c.ac(),c.ac(),c.ac()}if(2&t){const t=c.rc();c.Hb(6),c.Zc(t.totalItems),c.Hb(4),c.zc("ngModel",t.visitorData),c.Hb(7),c.zc("routerLinkActiveOptions",c.Fc(27,W))("state",c.Fc(28,N)),c.Hb(4),c.zc("ngIf",t.isVisitorDataLoaded),c.Hb(2),c.zc("ngClass",t.isMobileView()),c.Hb(5),c.zc("ngClass",t.getFieldOrderBy("name")),c.Hb(3),c.zc("ngClass",t.getFieldOrderBy("phone")),c.Hb(3),c.zc("ngClass",t.getFieldOrderBy("intime")),c.Hb(3),c.zc("ngClass",t.getFieldOrderBy("outtime")),c.Hb(3),c.zc("ngClass",t.getFieldOrderBy("type")),c.Hb(4),c.zc("ngForOf",c.vc(45,16,c.vc(46,20,c.uc(47,24,t.visitorListData,t.visitorData),t.unitFieldType,t.unitOrder),t.ItemUserStartIndex,t.ItemUserEndIndex)),c.Hb(4),c.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}const Z=[{path:"",redirectTo:"my-visitor",pathMatch:"full"},{path:"my-visitor",component:(()=>{class t{constructor(t,i,e,r,s,c){this.injector=t,this.apartmentService=i,this.visitorService=e,this.lookupService=r,this.sharedService=s,this.cookieService=c,this.visitorData="",this.isVisitorDataLoaded=!1,this.unitFieldType="unitno",this.unitOrder=!0,this.ItemStartIndex=0,this.itemLimit=10,this.modalService=this.injector.get(w.a)}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}getVisitType(t){var i=H.filter(this.visitTypeData,(function(i){if(i.lookupValueId===t)return i}));return void 0===i||0==i.length?"":i[0].lookupValueName.toLowerCase()}isMobileView(){return window.innerWidth<=767?"table-responsive":""}showConfirmModal(t){this.modalService.showConfirmModal(t)}ngOnInit(){this.apartmentService.getApartmentBlockUnitByUserId(parseInt(this.cookieService.get("userId"))).subscribe(t=>{this.apartmentUnitId=t[0].apartmentBlockUnitId,console.log(this.apartmentUnitId),this.visitorService.getExpectedVisitorsByApartmentUnitId(this.apartmentUnitId).subscribe(t=>{this.visitorListData=t.filter(t=>t.isActive),console.log(t),this.totalItems=this.visitorListData.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isVisitorDataLoaded=!0},t=>{})},t=>{}),this.lookupService.getLookupValueByLookupTypeId(15).subscribe(t=>{this.visitTypeData=t},t=>{}),this.sharedService.unitlistdeleteindexcast.subscribe(t=>{if(null!=t){var i={expectedVisitorId:this.visitorListData[t].expectedVisitorId,deleteBy:parseInt(this.cookieService.get("userId"))};this.isVisitorDataLoaded=!1,this.visitorService.deleteExpectedVisitorById(i).subscribe(i=>{this.visitorListData.splice(t,1),this.totalItems=this.visitorListData.length,this.isVisitorDataLoaded=!0,this.sharedService.setUnitListDeleteIndex(null)},t=>{console.log(t)})}})}}return t.\u0275fac=function(i){return new(i||t)(c.Wb(c.s),c.Wb(d.a),c.Wb(l.a),c.Wb(a.a),c.Wb(n.a),c.Wb(b.a))},t.\u0275cmp=c.Qb({type:t,selectors:[["app-my-visitor"]],decls:3,vars:2,consts:[[1,"my-visitor-wrapper"],[4,"ngIf"],["class","card table-card",4,"ngIf"],[1,"card","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","l-blue","mt_5"],["name","printer",1,"icon","print"],["routerLink","/user/visitor/create-visitor","routerLinkActive","active",1,"btn","lime-green","mt_5",3,"routerLinkActiveOptions","state"],["name","plus",1,"icon","plus"],["class","d-sm-block d-none",3,"totalItems","outputParams",4,"ngIf"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],["scope","col"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"d-sm-block","d-none",3,"totalItems","outputParams"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",3,"ngbPopover"],["popContent",""],[1,"grey"],[1,"grey","text-capitalize"],["href","javascript:void(0)","routerLinkActive","active",1,"mr-2",3,"routerLink","routerLinkActiveOptions"],["name","edit",1,"icon","edit"],["href","javascript:void(0)",3,"click"],["name","trash",1,"icon","delete"],[1,"pop-desp"]],template:function(t,i){1&t&&(c.bc(0,"div",0),c.Wc(1,z,1,0,"app-loader",1),c.Wc(2,X,49,29,"div",2),c.ac()),2&t&&(c.Hb(1),c.zc("ngIf",!i.isVisitorDataLoaded),c.Hb(1),c.zc("ngIf",i.isVisitorDataLoaded))},directives:[r.l,v.a,f.b,g.d,g.l,g.o,m.b,s.e,s.d,r.j,r.k,Y.a,A.a,E.c],pipes:[r.t,L.a,L.e],styles:[""]}),t})()},{path:"create-visitor",component:O},{path:"edit-visitor/:id",component:O},{path:"**",redirectTo:"my-visitor",pathMatch:"full"}];let j=(()=>{class t{}return t.\u0275mod=c.Ub({type:t}),t.\u0275inj=c.Tb({factory:function(i){return new(i||t)},imports:[[s.f.forChild(Z)],s.f]}),t})();var q=e("PCNd");let Q=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=c.Qb({type:t,selectors:[["app-user-visitor"]],decls:1,vars:0,template:function(t,i){1&t&&c.Xb(0,"router-outlet")},directives:[s.g],styles:[""]}),t})();e.d(i,"UserVisitorModule",(function(){return G}));let G=(()=>{class t{}return t.\u0275mod=c.Ub({type:t,bootstrap:[Q]}),t.\u0275inj=c.Tb({factory:function(i){return new(i||t)},imports:[[r.b,q.a,j]]}),t})()}}]);