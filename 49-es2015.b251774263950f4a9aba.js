(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{y3SW:function(t,i,e){"use strict";e.r(i);var c=e("ofXK"),r=e("tyNb"),o=e("fXoL"),n=e("3Pt+");let s=(()=>{class t{constructor(){this.sendNotification=!1,this.captureVehiclesDetails=!1,this.sendSMS=!1}submitVisitorSettingsForm(t){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=o.Qb({type:t,selectors:[["app-visitor-setup"]],decls:41,vars:3,consts:[[1,"visitor-settings"],[1,"card","mb-30"],[1,"card-header"],[1,"float-left"],[1,"d-none","d-md-inline-block"],[1,"card-body"],["name","visitorSettingsForm","novalidate","",3,"ngSubmit"],["visitorSettingsForm","ngForm"],[1,"row"],[1,"col-sm-12"],[1,"list-group"],[1,"list-group-item","p-0","no-border","mb-3"],[1,"form-group"],[1,"form-check","medium","float-left"],["type","checkbox","id","sendNotification","name","sendNotification",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendNotification",1,"form-check-label"],["type","checkbox","id","captureVehiclesDetails","name","captureVehiclesDetails",1,"form-check-input",3,"ngModel","ngModelChange"],["for","captureVehiclesDetails",1,"form-check-label"],["type","checkbox","id","sendSMS","name","sendSMS",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendSMS",1,"form-check-label"],[1,"list-inline","float-right","mt-4"],[1,"list-inline-item"],["href","javascript:void(0)",1,"btn","blue","mr-2"]],template:function(t,i){if(1&t){const t=o.cc();o.bc(0,"div",0),o.bc(1,"div",1),o.bc(2,"div",2),o.bc(3,"div",3),o.bc(4,"h5"),o.Yc(5,"Settings"),o.ac(),o.bc(6,"p",4),o.Yc(7,"Edit and Save the Settings"),o.ac(),o.ac(),o.ac(),o.bc(8,"div",5),o.bc(9,"form",6,7),o.nc("ngSubmit",(function(){o.Pc(t);const e=o.Mc(10);return i.submitVisitorSettingsForm(e)})),o.bc(11,"div",8),o.bc(12,"div",9),o.bc(13,"ul",10),o.bc(14,"li",11),o.bc(15,"div",12),o.bc(16,"div",13),o.bc(17,"input",14),o.nc("ngModelChange",(function(t){return i.sendNotification=t})),o.ac(),o.Xb(18,"label",15),o.bc(19,"p"),o.Yc(20,"Send Mobile App notifications to resident of flat on vsisitors check-in"),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(21,"li",11),o.bc(22,"div",12),o.bc(23,"div",13),o.bc(24,"input",16),o.nc("ngModelChange",(function(t){return i.captureVehiclesDetails=t})),o.ac(),o.Xb(25,"label",17),o.bc(26,"p"),o.Yc(27,"Capture complete vehicle details"),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(28,"li",11),o.bc(29,"div",12),o.bc(30,"div",13),o.bc(31,"input",18),o.nc("ngModelChange",(function(t){return i.sendSMS=t})),o.ac(),o.Xb(32,"label",19),o.bc(33,"p"),o.Yc(34,"Send SMS to resident of flat on vsisitors check-in"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(35,"div",8),o.bc(36,"div",9),o.bc(37,"ul",20),o.bc(38,"li",21),o.bc(39,"a",22),o.Yc(40,"Save"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac()}2&t&&(o.Hb(17),o.zc("ngModel",i.sendNotification),o.Hb(7),o.zc("ngModel",i.captureVehiclesDetails),o.Hb(7),o.zc("ngModel",i.sendSMS))},directives:[n.z,n.m,n.n,n.a,n.l,n.o],styles:[""]}),t})();var a=e("NutR"),d=e("wbvY"),l=e("ThaB"),u=e("Yt4J"),b=e("S4bl"),p=e("DtdB"),m=e("wd/R"),h=e("b6Qw"),v=e("8mtn"),g=e("wlDI"),f=e("668k"),I=e("BR9Y"),k=e("BniF");function y(t,i){1&t&&(o.bc(0,"span"),o.Yc(1,"Expected Visitor Checkin"),o.ac())}function M(t,i){1&t&&(o.bc(0,"span"),o.Yc(1,"Edit Expected Visitor"),o.ac())}function C(t,i){1&t&&o.Xb(0,"app-loader")}function T(t,i){if(1&t&&(o.bc(0,"option",39),o.Yc(1),o.ac()),2&t){const t=i.$implicit;o.zc("value",t.lookupValueId),o.Hb(1),o.Zc(t.lookupValueName)}}function V(t,i){if(1&t&&(o.bc(0,"option",39),o.Yc(1),o.ac()),2&t){const t=i.$implicit;o.zc("value",t.lookupValueId),o.Hb(1),o.Zc(t.lookupValueName)}}function D(t,i){if(1&t){const t=o.cc();o.bc(0,"div",19),o.bc(1,"div",20),o.bc(2,"label"),o.Yc(3,"Tenant block-No*"),o.ac(),o.bc(4,"input",40),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(3).visitor.apartmentBlockNumber=i})),o.ac(),o.ac(),o.ac()}if(2&t){const t=o.rc(3);o.Hb(4),o.zc("ngModel",t.visitor.apartmentBlockNumber)}}function S(t,i){if(1&t){const t=o.cc();o.bc(0,"div",19),o.bc(1,"div",20),o.bc(2,"label"),o.Yc(3,"Tenant Unit-No*"),o.ac(),o.bc(4,"input",41),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(3).visitor.apartmentBlockUnitNumber=i})),o.ac(),o.ac(),o.ac()}if(2&t){const t=o.rc(3);o.Hb(4),o.zc("ngModel",t.visitor.apartmentBlockUnitNumber)}}function x(t,i){if(1&t){const t=o.cc();o.bc(0,"div",19),o.bc(1,"div",20),o.bc(2,"label"),o.Yc(3,"Staff Id*"),o.ac(),o.bc(4,"input",42),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(3).visitor.staffId=i})),o.ac(),o.ac(),o.ac()}if(2&t){const t=o.rc(3);o.Hb(4),o.zc("ngModel",t.visitor.staffId)}}function H(t,i){if(1&t){const t=o.cc();o.bc(0,"div",14),o.bc(1,"div",19),o.bc(2,"div",20),o.bc(3,"label"),o.Yc(4,"Expected Visitor Name*"),o.ac(),o.bc(5,"input",21),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.expectedVisitorName=i})),o.ac(),o.ac(),o.ac(),o.bc(6,"div",19),o.bc(7,"div",20),o.bc(8,"label"),o.Yc(9,"Expected Visitor Count*"),o.ac(),o.bc(10,"input",22),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.expectedVisitorCount=i})),o.ac(),o.ac(),o.ac(),o.bc(11,"div",19),o.bc(12,"div",20),o.bc(13,"label"),o.Yc(14,"Expected Phone/Mobile*"),o.ac(),o.bc(15,"input",23),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.expectedVisitorPhone=i})),o.ac(),o.ac(),o.ac(),o.bc(16,"div",19),o.bc(17,"div",20),o.bc(18,"label"),o.Yc(19,"Expected Visitor In-time*"),o.ac(),o.bc(20,"input",24),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.expectedVisitorInTime=i}))("ngModelChange",(function(){return o.Pc(t),o.rc(2).expectedDurationChange()})),o.ac(),o.Xb(21,"owl-date-time",null,25),o.bc(23,"div",26),o.Xb(24,"i-feather",27),o.ac(),o.ac(),o.ac(),o.bc(25,"div",19),o.bc(26,"div",20),o.bc(27,"label"),o.Yc(28,"Expected Visitor Out-time*"),o.ac(),o.bc(29,"input",28),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.visitorOutTime=i}))("ngModelChange",(function(){return o.Pc(t),o.rc(2).expectedDurationChange()})),o.ac(),o.Xb(30,"owl-date-time",null,29),o.bc(32,"div",26),o.Xb(33,"i-feather",27),o.ac(),o.ac(),o.ac(),o.bc(34,"div",19),o.bc(35,"div",20),o.bc(36,"label"),o.Yc(37,"Expected Duration*"),o.ac(),o.bc(38,"input",30),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.expectedDuration=i})),o.ac(),o.ac(),o.ac(),o.bc(39,"div",19),o.bc(40,"div",20),o.bc(41,"label"),o.Yc(42,"Pass Number*"),o.ac(),o.bc(43,"input",31),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.passNumber=i})),o.ac(),o.ac(),o.ac(),o.bc(44,"div",19),o.bc(45,"div",32),o.bc(46,"label"),o.Yc(47,"Expected Visit Type*"),o.ac(),o.bc(48,"select",33),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitTypeId=i}))("ngModelChange",(function(){o.Pc(t);const i=o.rc(2);return i.changeVisitorType(i.visitTypeId)})),o.bc(49,"option",34),o.Yc(50,"Select"),o.ac(),o.Wc(51,T,2,2,"option",35),o.ac(),o.ac(),o.ac(),o.bc(52,"div",19),o.bc(53,"div",32),o.bc(54,"label"),o.Yc(55,"Expected Visit Category*"),o.ac(),o.bc(56,"select",36),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitCategoryId=i})),o.bc(57,"option",34),o.Yc(58,"Select"),o.ac(),o.Wc(59,V,2,2,"option",35),o.ac(),o.ac(),o.ac(),o.Wc(60,D,5,1,"div",37),o.Wc(61,S,5,1,"div",37),o.Wc(62,x,5,1,"div",37),o.bc(63,"div",19),o.bc(64,"div",20),o.bc(65,"label"),o.Yc(66,"Purpose"),o.ac(),o.bc(67,"textarea",38),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.purpose=i})),o.ac(),o.ac(),o.ac(),o.ac()}if(2&t){const t=o.Mc(22),i=o.Mc(31),e=o.rc(2);o.Hb(5),o.zc("ngModel",e.visitor.expectedVisitorName),o.Hb(5),o.zc("ngModel",e.visitor.expectedVisitorCount),o.Hb(5),o.zc("ngModel",e.visitor.expectedVisitorPhone),o.Hb(5),o.zc("owlDateTime",t)("owlDateTimeTrigger",t)("ngModel",e.visitor.expectedVisitorInTime)("disabled",!0),o.Hb(3),o.zc("owlDateTimeTrigger",t),o.Hb(6),o.zc("owlDateTime",i)("owlDateTimeTrigger",i)("ngModel",e.visitor.visitorOutTime),o.Hb(3),o.zc("owlDateTimeTrigger",i),o.Hb(6),o.zc("ngModel",e.visitor.expectedDuration)("disabled",!0),o.Hb(5),o.zc("ngModel",e.visitor.passNumber),o.Hb(5),o.zc("ngModel",e.visitTypeId),o.Hb(3),o.zc("ngForOf",e.visitByData),o.Hb(5),o.zc("ngModel",e.visitCategoryId),o.Hb(3),o.zc("ngForOf",e.visitCategoryData),o.Hb(1),o.zc("ngIf",e.isUnitVisitor),o.Hb(1),o.zc("ngIf",e.isUnitVisitor),o.Hb(1),o.zc("ngIf",e.iscommunityVisitor),o.Hb(5),o.zc("ngModel",e.visitor.purpose)}}function Y(t,i){if(1&t&&(o.bc(0,"option",39),o.Yc(1),o.ac()),2&t){const t=i.$implicit;o.zc("value",t.lookupValueId),o.Hb(1),o.Zc(t.lookupValueName)}}function P(t,i){if(1&t&&(o.bc(0,"option",39),o.Yc(1),o.ac()),2&t){const t=i.$implicit;o.zc("value",t.lookupValueId),o.Hb(1),o.Zc(t.lookupValueName)}}function N(t,i){if(1&t){const t=o.cc();o.bc(0,"div",14),o.bc(1,"div",19),o.bc(2,"div",20),o.bc(3,"label"),o.Yc(4,"Expected Visitor Name*"),o.ac(),o.bc(5,"input",21),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.visitorName=i})),o.ac(),o.ac(),o.ac(),o.bc(6,"div",19),o.bc(7,"div",20),o.bc(8,"label"),o.Yc(9,"Expected Visitor Count*"),o.ac(),o.bc(10,"input",22),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.visitorCount=i})),o.ac(),o.ac(),o.ac(),o.bc(11,"div",19),o.bc(12,"div",20),o.bc(13,"label"),o.Yc(14,"Phone/Mobile*"),o.ac(),o.bc(15,"input",23),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.visitorPhone=i})),o.ac(),o.ac(),o.ac(),o.bc(16,"div",19),o.bc(17,"div",20),o.bc(18,"label"),o.Yc(19,"Expected Visitor In-time*"),o.ac(),o.bc(20,"input",43),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.visitorInTime=i})),o.ac(),o.Xb(21,"owl-date-time",44,25),o.bc(23,"div",26),o.Xb(24,"i-feather",27),o.ac(),o.ac(),o.ac(),o.bc(25,"div",19),o.bc(26,"div",20),o.bc(27,"label"),o.Yc(28,"Expected Visitor Out-time"),o.ac(),o.bc(29,"input",45),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.visitorOutTime=i})),o.ac(),o.Xb(30,"owl-date-time",44,29),o.bc(32,"div",26),o.Xb(33,"i-feather",27),o.ac(),o.ac(),o.ac(),o.bc(34,"div",19),o.bc(35,"div",20),o.bc(36,"label"),o.Yc(37,"Expected Duration*"),o.ac(),o.bc(38,"input",46),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.expectedDuration=i})),o.ac(),o.ac(),o.ac(),o.bc(39,"div",19),o.bc(40,"div",20),o.bc(41,"label"),o.Yc(42,"Pass Number*"),o.ac(),o.bc(43,"input",31),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitor.passNumber=i})),o.ac(),o.ac(),o.ac(),o.bc(44,"div",19),o.bc(45,"div",32),o.bc(46,"label"),o.Yc(47,"Expected Visit Type*"),o.ac(),o.bc(48,"select",33),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitTypeId=i})),o.bc(49,"option",34),o.Yc(50,"Select"),o.ac(),o.Wc(51,Y,2,2,"option",35),o.ac(),o.ac(),o.ac(),o.bc(52,"div",19),o.bc(53,"div",32),o.bc(54,"label"),o.Yc(55,"Expected Visit Category*"),o.ac(),o.bc(56,"select",36),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc(2).visitCategoryId=i})),o.bc(57,"option",34),o.Yc(58,"Select"),o.ac(),o.Wc(59,P,2,2,"option",35),o.ac(),o.ac(),o.ac(),o.ac()}if(2&t){const t=o.Mc(22),i=o.Mc(31),e=o.rc(2);o.Hb(5),o.zc("ngModel",e.visitor.visitorName),o.Hb(5),o.zc("ngModel",e.visitor.visitorCount),o.Hb(5),o.zc("ngModel",e.visitor.visitorPhone),o.Hb(5),o.zc("owlDateTime",t)("owlDateTimeTrigger",t)("min",e.minDate)("max",e.minDate)("disabled",!0)("ngModel",e.visitor.visitorInTime),o.Hb(1),o.zc("min",e.minDate),o.Hb(2),o.zc("owlDateTimeTrigger",t),o.Hb(6),o.zc("owlDateTime",i)("owlDateTimeTrigger",i)("min",e.minDate)("max",e.minDate)("ngModel",e.visitor.visitorOutTime),o.Hb(1),o.zc("min",e.minDate),o.Hb(2),o.zc("owlDateTimeTrigger",i),o.Hb(6),o.zc("ngModel",e.visitor.expectedDuration),o.Hb(5),o.zc("ngModel",e.visitor.passNumber),o.Hb(5),o.zc("ngModel",e.visitTypeId),o.Hb(3),o.zc("ngForOf",e.visitByData),o.Hb(5),o.zc("ngModel",e.visitCategoryId),o.Hb(3),o.zc("ngForOf",e.visitCategoryData)}}function O(t,i){if(1&t&&(o.bc(0,"button",47),o.Yc(1,"Check In"),o.ac()),2&t){o.rc();const t=o.Mc(2);o.zc("disabled",t.invalid)}}function z(t,i){if(1&t&&(o.bc(0,"button",47),o.Yc(1,"Check Out"),o.ac()),2&t){o.rc();const t=o.Mc(2);o.zc("disabled",t.invalid)}}function L(t,i){if(1&t){const t=o.cc();o.Zb(0),o.bc(1,"form",11,12),o.nc("ngSubmit",(function(){o.Pc(t);const i=o.Mc(2);return o.rc().submitAddVisitorForm(i)})),o.Wc(3,H,68,23,"div",13),o.Wc(4,N,60,24,"div",13),o.bc(5,"div",14),o.bc(6,"div",15),o.bc(7,"ul",16),o.bc(8,"li",17),o.Wc(9,O,2,1,"button",18),o.ac(),o.bc(10,"li",17),o.Wc(11,z,2,1,"button",18),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.Yb()}if(2&t){const t=o.rc();o.Hb(3),o.zc("ngIf",!t.isCheckout()),o.Hb(1),o.zc("ngIf",t.isCheckout()),o.Hb(5),o.zc("ngIf",!t.isCheckout()),o.Hb(2),o.zc("ngIf",t.isCheckout())}}function w(t,i){1&t&&(o.bc(0,"h5",3),o.Yc(1,"Visitor Checked In successfully!"),o.ac())}function B(t,i){1&t&&(o.bc(0,"h5",3),o.Yc(1,"Visitor Checked Out successfully!"),o.ac())}function E(t,i){if(1&t&&(o.bc(0,"div",48),o.bc(1,"div",49),o.Xb(2,"i-feather",50),o.ac(),o.Wc(3,w,2,0,"h5",51),o.Wc(4,B,2,0,"h5",51),o.ac()),2&t){const t=o.rc();o.Hb(3),o.zc("ngIf",!t.isCheckout()),o.Hb(1),o.zc("ngIf",t.isCheckout())}}const F=function(){return{exact:!0}};let U=(()=>{class t{constructor(t,i,e,c,r,o,n,s,a){this.router=t,this.route=i,this.userService=e,this.apartmentService=c,this.visitorService=r,this.lookupService=o,this.sharedService=n,this.cookieService=s,this.SharedToaster=a,this.isEditVisitor=!1,this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!1,this.errorMessage="",this.visitTypeId="",this.isExpectedVisitor=!1,this.visitorStatus="",this.isUnitVisitor=!1,this.iscommunityVisitor=!1,this.minDate=m(new Date).format("YYYY-MM-DD")}isCheckout(){return"checkout"==this.visitorStatus}submitAddVisitorForm(t){if(this.isVisitorSubmitted=!0,this.isError=!1,!this.isEditVisitor){console.log("fist");let t={apartmentUnitId:this.apartmentUnitId,apartmentId:parseInt(this.cookieService.get("apartmentId")),visitorName:this.visitor.expectedVisitorName,visitorCount:this.visitor.expectedVisitorCount,visitorPhone:this.visitor.expectedVisitorPhone,passNumber:this.visitor.passNumber,visitorInTime:this.visitor.expectedVisitorInTime,visitorOutTime:this.visitor.expectedVisitorOutTime,expectedDuration:this.visitor.expectedDurationInHours,meetingPersonId:1,visitTypeId:parseInt(this.visitTypeId),visitCategoryId:parseInt(this.visitCategoryId),visitorsOrg:"string",entryGateId:null,apartmentBlockNumber:this.visitor.apartmentBlockNumber,apartmentUnitNumber:this.visitor.apartmentBlockUnitNumber,exitGateId:null,purpose:this.visitor.purpose,enteredBy:parseInt(this.cookieService.get("userId")),isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-11-18T17:08:51.188Z",updatedBy:0,updatedOn:"2019-11-18T17:08:51.188Z"};this.visitorService.addVisitor(t).subscribe(t=>{t.message?(this.isVisitorAdded=!0,this.router.navigate(["/ams/visitor/checkout"])):(this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=t.errorMessage)},t=>{this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=t})}if(this.isEditVisitor)if(this.isCheckout()){let t={visitorId:parseInt(this.route.params.value.id),apartmentUnitId:this.apartmentUnitId,apartmentId:parseInt(this.cookieService.get("apartmentId")),visitorName:this.visitor.visitorName,visitorCount:this.visitor.visitorCount,visitorPhone:this.visitor.visitorPhone,visitorVehicleTypeId:1,visitorVehicleNumber:"string",visitingPlaceId:1,passNumber:this.visitor.passNumber,isCheckedIn:!0,visitorInTime:this.visitor.visitorInTime,isCheckedOut:!0,visitorOutTime:this.visitor.visitorOutTime,expectedDuration:this.visitor.expectedDurationInHours,meetingPersonId:1,meetingPersonName:"string",visitTypeId:parseInt(this.visitTypeId),visitCategoryId:parseInt(this.visitCategoryId),visitorsOrg:"string",entryGateId:null,exitGateId:null,purpose:this.visitor.purpose,enteredBy:parseInt(this.cookieService.get("userId")),isActive:!0,insertedBy:0,insertedOn:"2019-11-18T17:08:51.188Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-11-18T17:08:51.188Z"};this.visitorService.updateVisitor(t).subscribe(t=>{t.message?this.isVisitorAdded=!0:(this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=t.errorMessage)},t=>{this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=t})}else{let t={apartmentUnitId:this.apartmentUnitId,apartmentId:parseInt(this.cookieService.get("apartmentId")),visitorName:this.visitor.expectedVisitorName,visitorCount:this.visitor.expectedVisitorCount,visitorPhone:this.visitor.expectedVisitorPhone,visitorVehicleTypeId:1,visitorVehicleNumber:"string",visitingPlaceId:1,passNumber:this.visitor.passNumber,isCheckedIn:!0,visitorInTime:this.visitor.expectedVisitorInTime,isCheckedOut:!1,visitorOutTime:null,expectedDuration:this.visitor.expectedDurationInHours,meetingPersonId:1,meetingPersonName:"string",visitTypeId:parseInt(this.visitTypeId),visitCategoryId:parseInt(this.visitCategoryId),visitorsOrg:"string",entryGateId:null,exitGateId:null,purpose:this.visitor.purpose,enteredBy:parseInt(this.cookieService.get("userId")),isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-11-18T17:08:51.188Z",updatedBy:0,updatedOn:"2019-11-18T17:08:51.188Z"};this.visitorService.addVisitor(t).subscribe(t=>{t.message?this.isVisitorAdded=!0:(this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=t.errorMessage)},t=>{this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=t})}}ngOnInit(){this.visitor={},null!=this.route.params.value.id&&(this.isEditVisitor=!0,this.visitorStatus=this.route.params.value.type,"checkout"==this.route.params.value.type?this.visitorService.getVisitorById(this.route.params.value.id).subscribe(t=>{this.visitor=t[0],this.visitTypeId=this.visitor.visitTypeId,this.visitor.purpose=""},t=>{}):this.visitorService.getExpectedVisitorById(this.route.params.value.id).subscribe(t=>{this.visitor=t[0],this.visitor.purpose="",this.visitTypeId=this.visitor.visitTypeId,console.log(this.visitor)},t=>{})),this.lookupService.getLookupValueByLookupTypeId(15).subscribe(t=>{this.visitByData=t},t=>{}),this.lookupService.getLookupValueByLookupTypeId(8).subscribe(t=>{this.visitCategoryData=t},t=>{}),this.apartmentService.getApartmentBlockUnitByUserId(parseInt(this.cookieService.get("userId"))).subscribe(t=>{this.apartmentUnitId=t[0].apartmentBlockUnitId},t=>{}),this.visitor.expectedVisitorInTime=m(new Date),this.visitor.visitorInTime=m(new Date)}changeVisitorType(t){console.log(t);let i=this.visitByData.filter(i=>t==i.lookupValueId);console.log(i),this.isUnitVisitor="Unit Visitor"==i[0].lookupValueName,this.iscommunityVisitor="Community Visitor"==i[0].lookupValueName}expectedDurationChange(){if(this.minDate>m(this.visitor.expectedVisitorInTime).format("YYYY-MM-DD"))return this.visitor.expectedVisitorInTime=void 0,void this.SharedToaster.openSnackBar("Please Select valid Date","");if(this.minDate>m(this.visitor.visitorOutTime).format("YYYY-MM-DD"))return this.visitor.visitorOutTime=void 0,void this.SharedToaster.openSnackBar("Please Select Out-time greater than In-time","");if(console.log(this.visitor.visitorOutTime),this.visitor.visitorOutTime&&m(this.visitor.expectedVisitorInTime).format("YYYY-MM-DD")>m(this.visitor.visitorOutTime).format("YYYY-MM-DD"))return this.visitor.visitorOutTime=void 0,void this.SharedToaster.openSnackBar("Please Select Out-time greater than In-time","");let t=m(this.visitor.expectedVisitorInTime),i=m(this.visitor.visitorOutTime),e=m.duration(i.diff(t));this.visitor.expectedDuration=e.days()+" days "+this.isSingleDigit(e.hours())+":"+this.isSingleDigit(e.minutes())+" hours";let c=m.duration(i.diff(t)).asHours();this.visitor.expectedDurationInHours=Math.round(c)}isSingleDigit(t){return t<=0?"00":t.toString().length>1?t:"0"+t}}return t.\u0275fac=function(i){return new(i||t)(o.Wb(r.c),o.Wb(r.a),o.Wb(a.a),o.Wb(u.a),o.Wb(b.a),o.Wb(l.a),o.Wb(d.a),o.Wb(h.a),o.Wb(p.a))},t.\u0275cmp=o.Qb({type:t,selectors:[["app-visitor-checkin"]],decls:15,vars:9,consts:[[1,"checkin-visitor-wrapper"],[1,"card","mb-30"],[1,"card-header"],[1,"float-left"],[4,"ngIf"],[1,"float-right"],["href","javascript:void(0)","routerLink","/ams/visitor/expected-visitor","routerLinkActive","active",3,"routerLinkActiveOptions"],["name","chevron-left",1,"icon","back"],[1,"card-body"],[3,"message","isAlert"],["class","message",4,"ngIf"],["name","addVisitorForm","novalidate","",3,"ngSubmit"],["addVisitorForm","ngForm"],["class","row",4,"ngIf"],[1,"row"],[1,"col-sm-12"],[1,"list-inline","float-right","mt-4"],[1,"list-inline-item"],["class","btn blue mr-2",3,"disabled",4,"ngIf"],[1,"col-sm-4"],[1,"input-box"],["type","text","placeholder","Enter Name","name","visitorName","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Count","name","visitorCount","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Number","name","phoneNo","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","visitorInTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","disabled","ngModelChange"],["visitorInTime",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","calendar","width","18",1,"icon","date","float-left"],["name","visitorOutTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["visitorOutTime",""],["OnlyNumber","true","placeholder","Enter Duration","name","visitorCount","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["type","text","placeholder","Enter Number","name","visitorPassNumber","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-box","radio-box"],["name","visitBy","id","visitBy","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","visitByCategory","id","visitByCategory","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","col-sm-4",4,"ngIf"],["type","text","placeholder","Enter purpose","name","visitorpurpose",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["type","text","OnlyNumber","true","placeholder","Enter block-No","name","visitorblock-No","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Unit-No","name","visitorUnit-No","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","OnlyNumber","true","placeholder","Enter Staff-id","name","staffId","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","visitorInTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","min","max","disabled","ngModel","ngModelChange"],[3,"min"],["name","visitorOutTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","min","max","ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Duration","name","visitorCount","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","blue","mr-2",3,"disabled"],[1,"message"],[1,"icon-wrapper","float-left"],["name","check","width","20",1,"icon","float-left"],["class","float-left",4,"ngIf"]],template:function(t,i){1&t&&(o.bc(0,"div",0),o.bc(1,"div",1),o.bc(2,"div",2),o.bc(3,"div",3),o.bc(4,"h5"),o.Wc(5,y,2,0,"span",4),o.Wc(6,M,2,0,"span",4),o.ac(),o.ac(),o.bc(7,"div",5),o.bc(8,"a",6),o.Xb(9,"i-feather",7),o.ac(),o.ac(),o.ac(),o.bc(10,"div",8),o.Xb(11,"app-alert-message",9),o.Wc(12,C,1,0,"app-loader",4),o.Wc(13,L,12,4,"ng-container",4),o.Wc(14,E,5,2,"div",10),o.ac(),o.ac(),o.ac()),2&t&&(o.Hb(5),o.zc("ngIf",!i.isEditVisitor),o.Hb(1),o.zc("ngIf",i.isEditVisitor),o.Hb(2),o.zc("routerLinkActiveOptions",o.Fc(8,F)),o.Hb(3),o.zc("message",i.errorMessage)("isAlert",i.isError),o.Hb(1),o.zc("ngIf",i.isVisitorSubmitted&&!i.isVisitorAdded),o.Hb(1),o.zc("ngIf",!i.isVisitorSubmitted&&!i.isVisitorAdded),o.Hb(1),o.zc("ngIf",i.isVisitorAdded))},directives:[c.l,r.e,r.d,v.b,g.a,f.a,n.z,n.m,n.n,n.d,n.v,n.l,n.o,n.q,I.a,k.c,k.e,k.b,n.w,n.p,n.y,c.k],styles:[""]}),t})();var W=e("JK/P"),A=e("F/us"),X=e("NhFE"),Z=e("1kSV"),q=e("bvAq");function j(t,i){1&t&&o.Xb(0,"app-loader")}function _(t,i){if(1&t&&(o.bc(0,"div",29),o.bc(1,"ul"),o.bc(2,"li"),o.bc(3,"h5"),o.Yc(4,"Visitor Count"),o.ac(),o.bc(5,"small"),o.Yc(6),o.ac(),o.ac(),o.bc(7,"li"),o.bc(8,"h5"),o.Yc(9,"Expected Duration"),o.ac(),o.bc(10,"small"),o.Yc(11),o.ac(),o.ac(),o.ac(),o.ac()),2&t){const t=o.rc().$implicit;o.Hb(6),o.Zc(t.visitorCount),o.Hb(5),o.Zc(t.expectedDuration)}}function $(t,i){1&t&&(o.bc(0,"div",29),o.bc(1,"h5"),o.Yc(2,"CheckOut"),o.ac(),o.ac())}const Q=function(){return{exact:!0}};function G(t,i){if(1&t&&(o.bc(0,"tr"),o.bc(1,"td",21),o.bc(2,"a",22),o.Yc(3),o.Wc(4,_,12,2,"ng-template",null,23,o.Xc),o.ac(),o.ac(),o.bc(6,"td",24),o.Yc(7),o.ac(),o.bc(8,"td",24),o.Yc(9),o.sc(10,"date"),o.ac(),o.bc(11,"td",24),o.Yc(12),o.sc(13,"date"),o.ac(),o.bc(14,"td",25),o.Yc(15),o.ac(),o.bc(16,"td",25),o.Yc(17),o.ac(),o.bc(18,"td"),o.bc(19,"a",26),o.Xb(20,"img",27),o.ac(),o.Wc(21,$,3,0,"ng-template",null,28,o.Xc),o.ac(),o.ac()),2&t){const t=i.$implicit,e=o.Mc(5),c=o.Mc(22);o.Hb(2),o.zc("ngbPopover",e),o.Hb(1),o.ad("",t.visitorName," "),o.Hb(4),o.Zc(t.visitorPhone),o.Hb(2),o.Zc(o.uc(10,10,t.visitorInTime,"MM/dd/yy, hh:mm")),o.Hb(3),o.Zc(o.uc(13,13,t.visitorOutTime,"MM/dd/yy, hh:mm")),o.Hb(3),o.Zc(t.blockNo),o.Hb(2),o.Zc(t.blockUnitNo),o.Hb(2),o.Bc("routerLink","/ams/visitor/edit-visitor/",t.visitorId,"/checkout"),o.zc("ngbPopover",c)("routerLinkActiveOptions",o.Fc(16,Q))}}function J(t,i){if(1&t){const t=o.cc();o.bc(0,"div",3),o.bc(1,"div",4),o.bc(2,"div",5),o.bc(3,"h5"),o.Yc(4,"All Checked-in Visitors "),o.bc(5,"span",6),o.Yc(6),o.ac(),o.ac(),o.ac(),o.bc(7,"ul",7),o.bc(8,"li",8),o.Xb(9,"i",9),o.bc(10,"input",10),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc().visitorData=i})),o.ac(),o.ac(),o.bc(11,"li",11),o.bc(12,"a",12),o.Xb(13,"i-feather",13),o.bc(14,"span"),o.Yc(15,"Print"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(16,"div",14),o.bc(17,"table",15),o.bc(18,"thead"),o.bc(19,"tr"),o.bc(20,"th",16),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("visitorName")})),o.Yc(21,"Visitor Name "),o.Xb(22,"span",17),o.ac(),o.bc(23,"th",16),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("visitorPhone")})),o.Yc(24,"Phone Number "),o.Xb(25,"span",17),o.ac(),o.bc(26,"th",16),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("visitorInTime")})),o.Yc(27,"In-time "),o.Xb(28,"span",17),o.ac(),o.bc(29,"th",16),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("visitorOutTime")})),o.Yc(30,"Out-time "),o.Xb(31,"span",17),o.ac(),o.bc(32,"th",16),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("blockNo")})),o.Yc(33,"Block No"),o.Xb(34,"span",17),o.ac(),o.bc(35,"th",16),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("blockUnitNo")})),o.Yc(36,"Unit No "),o.Xb(37,"span",17),o.ac(),o.bc(38,"th",18),o.Yc(39,"Action"),o.ac(),o.ac(),o.ac(),o.bc(40,"tbody"),o.Wc(41,G,23,17,"tr",19),o.sc(42,"slice"),o.sc(43,"sort"),o.sc(44,"simpleSearch"),o.ac(),o.ac(),o.bc(45,"app-pagination",20),o.nc("outputParams",(function(i){return o.Pc(t),o.rc().getIndexParams(i)})),o.ac(),o.ac(),o.ac()}if(2&t){const t=o.rc();o.Hb(6),o.Zc(t.totalItems),o.Hb(4),o.zc("ngModel",t.visitorData),o.Hb(7),o.zc("ngClass",t.isMobileView()),o.Hb(5),o.zc("ngClass",t.getFieldOrderBy("visitorName")),o.Hb(3),o.zc("ngClass",t.getFieldOrderBy("visitorPhone")),o.Hb(3),o.zc("ngClass",t.getFieldOrderBy("visitorInTime")),o.Hb(3),o.zc("ngClass",t.getFieldOrderBy("visitorOutTime")),o.Hb(3),o.zc("ngClass",t.getFieldOrderBy("blockNo")),o.Hb(3),o.zc("ngClass",t.getFieldOrderBy("blockUnitNo")),o.Hb(4),o.zc("ngForOf",o.vc(42,14,o.vc(43,18,o.uc(44,22,t.visitorListData,t.visitorData),t.unitFieldType,t.unitOrder),t.ItemUserStartIndex,t.ItemUserEndIndex)),o.Hb(4),o.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let R=(()=>{class t{constructor(t,i,e,c,r,o){this.injector=t,this.apartmentService=i,this.visitorService=e,this.lookupService=c,this.sharedService=r,this.cookieService=o,this.visitorData="",this.isVisitorDataLoaded=!1,this.unitFieldType="unitno",this.unitOrder=!0,this.ItemStartIndex=0,this.itemLimit=10,this.modalService=this.injector.get(W.a)}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}getBlockUnit(t){}isMobileView(){return window.innerWidth<=767?"table-responsive":""}showConfirmModal(t){this.modalService.showConfirmModal(t)}getVisitorType(){}ngOnInit(){this.lookupService.getLookupValueByLookupTypeId(15).subscribe(t=>{this.visitTypeData=t},t=>{}),this.visitorService.getYetToCheckoutVisitorsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.visitorListData=t.filter(t=>t.isActive&&!t.isCheckedOut),A.each(this.visitorListData,(t,i)=>{this.apartmentService.getApartmentBlockUnitById(t.apartmentUnitId).subscribe(t=>{this.visitorListData[i].blockNo=t[0].apartmentBlockNumber,this.visitorListData[i].blockUnitNo=t[0].apartmentBlockUnitNumber},t=>{})}),this.totalItems=this.visitorListData.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isVisitorDataLoaded=!0})}}return t.\u0275fac=function(i){return new(i||t)(o.Wb(o.s),o.Wb(u.a),o.Wb(b.a),o.Wb(l.a),o.Wb(d.a),o.Wb(h.a))},t.\u0275cmp=o.Qb({type:t,selectors:[["app-visitor-checkout"]],decls:3,vars:2,consts:[[1,"checkedout-visitor-wrapper"],[4,"ngIf"],["class","card table-card",4,"ngIf"],[1,"card","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","l-blue","mt_5"],["name","printer",1,"icon","print"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],["scope","col"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",3,"ngbPopover"],["popContent",""],[1,"grey"],[1,"grey","text-capitalize"],["href","javascript:void(0)","placement","top","triggers","mouseenter:mouseleave","routerLinkActive","active",3,"ngbPopover","routerLink","routerLinkActiveOptions"],["src","assets/images/checkout-icon.svg","width","20"],["popAddCheckOutContent",""],[1,"pop-desp"]],template:function(t,i){1&t&&(o.bc(0,"div",0),o.Wc(1,j,1,0,"app-loader",1),o.Wc(2,J,46,25,"div",2),o.ac()),2&t&&(o.Hb(1),o.zc("ngIf",!i.isVisitorDataLoaded),o.Hb(1),o.zc("ngIf",i.isVisitorDataLoaded))},directives:[c.l,f.a,I.b,n.d,n.l,n.o,v.b,c.j,c.k,X.a,Z.c,r.e,r.d],pipes:[c.t,q.a,q.e,c.d],styles:[""]}),t})();function K(t,i){1&t&&o.Xb(0,"app-loader")}function tt(t,i){if(1&t&&(o.bc(0,"div",32),o.bc(1,"ul"),o.bc(2,"li"),o.bc(3,"h5"),o.Yc(4,"Visitor Count"),o.ac(),o.bc(5,"small"),o.Yc(6),o.ac(),o.ac(),o.bc(7,"li"),o.bc(8,"h5"),o.Yc(9,"Expected Duration"),o.ac(),o.bc(10,"small"),o.Yc(11),o.ac(),o.ac(),o.ac(),o.ac()),2&t){const t=o.rc().$implicit;o.Hb(6),o.Zc(t.expectedVisitorCount),o.Hb(5),o.Zc(t.expectedDuration)}}function it(t,i){1&t&&(o.bc(0,"div",32),o.bc(1,"h5"),o.Yc(2,"CheckIn"),o.ac(),o.ac())}const et=function(){return{exact:!0}};function ct(t,i){if(1&t&&(o.bc(0,"tr"),o.bc(1,"td",24),o.bc(2,"a",25),o.Yc(3),o.Wc(4,tt,12,2,"ng-template",null,26,o.Xc),o.ac(),o.ac(),o.bc(6,"td",27),o.Yc(7),o.ac(),o.bc(8,"td",27),o.Yc(9),o.ac(),o.bc(10,"td",27),o.Yc(11),o.ac(),o.bc(12,"td",27),o.Yc(13),o.ac(),o.bc(14,"td",27),o.Yc(15),o.ac(),o.bc(16,"td",28),o.Yc(17),o.ac(),o.bc(18,"td"),o.bc(19,"a",29),o.Xb(20,"img",30),o.ac(),o.Wc(21,it,3,0,"ng-template",null,31,o.Xc),o.ac(),o.ac()),2&t){const t=i.$implicit,e=o.Mc(5),c=o.Mc(22),r=o.rc(2);o.Hb(2),o.zc("ngbPopover",e),o.Hb(1),o.ad("",t.expectedVisitorName," "),o.Hb(4),o.Zc(t.expectedVisitorPhone),o.Hb(2),o.Zc(r.getTimeFormat(t.expectedVisitorInTime)),o.Hb(2),o.Zc(r.getTimeFormat(t.expectedVisitorOutTime)),o.Hb(2),o.Zc(t.visitTypeName),o.Hb(2),o.Zc(t.visitorCategoryId_Label),o.Hb(2),o.Zc(t.block_Unit),o.Hb(2),o.Bc("routerLink","/ams/visitor/edit-visitor/",t.expectedVisitorId,"/checkin"),o.zc("ngbPopover",c)("routerLinkActiveOptions",o.Fc(11,et))}}const rt=function(){return{data:"admin"}};function ot(t,i){if(1&t){const t=o.cc();o.bc(0,"div",3),o.bc(1,"div",4),o.bc(2,"div",5),o.bc(3,"h5"),o.Yc(4,"All Expected Visitors "),o.bc(5,"span",6),o.Yc(6),o.ac(),o.ac(),o.ac(),o.bc(7,"ul",7),o.bc(8,"li",8),o.Xb(9,"i",9),o.bc(10,"input",10),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc().visitorData=i})),o.ac(),o.ac(),o.bc(11,"li",11),o.bc(12,"a",12),o.Xb(13,"i-feather",13),o.bc(14,"span"),o.Yc(15,"Print"),o.ac(),o.ac(),o.ac(),o.bc(16,"li",11),o.bc(17,"a",14),o.Xb(18,"i-feather",15),o.bc(19,"span"),o.Yc(20,"Add Visitor"),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(21,"div",16),o.bc(22,"table",17),o.bc(23,"thead"),o.bc(24,"tr"),o.bc(25,"th",18),o.Yc(26," Visitor Name "),o.bc(27,"span",19),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("visitorName")})),o.ac(),o.bc(28,"input",20),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc().columnField.visitorName=i}))("ngModelChange",(function(){return o.Pc(t),o.rc().selectColInput("visitorName")})),o.ac(),o.ac(),o.bc(29,"th",18),o.Yc(30," Phone Number "),o.bc(31,"span",19),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("visitorPhone")})),o.ac(),o.bc(32,"input",21),o.nc("ngModelChange",(function(i){return o.Pc(t),o.rc().columnField.visitorPhone=i}))("ngModelChange",(function(){return o.Pc(t),o.rc().selectColInput("visitorPhone")})),o.ac(),o.ac(),o.bc(33,"th",18),o.Yc(34,"Expected in Date/Time"),o.bc(35,"span",19),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("visitorInTime")})),o.ac(),o.ac(),o.bc(36,"th",18),o.Yc(37,"Expected out Date/Time"),o.bc(38,"span",19),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("visitorOutTime")})),o.ac(),o.ac(),o.bc(39,"th",18),o.Yc(40,"Visitor Type"),o.bc(41,"span",19),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("visitorOutTime")})),o.ac(),o.ac(),o.bc(42,"th",18),o.Yc(43,"Visitor category"),o.bc(44,"span",19),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("visitorCategoryId_Label")})),o.ac(),o.ac(),o.bc(45,"th",18),o.Yc(46,"Tower Unit"),o.bc(47,"span",19),o.nc("click",(function(){return o.Pc(t),o.rc().sortUnitData("block_Unit")})),o.ac(),o.ac(),o.bc(48,"th",18),o.Yc(49,"Action"),o.ac(),o.ac(),o.ac(),o.bc(50,"tbody"),o.Wc(51,ct,23,12,"tr",22),o.sc(52,"slice"),o.sc(53,"sort"),o.sc(54,"simpleSearch"),o.ac(),o.ac(),o.bc(55,"app-pagination",23),o.nc("outputParams",(function(i){return o.Pc(t),o.rc().getIndexParams(i)})),o.ac(),o.ac(),o.ac()}if(2&t){const t=o.rc();o.Hb(6),o.Zc(t.totalItems),o.Hb(4),o.zc("ngModel",t.visitorData),o.Hb(7),o.zc("routerLinkActiveOptions",o.Fc(30,et))("state",o.Fc(31,rt)),o.Hb(5),o.zc("ngClass",t.isMobileView()),o.Hb(5),o.zc("ngClass",t.getFieldOrderBy("visitorName")),o.Hb(1),o.zc("ngModel",t.columnField.visitorName),o.Hb(3),o.zc("ngClass",t.getFieldOrderBy("visitorPhone")),o.Hb(1),o.zc("ngModel",t.columnField.visitorPhone),o.Hb(3),o.zc("ngClass",t.getFieldOrderBy("visitorInTime")),o.Hb(3),o.zc("ngClass",t.getFieldOrderBy("visitorOutTime")),o.Hb(3),o.zc("ngClass",t.getFieldOrderBy("visitorType")),o.Hb(3),o.zc("ngClass",t.getFieldOrderBy("visitorCategoryId_Label")),o.Hb(3),o.zc("ngClass",t.getFieldOrderBy("block_Unit")),o.Hb(4),o.zc("ngForOf",o.vc(52,19,o.vc(53,23,o.uc(54,27,t.visitorListData,t.visitorData),t.unitFieldType,t.unitOrder),t.ItemUserStartIndex,t.ItemUserEndIndex)),o.Hb(4),o.zc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}function nt(t,i){1&t&&o.Xb(0,"app-loader")}const st=function(){return{exact:!0}};function at(t,i){if(1&t&&(o.bc(0,"div",5),o.bc(1,"div",6),o.bc(2,"a",7),o.bc(3,"div",8),o.bc(4,"h6"),o.Yc(5),o.ac(),o.bc(6,"p"),o.Yc(7),o.ac(),o.ac(),o.ac(),o.Xb(8,"div",9),o.ac(),o.ac()),2&t){const t=i.$implicit;o.Hb(2),o.Cc("routerLink","",t.menuName,"/",t.lookupValueID,""),o.zc("routerLinkActiveOptions",o.Fc(5,st)),o.Hb(3),o.Zc(t.lookupValueName),o.Hb(2),o.Zc(t.description)}}function dt(t,i){if(1&t&&(o.Zb(0),o.bc(1,"h5",2),o.Yc(2,"Helpdesk reports "),o.ac(),o.bc(3,"div",3),o.Wc(4,at,9,6,"div",4),o.ac(),o.Yb()),2&t){const t=o.rc();o.Hb(4),o.zc("ngForOf",t.reportDataList)}}const lt=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:s},{path:"checkin",component:U},{path:"expected-visitor",component:(()=>{class t{constructor(t,i,e,c,r,o){this.injector=t,this.apartmentService=i,this.visitorService=e,this.lookupService=c,this.sharedService=r,this.cookieService=o,this.visitorData="",this.isVisitorDataLoaded=!1,this.unitFieldType="unitno",this.unitOrder=!0,this.ItemStartIndex=0,this.itemLimit=10,this.selectedInput="",this.columnField={},this.modalService=this.injector.get(W.a)}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"asc":"desc":""}selectColInput(t){this.selectedInput=t}onSelectChange(t,i,e){A.isEmpty(t)?this.columnField={}:(this.selectedInput=i,this.columnField[i]=t[e])}isMobileView(){return window.innerWidth<=767?"table-responsive":""}showConfirmModal(t){this.modalService.showConfirmModal(t)}getTimeFormat(t){return m(t).format("YYYY-MM-DD HH:mm")}ngOnInit(){this.visitorService.getExpectedVisitorsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.visitorListData=t.filter(t=>t.isActive),A.each(this.visitorListData,(t,i)=>{this.apartmentService.getApartmentBlockUnitById(t.apartmentUnitId).subscribe(t=>{this.visitorListData[i].blockNo=t[0].apartmentBlockNumber,this.visitorListData[i].blockUnitNo=t[0].apartmentBlockUnitNumber},t=>{})}),this.lookupService.getLookupValueByLookupTypeId(15).subscribe(t=>{this.visitTypeData=t,this.checkVisitTypeData()},t=>{}),this.lookupService.getLookupValueByLookupTypeId(8).subscribe(t=>{this.visitCategoryData=t,this.checkVisitCategoryData()},t=>{}),this.totalItems=this.visitorListData.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isVisitorDataLoaded=!0})}checkVisitTypeData(){this.visitTypeData.forEach(t=>{t.lookupValueId==this.visitorListData[0].visitTypeId&&(this.visitorListData[0].visitTypeName=t.lookupValueName.toLowerCase())})}checkVisitCategoryData(){console.log(this.visitorListData[0]),this.visitCategoryData.forEach(t=>{t.lookupValueId==this.visitorListData[0].visitorCategoryId&&(this.visitorListData[0].visitCategoryName=t.lookupValueName.toLowerCase())})}}return t.\u0275fac=function(i){return new(i||t)(o.Wb(o.s),o.Wb(u.a),o.Wb(b.a),o.Wb(l.a),o.Wb(d.a),o.Wb(h.a))},t.\u0275cmp=o.Qb({type:t,selectors:[["app-visitor-expected-visitor"]],decls:3,vars:2,consts:[[1,"expected-visitor-wrapper"],[4,"ngIf"],["class","card table-card",4,"ngIf"],[1,"card","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","l-blue","mt_5"],["name","printer",1,"icon","print"],["routerLink","/user/visitor/create-visitor","routerLinkActive","active",1,"btn","lime-green","mt_5",3,"routerLinkActiveOptions","state"],["name","plus",1,"icon","plus"],[1,"card-body","p-0","customScroll"],["mdbTable","","mdbTableScroll","","scrollX","true","maxWidth","400",1,"table",3,"ngClass"],["scope","col"],[3,"ngClass","click"],["type","text","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Phone No",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",3,"ngbPopover"],["popContent",""],[1,"grey"],[1,"grey","text-capitalize"],["href","javascript:void(0)","placement","top","triggers","mouseenter:mouseleave","routerLinkActive","active",3,"ngbPopover","routerLink","routerLinkActiveOptions"],["src","assets/images/checkin-icon.svg","width","20"],["popAddCheckInContent",""],[1,"pop-desp"]],template:function(t,i){1&t&&(o.bc(0,"div",0),o.Wc(1,K,1,0,"app-loader",1),o.Wc(2,ot,56,32,"div",2),o.ac()),2&t&&(o.Hb(1),o.zc("ngIf",!i.isVisitorDataLoaded),o.Hb(1),o.zc("ngIf",i.isVisitorDataLoaded))},directives:[c.l,f.a,I.b,n.d,n.l,n.o,v.b,r.e,r.d,c.j,c.k,X.a,Z.c],pipes:[c.t,q.a,q.e],styles:[".customScroll[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.customScroll[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{overflow:hidden!important;text-overflow:ellipsis;white-space:nowrap}"]}),t})()},{path:"add-visitor",component:U},{path:"edit-visitor/:id/:type",component:U},{path:"checkout",component:R},{path:"reports",component:(()=>{class t{constructor(t,i,e){this.lookupService=t,this.sharedService=i,this.cookieService=e,this.isDataLoaded=!1}ngOnInit(){let t={ApartmentId:parseInt(this.cookieService.get("apartmentId")),LookupTypeId:87,MenuName:"VisitorManagement"};this.lookupService.getLookupValuesByApartmentIdLookupTypeIdMenuName(t).subscribe(t=>{this.reportDataList=t,this.isDataLoaded=!0})}}return t.\u0275fac=function(i){return new(i||t)(o.Wb(l.a),o.Wb(d.a),o.Wb(h.a))},t.\u0275cmp=o.Qb({type:t,selectors:[["app-visitor-reports"]],decls:3,vars:2,consts:[[1,"reports-wrapper"],[4,"ngIf"],[1,"mb-3"],[1,"row"],["class","col-sm-6 mb-20",4,"ngFor","ngForOf"],[1,"col-sm-6","mb-20"],[1,"card","report-card"],["href","javascript:void(0)","routerLinkActive","active",1,"t-no-decor",3,"routerLink","routerLinkActiveOptions"],[1,"card-header"],[1,"card-body"]],template:function(t,i){1&t&&(o.bc(0,"div",0),o.Wc(1,nt,1,0,"app-loader",1),o.Wc(2,dt,5,1,"ng-container",1),o.ac()),2&t&&(o.Hb(1),o.zc("ngIf",!i.isDataLoaded),o.Hb(1),o.zc("ngIf",i.isDataLoaded))},directives:[c.l,f.a,c.k,r.e,r.d],styles:[""]}),t})()},{path:"**",redirectTo:"settings",pathMatch:"full"}];let ut=(()=>{class t{}return t.\u0275mod=o.Ub({type:t}),t.\u0275inj=o.Tb({factory:function(i){return new(i||t)},imports:[[r.f.forChild(lt)],r.f]}),t})();var bt=e("PCNd");let pt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=o.Qb({type:t,selectors:[["app-visitor"]],decls:1,vars:0,template:function(t,i){1&t&&o.Xb(0,"router-outlet")},directives:[r.g],styles:[""]}),t})();e.d(i,"VisitorModule",(function(){return mt}));let mt=(()=>{class t{}return t.\u0275mod=o.Ub({type:t,bootstrap:[pt]}),t.\u0275inj=o.Tb({factory:function(i){return new(i||t)},imports:[[c.b,bt.a,ut]]}),t})()}}]);