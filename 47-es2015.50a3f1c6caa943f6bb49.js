(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{y3SW:function(i,t,e){"use strict";e.r(t);var o=e("ofXK"),r=e("tyNb"),s=e("fXoL"),n=e("3Pt+");let c=(()=>{class i{constructor(){this.sendNotification=!1,this.captureVehiclesDetails=!1,this.sendSMS=!1}submitVisitorSettingsForm(i){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=s.Lb({type:i,selectors:[["app-visitor-setup"]],decls:41,vars:3,consts:[[1,"visitor-settings"],[1,"card","mb-30"],[1,"card-header"],[1,"float-left"],[1,"d-none","d-md-inline-block"],[1,"card-body"],["name","visitorSettingsForm","novalidate","",3,"ngSubmit"],["visitorSettingsForm","ngForm"],[1,"row"],[1,"col-sm-12"],[1,"list-group"],[1,"list-group-item","p-0","no-border","mb-3"],[1,"form-group"],[1,"form-check","medium","float-left"],["type","checkbox","id","sendNotification","name","sendNotification",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendNotification",1,"form-check-label"],["type","checkbox","id","captureVehiclesDetails","name","captureVehiclesDetails",1,"form-check-input",3,"ngModel","ngModelChange"],["for","captureVehiclesDetails",1,"form-check-label"],["type","checkbox","id","sendSMS","name","sendSMS",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendSMS",1,"form-check-label"],[1,"list-inline","float-right","mt-4"],[1,"list-inline-item"],["href","javascript:void(0)",1,"btn","blue","mr-2"]],template:function(i,t){if(1&i){const i=s.Xb();s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div",2),s.Wb(3,"div",3),s.Wb(4,"h5"),s.Tc(5,"Settings"),s.Vb(),s.Wb(6,"p",4),s.Tc(7,"Edit and Save the Settings"),s.Vb(),s.Vb(),s.Vb(),s.Wb(8,"div",5),s.Wb(9,"form",6,7),s.ic("ngSubmit",(function(){s.Kc(i);const e=s.Hc(10);return t.submitVisitorSettingsForm(e)})),s.Wb(11,"div",8),s.Wb(12,"div",9),s.Wb(13,"ul",10),s.Wb(14,"li",11),s.Wb(15,"div",12),s.Wb(16,"div",13),s.Wb(17,"input",14),s.ic("ngModelChange",(function(i){return t.sendNotification=i})),s.Vb(),s.Sb(18,"label",15),s.Wb(19,"p"),s.Tc(20,"Send Mobile App notifications to resident of flat on vsisitors check-in"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(21,"li",11),s.Wb(22,"div",12),s.Wb(23,"div",13),s.Wb(24,"input",16),s.ic("ngModelChange",(function(i){return t.captureVehiclesDetails=i})),s.Vb(),s.Sb(25,"label",17),s.Wb(26,"p"),s.Tc(27,"Capture complete vehicle details"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(28,"li",11),s.Wb(29,"div",12),s.Wb(30,"div",13),s.Wb(31,"input",18),s.ic("ngModelChange",(function(i){return t.sendSMS=i})),s.Vb(),s.Sb(32,"label",19),s.Wb(33,"p"),s.Tc(34,"Send SMS to resident of flat on vsisitors check-in"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(35,"div",8),s.Wb(36,"div",9),s.Wb(37,"ul",20),s.Wb(38,"li",21),s.Wb(39,"a",22),s.Tc(40,"Save"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb()}2&i&&(s.Cb(17),s.uc("ngModel",t.sendNotification),s.Cb(7),s.uc("ngModel",t.captureVehiclesDetails),s.Cb(7),s.uc("ngModel",t.sendSMS))},directives:[n.B,n.o,n.p,n.a,n.n,n.q],styles:[""]}),i})();var a=e("NutR"),b=e("wbvY"),d=e("ThaB"),l=e("Yt4J"),u=e("S4bl"),m=e("DtdB"),p=e("wd/R"),v=e("b6Qw"),h=e("8mtn"),g=e("wlDI"),V=e("668k"),f=e("BR9Y"),C=e("BniF");function I(i,t){1&i&&(s.Wb(0,"span"),s.Tc(1,"Expected Visitor Checkin"),s.Vb())}function W(i,t){1&i&&(s.Wb(0,"span"),s.Tc(1,"Edit Expected Visitor"),s.Vb())}function T(i,t){1&i&&s.Sb(0,"app-loader")}function k(i,t){if(1&i&&(s.Wb(0,"option",39),s.Tc(1),s.Vb()),2&i){const i=t.$implicit;s.uc("value",i.lookupValueId),s.Cb(1),s.Uc(i.lookupValueName)}}function y(i,t){if(1&i&&(s.Wb(0,"option",39),s.Tc(1),s.Vb()),2&i){const i=t.$implicit;s.uc("value",i.lookupValueId),s.Cb(1),s.Uc(i.lookupValueName)}}function S(i,t){if(1&i){const i=s.Xb();s.Wb(0,"div",19),s.Wb(1,"div",20),s.Wb(2,"label"),s.Tc(3,"Tenant block-No*"),s.Vb(),s.Wb(4,"input",40),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(3).visitor.apartmentBlockNumber=t})),s.Vb(),s.Vb(),s.Vb()}if(2&i){const i=s.mc(3);s.Cb(4),s.uc("ngModel",i.visitor.apartmentBlockNumber)}}function D(i,t){if(1&i){const i=s.Xb();s.Wb(0,"div",19),s.Wb(1,"div",20),s.Wb(2,"label"),s.Tc(3,"Tenant Unit-No*"),s.Vb(),s.Wb(4,"input",41),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(3).visitor.apartmentBlockUnitNumber=t})),s.Vb(),s.Vb(),s.Vb()}if(2&i){const i=s.mc(3);s.Cb(4),s.uc("ngModel",i.visitor.apartmentBlockUnitNumber)}}function M(i,t){if(1&i){const i=s.Xb();s.Wb(0,"div",19),s.Wb(1,"div",20),s.Wb(2,"label"),s.Tc(3,"Staff Id*"),s.Vb(),s.Wb(4,"input",42),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(3).visitor.staffId=t})),s.Vb(),s.Vb(),s.Vb()}if(2&i){const i=s.mc(3);s.Cb(4),s.uc("ngModel",i.visitor.staffId)}}function x(i,t){if(1&i){const i=s.Xb();s.Wb(0,"div",14),s.Wb(1,"div",19),s.Wb(2,"div",20),s.Wb(3,"label"),s.Tc(4,"Expected Visitor Name*"),s.Vb(),s.Wb(5,"input",21),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.expectedVisitorName=t})),s.Vb(),s.Vb(),s.Vb(),s.Wb(6,"div",19),s.Wb(7,"div",20),s.Wb(8,"label"),s.Tc(9,"Expected Visitor Count*"),s.Vb(),s.Wb(10,"input",22),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.expectedVisitorCount=t})),s.Vb(),s.Vb(),s.Vb(),s.Wb(11,"div",19),s.Wb(12,"div",20),s.Wb(13,"label"),s.Tc(14,"Expected Phone/Mobile*"),s.Vb(),s.Wb(15,"input",23),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.expectedVisitorPhone=t})),s.Vb(),s.Vb(),s.Vb(),s.Wb(16,"div",19),s.Wb(17,"div",20),s.Wb(18,"label"),s.Tc(19,"Expected Visitor In-time*"),s.Vb(),s.Wb(20,"input",24),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.expectedVisitorInTime=t}))("ngModelChange",(function(){return s.Kc(i),s.mc(2).expectedDurationChange()})),s.Vb(),s.Sb(21,"owl-date-time",null,25),s.Wb(23,"div",26),s.Sb(24,"i-feather",27),s.Vb(),s.Vb(),s.Vb(),s.Wb(25,"div",19),s.Wb(26,"div",20),s.Wb(27,"label"),s.Tc(28,"Expected Visitor Out-time*"),s.Vb(),s.Wb(29,"input",28),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.visitorOutTime=t}))("ngModelChange",(function(){return s.Kc(i),s.mc(2).expectedDurationChange()})),s.Vb(),s.Sb(30,"owl-date-time",null,29),s.Wb(32,"div",26),s.Sb(33,"i-feather",27),s.Vb(),s.Vb(),s.Vb(),s.Wb(34,"div",19),s.Wb(35,"div",20),s.Wb(36,"label"),s.Tc(37,"Expected Duration*"),s.Vb(),s.Wb(38,"input",30),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.expectedDuration=t})),s.Vb(),s.Vb(),s.Vb(),s.Wb(39,"div",19),s.Wb(40,"div",20),s.Wb(41,"label"),s.Tc(42,"Pass Number*"),s.Vb(),s.Wb(43,"input",31),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.passNumber=t})),s.Vb(),s.Vb(),s.Vb(),s.Wb(44,"div",19),s.Wb(45,"div",32),s.Wb(46,"label"),s.Tc(47,"Expected Visit Type*"),s.Vb(),s.Wb(48,"select",33),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitTypeId=t}))("ngModelChange",(function(){s.Kc(i);const t=s.mc(2);return t.changeVisitorType(t.visitTypeId)})),s.Wb(49,"option",34),s.Tc(50,"Select"),s.Vb(),s.Rc(51,k,2,2,"option",35),s.Vb(),s.Vb(),s.Vb(),s.Wb(52,"div",19),s.Wb(53,"div",32),s.Wb(54,"label"),s.Tc(55,"Expected Visit Category*"),s.Vb(),s.Wb(56,"select",36),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitCategoryId=t})),s.Wb(57,"option",34),s.Tc(58,"Select"),s.Vb(),s.Rc(59,y,2,2,"option",35),s.Vb(),s.Vb(),s.Vb(),s.Rc(60,S,5,1,"div",37),s.Rc(61,D,5,1,"div",37),s.Rc(62,M,5,1,"div",37),s.Wb(63,"div",19),s.Wb(64,"div",20),s.Wb(65,"label"),s.Tc(66,"Purpose"),s.Vb(),s.Wb(67,"textarea",38),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.purpose=t})),s.Vb(),s.Vb(),s.Vb(),s.Vb()}if(2&i){const i=s.Hc(22),t=s.Hc(31),e=s.mc(2);s.Cb(5),s.uc("ngModel",e.visitor.expectedVisitorName),s.Cb(5),s.uc("ngModel",e.visitor.expectedVisitorCount),s.Cb(5),s.uc("ngModel",e.visitor.expectedVisitorPhone),s.Cb(5),s.uc("owlDateTime",i)("owlDateTimeTrigger",i)("ngModel",e.visitor.expectedVisitorInTime)("disabled",!0),s.Cb(3),s.uc("owlDateTimeTrigger",i),s.Cb(6),s.uc("owlDateTime",t)("owlDateTimeTrigger",t)("ngModel",e.visitor.visitorOutTime),s.Cb(3),s.uc("owlDateTimeTrigger",t),s.Cb(6),s.uc("ngModel",e.visitor.expectedDuration)("disabled",!0),s.Cb(5),s.uc("ngModel",e.visitor.passNumber),s.Cb(5),s.uc("ngModel",e.visitTypeId),s.Cb(3),s.uc("ngForOf",e.visitByData),s.Cb(5),s.uc("ngModel",e.visitCategoryId),s.Cb(3),s.uc("ngForOf",e.visitCategoryData),s.Cb(1),s.uc("ngIf",e.isUnitVisitor),s.Cb(1),s.uc("ngIf",e.isUnitVisitor),s.Cb(1),s.uc("ngIf",e.iscommunityVisitor),s.Cb(5),s.uc("ngModel",e.visitor.purpose)}}function N(i,t){if(1&i&&(s.Wb(0,"option",39),s.Tc(1),s.Vb()),2&i){const i=t.$implicit;s.uc("value",i.lookupValueId),s.Cb(1),s.Uc(i.lookupValueName)}}function O(i,t){if(1&i&&(s.Wb(0,"option",39),s.Tc(1),s.Vb()),2&i){const i=t.$implicit;s.uc("value",i.lookupValueId),s.Cb(1),s.Uc(i.lookupValueName)}}function L(i,t){if(1&i){const i=s.Xb();s.Wb(0,"div",14),s.Wb(1,"div",19),s.Wb(2,"div",20),s.Wb(3,"label"),s.Tc(4,"Expected Visitor Name*"),s.Vb(),s.Wb(5,"input",21),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.visitorName=t})),s.Vb(),s.Vb(),s.Vb(),s.Wb(6,"div",19),s.Wb(7,"div",20),s.Wb(8,"label"),s.Tc(9,"Expected Visitor Count*"),s.Vb(),s.Wb(10,"input",22),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.visitorCount=t})),s.Vb(),s.Vb(),s.Vb(),s.Wb(11,"div",19),s.Wb(12,"div",20),s.Wb(13,"label"),s.Tc(14,"Phone/Mobile*"),s.Vb(),s.Wb(15,"input",23),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.visitorPhone=t})),s.Vb(),s.Vb(),s.Vb(),s.Wb(16,"div",19),s.Wb(17,"div",20),s.Wb(18,"label"),s.Tc(19,"Expected Visitor In-time*"),s.Vb(),s.Wb(20,"input",43),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.visitorInTime=t})),s.Vb(),s.Sb(21,"owl-date-time",44,25),s.Wb(23,"div",26),s.Sb(24,"i-feather",27),s.Vb(),s.Vb(),s.Vb(),s.Wb(25,"div",19),s.Wb(26,"div",20),s.Wb(27,"label"),s.Tc(28,"Expected Visitor Out-time"),s.Vb(),s.Wb(29,"input",45),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.visitorOutTime=t})),s.Vb(),s.Sb(30,"owl-date-time",44,29),s.Wb(32,"div",26),s.Sb(33,"i-feather",27),s.Vb(),s.Vb(),s.Vb(),s.Wb(34,"div",19),s.Wb(35,"div",20),s.Wb(36,"label"),s.Tc(37,"Expected Duration*"),s.Vb(),s.Wb(38,"input",46),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.expectedDuration=t})),s.Vb(),s.Vb(),s.Vb(),s.Wb(39,"div",19),s.Wb(40,"div",20),s.Wb(41,"label"),s.Tc(42,"Pass Number*"),s.Vb(),s.Wb(43,"input",31),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitor.passNumber=t})),s.Vb(),s.Vb(),s.Vb(),s.Wb(44,"div",19),s.Wb(45,"div",32),s.Wb(46,"label"),s.Tc(47,"Expected Visit Type*"),s.Vb(),s.Wb(48,"select",33),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitTypeId=t})),s.Wb(49,"option",34),s.Tc(50,"Select"),s.Vb(),s.Rc(51,N,2,2,"option",35),s.Vb(),s.Vb(),s.Vb(),s.Wb(52,"div",19),s.Wb(53,"div",32),s.Wb(54,"label"),s.Tc(55,"Expected Visit Category*"),s.Vb(),s.Wb(56,"select",36),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc(2).visitCategoryId=t})),s.Wb(57,"option",34),s.Tc(58,"Select"),s.Vb(),s.Rc(59,O,2,2,"option",35),s.Vb(),s.Vb(),s.Vb(),s.Vb()}if(2&i){const i=s.Hc(22),t=s.Hc(31),e=s.mc(2);s.Cb(5),s.uc("ngModel",e.visitor.visitorName),s.Cb(5),s.uc("ngModel",e.visitor.visitorCount),s.Cb(5),s.uc("ngModel",e.visitor.visitorPhone),s.Cb(5),s.uc("owlDateTime",i)("owlDateTimeTrigger",i)("min",e.minDate)("max",e.minDate)("disabled",!0)("ngModel",e.visitor.visitorInTime),s.Cb(1),s.uc("min",e.minDate),s.Cb(2),s.uc("owlDateTimeTrigger",i),s.Cb(6),s.uc("owlDateTime",t)("owlDateTimeTrigger",t)("min",e.minDate)("max",e.minDate)("ngModel",e.visitor.visitorOutTime),s.Cb(1),s.uc("min",e.minDate),s.Cb(2),s.uc("owlDateTimeTrigger",t),s.Cb(6),s.uc("ngModel",e.visitor.expectedDuration),s.Cb(5),s.uc("ngModel",e.visitor.passNumber),s.Cb(5),s.uc("ngModel",e.visitTypeId),s.Cb(3),s.uc("ngForOf",e.visitByData),s.Cb(5),s.uc("ngModel",e.visitCategoryId),s.Cb(3),s.uc("ngForOf",e.visitCategoryData)}}function U(i,t){if(1&i&&(s.Wb(0,"button",47),s.Tc(1,"Check In"),s.Vb()),2&i){s.mc();const i=s.Hc(2);s.uc("disabled",i.invalid)}}function w(i,t){if(1&i&&(s.Wb(0,"button",47),s.Tc(1,"Check Out"),s.Vb()),2&i){s.mc();const i=s.Hc(2);s.uc("disabled",i.invalid)}}function B(i,t){if(1&i){const i=s.Xb();s.Ub(0),s.Wb(1,"form",11,12),s.ic("ngSubmit",(function(){s.Kc(i);const t=s.Hc(2);return s.mc().submitAddVisitorForm(t)})),s.Rc(3,x,68,23,"div",13),s.Rc(4,L,60,24,"div",13),s.Wb(5,"div",14),s.Wb(6,"div",15),s.Wb(7,"ul",16),s.Wb(8,"li",17),s.Rc(9,U,2,1,"button",18),s.Vb(),s.Wb(10,"li",17),s.Rc(11,w,2,1,"button",18),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Tb()}if(2&i){const i=s.mc();s.Cb(3),s.uc("ngIf",!i.isCheckout()),s.Cb(1),s.uc("ngIf",i.isCheckout()),s.Cb(5),s.uc("ngIf",!i.isCheckout()),s.Cb(2),s.uc("ngIf",i.isCheckout())}}function E(i,t){1&i&&(s.Wb(0,"h5",3),s.Tc(1,"Visitor Checked In successfully!"),s.Vb())}function P(i,t){1&i&&(s.Wb(0,"h5",3),s.Tc(1,"Visitor Checked Out successfully!"),s.Vb())}function A(i,t){if(1&i&&(s.Wb(0,"div",48),s.Wb(1,"div",49),s.Sb(2,"i-feather",50),s.Vb(),s.Rc(3,E,2,0,"h5",51),s.Rc(4,P,2,0,"h5",51),s.Vb()),2&i){const i=s.mc();s.Cb(3),s.uc("ngIf",!i.isCheckout()),s.Cb(1),s.uc("ngIf",i.isCheckout())}}const R=function(){return{exact:!0}};let F=(()=>{class i{constructor(i,t,e,o,r,s,n,c,a){this.router=i,this.route=t,this.userService=e,this.apartmentService=o,this.visitorService=r,this.lookupService=s,this.sharedService=n,this.cookieService=c,this.SharedToaster=a,this.isEditVisitor=!1,this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!1,this.errorMessage="",this.visitTypeId="",this.isExpectedVisitor=!1,this.visitorStatus="",this.isUnitVisitor=!1,this.iscommunityVisitor=!1,this.minDate=p(new Date).format("YYYY-MM-DD")}isCheckout(){return"checkout"==this.visitorStatus}submitAddVisitorForm(i){if(this.isVisitorSubmitted=!0,this.isError=!1,!this.isEditVisitor){console.log("fist");let i={apartmentUnitId:this.apartmentUnitId,apartmentId:parseInt(this.cookieService.get("apartmentId")),visitorName:this.visitor.expectedVisitorName,visitorCount:this.visitor.expectedVisitorCount,visitorPhone:this.visitor.expectedVisitorPhone,passNumber:this.visitor.passNumber,visitorInTime:this.visitor.expectedVisitorInTime,visitorOutTime:this.visitor.expectedVisitorOutTime,expectedDuration:this.visitor.expectedDurationInHours,meetingPersonId:1,visitTypeId:parseInt(this.visitTypeId),visitCategoryId:parseInt(this.visitCategoryId),visitorsOrg:"string",entryGateId:null,apartmentBlockNumber:this.visitor.apartmentBlockNumber,apartmentUnitNumber:this.visitor.apartmentBlockUnitNumber,exitGateId:null,purpose:this.visitor.purpose,enteredBy:parseInt(this.cookieService.get("userId")),isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-11-18T17:08:51.188Z",updatedBy:0,updatedOn:"2019-11-18T17:08:51.188Z"};this.visitorService.addVisitor(i).subscribe(i=>{i.message?(this.isVisitorAdded=!0,this.router.navigate(["/ams/visitor/checkout"])):(this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=i.errorMessage)},i=>{this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=i})}if(this.isEditVisitor)if(this.isCheckout()){let i={visitorId:parseInt(this.route.params.value.id),apartmentUnitId:this.apartmentUnitId,apartmentId:parseInt(this.cookieService.get("apartmentId")),visitorName:this.visitor.visitorName,visitorCount:this.visitor.visitorCount,visitorPhone:this.visitor.visitorPhone,visitorVehicleTypeId:1,visitorVehicleNumber:"string",visitingPlaceId:1,passNumber:this.visitor.passNumber,isCheckedIn:!0,visitorInTime:this.visitor.visitorInTime,isCheckedOut:!0,visitorOutTime:this.visitor.visitorOutTime,expectedDuration:this.visitor.expectedDurationInHours,meetingPersonId:1,meetingPersonName:"string",visitTypeId:parseInt(this.visitTypeId),visitCategoryId:parseInt(this.visitCategoryId),visitorsOrg:"string",entryGateId:null,exitGateId:null,purpose:this.visitor.purpose,enteredBy:parseInt(this.cookieService.get("userId")),isActive:!0,insertedBy:0,insertedOn:"2019-11-18T17:08:51.188Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-11-18T17:08:51.188Z"};this.visitorService.updateVisitor(i).subscribe(i=>{i.message?this.isVisitorAdded=!0:(this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=i.errorMessage)},i=>{this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=i})}else{let i={apartmentUnitId:this.apartmentUnitId,apartmentId:parseInt(this.cookieService.get("apartmentId")),visitorName:this.visitor.expectedVisitorName,visitorCount:this.visitor.expectedVisitorCount,visitorPhone:this.visitor.expectedVisitorPhone,visitorVehicleTypeId:1,visitorVehicleNumber:"string",visitingPlaceId:1,passNumber:this.visitor.passNumber,isCheckedIn:!0,visitorInTime:this.visitor.expectedVisitorInTime,isCheckedOut:!1,visitorOutTime:null,expectedDuration:this.visitor.expectedDurationInHours,meetingPersonId:1,meetingPersonName:"string",visitTypeId:parseInt(this.visitTypeId),visitCategoryId:parseInt(this.visitCategoryId),visitorsOrg:"string",entryGateId:null,exitGateId:null,purpose:this.visitor.purpose,enteredBy:parseInt(this.cookieService.get("userId")),isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-11-18T17:08:51.188Z",updatedBy:0,updatedOn:"2019-11-18T17:08:51.188Z"};this.visitorService.addVisitor(i).subscribe(i=>{i.message?this.isVisitorAdded=!0:(this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=i.errorMessage)},i=>{this.isVisitorSubmitted=!1,this.isVisitorAdded=!1,this.isError=!0,this.errorMessage=i})}}ngOnInit(){this.visitor={},null!=this.route.params.value.id&&(this.isEditVisitor=!0,this.visitorStatus=this.route.params.value.type,"checkout"==this.route.params.value.type?this.visitorService.getVisitorById(this.route.params.value.id).subscribe(i=>{this.visitor=i[0],this.visitTypeId=this.visitor.visitTypeId,this.visitor.purpose=""},i=>{}):this.visitorService.getExpectedVisitorById(this.route.params.value.id).subscribe(i=>{this.visitor=i[0],this.visitor.purpose="",this.visitTypeId=this.visitor.visitTypeId,console.log(this.visitor)},i=>{})),this.lookupService.getLookupValueByLookupTypeId(15).subscribe(i=>{this.visitByData=i},i=>{}),this.lookupService.getLookupValueByLookupTypeId(8).subscribe(i=>{this.visitCategoryData=i},i=>{}),this.apartmentService.getApartmentBlockUnitByUserId(parseInt(this.cookieService.get("userId"))).subscribe(i=>{this.apartmentUnitId=i[0].apartmentBlockUnitId},i=>{}),this.visitor.expectedVisitorInTime=p(new Date),this.visitor.visitorInTime=p(new Date)}changeVisitorType(i){console.log(i);let t=this.visitByData.filter(t=>i==t.lookupValueId);console.log(t),this.isUnitVisitor="Unit Visitor"==t[0].lookupValueName,this.iscommunityVisitor="Community Visitor"==t[0].lookupValueName}expectedDurationChange(){if(this.minDate>p(this.visitor.expectedVisitorInTime).format("YYYY-MM-DD"))return this.visitor.expectedVisitorInTime=void 0,void this.SharedToaster.openSnackBar("Please Select valid Date","");if(this.minDate>p(this.visitor.visitorOutTime).format("YYYY-MM-DD"))return this.visitor.visitorOutTime=void 0,void this.SharedToaster.openSnackBar("Please Select Out-time greater than In-time","");if(console.log(this.visitor.visitorOutTime),this.visitor.visitorOutTime&&p(this.visitor.expectedVisitorInTime).format("YYYY-MM-DD")>p(this.visitor.visitorOutTime).format("YYYY-MM-DD"))return this.visitor.visitorOutTime=void 0,void this.SharedToaster.openSnackBar("Please Select Out-time greater than In-time","");let i=p(this.visitor.expectedVisitorInTime),t=p(this.visitor.visitorOutTime),e=p.duration(t.diff(i));this.visitor.expectedDuration=e.days()+" days "+this.isSingleDigit(e.hours())+":"+this.isSingleDigit(e.minutes())+" hours";let o=p.duration(t.diff(i)).asHours();this.visitor.expectedDurationInHours=Math.round(o)}isSingleDigit(i){return i<=0?"00":i.toString().length>1?i:"0"+i}}return i.\u0275fac=function(t){return new(t||i)(s.Rb(r.c),s.Rb(r.a),s.Rb(a.a),s.Rb(l.a),s.Rb(u.a),s.Rb(d.a),s.Rb(b.a),s.Rb(v.a),s.Rb(m.a))},i.\u0275cmp=s.Lb({type:i,selectors:[["app-visitor-checkin"]],decls:15,vars:9,consts:[[1,"checkin-visitor-wrapper"],[1,"card","mb-30"],[1,"card-header"],[1,"float-left"],[4,"ngIf"],[1,"float-right"],["href","javascript:void(0)","routerLink","/ams/visitor/expected-visitor","routerLinkActive","active",3,"routerLinkActiveOptions"],["name","chevron-left",1,"icon","back"],[1,"card-body"],[3,"message","isAlert"],["class","message",4,"ngIf"],["name","addVisitorForm","novalidate","",3,"ngSubmit"],["addVisitorForm","ngForm"],["class","row",4,"ngIf"],[1,"row"],[1,"col-sm-12"],[1,"list-inline","float-right","mt-4"],[1,"list-inline-item"],["class","btn blue mr-2",3,"disabled",4,"ngIf"],[1,"col-sm-4"],[1,"input-box"],["type","text","placeholder","Enter Name","name","visitorName","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Count","name","visitorCount","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Number","name","phoneNo","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","visitorInTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","disabled","ngModelChange"],["visitorInTime",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","calendar","width","18",1,"icon","date","float-left"],["name","visitorOutTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["visitorOutTime",""],["OnlyNumber","true","placeholder","Enter Duration","name","visitorCount","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["type","text","placeholder","Enter Number","name","visitorPassNumber","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-box","radio-box"],["name","visitBy","id","visitBy","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","visitByCategory","id","visitByCategory","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","col-sm-4",4,"ngIf"],["type","text","placeholder","Enter purpose","name","visitorpurpose",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["type","text","OnlyNumber","true","placeholder","Enter block-No","name","visitorblock-No","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Unit-No","name","visitorUnit-No","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","OnlyNumber","true","placeholder","Enter Staff-id","name","staffId","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","visitorInTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","min","max","disabled","ngModel","ngModelChange"],[3,"min"],["name","visitorOutTime","placeholder","Date Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","min","max","ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter Duration","name","visitorCount","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","blue","mr-2",3,"disabled"],[1,"message"],[1,"icon-wrapper","float-left"],["name","check","width","20",1,"icon","float-left"],["class","float-left",4,"ngIf"]],template:function(i,t){1&i&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div",2),s.Wb(3,"div",3),s.Wb(4,"h5"),s.Rc(5,I,2,0,"span",4),s.Rc(6,W,2,0,"span",4),s.Vb(),s.Vb(),s.Wb(7,"div",5),s.Wb(8,"a",6),s.Sb(9,"i-feather",7),s.Vb(),s.Vb(),s.Vb(),s.Wb(10,"div",8),s.Sb(11,"app-alert-message",9),s.Rc(12,T,1,0,"app-loader",4),s.Rc(13,B,12,4,"ng-container",4),s.Rc(14,A,5,2,"div",10),s.Vb(),s.Vb(),s.Vb()),2&i&&(s.Cb(5),s.uc("ngIf",!t.isEditVisitor),s.Cb(1),s.uc("ngIf",t.isEditVisitor),s.Cb(2),s.uc("routerLinkActiveOptions",s.Ac(8,R)),s.Cb(3),s.uc("message",t.errorMessage)("isAlert",t.isError),s.Cb(1),s.uc("ngIf",t.isVisitorSubmitted&&!t.isVisitorAdded),s.Cb(1),s.uc("ngIf",!t.isVisitorSubmitted&&!t.isVisitorAdded),s.Cb(1),s.uc("ngIf",t.isVisitorAdded))},directives:[o.l,r.e,r.d,h.b,g.a,V.a,n.B,n.o,n.p,n.d,n.x,n.n,n.q,n.s,f.a,C.c,C.e,C.b,n.y,n.r,n.A,o.k],styles:[""]}),i})();var K=e("JK/P"),Y=e("F/us"),q=e("NhFE"),H=e("1kSV"),j=e("bvAq");function X(i,t){1&i&&s.Sb(0,"app-loader")}function $(i,t){if(1&i&&(s.Wb(0,"div",29),s.Wb(1,"ul"),s.Wb(2,"li"),s.Wb(3,"h5"),s.Tc(4,"Visitor Count"),s.Vb(),s.Wb(5,"small"),s.Tc(6),s.Vb(),s.Vb(),s.Wb(7,"li"),s.Wb(8,"h5"),s.Tc(9,"Expected Duration"),s.Vb(),s.Wb(10,"small"),s.Tc(11),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&i){const i=s.mc().$implicit;s.Cb(6),s.Uc(i.visitorCount),s.Cb(5),s.Uc(i.expectedDuration)}}function _(i,t){1&i&&(s.Wb(0,"div",29),s.Wb(1,"h5"),s.Tc(2,"CheckOut"),s.Vb(),s.Vb())}const G=function(){return{exact:!0}};function Z(i,t){if(1&i&&(s.Wb(0,"tr"),s.Wb(1,"td",21),s.Wb(2,"a",22),s.Tc(3),s.Rc(4,$,12,2,"ng-template",null,23,s.Sc),s.Vb(),s.Vb(),s.Wb(6,"td",24),s.Tc(7),s.Vb(),s.Wb(8,"td",24),s.Tc(9),s.nc(10,"date"),s.Vb(),s.Wb(11,"td",24),s.Tc(12),s.nc(13,"date"),s.Vb(),s.Wb(14,"td",25),s.Tc(15),s.Vb(),s.Wb(16,"td",25),s.Tc(17),s.Vb(),s.Wb(18,"td"),s.Wb(19,"a",26),s.Sb(20,"img",27),s.Vb(),s.Rc(21,_,3,0,"ng-template",null,28,s.Sc),s.Vb(),s.Vb()),2&i){const i=t.$implicit,e=s.Hc(5),o=s.Hc(22);s.Cb(2),s.uc("ngbPopover",e),s.Cb(1),s.Vc("",i.visitorName," "),s.Cb(4),s.Uc(i.visitorPhone),s.Cb(2),s.Uc(s.pc(10,10,i.visitorInTime,"MM/dd/yy, hh:mm")),s.Cb(3),s.Uc(s.pc(13,13,i.visitorOutTime,"MM/dd/yy, hh:mm")),s.Cb(3),s.Uc(i.blockNo),s.Cb(2),s.Uc(i.blockUnitNo),s.Cb(2),s.wc("routerLink","/ams/visitor/edit-visitor/",i.visitorId,"/checkout"),s.uc("ngbPopover",o)("routerLinkActiveOptions",s.Ac(16,G))}}function J(i,t){if(1&i){const i=s.Xb();s.Wb(0,"div",3),s.Wb(1,"div",4),s.Wb(2,"div",5),s.Wb(3,"h5"),s.Tc(4,"All Checked-in Visitors "),s.Wb(5,"span",6),s.Tc(6),s.Vb(),s.Vb(),s.Vb(),s.Wb(7,"ul",7),s.Wb(8,"li",8),s.Sb(9,"i",9),s.Wb(10,"input",10),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc().visitorData=t})),s.Vb(),s.Vb(),s.Wb(11,"li",11),s.Wb(12,"a",12),s.Sb(13,"i-feather",13),s.Wb(14,"span"),s.Tc(15,"Print"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(16,"div",14),s.Wb(17,"table",15),s.Wb(18,"thead"),s.Wb(19,"tr"),s.Wb(20,"th",16),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("visitorName")})),s.Tc(21,"Visitor Name "),s.Sb(22,"span",17),s.Vb(),s.Wb(23,"th",16),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("visitorPhone")})),s.Tc(24,"Phone Number "),s.Sb(25,"span",17),s.Vb(),s.Wb(26,"th",16),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("visitorInTime")})),s.Tc(27,"In-time "),s.Sb(28,"span",17),s.Vb(),s.Wb(29,"th",16),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("visitorOutTime")})),s.Tc(30,"Out-time "),s.Sb(31,"span",17),s.Vb(),s.Wb(32,"th",16),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("blockNo")})),s.Tc(33,"Block No"),s.Sb(34,"span",17),s.Vb(),s.Wb(35,"th",16),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("blockUnitNo")})),s.Tc(36,"Unit No "),s.Sb(37,"span",17),s.Vb(),s.Wb(38,"th",18),s.Tc(39,"Action"),s.Vb(),s.Vb(),s.Vb(),s.Wb(40,"tbody"),s.Rc(41,Z,23,17,"tr",19),s.nc(42,"simpleSearch"),s.nc(43,"slice"),s.nc(44,"orderBy"),s.Vb(),s.Vb(),s.Wb(45,"app-pagination",20),s.ic("outputParams",(function(t){return s.Kc(i),s.mc().getIndexParams(t)})),s.Vb(),s.Vb(),s.Vb()}if(2&i){const i=s.mc();s.Cb(6),s.Uc(i.totalItems),s.Cb(4),s.uc("ngModel",i.visitorData),s.Cb(7),s.uc("ngClass",i.isMobileView()),s.Cb(5),s.uc("ngClass",i.getFieldOrderBy("visitorName")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("visitorPhone")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("visitorInTime")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("visitorOutTime")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("blockNo")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("blockUnitNo")),s.Cb(4),s.uc("ngForOf",s.pc(42,14,s.qc(43,17,s.qc(44,21,i.visitorListData,i.unitFieldType,i.unitOrder),i.ItemUserStartIndex,i.ItemUserEndIndex),i.visitorData)),s.Cb(4),s.uc("totalItems",i.totalItems)("ItemStartIndex",i.ItemStartIndex)("ItemEndIndex",i.ItemEndIndex)("itemLimit",i.itemLimit)}}let z=(()=>{class i{constructor(i,t,e,o,r,s){this.injector=i,this.apartmentService=t,this.visitorService=e,this.lookupService=o,this.sharedService=r,this.cookieService=s,this.visitorData="",this.isVisitorDataLoaded=!1,this.unitFieldType="unitno",this.unitOrder=!1,this.ItemStartIndex=0,this.itemLimit=20,this.modalService=this.injector.get(K.a)}getIndexParams(i){this.ItemStartIndex=i.ItemStartIndex,this.ItemEndIndex=i.ItemEndIndex,this.itemLimit=i.itemLimit}sortUnitData(i){this.unitFieldType=i,this.unitOrder=!this.unitOrder}getFieldOrderBy(i){return this.unitFieldType==i?this.unitOrder?"desc":"asc":""}getBlockUnit(i){}isMobileView(){return window.innerWidth<=767?"table-responsive":""}showConfirmModal(i){this.modalService.showConfirmModal(i)}getVisitorType(){}ngOnInit(){this.lookupService.getLookupValueByLookupTypeId(15).subscribe(i=>{this.visitTypeData=i},i=>{}),this.visitorService.getYetToCheckoutVisitorsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(i=>{this.visitorListData=i.filter(i=>i.isActive&&!i.isCheckedOut),Y.each(this.visitorListData,(i,t)=>{this.apartmentService.getApartmentBlockUnitById(i.apartmentUnitId).subscribe(i=>{this.visitorListData[t].blockNo=i[0].apartmentBlockNumber,this.visitorListData[t].blockUnitNo=i[0].apartmentBlockUnitNumber},i=>{})}),this.totalItems=this.visitorListData.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isVisitorDataLoaded=!0})}}return i.\u0275fac=function(t){return new(t||i)(s.Rb(s.r),s.Rb(l.a),s.Rb(u.a),s.Rb(d.a),s.Rb(b.a),s.Rb(v.a))},i.\u0275cmp=s.Lb({type:i,selectors:[["app-visitor-checkout"]],decls:3,vars:2,consts:[[1,"checkedout-visitor-wrapper"],[4,"ngIf"],["class","card table-card",4,"ngIf"],[1,"card","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","l-blue","mt_5"],["name","printer",1,"icon","print"],[1,"card-body","p-0"],[1,"table",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],["scope","col"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",3,"ngbPopover"],["popContent",""],[1,"grey"],[1,"grey","text-capitalize"],["href","javascript:void(0)","placement","top","triggers","mouseenter:mouseleave","routerLinkActive","active",3,"ngbPopover","routerLink","routerLinkActiveOptions"],["src","assets/images/checkout-icon.svg","width","20"],["popAddCheckOutContent",""],[1,"pop-desp"]],template:function(i,t){1&i&&(s.Wb(0,"div",0),s.Rc(1,X,1,0,"app-loader",1),s.Rc(2,J,46,25,"div",2),s.Vb()),2&i&&(s.Cb(1),s.uc("ngIf",!t.isVisitorDataLoaded),s.Cb(1),s.uc("ngIf",t.isVisitorDataLoaded))},directives:[o.l,V.a,f.b,n.d,n.n,n.q,h.b,o.j,o.k,q.a,H.c,r.e,r.d],pipes:[j.c,o.t,j.b,o.d],styles:[""]}),i})();function Q(i,t){1&i&&s.Sb(0,"app-loader")}function ii(i,t){if(1&i&&(s.Wb(0,"div",31),s.Wb(1,"ul"),s.Wb(2,"li"),s.Wb(3,"h5"),s.Tc(4,"Visitor Count"),s.Vb(),s.Wb(5,"small"),s.Tc(6),s.Vb(),s.Vb(),s.Wb(7,"li"),s.Wb(8,"h5"),s.Tc(9,"Expected Duration"),s.Vb(),s.Wb(10,"small"),s.Tc(11),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&i){const i=s.mc().$implicit;s.Cb(6),s.Uc(i.expectedVisitorCount),s.Cb(5),s.Uc(i.expectedDuration)}}function ti(i,t){1&i&&(s.Wb(0,"div",31),s.Wb(1,"h5"),s.Tc(2,"CheckIn"),s.Vb(),s.Vb())}const ei=function(){return{exact:!0}};function oi(i,t){if(1&i&&(s.Wb(0,"tr"),s.Wb(1,"td",23),s.Wb(2,"a",24),s.Tc(3),s.Rc(4,ii,12,2,"ng-template",null,25,s.Sc),s.Vb(),s.Vb(),s.Wb(6,"td",26),s.Tc(7),s.Vb(),s.Wb(8,"td",26),s.Tc(9),s.Vb(),s.Wb(10,"td",26),s.Tc(11),s.Vb(),s.Wb(12,"td",26),s.Tc(13),s.Vb(),s.Wb(14,"td",26),s.Tc(15),s.Vb(),s.Wb(16,"td",27),s.Tc(17),s.Vb(),s.Wb(18,"td",27),s.Tc(19),s.Vb(),s.Wb(20,"td"),s.Wb(21,"a",28),s.Sb(22,"img",29),s.Vb(),s.Rc(23,ti,3,0,"ng-template",null,30,s.Sc),s.Vb(),s.Vb()),2&i){const i=t.$implicit,e=s.Hc(5),o=s.Hc(24),r=s.mc(2);s.Cb(2),s.uc("ngbPopover",e),s.Cb(1),s.Vc("",i.expectedVisitorName," "),s.Cb(4),s.Uc(i.expectedVisitorPhone),s.Cb(2),s.Uc(r.getTimeFormat(i.expectedVisitorInTime)),s.Cb(2),s.Uc(r.getTimeFormat(i.expectedVisitorOutTime)),s.Cb(2),s.Uc(i.visitTypeName),s.Cb(2),s.Uc(i.visitCategoryName),s.Cb(2),s.Uc(i.blockNo),s.Cb(2),s.Uc(i.blockUnitNo),s.Cb(2),s.wc("routerLink","/ams/visitor/edit-visitor/",i.expectedVisitorId,"/checkin"),s.uc("ngbPopover",o)("routerLinkActiveOptions",s.Ac(12,ei))}}const ri=function(){return{data:"admin"}};function si(i,t){if(1&i){const i=s.Xb();s.Wb(0,"div",3),s.Wb(1,"div",4),s.Wb(2,"div",5),s.Wb(3,"h5"),s.Tc(4,"All Expected Visitors "),s.Wb(5,"span",6),s.Tc(6),s.Vb(),s.Vb(),s.Vb(),s.Wb(7,"ul",7),s.Wb(8,"li",8),s.Sb(9,"i",9),s.Wb(10,"input",10),s.ic("ngModelChange",(function(t){return s.Kc(i),s.mc().visitorData=t})),s.Vb(),s.Vb(),s.Wb(11,"li",11),s.Wb(12,"a",12),s.Sb(13,"i-feather",13),s.Wb(14,"span"),s.Tc(15,"Print"),s.Vb(),s.Vb(),s.Vb(),s.Wb(16,"li",11),s.Wb(17,"a",14),s.Sb(18,"i-feather",15),s.Wb(19,"span"),s.Tc(20,"Add Visitor"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(21,"div",16),s.Wb(22,"table",17),s.Wb(23,"thead"),s.Wb(24,"tr"),s.Wb(25,"th",18),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("visitorName")})),s.Tc(26,"Visitor Name"),s.Sb(27,"span",19),s.Vb(),s.Wb(28,"th",18),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("visitorPhone")})),s.Tc(29,"Phone Number"),s.Sb(30,"span",19),s.Vb(),s.Wb(31,"th",18),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("visitorInTime")})),s.Tc(32,"Expected in Date/Time"),s.Sb(33,"span",19),s.Vb(),s.Wb(34,"th",18),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("visitorOutTime")})),s.Tc(35,"Expected out Date/Time"),s.Sb(36,"span",19),s.Vb(),s.Wb(37,"th",18),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("visitorOutTime")})),s.Tc(38,"Visitor Type"),s.Sb(39,"span",19),s.Vb(),s.Wb(40,"th",18),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("visitorOutTime")})),s.Tc(41,"Visitor category"),s.Sb(42,"span",19),s.Vb(),s.Wb(43,"th",18),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("blockNo")})),s.Tc(44,"Block No"),s.Sb(45,"span",19),s.Vb(),s.Wb(46,"th",18),s.ic("click",(function(){return s.Kc(i),s.mc().sortUnitData("blockUnitNo")})),s.Tc(47,"Unit No"),s.Sb(48,"span",19),s.Vb(),s.Wb(49,"th",20),s.Tc(50,"Action"),s.Vb(),s.Vb(),s.Vb(),s.Wb(51,"tbody"),s.Rc(52,oi,25,13,"tr",21),s.nc(53,"simpleSearch"),s.nc(54,"slice"),s.nc(55,"orderBy"),s.Vb(),s.Vb(),s.Wb(56,"app-pagination",22),s.ic("outputParams",(function(t){return s.Kc(i),s.mc().getIndexParams(t)})),s.Vb(),s.Vb(),s.Vb()}if(2&i){const i=s.mc();s.Cb(6),s.Uc(i.totalItems),s.Cb(4),s.uc("ngModel",i.visitorData),s.Cb(7),s.uc("routerLinkActiveOptions",s.Ac(29,ei))("state",s.Ac(30,ri)),s.Cb(5),s.uc("ngClass",i.isMobileView()),s.Cb(5),s.uc("ngClass",i.getFieldOrderBy("visitorName")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("visitorPhone")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("visitorInTime")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("visitorOutTime")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("visitorType")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("visitorCategory")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("blockNo")),s.Cb(3),s.uc("ngClass",i.getFieldOrderBy("blockUnitNo")),s.Cb(4),s.uc("ngForOf",s.pc(53,18,s.qc(54,21,s.qc(55,25,i.visitorListData,i.unitFieldType,i.unitOrder),i.ItemUserStartIndex,i.ItemUserEndIndex),i.visitorData)),s.Cb(4),s.uc("totalItems",i.totalItems)("ItemStartIndex",i.ItemStartIndex)("ItemEndIndex",i.ItemEndIndex)("itemLimit",i.itemLimit)}}function ni(i,t){1&i&&s.Sb(0,"app-loader")}const ci=function(){return{exact:!0}};function ai(i,t){if(1&i&&(s.Wb(0,"div",5),s.Wb(1,"div",6),s.Wb(2,"a",7),s.Wb(3,"div",8),s.Wb(4,"h6"),s.Tc(5),s.Vb(),s.Wb(6,"p"),s.Tc(7),s.Vb(),s.Vb(),s.Vb(),s.Sb(8,"div",9),s.Vb(),s.Vb()),2&i){const i=t.$implicit;s.Cb(2),s.xc("routerLink","",i.menuName,"/",i.lookupValueID,""),s.uc("routerLinkActiveOptions",s.Ac(5,ci)),s.Cb(3),s.Uc(i.lookupValueName),s.Cb(2),s.Uc(i.description)}}function bi(i,t){if(1&i&&(s.Ub(0),s.Wb(1,"h5",2),s.Tc(2,"Helpdesk reports "),s.Vb(),s.Wb(3,"div",3),s.Rc(4,ai,9,6,"div",4),s.Vb(),s.Tb()),2&i){const i=s.mc();s.Cb(4),s.uc("ngForOf",i.reportDataList)}}const di=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:c},{path:"checkin",component:F},{path:"expected-visitor",component:(()=>{class i{constructor(i,t,e,o,r,s){this.injector=i,this.apartmentService=t,this.visitorService=e,this.lookupService=o,this.sharedService=r,this.cookieService=s,this.visitorData="",this.isVisitorDataLoaded=!1,this.unitFieldType="unitno",this.unitOrder=!1,this.ItemStartIndex=0,this.itemLimit=20,this.modalService=this.injector.get(K.a)}getIndexParams(i){this.ItemStartIndex=i.ItemStartIndex,this.ItemEndIndex=i.ItemEndIndex,this.itemLimit=i.itemLimit}sortUnitData(i){this.unitFieldType=i,this.unitOrder=!this.unitOrder}getFieldOrderBy(i){return this.unitFieldType==i?this.unitOrder?"desc":"asc":""}getBlockUnit(i){}isMobileView(){return window.innerWidth<=767?"table-responsive":""}showConfirmModal(i){this.modalService.showConfirmModal(i)}getTimeFormat(i){return p(i).format("YYYY-MM-DD HH:mm")}ngOnInit(){this.visitorService.getExpectedVisitorsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(i=>{this.visitorListData=i.filter(i=>i.isActive),Y.each(this.visitorListData,(i,t)=>{this.apartmentService.getApartmentBlockUnitById(i.apartmentUnitId).subscribe(i=>{this.visitorListData[t].blockNo=i[0].apartmentBlockNumber,this.visitorListData[t].blockUnitNo=i[0].apartmentBlockUnitNumber},i=>{})}),this.lookupService.getLookupValueByLookupTypeId(15).subscribe(i=>{this.visitTypeData=i,this.checkVisitTypeData()},i=>{}),this.lookupService.getLookupValueByLookupTypeId(8).subscribe(i=>{this.visitCategoryData=i,this.checkVisitCategoryData()},i=>{}),this.totalItems=this.visitorListData.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isVisitorDataLoaded=!0})}checkVisitTypeData(){this.visitTypeData.forEach(i=>{i.lookupValueId==this.visitorListData[0].visitTypeId&&(this.visitorListData[0].visitTypeName=i.lookupValueName.toLowerCase())})}checkVisitCategoryData(){console.log(this.visitorListData[0]),this.visitCategoryData.forEach(i=>{i.lookupValueId==this.visitorListData[0].visitorCategoryId&&(this.visitorListData[0].visitCategoryName=i.lookupValueName.toLowerCase())})}}return i.\u0275fac=function(t){return new(t||i)(s.Rb(s.r),s.Rb(l.a),s.Rb(u.a),s.Rb(d.a),s.Rb(b.a),s.Rb(v.a))},i.\u0275cmp=s.Lb({type:i,selectors:[["app-visitor-expected-visitor"]],decls:3,vars:2,consts:[[1,"expected-visitor-wrapper"],[4,"ngIf"],["class","card table-card",4,"ngIf"],[1,"card","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],[1,"btn","l-blue","mt_5"],["name","printer",1,"icon","print"],["routerLink","/user/visitor/create-visitor","routerLinkActive","active",1,"btn","lime-green","mt_5",3,"routerLinkActiveOptions","state"],["name","plus",1,"icon","plus"],[1,"card-body","p-0","customScroll"],["mdbTable","","mdbTableScroll","","scrollX","true","maxWidth","400",1,"table",3,"ngClass"],["scope","col",3,"click"],[3,"ngClass"],["scope","col"],[4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[1,"name"],["href","javascript:void(0)","placement","right","triggers","mouseenter:mouseleave",3,"ngbPopover"],["popContent",""],[1,"grey"],[1,"grey","text-capitalize"],["href","javascript:void(0)","placement","top","triggers","mouseenter:mouseleave","routerLinkActive","active",3,"ngbPopover","routerLink","routerLinkActiveOptions"],["src","assets/images/checkin-icon.svg","width","20"],["popAddCheckInContent",""],[1,"pop-desp"]],template:function(i,t){1&i&&(s.Wb(0,"div",0),s.Rc(1,Q,1,0,"app-loader",1),s.Rc(2,si,57,31,"div",2),s.Vb()),2&i&&(s.Cb(1),s.uc("ngIf",!t.isVisitorDataLoaded),s.Cb(1),s.uc("ngIf",t.isVisitorDataLoaded))},directives:[o.l,V.a,f.b,n.d,n.n,n.q,h.b,r.e,r.d,o.j,o.k,q.a,H.c],pipes:[j.c,o.t,j.b],styles:[".customScroll[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.customScroll[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{overflow:hidden!important;text-overflow:ellipsis;white-space:nowrap}"]}),i})()},{path:"add-visitor",component:F},{path:"edit-visitor/:id/:type",component:F},{path:"checkout",component:z},{path:"reports",component:(()=>{class i{constructor(i,t,e){this.lookupService=i,this.sharedService=t,this.cookieService=e,this.isDataLoaded=!1}ngOnInit(){let i={ApartmentId:parseInt(this.cookieService.get("apartmentId")),LookupTypeId:87,MenuName:"VisitorManagement"};this.lookupService.getLookupValuesByApartmentIdLookupTypeIdMenuName(i).subscribe(i=>{this.reportDataList=i,this.isDataLoaded=!0})}}return i.\u0275fac=function(t){return new(t||i)(s.Rb(d.a),s.Rb(b.a),s.Rb(v.a))},i.\u0275cmp=s.Lb({type:i,selectors:[["app-visitor-reports"]],decls:3,vars:2,consts:[[1,"reports-wrapper"],[4,"ngIf"],[1,"mb-3"],[1,"row"],["class","col-sm-6 mb-20",4,"ngFor","ngForOf"],[1,"col-sm-6","mb-20"],[1,"card","report-card"],["href","javascript:void(0)","routerLinkActive","active",1,"t-no-decor",3,"routerLink","routerLinkActiveOptions"],[1,"card-header"],[1,"card-body"]],template:function(i,t){1&i&&(s.Wb(0,"div",0),s.Rc(1,ni,1,0,"app-loader",1),s.Rc(2,bi,5,1,"ng-container",1),s.Vb()),2&i&&(s.Cb(1),s.uc("ngIf",!t.isDataLoaded),s.Cb(1),s.uc("ngIf",t.isDataLoaded))},directives:[o.l,V.a,o.k,r.e,r.d],styles:[""]}),i})()},{path:"**",redirectTo:"settings",pathMatch:"full"}];let li=(()=>{class i{}return i.\u0275mod=s.Pb({type:i}),i.\u0275inj=s.Ob({factory:function(t){return new(t||i)},imports:[[r.f.forChild(di)],r.f]}),i})();var ui=e("PCNd");let mi=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=s.Lb({type:i,selectors:[["app-visitor"]],decls:1,vars:0,template:function(i,t){1&i&&s.Sb(0,"router-outlet")},directives:[r.g],styles:[""]}),i})();e.d(t,"VisitorModule",(function(){return pi}));let pi=(()=>{class i{}return i.\u0275mod=s.Pb({type:i,bootstrap:[mi]}),i.\u0275inj=s.Ob({factory:function(t){return new(t||i)},imports:[[o.b,ui.a,li]]}),i})()}}]);