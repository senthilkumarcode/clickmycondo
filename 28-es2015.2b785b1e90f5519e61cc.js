(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{is7e:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var a=i("fXoL"),n=i("3Pt+"),o=i("ofXK"),c=i("8mtn");const l=["selectFieldElem"];function r(t,e){if(1&t){const t=a.Xb();a.Ub(0),a.Wb(1,"li",10),a.ic("click",(function(){a.Kc(t);const i=e.$implicit,n=a.mc();return n.getSelectedItem(i,n.fieldItemName)})),a.Tc(2),a.Vb(),a.Tb()}if(2&t){const t=e.$implicit,i=a.mc();a.Cb(1),a.uc("ngClass",i.isSelectedItem(i.getItemName(t,i.fieldItemName),i.fieldModel)),a.Cb(1),a.Uc(i.getItemName(t,i.fieldItemName))}}function s(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",11),a.ic("click",(function(){return a.Kc(t),a.mc().clearItems()})),a.Sb(1,"i-feather",12),a.Vb()}}let d=(()=>{class t{constructor(t,e){this.element=t,this.renderer=e,this.inputChange=new a.n,this.inputStatus=new a.n,this.isItemSelected=!1,this.isExpanded=!1}getItemName(t,e){return t[e]}isFieldRequired(){return"required"==this.fieldRequired}isSelectedItem(t,e){return t==e?"selected":""}getSelectedItem(t,e){this.fieldModel=t[e],this.inputChange.emit(t),this.isItemSelected=!0,this.isExpanded=!1}clearItems(t){this.fieldModel="",this.inputChange.emit(null),this.isItemSelected=!1,this.isExpanded=!1}onDocumentClick(t){var e=this.element.nativeElement;if(e.children.length>0){const i=e.children[0].children[0].children[1].nextSibling.classList.contains("up");e.contains(t.target)||i&&this.enableSelect()}}enableSelect(){var t=this.element.nativeElement.children[0].children[0].children[1].nextSibling,e=t.nextSibling;const i=t.classList.contains("up"),a=e.classList.contains("active");i?this.renderer.removeClass(t,"up"):this.renderer.addClass(t,"up"),a?this.renderer.removeClass(e,"active"):this.renderer.addClass(e,"active")}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.el.nativeElement.classList.contains("ng-valid")&&this.inputStatus.emit(!0)},200)}ngDoCheck(){"null"!=this.fieldModel&&"undefined"!=this.fieldModel&&0!=this.fieldModel||(this.fieldModel=null)}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(a.l),a.Rb(a.E))},t.\u0275cmp=a.Lb({type:t,selectors:[["app-simple-select-box"]],viewQuery:function(t,e){var i;1&t&&a.Pc(l,!0),2&t&&a.Gc(i=a.jc())&&(e.el=i.first)},hostBindings:function(t,e){1&t&&a.ic("click",(function(t){return e.onDocumentClick(t)}),!1,a.Ic)},inputs:{fieldName:"fieldName",fieldText:"fieldText",fieldPlaceholder:"fieldPlaceholder",fieldModel:"fieldModel",fieldRequired:"fieldRequired",fieldList:"fieldList",fieldClass:"fieldClass",isDisabled:"isDisabled",fieldItemName:"fieldItemName",isLabel:"isLabel"},outputs:{inputChange:"inputChange",inputStatus:"inputStatus"},features:[a.Bb([],[{provide:n.c,useExisting:n.p}])],decls:11,vars:16,consts:[["name","selectFieldForm","novalidate",""],["selectFieldForm","ngForm"],[1,"select-group","form-group",3,"ngClass"],[3,"for","ngClass"],["type","text","readonly","","autocomplete","off",3,"placeholder","name","required","ngModel","readonly","ngModelChange","click"],["selectFieldElem",""],[1,"select-arrow","down",3,"ngClass"],[1,"select-list-dropdown",3,"ngClass"],[4,"ngFor","ngForOf"],["class","clear-filter",3,"click",4,"ngIf"],[3,"ngClass","click"],[1,"clear-filter",3,"click"],["name","x",1,"icon","del"]],template:function(t,e){1&t&&(a.Wb(0,"form",0,1),a.Wb(2,"div",2),a.Wb(3,"label",3),a.Tc(4),a.Vb(),a.Wb(5,"input",4,5),a.ic("ngModelChange",(function(t){return e.fieldModel=t}))("click",(function(){return e.isExpanded=!e.isExpanded})),a.Vb(),a.Sb(7,"span",6),a.Wb(8,"div",7),a.Rc(9,r,3,2,"ng-container",8),a.Vb(),a.Rc(10,s,2,0,"div",9),a.Vb(),a.Vb()),2&t&&(a.Cb(2),a.uc("ngClass",e.isDisabled?"disabled":""),a.Cb(1),a.vc("for",e.fieldName),a.uc("ngClass","true"==e.isLabel?"":"d-none"),a.Cb(1),a.Uc(e.fieldText),a.Cb(1),a.Gb("form-control simple-select ",e.fieldClass,""),a.vc("placeholder",e.fieldPlaceholder),a.vc("name",e.fieldName),a.uc("required",e.isFieldRequired()?"required":null)("ngModel",e.fieldModel)("readonly",e.isDisabled),a.Cb(2),a.uc("ngClass",e.isExpanded?"up":""),a.Cb(1),a.uc("ngClass",e.isExpanded?"active":""),a.Cb(1),a.uc("ngForOf",e.fieldList),a.Cb(1),a.uc("ngIf",e.isItemSelected))},directives:[n.B,n.o,n.p,o.j,n.d,n.x,n.n,n.q,o.k,o.l,c.b],styles:['@charset "UTF-8";.select-group[_ngcontent-%COMP%]{position:relative}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%]{cursor:pointer;color:#8391a1}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%], .select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%]:focus{box-shadow:0 1px 3px 0 rgba(25,28,30,.1);-moz-box-shadow:0 1px 3px 0 rgba(25,28,30,.1);-webkit-box-shadow:0 1px 3px 0 rgba(25,28,30,.1);border:1px solid hsla(0,0%,91.8%,.8)!important}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%]:focus{background-color:#fff!important}.select-group[_ngcontent-%COMP%]   .simple-select[readonly][_ngcontent-%COMP%]{background-color:#f9f9f9!important;pointer-events:none}.select-group[_ngcontent-%COMP%]   .simple-select[readonly][_ngcontent-%COMP%]:-webkit-autofill{-webkit-box-shadow:0 0 0 1000px #e6e6e6 inset;-webkit-text-fill-color:#e6e6e6}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow[_ngcontent-%COMP%]{position:relative;top:-30px;right:20px;float:right}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow[_ngcontent-%COMP%]:before{position:absolute;font-family:FontAwesome;font-size:1.6rem;left:0!important}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow[_ngcontent-%COMP%]:after{content:none}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow.down[_ngcontent-%COMP%]:before{content:"\uf107"}.select-group[_ngcontent-%COMP%]   .simple-select[_ngcontent-%COMP%] + .select-arrow.up[_ngcontent-%COMP%]:before{content:"\uf106"}.select-group[_ngcontent-%COMP%]   .clear-filter[_ngcontent-%COMP%]{position:absolute;right:-18px;top:12px;float:right}.select-group[_ngcontent-%COMP%]   .clear-filter[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:15px}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]{position:absolute;background:#fff;display:none;float:left;max-height:250px;min-width:200px;overflow:auto;z-index:1000;box-shadow:0 2px 12px rgba(0,0,0,.15);-moz-box-shadow:0 2px 12px rgba(0,0,0,.15);-webkit-box-shadow:0 2px 12px rgba(0,0,0,.15);border:1px solid #eaeaea;margin:3px 0 0}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;color:#8391a1;font-family:Lato,sans-serif;font-weight:400;letter-spacing:.3px;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;font-size:1.4rem;padding:7px 15px 6px;cursor:pointer;text-transform:capitalize}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #eaeaea}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:8px}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f3f5f7}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#f3f5f7;position:relative;color:#373946}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:after{content:"";background-image:url(https://senthilkumarcode.github.io/clickmycondo/assets/images/tick-icon.svg);width:12px;height:12px;position:absolute;background-repeat:no-repeat;right:25px;top:10px}.select-group[_ngcontent-%COMP%]   .select-list-dropdown.active[_ngcontent-%COMP%]{display:block}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_inside[_ngcontent-%COMP%] > .mCSB_container[_ngcontent-%COMP%]{margin-right:0!important}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_scrollTools[_ngcontent-%COMP%]{right:0!important;margin:5px 0}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_scrollTools[_ngcontent-%COMP%]   .mCSB_dragger[_ngcontent-%COMP%]   .mCSB_dragger_bar[_ngcontent-%COMP%]{background:#e5e5e5;width:10px;border-radius:4px!important}.select-group[_ngcontent-%COMP%]   .select-list-dropdown[_ngcontent-%COMP%]   .mCSB_scrollTools[_ngcontent-%COMP%]   .mCSB_draggerRail[_ngcontent-%COMP%]{width:12px;background:#f6f8f8;border-radius:4px!important}']}),t})()},n8yt:function(t,e,i){"use strict";i.r(e);var a=i("ofXK"),n=i("tyNb"),o=i("fXoL");let c=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Lb({type:t,selectors:[["app-facility-reports"]],decls:2,vars:0,template:function(t,e){1&t&&(o.Wb(0,"p"),o.Tc(1," facility-reports works!\n"),o.Vb())},styles:[""]}),t})();var l=i("GUTR"),r=i("ThaB"),s=i("wbvY"),d=i("JK/P"),m=i("wd/R"),b=i("0IaG"),u=i("b6Qw"),g=i("668k"),p=i("8mtn"),f=i("wlDI"),h=i("3Pt+"),y=i("BR9Y"),C=i("BniF"),v=i("CzEO");function I(t,e){1&t&&o.Sb(0,"app-loader")}function S(t,e){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"form",3,4),o.ic("ngSubmit",(function(){o.Kc(t);const e=o.Hc(2);return o.mc().submitAddFacilitySlotForm(e)})),o.Wb(3,"div",5),o.Wb(4,"div",6),o.Wb(5,"div",7),o.Wb(6,"label"),o.Tc(7,"Begin Time*"),o.Vb(),o.Wb(8,"input",8),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().slot.slotBeginTime=e}))("dateTimeInput",(function(){return o.Kc(t),o.mc().emitSlotTime()})),o.Vb(),o.Sb(9,"owl-date-time",9,10),o.Wb(11,"div",11),o.Sb(12,"i-feather",12),o.Vb(),o.Vb(),o.Vb(),o.Wb(13,"div",6),o.Wb(14,"div",7),o.Wb(15,"label"),o.Tc(16,"End Time*"),o.Vb(),o.Wb(17,"input",13),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().slot.slotEndTime=e}))("dateTimeInput",(function(){return o.Kc(t),o.mc().emitSlotTime()})),o.Vb(),o.Sb(18,"owl-date-time",9,14),o.Wb(20,"div",11),o.Sb(21,"i-feather",12),o.Vb(),o.Vb(),o.Vb(),o.Wb(22,"div",6),o.Wb(23,"div",7),o.Wb(24,"label"),o.Tc(25,"Cost (in rs)*"),o.Vb(),o.Wb(26,"input",15),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().slot.cost=e})),o.Vb(),o.Vb(),o.Vb(),o.Wb(27,"div",16),o.Wb(28,"div",7),o.Wb(29,"label"),o.Tc(30,"Comments"),o.Vb(),o.Wb(31,"textarea",17),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().slot.comment=e})),o.Vb(),o.Vb(),o.Vb(),o.Wb(32,"div",18),o.Wb(33,"button",19),o.Tc(34,"Submit"),o.Vb(),o.Wb(35,"div",20),o.ic("click",(function(){o.Kc(t);const e=o.mc();return e.showConfirmModal(e.slot)})),o.Tc(36,"Delete"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Tb()}if(2&t){const t=o.Hc(2),e=o.Hc(10),i=o.Hc(19),a=o.mc();o.Cb(8),o.uc("owlDateTime",e)("owlDateTimeTrigger",e)("ngModel",a.slot.slotBeginTime),o.Cb(1),o.uc("pickerType","timer"),o.Cb(2),o.uc("owlDateTimeTrigger",e),o.Cb(6),o.uc("min",a.minEndTime)("owlDateTime",i)("owlDateTimeTrigger",i)("ngModel",a.slot.slotEndTime),o.Cb(1),o.uc("pickerType","timer"),o.Cb(2),o.uc("owlDateTimeTrigger",i),o.Cb(6),o.uc("ngModel",a.slot.cost),o.Cb(5),o.uc("ngModel",a.slot.comment),o.Cb(2),o.uc("disabled",t.invalid)}}let T=(()=>{class t{constructor(t,e,i,a,n){this.injector=t,this.dialog=e,this.facilityService=i,this.sharedService=a,this.cookieService=n,this.alertMessage="",this.isError=!1,this.isSlotSubmitted=!0,this.facilityParams=new o.n,this.modalService=this.injector.get(d.a)}submitAddFacilitySlotForm(t){if(this.isSlotSubmitted=!1,"new"==this.type){let t={apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentFacilityId:this.slot.apartmentFacilityId,slotBeginTime:m(this.slot.slotBeginTime).format("HH:mm:ss"),slotEndTime:m(this.slot.slotEndTime).format("HH:mm:ss"),cost:this.slot.cost,comment:this.slot.comment,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-16T12:34:36.708Z",updatedBy:0,updatedOn:"2019-12-16T12:34:36.709Z"};this.facilityService.addApartmentFacilitySlot(t).subscribe(t=>{t.message&&(this.facilityParams.emit(!0),this.isSlotSubmitted=!0,this.sharedService.setAlertMessage("Slot added successfully"))},t=>{this.isError=!0,this.alertMessage="Some error occured"})}else{let t={apartmentFacilitySlotId:this.slot.apartmentFacilitySlotId,apartmentId:parseInt(this.cookieService.get("apartmentId")),apartmentFacilityId:this.slot.apartmentFacilityId,slotBeginTime:m(this.slot.slotBeginTime).format("HH:mm:ss"),slotEndTime:m(this.slot.slotEndTime).format("HH:mm:ss"),cost:this.slot.cost,comment:this.slot.comment,isActive:!0,insertedBy:0,insertedOn:"2019-12-16T12:34:36.708Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-16T12:34:36.709Z"};this.facilityService.updateApartmentFacilitySlot(t).subscribe(t=>{t.message&&(this.facilityParams.emit(!0),this.isSlotSubmitted=!0,this.sharedService.setAlertMessage("Slot updated successfully"))},t=>{this.isError=!0,this.alertMessage="Some error occured"})}}emitSlotTime(){this.minEndTime=m(this.slot.slotBeginTime,"HH:mm:ss").toDate(),m(this.slot.slotBeginTime),m(this.slot.slotEndTime)}showConfirmModal(t){this.modalService.showConfirmModal(t)}ngOnInit(){"new"!=this.type?(this.slot.slotBeginTime=m(this.slot.slotBeginTime,"HH:mm:ss").toDate(),this.slot.slotEndTime=m(this.slot.slotEndTime,"HH:mm:ss").toDate()):this.slot.comment="",this.sharedService.unitlistdeleteindexcast.subscribe(t=>{if(null!=t){var e={apartmentFacilityBookingId:t.apartmentFacilitySlotId,deleteBy:parseInt(this.cookieService.get("userId"))};this.facilityService.deleteApartmentFacilitySlot(e).subscribe(t=>{this.facilityParams.emit(!0),this.sharedService.setUnitListDeleteIndex(null)},t=>{console.log(t)})}})}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(o.r),o.Rb(b.b),o.Rb(l.a),o.Rb(s.a),o.Rb(u.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-add-facility-slot"]],inputs:{slot:"slot",facilityId:"facilityId",type:"type"},outputs:{facilityParams:"facilityParams"},decls:4,vars:4,consts:[[1,"facility-add-slot-wrapper"],[3,"message","isError"],[4,"ngIf"],["name","addStaffForm","novalidate","",3,"ngSubmit"],["addFacilitySlotForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["name","slotBeginTime","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange","dateTimeInput"],[3,"pickerType"],["slotBeginTime",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","clock","width","18",1,"icon","time","float-left"],["name","slotEndTime","placeholder","Time","required","",1,"form-control",3,"min","owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange","dateTimeInput"],["slotEndTime",""],["type","number","OnlyNumber","true","placeholder","Enter value","name","cost","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],["placeholder","some text here","name","comments",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-right"],[1,"btn","blue","mr-3",3,"disabled"],[1,"btn","trans-red",3,"click"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Sb(1,"app-alert-message",1),o.Rc(2,I,1,0,"app-loader",2),o.Rc(3,S,37,14,"ng-container",2),o.Vb()),2&t&&(o.Cb(1),o.uc("message",e.alertMessage)("isError",e.isError),o.Cb(1),o.uc("ngIf",!e.isSlotSubmitted),o.Cb(1),o.uc("ngIf",e.isSlotSubmitted))},directives:[f.a,a.l,g.a,h.B,h.o,h.p,C.c,h.d,h.x,C.e,h.n,h.q,C.b,p.b,h.s,y.a],styles:[""]}),t})();function M(t,e){1&t&&o.Sb(0,"app-loader")}function V(t,e){if(1&t&&(o.Wb(0,"p"),o.Tc(1),o.Vb()),2&t){const t=o.mc().$implicit,e=o.mc(2);o.Cb(1),o.Wc("",t.amount,"rs/- per ",e.getRateBase(t.rateBaseId),"")}}function k(t,e){1&t&&(o.Wb(0,"p"),o.Tc(1,"Free"),o.Vb())}const W=function(){return{exact:!0}};function F(t,e){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"li",7),o.Wb(2,"div",8),o.Wb(3,"div",13),o.Wb(4,"div",14),o.Wb(5,"a",15),o.Sb(6,"i-feather",16),o.Vb(),o.Wb(7,"a",17),o.Wb(8,"i-feather",18),o.ic("click",(function(){o.Kc(t);const i=e.$implicit;return o.mc(2).updateFacilityCategory(i)})),o.Vb(),o.Vb(),o.Vb(),o.Wb(9,"h6"),o.Tc(10),o.Vb(),o.Rc(11,V,2,2,"p",1),o.Rc(12,k,2,0,"p",1),o.Wb(13,"div",19),o.Wb(14,"p"),o.Tc(15),o.Vb(),o.Wb(16,"div",20),o.Wb(17,"a",21),o.ic("click",(function(){o.Kc(t);const i=e.$implicit;return o.mc(2).addNewSlot(i)})),o.Sb(18,"i-feather",22),o.Wb(19,"span"),o.Tc(20,"Add Slot"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Tb()}if(2&t){const t=e.$implicit,i=o.mc(2);o.Cb(5),o.wc("routerLink","/ams/facility/view/",t.apartmentFacilityId,""),o.uc("routerLinkActiveOptions",o.Ac(6,W)),o.Cb(5),o.Uc(t.facilityName),o.Cb(1),o.uc("ngIf",t.amount>0),o.Cb(1),o.uc("ngIf",0==t.amount),o.Cb(3),o.Vc("",i.getSlots(t.apartmentFacilitySlot).length," Slot(s)")}}function w(t,e){if(1&t){const t=o.Xb();o.Wb(0,"div",4),o.Wb(1,"h4",5),o.Tc(2,"Facilities"),o.Vb(),o.Rc(3,F,21,7,"ng-container",6),o.Wb(4,"li",7),o.Wb(5,"div",8),o.Wb(6,"div",9),o.Wb(7,"a",10),o.ic("click",(function(){return o.Kc(t),o.mc().addNewFacilityCategory()})),o.Wb(8,"div",11),o.Tc(9,"+"),o.Vb(),o.Vb(),o.Wb(10,"h6",12),o.Tc(11,"Add New Facility"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&t){const t=o.mc();o.Cb(3),o.uc("ngForOf",t.facilityCategoryData)}}function B(t,e){1&t&&(o.Wb(0,"h6"),o.Tc(1,"Add Facility"),o.Vb())}function x(t,e){1&t&&(o.Wb(0,"h6"),o.Tc(1,"Edit Facility"),o.Vb())}function D(t,e){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"li",69),o.Wb(2,"span",25),o.Tc(3),o.Vb(),o.Wb(4,"span",70),o.Tc(5),o.Vb(),o.Vb(),o.Wb(6,"div",71),o.Wb(7,"div",32),o.Wb(8,"app-add-facility-slot",72),o.ic("facilityParams",(function(e){return o.Kc(t),o.mc(3).getFacilityParams(e)})),o.Vb(),o.Vb(),o.Vb(),o.Tb()}if(2&t){const t=e.$implicit,i=e.index,a=o.mc(3);o.Cb(1),o.Eb("data-target","#slotCollapse",i,""),o.Eb("aria-controls","Collapse",i,""),o.Cb(2),o.Vc("Slot",i+1,""),o.Cb(2),o.Wc("",a.getSlotTime(t.slotBeginTime)," - ",a.getSlotTime(t.slotEndTime),""),o.Cb(1),o.wc("id","slotCollapse",i,""),o.Eb("aria-labelledby","Collapse",i,""),o.Cb(2),o.uc("slot",t)("facilityId",a.facility.apartmentFacilityId)}}function O(t,e){if(1&t&&(o.Ub(0),o.Rc(1,D,9,9,"ng-container",6),o.Tb()),2&t){const t=o.mc(2);o.Cb(1),o.uc("ngForOf",t.getSlots(t.facility.apartmentFacilitySlot))}}function L(t,e){if(1&t&&(o.Ub(0),o.Wb(1,"li",73),o.Tc(2,"No Slots Available"),o.Vb(),o.Sb(3,"div",74),o.Tb()),2&t){const t=o.mc(2);o.Cb(1),o.uc("ngClass",0==t.facilitySlotLength?"no-drop":"")}}function P(t,e){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"li",75),o.Tc(2,"New Slot"),o.Vb(),o.Wb(3,"div",76),o.Wb(4,"div",32),o.Wb(5,"app-add-facility-slot",77),o.ic("facilityParams",(function(e){return o.Kc(t),o.mc(2).getFacilityParams(e)})),o.Vb(),o.Vb(),o.Vb(),o.Tb()}if(2&t){const t=o.mc(2);o.Cb(5),o.uc("slot",t.facility)("facilityId",t.facility.apartmentFacilityId)}}function N(t,e){if(1&t){const t=o.Xb();o.Wb(0,"div",23),o.Wb(1,"div",24),o.Wb(2,"div",25),o.Rc(3,B,2,0,"h6",1),o.Rc(4,x,2,0,"h6",1),o.Vb(),o.Wb(5,"div",26),o.ic("click",(function(){return o.Kc(t),o.mc().removeCategoryBox()})),o.Sb(6,"i-feather",27),o.Vb(),o.Vb(),o.Wb(7,"div",28),o.Wb(8,"ul",29),o.Wb(9,"li",30),o.Tc(10,"Facility Info"),o.Vb(),o.Wb(11,"div",31),o.Wb(12,"div",32),o.Sb(13,"app-alert-message",33),o.Wb(14,"form",34,35),o.ic("ngSubmit",(function(){o.Kc(t);const e=o.Hc(15);return o.mc().submitFacilitySettingsForm(e)})),o.Wb(16,"div",36),o.Wb(17,"div",37),o.Wb(18,"div",38),o.Wb(19,"label"),o.Tc(20,"Facility Name*"),o.Vb(),o.Wb(21,"input",39),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.facilityName=e})),o.Vb(),o.Vb(),o.Vb(),o.Wb(22,"div",37),o.Wb(23,"div",40),o.Wb(24,"label"),o.Tc(25,"Approval Required* "),o.Vb(),o.Wb(26,"div",41),o.Wb(27,"input",42),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.approvalRequired=e})),o.Vb(),o.Wb(28,"label",43),o.Tc(29,"Yes"),o.Vb(),o.Vb(),o.Wb(30,"div",41),o.Wb(31,"input",44),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.approvalRequired=e})),o.Vb(),o.Wb(32,"label",45),o.Tc(33,"No"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(34,"div",37),o.Wb(35,"div",40),o.Wb(36,"label"),o.Tc(37,"Rate Type*"),o.Vb(),o.Wb(38,"div",41),o.Wb(39,"input",46),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.rateBaseId=e})),o.Vb(),o.Wb(40,"label",47),o.Tc(41,"Hour"),o.Vb(),o.Vb(),o.Wb(42,"div",41),o.Wb(43,"input",48),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.rateBaseId=e})),o.Vb(),o.Wb(44,"label",49),o.Tc(45,"Day"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(46,"div",37),o.Wb(47,"div",40),o.Wb(48,"label"),o.Tc(49,"Service Type*"),o.Vb(),o.Wb(50,"div",41),o.Wb(51,"input",50),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.facilityTypeId=e})),o.Vb(),o.Wb(52,"label",51),o.Tc(53,"Paid"),o.Vb(),o.Vb(),o.Wb(54,"div",41),o.Wb(55,"input",52),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.facilityTypeId=e})),o.Vb(),o.Wb(56,"label",53),o.Tc(57,"Free"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(58,"div",37),o.Wb(59,"div",38),o.Wb(60,"label"),o.Tc(61),o.Vb(),o.Wb(62,"input",54),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.amount=e})),o.Vb(),o.Vb(),o.Vb(),o.Wb(63,"div",37),o.Wb(64,"div",38),o.Wb(65,"label"),o.Tc(66,"Deposit (in rs)*"),o.Vb(),o.Wb(67,"input",55),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.cautionDeposit=e})),o.Vb(),o.Vb(),o.Vb(),o.Wb(68,"div",37),o.Wb(69,"div",38),o.Wb(70,"label"),o.Tc(71,"Auto Cancel (in days)*"),o.Vb(),o.Wb(72,"input",56),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.autoCancelDays=e})),o.Vb(),o.Vb(),o.Vb(),o.Wb(73,"div",37),o.Wb(74,"div",38),o.Wb(75,"label"),o.Tc(76,"Min Hours Booking*"),o.Vb(),o.Wb(77,"input",57),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.minHoursBooking=e})),o.Vb(),o.Vb(),o.Vb(),o.Wb(78,"div",37),o.Wb(79,"div",38),o.Wb(80,"label"),o.Tc(81,"Min Time Limit*"),o.Vb(),o.Wb(82,"input",58),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.minTimeLimit=e})),o.Vb(),o.Sb(83,"owl-date-time",59,60),o.Wb(85,"div",61),o.Sb(86,"i-feather",62),o.Vb(),o.Vb(),o.Vb(),o.Wb(87,"div",37),o.Wb(88,"div",38),o.Wb(89,"label"),o.Tc(90,"Max Time Limit*"),o.Vb(),o.Wb(91,"input",63),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.maxTimeLimit=e})),o.Vb(),o.Sb(92,"owl-date-time",59,64),o.Wb(94,"div",61),o.Sb(95,"i-feather",62),o.Vb(),o.Vb(),o.Vb(),o.Wb(96,"div",65),o.Wb(97,"div",38),o.Wb(98,"label"),o.Tc(99,"Description"),o.Vb(),o.Wb(100,"quill-editor",66),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().facility.description=e}))("onContentChanged",(function(e){return o.Kc(t),o.mc().onContentChanged(e)})),o.Vb(),o.Vb(),o.Vb(),o.Wb(101,"div",67),o.Wb(102,"button",68),o.Tc(103,"Submit"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Rc(104,O,2,1,"ng-container",1),o.Rc(105,L,4,1,"ng-container",1),o.Rc(106,P,6,2,"ng-container",1),o.Vb(),o.Vb(),o.Vb()}if(2&t){const t=o.Hc(15),e=o.Hc(84),i=o.Hc(93),a=o.mc();o.Cb(3),o.uc("ngIf",a.isFacilityCategoryNew),o.Cb(1),o.uc("ngIf",!a.isFacilityCategoryNew),o.Cb(5),o.uc("ngClass",a.isSlotNew?"collapsed":""),o.Cb(2),o.uc("ngClass",a.isSlotNew?"":"show"),o.Cb(2),o.uc("message",a.alertMessage)("isError",a.isCategoryError),o.Cb(8),o.uc("ngModel",a.facility.facilityName),o.Cb(6),o.uc("ngModel",a.facility.approvalRequired)("value",!0),o.Cb(4),o.uc("ngModel",a.facility.approvalRequired)("value",!1),o.Cb(8),o.uc("ngModel",a.facility.rateBaseId),o.Cb(4),o.uc("ngModel",a.facility.rateBaseId),o.Cb(8),o.uc("ngModel",a.facility.facilityTypeId),o.Cb(4),o.uc("ngModel",a.facility.facilityTypeId),o.Cb(6),o.Vc("Cost (in rs)* ",a.facility.amount,""),o.Cb(1),o.uc("ngModel",a.facility.amount),o.Cb(5),o.uc("ngModel",a.facility.cautionDeposit),o.Cb(5),o.uc("ngModel",a.facility.autoCancelDays),o.Cb(5),o.uc("ngModel",a.facility.minHoursBooking),o.Cb(5),o.uc("owlDateTime",e)("owlDateTimeTrigger",e)("ngModel",a.facility.minTimeLimit),o.Cb(1),o.uc("pickerType","timer"),o.Cb(2),o.uc("owlDateTimeTrigger",e),o.Cb(6),o.uc("owlDateTime",i)("owlDateTimeTrigger",i)("ngModel",a.facility.maxTimeLimit),o.Cb(1),o.uc("pickerType","timer"),o.Cb(2),o.uc("owlDateTimeTrigger",i),o.Cb(6),o.uc("ngModel",a.facility.description)("placeholder",a.editorPlacehorder),o.Cb(2),o.uc("disabled",t.invalid),o.Cb(2),o.uc("ngIf",!a.isFacilityCategoryNew),o.Cb(1),o.uc("ngIf",0==a.facilitySlotLength),o.Cb(1),o.uc("ngIf",a.isSlotNew)}}let A=(()=>{class t{constructor(t,e,i,a,n,o){this.injector=t,this.dialog=e,this.facilityService=i,this.lookupService=a,this.sharedService=n,this.cookieService=o,this.isFacilityCategoryLoaded=!1,this.isEditFacilityCategory=!1,this.isFacilityCategoryNew=!1,this.isFacilityCategoryUpdate=!1,this.isSlotNew=!1,this.isCategoryError=!1,this.alertMessage="",this.facilityAmount="",this.modalService=this.injector.get(d.a)}onContentChanged(t){this.facility.description=t.html}submitFacilitySettingsForm(t){if(this.isFacilityCategoryLoaded=!1,this.isFacilityCategoryNew){let t={facilityName:this.facility.facilityName,description:this.facility.description,apartmentId:parseInt(this.cookieService.get("apartmentId")),rateBaseId:parseInt(this.facility.rateBaseId),amount:this.facility.amount,approvalRequired:this.facility.approvalRequired,isApproved:!0,facilityTypeId:parseInt(this.faclityTypeId),minHoursBooking:this.facility.minHoursBooking,autoCancelDays:this.facility.autoCancelDays,cautionDeposit:this.facility.cautionDeposit,minTimeLimit:m(this.facility.minTimeLimit).format("HH:mm:ss"),maxTimeLimit:m(this.facility.maxTimeLimit).format("HH:mm:ss"),fileAttachmentId:null,isActive:!0,insertedBy:parseInt(this.cookieService.get("userId")),insertedOn:"2019-12-15T08:45:26.010Z",updatedBy:0,updatedOn:"2019-12-15T08:45:26.010Z",apartmentFacilitySlot:null};this.facilityService.addApartmentFacility(t).subscribe(t=>{t.message?(this.isFacilityCategoryLoaded=!0,this.sharedService.setAlertMessage("Facility added successfully")):(this.isFacilityCategoryLoaded=!0,this.isCategoryError=!0,this.alertMessage=t.errorMessage)},t=>{this.isFacilityCategoryLoaded=!0,this.isCategoryError=!0,this.alertMessage="Some error occured"})}else{let t={apartmentFacilityId:this.facility.apartmentFacilityId,facilityName:this.facility.facilityName,description:this.facility.description,apartmentId:parseInt(this.cookieService.get("apartmentId")),rateBaseId:parseInt(this.facility.rateBaseId),amount:this.facility.amount,approvalRequired:this.facility.approvalRequired,isApproved:!0,facilityTypeId:parseInt(this.facility.facilityTypeId),minHoursBooking:this.facility.minHoursBooking,autoCancelDays:this.facility.autoCancelDays,cautionDeposit:this.facility.cautionDeposit,minTimeLimit:m(this.facility.minTimeLimit).format("HH:mm:ss"),maxTimeLimit:m(this.facility.maxTimeLimit).format("HH:mm:ss"),fileAttachmentId:null,isActive:!0,insertedBy:0,insertedOn:"2019-12-15T08:45:26.010Z",updatedBy:parseInt(this.cookieService.get("userId")),updatedOn:"2019-12-15T08:45:26.010Z",apartmentFacilitySlot:null};this.facilityService.updateApartmentFacility(t).subscribe(t=>{t.message?(this.isFacilityCategoryLoaded=!0,this.isFacilityCategoryLoaded=!1,this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.facilityCategoryData=t.filter(t=>t.isActive),this.isFacilityCategoryLoaded=!0,this.sharedService.setAlertMessage("Facility updated successfully"),console.log(t)},t=>{})):(this.isFacilityCategoryLoaded=!0,this.isCategoryError=!0,this.alertMessage=t.errorMessage)},t=>{this.isFacilityCategoryLoaded=!0,this.isCategoryError=!0,this.alertMessage="Some error occured"})}}addNewFacilityCategory(){this.isFacilityCategoryNew=!0,this.isSlotNew=!1,this.facility={}}addNewSlot(t){this.isFacilityCategoryUpdate=!0,this.isFacilityCategoryNew=!1,this.isSlotNew=!0,this.updatefacilityData(t)}updateFacilityCategory(t){this.isFacilityCategoryUpdate=!0,this.isFacilityCategoryNew=!1,this.isSlotNew=!1,this.updatefacilityData(t)}updatefacilityData(t){this.facility=t,this.facility.rateBaseId=t.rateBaseId.toString(),this.facility.facilityTypeId=t.facilityTypeId.toString(),this.facility.minTimeLimit=m(t.minTimeLimit,"HH:mm:ss").toDate(),this.facility.maxTimeLimit=m(t.maxTimeLimit,"HH:mm:ss").toDate(),this.facilitySlotLength=t.apartmentFacilitySlot.length}removeCategoryBox(){this.isFacilityCategoryNew=!1,this.isFacilityCategoryUpdate=!1,this.isCategoryError=!1}getRateBase(t){return 138==t?"Hour":"Day"}getSlots(t){return t.filter(t=>t.isActive)}getSlotTime(t){return m(t).format("HH:mm A")}getFacilityParams(t){this.isFacilityCategoryLoaded=!1,this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.facilityCategoryData=t.filter(t=>t.isActive),this.isFacilityCategoryLoaded=!0},t=>{})}ngOnInit(){this.facility={},this.facility.description="",this.facility.rateBaseId="",this.facility.facilityTypeId="",this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.facilityCategoryData=t.filter(t=>t.isActive),this.isFacilityCategoryLoaded=!0},t=>{})}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(o.r),o.Rb(b.b),o.Rb(l.a),o.Rb(r.a),o.Rb(s.a),o.Rb(u.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-facility-setup"]],decls:4,vars:3,consts:[[1,"facility-settings-wrapper"],[4,"ngIf"],["class","category-list list-boxes big",4,"ngIf"],["class","card mt-20",4,"ngIf"],[1,"category-list","list-boxes","big"],[1,"main-title-mini"],[4,"ngFor","ngForOf"],[1,"list-inline-item"],[1,"card"],[1,"card-body","new","text-center"],["href","javascript:void(0)",1,"rounded-btn","green",3,"click"],[1,"icon"],[1,"tc-green"],[1,"card-body","nohover"],[1,"icons"],["href","javascript:void(0)","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["name","eye",1,"icon","view"],["href","javascript:void(0)"],["name","edit",1,"icon","edit",3,"click"],[1,"bottom"],[1,"ml-auto"],[1,"btn","sf","trans-white","hover-green",3,"click"],["name","plus",1,"icon","sm","plus"],[1,"card","mt-20"],[1,"card-header"],[1,"float-left"],[1,"float-right",3,"click"],["name","x",1,"icon","del"],["id","accordion",1,"card-body","p-0"],[1,"list-group","tabs","clear"],["data-toggle","collapse","data-target","#facilityCollapse","aria-expanded","true","aria-controls","facilityCollapseOne",1,"list-group-item",3,"ngClass"],["id","facilityCollapse","aria-labelledby","facilityCollapseOne","data-parent","#accordion",1,"collapse",3,"ngClass"],[1,"details"],[3,"message","isError"],["name","visitorSettingsForm","novalidate","",3,"ngSubmit"],["facilitySettingsForm","ngForm"],[1,"row"],[1,"col-sm-4"],[1,"input-box"],["type","text","placeholder","Enter text","name","staffCategory","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-box","radio-box"],[1,"form-group"],["name","approvalType","id","Yes","type","radio","required","",3,"ngModel","value","ngModelChange"],["for","Yes",1,"radio-inline"],["name","approvalType","id","No","type","radio","required","",3,"ngModel","value","ngModelChange"],["for","No",1,"radio-inline"],["name","faclityRateBaseId","id","hourType","value","138","type","radio","required","",3,"ngModel","ngModelChange"],["for","hourType",1,"radio-inline"],["name","faclityRateBaseId","id","dayType","value","139","type","radio","required","",3,"ngModel","ngModelChange"],["for","dayType",1,"radio-inline"],["name","faclityTypeId","id","paidType","value","184","type","radio","required","",3,"ngModel","ngModelChange"],["for","paidType",1,"radio-inline"],["name","faclityTypeId","id","freeType","value","185","type","radio","required","",3,"ngModel","ngModelChange"],["for","freeType",1,"radio-inline"],["type","number","OnlyNumber","true","placeholder","Enter value","name","amount","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","deposit","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","autoCancelDays","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","OnlyNumber","true","placeholder","Enter value","name","minHoursBooking","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","minTimeLimit","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],[3,"pickerType"],["minTimeLimit",""],[1,"date-btn",3,"owlDateTimeTrigger"],["name","clock","width","18",1,"icon","time","float-left"],["name","maxTimeLimit","placeholder","Time","required","",1,"form-control",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange"],["maxTimeLimit",""],[1,"col-sm-12"],["name","description",1,"quill-editor",3,"ngModel","placeholder","ngModelChange","onContentChanged"],[1,"col-sm-12","text-right"],[1,"btn","blue","mr-2",3,"disabled"],["data-toggle","collapse","aria-expanded","true",1,"list-group-item","collapsed"],[1,"float-left","badge","time","ml-3","mt-2"],["data-parent","#accordion",1,"collapse",3,"id"],["type","edit",3,"slot","facilityId","facilityParams"],["data-toggle","collapse","data-target","#facilityNewCollapse","aria-expanded","true","aria-controls","facilityCollapseNewOne",1,"list-group-item","collapsed",3,"ngClass"],["id","facilityNewCollapse","attr.aria-labelledby","facilityCollapseNewOne","data-parent","#accordion",1,"collapse"],["data-toggle","collapse","data-target","#facilitySlotNew","aria-expanded","true","aria-controls","facilityNewSlot",1,"list-group-item"],["id","facilitySlotNew","aria-labelledby","facilityNewSlot","data-parent","#accordion",1,"collapse","show"],["type","new",3,"slot","facilityId","facilityParams"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Rc(1,M,1,0,"app-loader",1),o.Rc(2,w,12,1,"div",2),o.Rc(3,N,107,36,"div",3),o.Vb()),2&t&&(o.Cb(1),o.uc("ngIf",!e.isFacilityCategoryLoaded),o.Cb(1),o.uc("ngIf",e.isFacilityCategoryLoaded),o.Cb(1),o.uc("ngIf",e.isFacilityCategoryNew||e.isFacilityCategoryUpdate))},directives:[a.l,g.a,a.k,n.e,n.d,p.b,a.j,f.a,h.B,h.o,h.p,h.d,h.x,h.n,h.q,h.u,h.s,y.a,C.c,C.e,C.b,v.a,T],styles:[""]}),t})();var _=i("Nw7d"),R=i("NutR"),E=i("F/us"),H=i("is7e"),K=i("6nBg"),q=i("NhFE"),U=i("bvAq");function Y(t,e){1&t&&o.Sb(0,"app-loader")}function j(t,e){if(1&t&&(o.Wb(0,"span"),o.Tc(1),o.Vb()),2&t){const t=o.mc().$implicit;o.Cb(1),o.Uc(t.amount)}}function X(t,e){1&t&&(o.Wb(0,"span"),o.Tc(1,"Free"),o.Vb())}const z=function(){return{exact:!0}};function $(t,e){if(1&t){const t=o.Xb();o.Wb(0,"tr",28),o.Wb(1,"td",29),o.Tc(2),o.Vb(),o.Wb(3,"td",30),o.Tc(4),o.Vb(),o.Wb(5,"td",30),o.Wb(6,"span",31),o.Tc(7),o.Vb(),o.Vb(),o.Wb(8,"td",30),o.Tc(9),o.Vb(),o.Wb(10,"td",32),o.Tc(11),o.Vb(),o.Wb(12,"td",30),o.Rc(13,j,2,1,"span",1),o.Rc(14,X,2,0,"span",1),o.Vb(),o.Wb(15,"td",33),o.Wb(16,"a",34),o.Sb(17,"i-feather",35),o.Vb(),o.Wb(18,"a",36),o.ic("click",(function(){o.Kc(t);const i=e.$implicit;return o.mc(2).showConfirmModal(i.apartmentFacilityBookingId)})),o.Sb(19,"i-feather",37),o.Vb(),o.Vb(),o.Vb()}if(2&t){const t=e.$implicit,i=e.index,a=o.mc(2);o.uc("ngClass",t.isActive?"active":"notactive"),o.Cb(2),o.Uc(a.getFacilityBookingName(t,t.apartmentFacilityId)),o.Cb(2),o.Uc(a.getFacilityBookingSlot(t,t.slotId)),o.Cb(2),o.uc("ngClass",a.getBookingStatus(t,t.facilityBookingStatusId)),o.Cb(1),o.Uc(a.getBookingStatus(t,t.facilityBookingStatusId)),o.Cb(2),o.Uc(a.getBookedDate(i,t.bookedForDate)),o.Cb(2),o.Uc(a.getUserName(t,t.neededUserId)),o.Cb(2),o.uc("ngIf",t.amount>0),o.Cb(1),o.uc("ngIf",0==t.amount),o.Cb(2),o.wc("routerLink","/ams/facility/edit-booking/",t.apartmentFacilityBookingId,""),o.uc("routerLinkActiveOptions",o.Ac(11,z))}}function G(t,e){if(1&t){const t=o.Xb();o.Wb(0,"div",3),o.Wb(1,"div",4),o.Wb(2,"div",5),o.Wb(3,"h5"),o.Tc(4,"All Bookings "),o.Wb(5,"span",6),o.Tc(6),o.Vb(),o.Vb(),o.Vb(),o.Wb(7,"ul",7),o.Wb(8,"li",8),o.Sb(9,"i",9),o.Wb(10,"input",10),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().bookingData=e})),o.Vb(),o.Vb(),o.Wb(11,"li",11),o.Wb(12,"a",12),o.Sb(13,"i-feather",13),o.Wb(14,"span"),o.Tc(15,"Create Booking"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(16,"div",14),o.Wb(17,"table",15),o.Wb(18,"thead"),o.Wb(19,"tr"),o.Wb(20,"th",16),o.Tc(21,"Facility Name "),o.Wb(22,"span",17),o.ic("click",(function(){return o.Kc(t),o.mc().sortUnitData("facilityName")})),o.Vb(),o.Wb(23,"app-simple-select-box",18),o.ic("inputChange",(function(e){return o.Kc(t),o.mc().onSelectChange(e,"facilityName","facilityName")})),o.Vb(),o.Vb(),o.Wb(24,"th",16),o.Tc(25,"Slot "),o.Wb(26,"span",17),o.ic("click",(function(){return o.Kc(t),o.mc().sortUnitData("apartmentFacilitySlot")})),o.Vb(),o.Wb(27,"app-simple-select-box",19),o.ic("inputChange",(function(e){return o.Kc(t),o.mc().onSelectChange(e,"apartmentFacilitySlot","slotBeginTime")})),o.Vb(),o.Vb(),o.Wb(28,"th",16),o.Tc(29,"Status "),o.Wb(30,"span",17),o.ic("click",(function(){return o.Kc(t),o.mc().sortUnitData("facilityBookingStatus")})),o.Vb(),o.Wb(31,"app-simple-select-box",20),o.ic("inputChange",(function(e){return o.Kc(t),o.mc().onSelectChange(e,"facilityBookingStatus","lookupValueName")})),o.Vb(),o.Vb(),o.Wb(32,"th",16),o.Tc(33,"Booked For "),o.Wb(34,"span",17),o.ic("click",(function(){return o.Kc(t),o.mc().sortUnitData("facilityBookedForDate")})),o.Vb(),o.Wb(35,"app-simple-date-box",21),o.ic("inputChange",(function(e){return o.Kc(t),o.mc().onDateChange(e,"facilityBookedForDate")})),o.Vb(),o.Vb(),o.Wb(36,"th",16),o.Tc(37,"User Name "),o.Wb(38,"span",17),o.ic("click",(function(){return o.Kc(t),o.mc().sortUnitData("userName")})),o.Vb(),o.Wb(39,"input",22),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().columnField.userName=e}))("ngModelChange",(function(){return o.Kc(t),o.mc().selectColInput("userName")})),o.Vb(),o.Vb(),o.Wb(40,"th",16),o.Tc(41,"Cost "),o.Wb(42,"span",17),o.ic("click",(function(){return o.Kc(t),o.mc().sortUnitData("amount")})),o.Vb(),o.Wb(43,"input",23),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().columnField.amount=e}))("ngModelChange",(function(){return o.Kc(t),o.mc().selectColInput("amount")})),o.Vb(),o.Vb(),o.Wb(44,"th",24),o.Tc(45," Actions "),o.Wb(46,"input",25),o.ic("ngModelChange",(function(e){return o.Kc(t),o.mc().columnField.action=e}))("ngModelChange",(function(){return o.Kc(t),o.mc().selectColInput("action")})),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(47,"tbody"),o.Rc(48,$,20,12,"tr",26),o.nc(49,"columnSearch"),o.nc(50,"simpleSearch"),o.nc(51,"slice"),o.nc(52,"orderBy"),o.Vb(),o.Vb(),o.Wb(53,"app-pagination",27),o.ic("outputParams",(function(e){return o.Kc(t),o.mc().getIndexParams(e)})),o.Vb(),o.Vb(),o.Vb()}if(2&t){const t=o.mc();o.Cb(6),o.Uc(t.totalItems),o.Cb(4),o.uc("ngModel",t.bookingData),o.Cb(2),o.uc("routerLinkActiveOptions",o.Ac(43,z)),o.Cb(5),o.uc("ngClass",t.isMobileView()),o.Cb(5),o.uc("ngClass",t.getFieldOrderBy("facilityName")),o.Cb(1),o.uc("fieldModel",t.apartmentFacilityId)("fieldRequired","required")("fieldList",t.facilityCategoryData),o.Cb(3),o.uc("ngClass",t.getFieldOrderBy("apartmentFacilitySlot")),o.Cb(1),o.uc("fieldModel",t.apartmentFacilitySlotId)("fieldRequired","required")("fieldList",t.facilitySlotData),o.Cb(3),o.uc("ngClass",t.getFieldOrderBy("facilityBookingStatus")),o.Cb(1),o.uc("fieldModel",t.facilityBookingStatusId)("fieldRequired","required")("fieldList",t.statusTypeData),o.Cb(3),o.uc("ngClass",t.getFieldOrderBy("facilityBookedForDate")),o.Cb(1),o.uc("dateModel",t.facilityBookedForDate),o.Cb(3),o.uc("ngClass",t.getFieldOrderBy("userName")),o.Cb(1),o.uc("ngModel",t.columnField.userName),o.Cb(3),o.uc("ngClass",t.getFieldOrderBy("amount")),o.Cb(1),o.uc("ngModel",t.columnField.amount),o.Cb(3),o.uc("ngModel",t.columnField.action),o.Cb(2),o.uc("ngForOf",o.qc(49,28,o.pc(50,32,o.qc(51,35,o.qc(52,39,t.bookingListData,t.unitFieldType,t.unitOrder),t.ItemUserStartIndex,t.ItemUserEndIndex),t.bookingData),t.columnField,t.selectedInput)),o.Cb(5),o.uc("totalItems",t.totalItems)("ItemStartIndex",t.ItemStartIndex)("ItemEndIndex",t.ItemEndIndex)("itemLimit",t.itemLimit)}}let Z=(()=>{class t{constructor(t,e,i,a,n,o,c,l){this.router=t,this.route=e,this.injector=i,this.userService=a,this.facilityService=n,this.lookupService=o,this.sharedService=c,this.cookieService=l,this.isBookingDataLoaded=!1,this.unitFieldType="unitno",this.unitOrder=!1,this.ItemStartIndex=0,this.itemLimit=20,this.bookingData="",this.staffData="",this.selectedInput="",this.columnField={},this.modalService=this.injector.get(d.a)}getIndexParams(t){this.ItemStartIndex=t.ItemStartIndex,this.ItemEndIndex=t.ItemEndIndex,this.itemLimit=t.itemLimit}sortUnitData(t){this.unitFieldType=t,this.unitOrder=!this.unitOrder}getFieldOrderBy(t){return this.unitFieldType==t?this.unitOrder?"desc":"asc":""}selectColInput(t){this.selectedInput=t}onSelectChange(t,e,i){E.isEmpty(t)?this.columnField={}:(this.selectedInput=e,this.columnField[e]=t[i])}onDateChange(t,e){null!=t?(this.selectedInput=e,this.columnField[e]=m(t).format("DD/MM/YYYY")):this.columnField={}}isMobileView(){return window.innerWidth<=767?"table-responsive":""}getFacilityBookingName(t,e){var i=E.filter(this.facilityCategoryData,(function(t){if(t.apartmentFacilityId===e)return t}));return void 0===i||0==i.length?"":(this.bookingListData.map(e=>{e.apartmentFacilityBookingId==t.apartmentFacilityBookingId&&(e.facilityName=i[0].facilityName)}),i[0].facilityName)}getFacilityBookingSlot(t,e){var i=E.filter(this.facilitySlotData,(function(t){if(t.apartmentFacilitySlotId===e)return t}));if(void 0===i||0==i.length)return"";var a=m(i[0].slotBeginTime,"HH:mm:ss").toDate(),n=m(a).format("HH:mm A"),o=m(i[0].slotEndTime,"HH:mm:ss").toDate(),c=m(o).format("HH:mm A");return this.bookingListData.map(e=>{e.apartmentFacilityBookingId==t.apartmentFacilityBookingId&&(e.apartmentFacilitySlot=n)}),n+" - "+c}getBookedDate(t,e){return E.each(this.bookingListData,(t,e)=>{t.facilityBookedForDate=m(t.bookedForDate).format("DD/MM/YYYY")}),m(e).format("DD/MM/YYYY")}getUserName(t,e){var i=E.filter(this.userListData,(function(t){if(t.userId===e)return t}));return void 0===i||0==i.length?"":(this.bookingListData.map(e=>{e.apartmentFacilityBookingId==t.apartmentFacilityBookingId&&(e.userName=i[0].firstName)}),i[0].firstName)}getBookingStatus(t,e){var i=E.filter(this.statusTypeData,(function(t){if(t.lookupValueId===e)return t}));return void 0===i||0==i.length?"":(this.bookingListData.map(e=>{e.apartmentFacilityBookingId==t.apartmentFacilityBookingId&&(e.facilityBookingStatus=i[0].lookupValueName.toLowerCase())}),i[0].lookupValueName.toLowerCase())}showConfirmModal(t){this.modalService.showConfirmModal(t)}ngOnInit(){this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.facilityCategoryData=t.filter(t=>t.isActive)},t=>{}),this.lookupService.getLookupValueByLookupTypeId(40).subscribe(t=>{this.statusTypeData=t.filter(t=>t.isActive)},t=>{}),this.facilityService.getApartmentFacilitySlotsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.facilitySlotData=t.filter(t=>t.isActive),E.each(this.facilitySlotData,t=>{var e=m(t.slotBeginTime,"HH:mm:ss").toDate(),i=m(e).format("HH:mm A");t.slotBeginTime=i})},t=>{}),this.userService.getAllUsersByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.userListData=t.filter(t=>t.isActive)},t=>{}),this.facilityService.getApartmentFacilityBookingsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.bookingListData=t.filter(t=>t.isActive),this.totalItems=this.bookingListData.length,this.ItemEndIndex=this.totalItems>this.itemLimit?this.itemLimit:this.totalItems,this.isBookingDataLoaded=!0},t=>{}),this.sharedService.unitlistdeleteindexcast.subscribe(t=>{if(null!=t){var e={apartmentFacilityBookingId:t,deleteBy:parseInt(this.cookieService.get("userId"))};this.facilityService.deleteApartmentFacilityBooking(e).subscribe(e=>{E.each(this.bookingListData,e=>{e.apartmentFacilityBookingId==t&&(e.isActive=!1)}),setTimeout(()=>{this.bookingListData=this.bookingListData.filter(e=>e.ticketId!==t),this.totalItems=this.bookingListData.length,this.sharedService.setAlertMessage("Booking deleted"),this.sharedService.setUnitListDeleteIndex(null)},500)},t=>{console.log(t)})}})}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(n.c),o.Rb(n.a),o.Rb(o.r),o.Rb(R.a),o.Rb(l.a),o.Rb(r.a),o.Rb(s.a),o.Rb(u.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-facility-booking-actions"]],decls:3,vars:2,consts:[[1,"facilitybooking-actions-wrapper"],[4,"ngIf"],["class","card table-card",4,"ngIf"],[1,"card","table-card"],[1,"card-header"],[1,"float-left"],[1,"badge","lime-green"],[1,"list-inline"],[1,"list-inline-item","search","d-none","d-md-inline-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-inline-item"],["routerLink","/ams/facility/create-booking","routerLinkActive","active",1,"btn","lime-green","mt_5",3,"routerLinkActiveOptions"],["name","plus",1,"icon","plus"],[1,"card-body","p-0"],[1,"table","table-checker","table-resizable",3,"ngClass"],["scope","col"],[3,"ngClass","click"],["fieldName","facilityName","fieldText","","fieldItemName","facilityName","isLabel","false","fieldPlaceholder","Select",3,"fieldModel","fieldRequired","fieldList","inputChange"],["fieldName","apartmentFacilitySlot","fieldText","","fieldItemName","slotBeginTime","isLabel","false","fieldPlaceholder","Select",3,"fieldModel","fieldRequired","fieldList","inputChange"],["fieldName","facilityBookingStatus","fieldText","","fieldItemName","lookupValueName","isLabel","false","fieldPlaceholder","Select",3,"fieldModel","fieldRequired","fieldList","inputChange"],[3,"dateModel","inputChange"],["type","text","placeholder","User Name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Cost",1,"form-control",3,"ngModel","ngModelChange"],["scope","col",1,"simple-actions"],["type","text","placeholder","Action",1,"form-control","vis-h",3,"ngModel","ngModelChange"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"totalItems","ItemStartIndex","ItemEndIndex","itemLimit","outputParams"],[3,"ngClass"],[1,"name"],[1,"grey"],[1,"badge","small","min","text-capitalize",3,"ngClass"],[1,"grey","text-capitalize"],[1,"simple-actions"],["href","javascript:void(0)","placement","top","routerLinkActive","active",1,"mr-2",3,"routerLink","routerLinkActiveOptions"],["name","edit",1,"icon","edit"],["href","javascript:void(0)",3,"click"],["name","trash",1,"icon","delete"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Rc(1,Y,1,0,"app-loader",1),o.Rc(2,G,54,44,"div",2),o.Vb()),2&t&&(o.Cb(1),o.uc("ngIf",!e.isBookingDataLoaded),o.Cb(1),o.uc("ngIf",e.isBookingDataLoaded))},directives:[a.l,g.a,y.b,h.d,h.n,h.q,n.e,n.d,p.b,y.d,a.j,H.a,K.a,a.k,q.a],pipes:[U.a,U.c,a.t,U.b],styles:[""]}),t})();var J=i("iOEq"),Q=i("IvIE");function tt(t,e){1&t&&o.Sb(0,"app-loader")}const et=function(){return{left:"today, prev,next",center:"title",right:"dayGridDay,dayGridWeek,dayGridMonth"}};function it(t,e){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"full-calendar",2),o.ic("eventClick",(function(e){return o.Kc(t),o.mc().handleEventClick(e)})),o.Vb(),o.Tb()}if(2&t){const t=o.mc();o.Cb(1),o.uc("plugins",t.calendarPlugins)("header",o.Ac(3,et))("events",t.calendarEvents)}}const at=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:A},{path:"create-booking",component:_.a},{path:"edit-booking/:id",component:_.a},{path:"calendar",component:(()=>{class t{constructor(t,e,i,a,o,c){this.router=t,this.route=e,this.facilityService=i,this.lookupService=a,this.sharedService=o,this.cookieService=c,this.calendarPlugins=[J.a],this.calendarEvents=[],this.isCalenderLoaded=!1,this.router.events.subscribe(t=>{t instanceof n.b&&-1!=this.router.url.indexOf("facility")&&this.getFacilityBookingData()})}handleEventClick(t){this.router.navigate(["/ams/facility/edit-booking",t.event.id])}getFacilityBookingData(){this.facilityService.getApartmentFacilitySlotsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.facilitySlotData=t.filter(t=>t.isActive)},t=>{}),this.facilityService.getApartmentFacilitiesByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.facilityCategoryData=t.filter(t=>t.isActive),this.facilityService.getApartmentFacilityBookingsByApartmentId(parseInt(this.cookieService.get("apartmentId"))).subscribe(t=>{this.facilityBookingData=t.filter(t=>t.isActive),E.each(this.facilityBookingData,t=>{var e=m(t.bookedForDate).format("YYYY-MM-DD"),i=this.facilityCategoryData.filter(e=>e.apartmentFacilityId==t.apartmentFacilityId),a=this.facilitySlotData.filter(e=>e.apartmentFacilitySlotId==t.slotId),n=m(a[0].slotBeginTime,"HH:mm:ss").toDate(),o=m(n).format("HH:mm A"),c=m(a[0].slotEndTime,"HH:mm:ss").toDate(),l=m(c).format("HH:mm A");this.calendarEvents.push({title:i[0].facilityName+" ( "+o+"-"+l+" ) ",date:e,id:i[0].apartmentFacilityId}),this.isCalenderLoaded=!0})},t=>{})},t=>{})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(n.c),o.Rb(n.a),o.Rb(l.a),o.Rb(r.a),o.Rb(s.a),o.Rb(u.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-full-calendar"]],decls:3,vars:2,consts:[[1,"full-calendar-wrapper"],[4,"ngIf"],["defaultView","dayGridMonth",3,"plugins","header","events","eventClick"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Rc(1,tt,1,0,"app-loader",1),o.Rc(2,it,2,4,"ng-container",1),o.Vb()),2&t&&(o.Cb(1),o.uc("ngIf",!e.isCalenderLoaded),o.Cb(1),o.uc("ngIf",e.isCalenderLoaded))},directives:[a.l,g.a,Q.a],styles:[""]}),t})()},{path:"all-bookings",component:Z},{path:"reports",component:c},{path:"**",redirectTo:"settings",pathMatch:"full"}];let nt=(()=>{class t{}return t.\u0275mod=o.Pb({type:t}),t.\u0275inj=o.Ob({factory:function(e){return new(e||t)},imports:[[n.f.forChild(at)],n.f]}),t})();var ot=i("PCNd");let ct=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Lb({type:t,selectors:[["app-facility"]],decls:1,vars:0,template:function(t,e){1&t&&o.Sb(0,"router-outlet")},directives:[n.g],styles:[""]}),t})();i.d(e,"FacilityModule",(function(){return lt}));let lt=(()=>{class t{}return t.\u0275mod=o.Pb({type:t,bootstrap:[ct]}),t.\u0275inj=o.Ob({factory:function(e){return new(e||t)},imports:[[a.b,ot.a,nt]]}),t})()}}]);